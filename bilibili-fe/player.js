import {p as __vitePreload} from "./index-bc79cd1f.js";
import {a8 as getDefaultExportFromCjs, a9 as commonjsGlobal, U as Ut$1, az as Ls, aR as ar$1, aS as ft$1, aT as ne$1} from "./vendor-fd5e6eea.js";
import {d as debounce, t as throttle} from "./index-c61c8d00.js";
import {a as axios} from "./index-78ade6ce.js";
var screenfull = {
    exports: {}
};
/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/
(function(n) {
    (function() {
        var d = typeof window < "u" && typeof window.document < "u" ? window.document : {}
          , y = n.exports
          , ye = function() {
            for (var ae, i = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"], ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"], ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]], O = 0, $ = i.length, Te = {}; O < $; O++)
                if (ae = i[O],
                ae && ae[1]in d) {
                    for (O = 0; O < ae.length; O++)
                        Te[i[0][O]] = ae[O];
                    return Te
                }
            return !1
        }()
          , ve = {
            change: ye.fullscreenchange,
            error: ye.fullscreenerror
        }
          , ie = {
            request: function(ae, i) {
                return new Promise(function(O, $) {
                    var Te = function() {
                        this.off("change", Te),
                        O()
                    }
                    .bind(this);
                    this.on("change", Te),
                    ae = ae || d.documentElement;
                    var we = ae[ye.requestFullscreen](i);
                    we instanceof Promise && we.then(Te).catch($)
                }
                .bind(this))
            },
            exit: function() {
                return new Promise(function(ae, i) {
                    if (!this.isFullscreen) {
                        ae();
                        return
                    }
                    var O = function() {
                        this.off("change", O),
                        ae()
                    }
                    .bind(this);
                    this.on("change", O);
                    var $ = d[ye.exitFullscreen]();
                    $ instanceof Promise && $.then(O).catch(i)
                }
                .bind(this))
            },
            toggle: function(ae, i) {
                return this.isFullscreen ? this.exit() : this.request(ae, i)
            },
            onchange: function(ae) {
                this.on("change", ae)
            },
            onerror: function(ae) {
                this.on("error", ae)
            },
            on: function(ae, i) {
                var O = ve[ae];
                O && d.addEventListener(O, i, !1)
            },
            off: function(ae, i) {
                var O = ve[ae];
                O && d.removeEventListener(O, i, !1)
            },
            raw: ye
        };
        if (!ye) {
            y ? n.exports = {
                isEnabled: !1
            } : window.screenfull = {
                isEnabled: !1
            };
            return
        }
        Object.defineProperties(ie, {
            isFullscreen: {
                get: function() {
                    return !!d[ye.fullscreenElement]
                }
            },
            element: {
                enumerable: !0,
                get: function() {
                    return d[ye.fullscreenElement]
                }
            },
            isEnabled: {
                enumerable: !0,
                get: function() {
                    return !!d[ye.fullscreenEnabled]
                }
            }
        }),
        y ? n.exports = ie : window.screenfull = ie
    }
    )()
}
)(screenfull);
var screenfullExports = screenfull.exports;
const U$1 = getDefaultExportFromCjs(screenfullExports);
var __defProp$1 = Object.defineProperty
  , __getOwnPropSymbols$1 = Object.getOwnPropertySymbols
  , __hasOwnProp$1 = Object.prototype.hasOwnProperty
  , __propIsEnum$1 = Object.prototype.propertyIsEnumerable
  , __defNormalProp$1 = (n,d,y)=>d in n ? __defProp$1(n, d, {
    enumerable: !0,
    configurable: !0,
    writable: !0,
    value: y
}) : n[d] = y
  , __spreadValues$1 = (n,d)=>{
    for (var y in d || (d = {}))
        __hasOwnProp$1.call(d, y) && __defNormalProp$1(n, y, d[y]);
    if (__getOwnPropSymbols$1)
        for (var y of __getOwnPropSymbols$1(d))
            __propIsEnum$1.call(d, y) && __defNormalProp$1(n, y, d[y]);
    return n
}
  , __publicField = (n,d,y)=>(__defNormalProp$1(n, typeof d != "symbol" ? d + "" : d, y),
y);
let V$1 = class {
    constructor(d, y, ye, ve) {
        __publicField(this, "state", {}),
        __publicField(this, "container"),
        __publicField(this, "events"),
        __publicField(this, "prefix", "bui-"),
        __publicField(this, "options"),
        __publicField(this, "elements"),
        this.container = d || document.createElement("div"),
        this.options = __spreadValues$1(__spreadValues$1({}, ve), y),
        this.events = {},
        this.container.classList.add(this.prefix.slice(0, -1)),
        this.container.classList.add(`${this.prefix}${ye}`),
        this.options.dark && this.container.classList.add(`${this.prefix}dark`)
    }
    on(d, y) {
        return typeof d == "string" && typeof y == "function" && (this.events[d] || (this.events[d] = []),
        this.events[d].push(y)),
        this
    }
    tpl(d) {
        this.container.innerHTML = d.tpl(__spreadValues$1({
            prefix: this.prefix,
            getObject: y=>y
        }, d))
    }
    off(d, y) {
        if (!y)
            this.events[d] = [];
        else {
            const ye = this.events[d].indexOf(y);
            ye > -1 && this.events[d].splice(ye, 1)
        }
        return this
    }
    trigger(d, y) {
        this.events[d] && this.events[d].length && this.events[d].forEach(ye=>{
            ye(y)
        }
        )
    }
    destroy() {
        this.events = {},
        this.container.innerHTML = ""
    }
}
;
var G = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjIuMC4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iJiN4NTZGRTsmI3g1QzQyO18xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIyIDIyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cjx0aXRsZT5Lbm9iTWluaVRWPC90aXRsZT4KPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CjxwYXRoIGlkPSJDb21iaW5lZC1TaGFwZSIgc3R5bGU9ImZpbGw6IzMzMzMzMzsiIGQ9Ik0xNi4xMTgsMy42NjdIMTYuNWMyLjAyNSwwLDMuNjY3LDEuNjQyLDMuNjY3LDMuNjY3djcuMzMzCgljMCwyLjAyNS0xLjY0MiwzLjY2Ny0zLjY2NywzLjY2N2gtMTFjLTIuMDI1LDAtMy42NjctMS42NDItMy42NjctMy42NjdWNy4zMzNjMC0yLjAyNSwxLjY0Mi0zLjY2NywzLjY2Ny0zLjY2N2gwLjM4Mkw0Ljk1LDIuMDUzCglDNC42NDYsMS41MjcsNC44MjcsMC44NTQsNS4zNTMsMC41NXMxLjE5OS0wLjEyMywxLjUwMywwLjQwM2wxLjU2NywyLjcxNGg1LjE1NmwxLjU2Ny0yLjcxNGMwLjMwNC0wLjUyNiwwLjk3Ny0wLjcwNiwxLjUwMy0wLjQwMwoJYzAuNTI2LDAuMzA0LDAuNzA2LDAuOTc3LDAuNDAzLDEuNTAzTDE2LjExOCwzLjY2N3oiLz4KPHBhdGggaWQ9IlJlY3RhbmdsZSIgc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIGQ9Ik01LjU2MSw1LjE5NGgxMC44NzhjMS4yMTUsMCwyLjIsMC45ODUsMi4yLDIuMnY3LjIxMWMwLDEuMjE1LTAuOTg1LDIuMi0yLjIsMi4yCglINS41NjFjLTEuMjE1LDAtMi4yLTAuOTg1LTIuMi0yLjJWNy4zOTRDMy4zNjEsNi4xNzksNC4zNDYsNS4xOTQsNS41NjEsNS4xOTR6Ii8+CjxwYXRoIGlkPSJFeWUiIHN0eWxlPSJmaWxsOiMzMzMzMzM7IiBkPSJNNi45NjcsOC41NTZMNi45NjcsOC41NTZjMC42MDgsMCwxLjEsMC40OTIsMS4xLDEuMXYyLjY4OWMwLDAuNjA4LTAuNDkyLDEuMS0xLjEsMS4xbDAsMAoJYy0wLjYwOCwwLTEuMS0wLjQ5Mi0xLjEtMS4xVjkuNjU2QzUuODY3LDkuMDQ4LDYuMzU5LDguNTU2LDYuOTY3LDguNTU2eiIvPgo8cGF0aCBpZD0iRXllXzFfIiBzdHlsZT0iZmlsbDojMzMzMzMzOyIgZD0iTTE1LjAzMyw4LjU1NkwxNS4wMzMsOC41NTZjMC42MDgsMCwxLjEsMC40OTIsMS4xLDEuMXYyLjY4OWMwLDAuNjA4LTAuNDkyLDEuMS0xLjEsMS4xCgloMGMtMC42MDgsMC0xLjEtMC40OTItMS4xLTEuMVY5LjY1NkMxMy45MzMsOS4wNDgsMTQuNDI2LDguNTU2LDE1LjAzMyw4LjU1NnoiLz4KPC9zdmc+Cg==";
const st$1 = "4.10.2"
  , ot$1 = 29.9700012207031
  , rt$1 = 0
  , lt$1 = 25.0000010182709
  , at$1 = 18
  , ht = 18
  , ct$1 = "tv_combine 1018"
  , ut = 0
  , dt$1 = []
  , mt = [{
    ddd: 0,
    ind: 1,
    ty: 4,
    nm: "Eye Right",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 100,
            ix: 11
        },
        r: {
            a: 0,
            k: 0,
            ix: 10
        },
        p: {
            a: 1,
            k: [{
                i: {
                    x: .833,
                    y: .833
                },
                o: {
                    x: .167,
                    y: .167
                },
                n: "0p833_0p833_0p167_0p167",
                t: 0,
                s: [9.938, 9.469, 0],
                e: [13.094, 9.469, 0],
                to: [.52604168653488, 0, 0],
                ti: [-.52604168653488, 0, 0]
            }, {
                t: 24.00000097754
            }],
            ix: 2
        },
        a: {
            a: 0,
            k: [-2.493, 1.385, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [100, 100, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [1.8, 4],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 20,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [0, 0, 0, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [-2.524, 1.385],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: 0,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}, {
    ddd: 0,
    ind: 2,
    ty: 4,
    nm: "Eye Left",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 100,
            ix: 11
        },
        r: {
            a: 0,
            k: 0,
            ix: 10
        },
        p: {
            a: 1,
            k: [{
                i: {
                    x: .833,
                    y: .833
                },
                o: {
                    x: .167,
                    y: .167
                },
                n: "0p833_0p833_0p167_0p167",
                t: 0,
                s: [4.906, 9.469, 0],
                e: [7.906, 9.469, 0],
                to: [.5, 0, 0],
                ti: [-.5, 0, 0]
            }, {
                t: 24.00000097754
            }],
            ix: 2
        },
        a: {
            a: 0,
            k: [-2.493, 1.385, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [100, 100, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [1.75, 4],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 20,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [0, 0, 0, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [-2.524, 1.385],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: 0,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}, {
    ddd: 0,
    ind: 3,
    ty: 4,
    nm: "Tv",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 100,
            ix: 11
        },
        r: {
            a: 0,
            k: 0,
            ix: 10
        },
        p: {
            a: 0,
            k: [8.903, 9.401, 0],
            ix: 2
        },
        a: {
            a: 0,
            k: [.012, .995, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [100, 100, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [14, 11],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 2.5,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "st",
            c: {
                a: 0,
                k: [0, 0, 0, 1],
                ix: 3
            },
            o: {
                a: 0,
                k: 100,
                ix: 4
            },
            w: {
                a: 0,
                k: 1.5,
                ix: 5
            },
            lc: 1,
            lj: 1,
            ml: 4,
            nm: "Stroke 1",
            mn: "ADBE Vector Graphic - Stroke",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [1, 1, 1, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [.091, 1.101],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: 0,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}, {
    ddd: 0,
    ind: 4,
    ty: 4,
    nm: "Tianxian Right",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 100,
            ix: 11
        },
        r: {
            a: 0,
            k: 33.382,
            ix: 10
        },
        p: {
            a: 0,
            k: [12.281, 2.352, 0],
            ix: 2
        },
        a: {
            a: 0,
            k: [-2.493, 1.385, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [136.962, 114.812, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [1.5, 4],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 20,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [0, 0, 0, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [-2.524, 1.385],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: 6.85,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}, {
    ddd: 0,
    ind: 5,
    ty: 4,
    nm: "Tianxian Left",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 100,
            ix: 11
        },
        r: {
            a: 0,
            k: -36.359,
            ix: 10
        },
        p: {
            a: 0,
            k: [5.797, 2.328, 0],
            ix: 2
        },
        a: {
            a: 0,
            k: [-2.493, 1.385, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [122.727, 114.296, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [1.5, 4],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 20,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [0, 0, 0, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [-2.524, 1.385],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: -6.395,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}, {
    ddd: 0,
    ind: 6,
    ty: 4,
    nm: "Pink 02",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 28,
            ix: 11
        },
        r: {
            a: 0,
            k: 0,
            ix: 10
        },
        p: {
            a: 0,
            k: [8.99, 9.471, 0],
            ix: 2
        },
        a: {
            a: 0,
            k: [-.151, .799, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [100, 100, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [16, 13],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 3.5,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [.98431372549, .447058823529, .6, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [-.151, .799],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: 0,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}, {
    ddd: 0,
    ind: 7,
    ty: 4,
    nm: "Pink 01",
    sr: 1,
    ks: {
        o: {
            a: 0,
            k: 14,
            ix: 11
        },
        r: {
            a: 0,
            k: 0,
            ix: 10
        },
        p: {
            a: 0,
            k: [9.012, 9.463, 0],
            ix: 2
        },
        a: {
            a: 0,
            k: [.075, 1.213, 0],
            ix: 1
        },
        s: {
            a: 0,
            k: [100, 100, 100],
            ix: 6
        }
    },
    ao: 0,
    shapes: [{
        ty: "gr",
        it: [{
            ty: "rc",
            d: 1,
            s: {
                a: 0,
                k: [18, 15],
                ix: 2
            },
            p: {
                a: 0,
                k: [0, 0],
                ix: 3
            },
            r: {
                a: 0,
                k: 4,
                ix: 4
            },
            nm: "Rectangle Path 1",
            mn: "ADBE Vector Shape - Rect",
            hd: !1
        }, {
            ty: "fl",
            c: {
                a: 0,
                k: [.98431372549, .447058823529, .6, 1],
                ix: 4
            },
            o: {
                a: 0,
                k: 100,
                ix: 5
            },
            r: 1,
            nm: "Fill 1",
            mn: "ADBE Vector Graphic - Fill",
            hd: !1
        }, {
            ty: "tr",
            p: {
                a: 0,
                k: [.075, 1.213],
                ix: 2
            },
            a: {
                a: 0,
                k: [0, 0],
                ix: 1
            },
            s: {
                a: 0,
                k: [100, 100],
                ix: 3
            },
            r: {
                a: 0,
                k: 0,
                ix: 6
            },
            o: {
                a: 0,
                k: 100,
                ix: 7
            },
            sk: {
                a: 0,
                k: 0,
                ix: 4
            },
            sa: {
                a: 0,
                k: 0,
                ix: 5
            },
            nm: "Transform"
        }],
        nm: "Rectangle 1",
        np: 3,
        cix: 2,
        ix: 1,
        mn: "ADBE Vector Group",
        hd: !1
    }],
    ip: 0,
    op: 27.0000010997325,
    st: 0,
    bm: 0
}];
var ft = {
    v: st$1,
    fr: ot$1,
    ip: rt$1,
    op: lt$1,
    w: at$1,
    h: ht,
    nm: ct$1,
    ddd: ut,
    assets: dt$1,
    layers: mt
};
const pt = {}
  , vt = (n,d)=>n === d
  , D$1 = {
    equals: vt
};
let gt = Z$1;
const k = {}
  , w = 1
  , A = 2
  , W$1 = {
    owned: null,
    cleanups: null,
    context: null,
    owner: null
};
var m = null;
let S$1 = null
  , u = null
  , T$1 = null
  , f = null
  , b = null
  , E = 0;
function xt$1(n, d) {
    const y = u
      , ye = m
      , ve = n.length === 0 ? W$1 : {
        owned: null,
        cleanups: null,
        context: null,
        owner: d || ye
    };
    m = ve,
    u = null;
    try {
        return I(()=>n(()=>P$1(ve)), !0)
    } finally {
        u = y,
        m = ye
    }
}
function v(n, d, y) {
    const ye = Y$1(n, d, !1, w);
    C$1(ye)
}
function wt$1(n, d, y) {
    y = y ? Object.assign({}, D$1, y) : D$1;
    const ye = Y$1(n, d, !0, 0);
    return ye.pending = k,
    ye.observers = null,
    ye.observerSlots = null,
    ye.comparator = y.equals || void 0,
    C$1(ye),
    U.bind(ye)
}
function yt(n) {
    if (T$1)
        return n();
    let d;
    const y = T$1 = [];
    try {
        d = n()
    } finally {
        T$1 = null
    }
    return I(()=>{
        for (let ye = 0; ye < y.length; ye += 1) {
            const ve = y[ye];
            if (ve.pending !== k) {
                const ie = ve.pending;
                ve.pending = k,
                j$1(ve, ie)
            }
        }
    }
    , !1),
    d
}
function F(n) {
    let d, y = u;
    return u = null,
    d = n(),
    u = y,
    d
}
function U() {
    const n = S$1;
    if (this.sources && (this.state || n)) {
        const d = f;
        f = null,
        this.state === w || n ? C$1(this) : B(this),
        f = d
    }
    if (u) {
        const d = this.observers ? this.observers.length : 0;
        u.sources ? (u.sources.push(this),
        u.sourceSlots.push(d)) : (u.sources = [this],
        u.sourceSlots = [d]),
        this.observers ? (this.observers.push(u),
        this.observerSlots.push(u.sources.length - 1)) : (this.observers = [u],
        this.observerSlots = [u.sources.length - 1])
    }
    return this.value
}
function j$1(n, d, y) {
    if (n.comparator && n.comparator(n.value, d))
        return d;
    if (T$1)
        return n.pending === k && T$1.push(n),
        n.pending = d,
        d;
    let ye = !1;
    return n.value = d,
    n.observers && n.observers.length && I(()=>{
        for (let ve = 0; ve < n.observers.length; ve += 1) {
            const ie = n.observers[ve];
            ye && S$1.disposed.has(ie),
            ie.pure ? f.push(ie) : b.push(ie),
            ie.observers && (ye && !ie.tState || !ye && !ie.state) && Q$1(ie),
            ye || (ie.state = w)
        }
        if (f.length > 1e6)
            throw f = [],
            new Error
    }
    , !1),
    d
}
function C$1(n) {
    if (!n.fn)
        return;
    P$1(n);
    const d = m
      , y = u
      , ye = E;
    u = m = n,
    Mt$1(n, n.value, ye),
    u = y,
    m = d
}
function Mt$1(n, d, y) {
    let ye;
    try {
        ye = n.fn(d)
    } catch (ve) {
        J(ve)
    }
    (!n.updatedAt || n.updatedAt <= y) && (n.observers && n.observers.length ? j$1(n, ye) : n.value = ye,
    n.updatedAt = y)
}
function Y$1(n, d, y, ye=w, ve) {
    const ie = {
        fn: n,
        state: ye,
        updatedAt: null,
        owned: null,
        sources: null,
        sourceSlots: null,
        cleanups: null,
        value: d,
        owner: m,
        context: null,
        pure: y
    };
    return m === null || m !== W$1 && (m.owned ? m.owned.push(ie) : m.owned = [ie]),
    ie
}
function H$1(n) {
    const d = S$1;
    if (n.state !== w)
        return n.state = 0;
    if (n.suspense && F(n.suspense.inFallback))
        return n.suspense.effects.push(n);
    const y = [n];
    for (; (n = n.owner) && (!n.updatedAt || n.updatedAt < E); )
        (n.state || d) && y.push(n);
    for (let ye = y.length - 1; ye >= 0; ye--)
        if (n = y[ye],
        n.state === w || d)
            C$1(n);
        else if (n.state === A || d) {
            const ve = f;
            f = null,
            B(n, y[0]),
            f = ve
        }
}
function I(n, d) {
    if (f)
        return n();
    let y = !1;
    d || (f = []),
    b ? y = !0 : b = [],
    E++;
    try {
        return n()
    } catch (ye) {
        J(ye)
    } finally {
        Lt$1(y)
    }
}
function Lt$1(n) {
    f && (Z$1(f),
    f = null),
    !n && (b.length ? yt(()=>{
        gt(b),
        b = null
    }
    ) : b = null)
}
function Z$1(n) {
    for (let d = 0; d < n.length; d++)
        H$1(n[d])
}
function B(n, d) {
    n.state = 0;
    const y = S$1;
    for (let ye = 0; ye < n.sources.length; ye += 1) {
        const ve = n.sources[ye];
        ve.sources && (ve.state === w || y ? ve !== d && H$1(ve) : (ve.state === A || y) && B(ve, d))
    }
}
function Q$1(n) {
    const d = S$1;
    for (let y = 0; y < n.observers.length; y += 1) {
        const ye = n.observers[y];
        (!ye.state || d) && (ye.state = A,
        ye.pure ? f.push(ye) : b.push(ye),
        ye.observers && Q$1(ye))
    }
}
function P$1(n) {
    let d;
    if (n.sources)
        for (; n.sources.length; ) {
            const y = n.sources.pop()
              , ye = n.sourceSlots.pop()
              , ve = y.observers;
            if (ve && ve.length) {
                const ie = ve.pop()
                  , ae = y.observerSlots.pop();
                ye < ve.length && (ie.sourceSlots[ae] = ye,
                ve[ye] = ie,
                y.observerSlots[ye] = ae)
            }
        }
    if (n.owned) {
        for (d = 0; d < n.owned.length; d++)
            P$1(n.owned[d]);
        n.owned = null
    }
    if (n.cleanups) {
        for (d = 0; d < n.cleanups.length; d++)
            n.cleanups[d]();
        n.cleanups = null
    }
    n.state = 0,
    n.context = null
}
function J(n) {
    throw n
}
function St$1(n, d) {
    return F(()=>n(d))
}
function M(n, d) {
    return wt$1(n, void 0, d ? void 0 : {
        equals: d
    })
}
function Tt$1(n, d, y) {
    let ye = y.length
      , ve = d.length
      , ie = ye
      , ae = 0
      , i = 0
      , O = d[ve - 1].nextSibling
      , $ = null;
    for (; ae < ve || i < ie; ) {
        if (d[ae] === y[i]) {
            ae++,
            i++;
            continue
        }
        for (; d[ve - 1] === y[ie - 1]; )
            ve--,
            ie--;
        if (ve === ae) {
            const Te = ie < ye ? i ? y[i - 1].nextSibling : y[ie - i] : O;
            for (; i < ie; )
                n.insertBefore(y[i++], Te)
        } else if (ie === i)
            for (; ae < ve; )
                (!$ || !$.has(d[ae])) && d[ae].remove(),
                ae++;
        else if (d[ae] === y[ie - 1] && y[i] === d[ve - 1]) {
            const Te = d[--ve].nextSibling;
            n.insertBefore(y[i++], d[ae++].nextSibling),
            n.insertBefore(y[--ie], Te),
            d[ve] = y[ie]
        } else {
            if (!$) {
                $ = new Map;
                let we = i;
                for (; we < ie; )
                    $.set(y[we], we++)
            }
            const Te = $.get(d[ae]);
            if (Te != null)
                if (i < Te && Te < ie) {
                    let we = ae, Re = 1, Ye;
                    for (; ++we < ve && we < ie && !((Ye = $.get(d[we])) == null || Ye !== Te + Re); )
                        Re++;
                    if (Re > Te - i) {
                        const _t = d[ae];
                        for (; i < Te; )
                            n.insertBefore(y[i++], _t)
                    } else
                        n.replaceChild(y[i++], d[ae++])
                } else
                    ae++;
            else
                d[ae++].remove()
        }
    }
}
function Dt$1(n, d, y) {
    let ye;
    return xt$1(ve=>{
        ye = ve,
        d === document ? n() : p$1(d, n(), d.firstChild ? null : void 0, y)
    }
    ),
    ()=>{
        ye(),
        d.textContent = ""
    }
}
function g(n, d, y) {
    const ye = document.createElement("template");
    ye.innerHTML = n;
    let ve = ye.content.firstChild;
    return y && (ve = ve.firstChild),
    ve
}
function q$1(n, d, y) {
    y == null ? n.removeAttribute(d) : n.setAttribute(d, y)
}
function _$1(n, d, y={}) {
    const ye = Object.keys(d || {})
      , ve = Object.keys(y);
    let ie, ae;
    for (ie = 0,
    ae = ve.length; ie < ae; ie++) {
        const i = ve[ie];
        !i || i === "undefined" || d[i] || (tt$1(n, i, !1),
        delete y[i])
    }
    for (ie = 0,
    ae = ye.length; ie < ae; ie++) {
        const i = ye[ie]
          , O = !!d[i];
        !i || i === "undefined" || y[i] === O || !O || (tt$1(n, i, !0),
        y[i] = O)
    }
    return y
}
function K(n, d, y={}) {
    const ye = n.style;
    if (d == null || typeof d == "string")
        return ye.cssText = d;
    typeof y == "string" && (y = {});
    let ve, ie;
    for (ie in y)
        d[ie] == null && ye.removeProperty(ie),
        delete y[ie];
    for (ie in d)
        ve = d[ie],
        ve !== y[ie] && (ye.setProperty(ie, ve),
        y[ie] = ve);
    return y
}
function p$1(n, d, y, ye) {
    if (y !== void 0 && !ye && (ye = []),
    typeof d != "function")
        return N(n, d, ye, y);
    v(ve=>N(n, d(), ve, y), ye)
}
function tt$1(n, d, y) {
    const ye = d.trim().split(/\s+/);
    for (let ve = 0, ie = ye.length; ve < ie; ve++)
        n.classList.toggle(ye[ve], y)
}
function N(n, d, y, ye, ve) {
    for (pt.context && !y && (y = [...n.childNodes]); typeof y == "function"; )
        y = y();
    if (d === y)
        return y;
    const ie = typeof d
      , ae = ye !== void 0;
    if (n = ae && y[0] && y[0].parentNode || n,
    ie === "string" || ie === "number")
        if (ie === "number" && (d = d.toString()),
        ae) {
            let i = y[0];
            i && i.nodeType === 3 ? i.data = d : i = document.createTextNode(d),
            y = L(n, y, ye, i)
        } else
            y !== "" && typeof y == "string" ? y = n.firstChild.data = d : y = n.textContent = d;
    else if (d == null || ie === "boolean")
        y = L(n, y, ye);
    else {
        if (ie === "function")
            return v(()=>{
                let i = d();
                for (; typeof i == "function"; )
                    i = i();
                y = N(n, i, y, ye)
            }
            ),
            ()=>y;
        if (Array.isArray(d)) {
            const i = [];
            if (z$1(i, d, ve))
                return v(()=>y = N(n, i, y, ye, !0)),
                ()=>y;
            if (i.length === 0) {
                if (y = L(n, y, ye),
                ae)
                    return y
            } else
                Array.isArray(y) ? y.length === 0 ? et$1(n, i, ye) : Tt$1(n, y, i) : (y && L(n),
                et$1(n, i));
            y = i
        } else if (d instanceof Node) {
            if (Array.isArray(y)) {
                if (ae)
                    return y = L(n, y, ye, d);
                L(n, y, null, d)
            } else
                y == null || y === "" || !n.firstChild ? n.appendChild(d) : n.replaceChild(d, n.firstChild);
            y = d
        }
    }
    return y
}
function z$1(n, d, y) {
    let ye = !1;
    for (let ve = 0, ie = d.length; ve < ie; ve++) {
        let ae = d[ve], i;
        if (ae instanceof Node)
            n.push(ae);
        else if (!(ae == null || ae === !0 || ae === !1))
            if (Array.isArray(ae))
                ye = z$1(n, ae) || ye;
            else if ((i = typeof ae) == "string")
                n.push(document.createTextNode(ae));
            else if (i === "function")
                if (y) {
                    for (; typeof ae == "function"; )
                        ae = ae();
                    ye = z$1(n, Array.isArray(ae) ? ae : [ae]) || ye
                } else
                    n.push(ae),
                    ye = !0;
            else
                n.push(document.createTextNode(ae.toString()))
    }
    return ye
}
function et$1(n, d, y) {
    for (let ye = 0, ve = d.length; ye < ve; ye++)
        n.insertBefore(d[ye], y)
}
function L(n, d, y, ye) {
    if (y === void 0)
        return n.textContent = "";
    const ve = ye || document.createTextNode("");
    if (d.length) {
        let ie = !1;
        for (let ae = d.length - 1; ae >= 0; ae--) {
            const i = d[ae];
            if (ve !== i) {
                const O = i.parentNode === n;
                !ie && !ae ? O ? n.replaceChild(ve, i) : n.insertBefore(ve, y) : O && i.remove()
            } else
                ie = !0
        }
    } else
        n.insertBefore(ve, y);
    return [ve]
}
const Ct$1 = g('<div><div><div role="progressbar" style="transform: scaleX(0.001);"></div></div><div></div></div>')
  , Nt$1 = g('<div style="transform: scaleX(0.001);"></div>')
  , R$1 = g("<div></div>")
  , $t$1 = g('<div><img src="" alt=""></div>')
  , At$1 = g("<div>0</div>")
  , Et = g('<img alt="thumb">')
  , jt$1 = n=>{
    const d = n.prefix;
    return (()=>{
        const y = Ct$1.cloneNode(!0)
          , ye = y.firstChild
          , ve = ye.firstChild
          , ie = ye.nextSibling;
        return ye.className = `${d}bar-wrap`,
        p$1(ye, (()=>{
            const ae = M(()=>!!n.videoProgress, !0);
            return ()=>ae() && (()=>{
                const i = Nt$1.cloneNode(!0);
                return i.className = `${d}bar ${d}bar-buffer`,
                i
            }
            )()
        }
        )(), ve),
        ve.className = `${d}bar ${d}bar-normal`,
        p$1(y, (()=>{
            const ae = M(()=>!!n.previewFrame, !0);
            return ()=>ae() && (()=>{
                const i = R$1.cloneNode(!0);
                return i.className = `${d}preview-indicator`,
                i
            }
            )()
        }
        )(), ie),
        p$1(y, (()=>{
            const ae = M(()=>!!n.previewFrame, !0);
            return ()=>ae() && (()=>{
                const i = $t$1.cloneNode(!0)
                  , O = i.firstChild;
                return i.className = `${d}popover`,
                q$1(O, "id", `${d}preview-img`),
                i
            }
            )()
        }
        )(), ie),
        p$1(y, (()=>{
            const ae = M(()=>!!n.showTooltip, !0);
            return ()=>ae() && (()=>{
                const i = At$1.cloneNode(!0);
                return i.className = `${d}timestamp-tooltip`,
                i
            }
            )()
        }
        )(), ie),
        ie.className = `${d}thumb`,
        p$1(ie, (()=>{
            const ae = M(()=>!!n.thumbSpecial, !0);
            return ()=>ae() ? (()=>{
                const i = R$1.cloneNode(!0);
                return i.className = `${d}thumb-dot-special`,
                v(O=>{
                    const $ = n.thumbWidth ? `${n.thumbWidth}px` : "12px"
                      , Te = n.thumbHeight ? `${n.thumbHeight}px` : "12px";
                    return $ !== O._v$4 && i.style.setProperty("width", O._v$4 = $),
                    Te !== O._v$5 && i.style.setProperty("height", O._v$5 = Te),
                    O
                }
                , {
                    _v$4: void 0,
                    _v$5: void 0
                }),
                i
            }
            )() : (()=>{
                const i = R$1.cloneNode(!0);
                return i.className = `${d}thumb-dot`,
                p$1(i, (()=>{
                    const O = M(()=>!n.pure, !0);
                    return ()=>O() && (()=>{
                        const $ = Et.cloneNode(!0);
                        return q$1($, "src", G),
                        $.style.setProperty("width", "100%"),
                        $.style.setProperty("height", "100%"),
                        $
                    }
                    )()
                }
                )()),
                v(O=>{
                    const $ = n.thumbWidth ? `${n.thumbWidth}px` : "12px"
                      , Te = n.thumbHeight ? `${n.thumbHeight}px` : "12px";
                    return $ !== O._v$6 && i.style.setProperty("width", O._v$6 = $),
                    Te !== O._v$7 && i.style.setProperty("height", O._v$7 = Te),
                    O
                }
                , {
                    _v$6: void 0,
                    _v$7: void 0
                }),
                i
            }
            )()
        }
        )()),
        v(ae=>{
            const i = {
                [`${d}track`]: !0,
                [`${d}track-vertical`]: n.vertical,
                [`${d}track-autohide-thumb`]: n.autohideThumb,
                [`${d}track-video-progress`]: n.videoProgress
            }
              , O = n.trackBreadth ? `${n.vertical ? "width" : "height"}: ${n.trackBreadth}px` : null
              , $ = n.vertical ? `${((n.trackBreadth || 2) - (n.thumbWidth || 12)) / 2}px` : void 0;
            return ae._v$ = _$1(y, i, ae._v$),
            ae._v$2 = K(y, O, ae._v$2),
            $ !== ae._v$3 && ie.style.setProperty("left", ae._v$3 = $),
            ae
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0
        }),
        y
    }
    )()
}
  , It = (n,d)=>{
    Dt$1(()=>St$1(jt$1, n), d)
}
  , it$1 = 160
  , X = 18;
let Bt$1 = class extends V$1 {
    constructor(d, y) {
        super(d, y, "slider", {
            value: 0,
            vertical: !1,
            trackLength: null,
            trackBreadth: null,
            thumbCenter: !1,
            thumbWidth: null,
            thumbHeight: null,
            autohideThumb: !1,
            videoProgress: !1,
            valueSetAnalyze: null,
            valueGetAnalyze: null,
            thumbSpecial: !1,
            showTooltip: !1,
            formatTooltip: ye=>parseInt(ye * 100 + "", 10) + "",
            shadow: !1,
            previewFrame: !1
        }),
        __publicField(this, "containerLength"),
        __publicField(this, "thumbLength"),
        __publicField(this, "valueIn"),
        __publicField(this, "valueOut"),
        __publicField(this, "valueBuffer"),
        __publicField(this, "direction"),
        __publicField(this, "disabled"),
        __publicField(this, "thumbDropAnimation"),
        __publicField(this, "thumbDragAnimation"),
        __publicField(this, "thumbDragContainer"),
        __publicField(this, "thumbDropContainer"),
        __publicField(this, "hasDropData"),
        __publicField(this, "delayScaleThumb", 300),
        __publicField(this, "delayScaleThumbInterval"),
        __publicField(this, "rotate"),
        __publicField(this, "moved"),
        __publicField(this, "containerX"),
        __publicField(this, "thumbDirection", 0),
        __publicField(this, "oldThumbClientX"),
        __publicField(this, "previewContainerPos"),
        __publicField(this, "thumbUpBindSelf"),
        __publicField(this, "thumbMoveBindSelf"),
        __publicField(this, "onSelfContainerTouchstart"),
        __publicField(this, "onSelfContainerMousedown"),
        __publicField(this, "onSelfContainerMousemove"),
        __publicField(this, "onSelfContainerMouseenter"),
        __publicField(this, "onSelfContainerMouseleave"),
        __publicField(this, "window"),
        __publicField(this, "rect"),
        this.init()
    }
    init() {
        try {
            this.window = window.parent && window.parent.document && window.parent
        } catch (d) {}
        this.valueOut = this.options.value,
        this.direction = this.options.vertical ? "Y" : "X",
        this.thumbUpBindSelf = this.thumbUp.bind(this),
        this.thumbMoveBindSelf = this.thumbMove.bind(this),
        this.onSelfContainerTouchstart = this.onContainerTouchstart.bind(this),
        this.onSelfContainerMousedown = this.onContainerMousedown.bind(this),
        this.onSelfContainerMousemove = this.onContainerMousemove.bind(this),
        this.onSelfContainerMouseenter = this.onContainerMouseenter.bind(this),
        this.onSelfContainerMouseleave = this.onContainerMouseleave.bind(this),
        this.initElements(),
        this.updateThumb(ft),
        this.containerLength = this.options.trackLength || (this.options.vertical ? this.container.clientHeight : this.container.clientWidth),
        this.thumbLength = this.elements.thumb.clientWidth || this.options.thumbWidth || 12,
        this.containerX = this.container.getBoundingClientRect().left,
        this.move(this.options.value),
        this.container.addEventListener("mousedown", this.onSelfContainerMousedown),
        this.container.addEventListener("touchstart", this.onSelfContainerTouchstart),
        this.container.addEventListener("mousemove", this.onSelfContainerMousemove),
        this.container.addEventListener("mouseenter", this.onSelfContainerMouseenter),
        this.container.addEventListener("mouseleave", this.onSelfContainerMouseleave)
    }
    thumbUp(d) {
        this.window && (this.window.removeEventListener("mouseup", this.thumbUpBindSelf),
        this.window.removeEventListener("mousemove", this.thumbMoveBindSelf),
        this.window.removeEventListener("touchend", this.thumbUpBindSelf),
        this.window.removeEventListener("touchmove", this.thumbMoveBindSelf)),
        document.removeEventListener("mouseleave", this.thumbUpBindSelf),
        window.removeEventListener("mouseup", this.thumbUpBindSelf),
        window.removeEventListener("mousemove", this.thumbMoveBindSelf),
        window.removeEventListener("touchend", this.thumbUpBindSelf),
        window.removeEventListener("touchmove", this.thumbMoveBindSelf),
        this.onContainerMouseleave(),
        this.options.autohideThumb ? this.options.thumbSpecial && this.hasDropData ? this.delayScaleThumbInterval = window.setTimeout(()=>{
            this.elements.track.classList.remove(`${this.prefix}track-moving`)
        }
        , this.delayScaleThumb) : this.elements.track.classList.remove(`${this.prefix}track-moving`) : this.options.showTooltip && this.elements.track.classList.remove(`${this.prefix}track-moving`),
        (this.valueOut !== this.valueIn || this.moved) && (this.valueOut = this.valueIn,
        this.trigger("change", {
            value: this.getAnalyzedValue(this.options.valueGetAnalyze, this.valueIn),
            manual: !0
        })),
        this.thumbDropAnimation && (this.elements.dotSpecial.innerHTML = "",
        this.elements.dotSpecial.appendChild(this.thumbDropContainer),
        this.hasDropData ? this.thumbDropAnimation.goToAndPlay(0, !0) : this.thumbDropAnimation.goToAndStop(Math.floor(this.thumbDropAnimation.totalFrames / 2), !0),
        this.thumbDirection = 0),
        this.elements.preview && (this.elements.preview.style.display = "none"),
        this.trigger("end"),
        this.moved = !1
    }
    thumbMove(d) {
        this.move(this.handleEvent(d).percentage);
        const y = d.clientX || d.changedTouches && d.changedTouches[0].clientX;
        this.thumbDragAnimation && this.thumbDirection === 0 && (this.elements.dotSpecial.innerHTML = "",
        this.elements.dotSpecial.appendChild(this.thumbDragContainer),
        this.thumbDragAnimation.goToAndStop(Math.floor(this.thumbDragAnimation.totalFrames / 2), !0)),
        this.thumbDragAnimation && y > this.oldThumbClientX && this.thumbDirection < 1 ? (this.thumbDirection = 1,
        this.thumbDragAnimation.setDirection(this.thumbDirection),
        this.thumbDragAnimation.play()) : this.thumbDragAnimation && y < this.oldThumbClientX && this.thumbDirection > -1 && (this.thumbDirection = -1,
        this.thumbDragAnimation.setDirection(this.thumbDirection),
        this.thumbDragAnimation.play()),
        d.x && (this.elements.preview && (this.elements.preview.style.display = ""),
        this.onContainerMousemove(d)),
        this.oldThumbClientX = y,
        this.moved = !0
    }
    onContainerTouchstart(d) {
        this.disabled || (d.cancelable && d.preventDefault(),
        this.trigger("start"),
        this.container.addEventListener("touchmove", this.thumbMoveBindSelf),
        this.container.addEventListener("touchend", this.thumbUpBindSelf),
        this.container.addEventListener("touchcancel", this.thumbUpBindSelf),
        (this.options.autohideThumb || this.options.showTooltip) && (clearTimeout(this.delayScaleThumbInterval),
        this.elements.track.classList.add(`${this.prefix}track-moving`)),
        this.move(this.handleEvent(d).percentage))
    }
    onContainerMousedown(d) {
        !this.disabled && d.button === 0 && (d.preventDefault(),
        this.trigger("start"),
        window.addEventListener("mousemove", this.thumbMoveBindSelf),
        window.addEventListener("mouseup", this.thumbUpBindSelf),
        document.addEventListener("mouseleave", this.thumbUpBindSelf),
        this.window && (this.window.addEventListener("mousemove", this.thumbMoveBindSelf),
        this.window.addEventListener("mouseup", this.thumbUpBindSelf),
        this.rect = window.frameElement && window.frameElement.getBoundingClientRect()),
        (this.options.autohideThumb || this.options.showTooltip) && (clearTimeout(this.delayScaleThumbInterval),
        this.elements.track.classList.add(`${this.prefix}track-moving`)),
        this.move(this.handleEvent(d).percentage))
    }
    onContainerMousemove(d) {
        var y;
        const ye = d.x || d.clientX
          , ve = this.containerX
          , ie = this.elements.thumb.getBoundingClientRect()
          , ae = (y = this.elements.timestampTooltip) == null ? void 0 : y.getBoundingClientRect()
          , i = ie.x
          , O = this.moved ? i - ve : ye - ve;
        let $ = 0;
        const Te = Number((O / this.containerLength).toFixed(3))
          , we = Te < 0 ? 0 : Te > 1 ? 1 : Te;
        if (this.previewContainerPos) {
            const Ye = this.previewContainerPos.x
              , _t = Ye + 80 + X - ve
              , Jt = Ye + this.previewContainerPos.width - it$1 - X;
            $ = O <= _t ? Ye + X - ve : ye > Jt + 80 ? Jt - ve : O - 80
        } else
            $ = O < 80 ? 0 : O > this.containerLength - 80 ? this.containerLength - it$1 : O - 80;
        const Re = O > this.containerLength ? this.containerLength - 4 : O < 0 ? 0 : O;
        this.options.showTooltip && (this.elements.timestampTooltip.style.transform = this.moved ? `translateX(${O - (ae.width - ie.width) / 2}px)` : `translateX(calc(${Re}px - 50%))`,
        this.elements.timestampTooltip.innerHTML = this.options.formatTooltip(we),
        this.trigger("preview-change", {
            value: we,
            manual: !1
        })),
        this.options.previewFrame && (this.elements.preview.style.transform = `translateX(${Re}px)`,
        this.elements.previewPopover.style.transform = `translateX(${$}px)`)
    }
    onContainerMouseenter() {
        if (this.options.previewFrame) {
            const d = this.elements.preview
              , y = this.elements.previewPopover;
            d.style.display || (d.style.display = "none",
            y.style.display = "block")
        }
        if (this.options.showTooltip) {
            const d = this.elements.timestampTooltip;
            d.style.display || (d.style.display = "block")
        }
    }
    onContainerMouseleave() {
        if (!this.moved) {
            if (this.options.previewFrame) {
                const d = this.elements.preview
                  , y = this.elements.previewPopover;
                d.style.display && (d.style.display = "",
                y.style.display = "")
            }
            if (this.options.showTooltip) {
                const d = this.elements.timestampTooltip;
                d.style.display && (d.style.display = "")
            }
        }
    }
    updateThumb(d, y) {
        !this.options.thumbSpecial || !d || (y ? this.hasDropData = !0 : (this.hasDropData = !1,
        y = d),
        this.thumbDragAnimation && this.thumbDragAnimation.destroy(),
        this.thumbDragContainer || (this.thumbDragContainer = document.createElement("div")),
        this.thumbDropAnimation && this.thumbDropAnimation.destroy(),
        this.thumbDropContainer || (this.thumbDropContainer = document.createElement("div")),
        this.thumbDragAnimation = window.lottie.loadAnimation({
            container: this.thumbDragContainer,
            renderer: "svg",
            loop: !1,
            autoplay: !1,
            animationData: d
        }),
        this.thumbDropAnimation = window.lottie.loadAnimation({
            container: this.thumbDropContainer,
            renderer: "svg",
            loop: !1,
            autoplay: !1,
            animationData: y
        }),
        this.elements.dotSpecial.innerHTML = "",
        this.elements.dotSpecial.appendChild(this.thumbDropContainer),
        this.delayScaleThumb = 300,
        this.hasDropData ? (this.thumbDropAnimation.goToAndStop(0, !0),
        this.thumbDropAnimation.totalFrames > 0 && this.thumbDropAnimation.animationData && this.thumbDropAnimation.animationData.fr > 0 && (this.delayScaleThumb = Math.floor(this.thumbDropAnimation.totalFrames / this.thumbDropAnimation.animationData.fr * 1e3) + 200)) : this.thumbDropAnimation.goToAndStop(Math.floor(this.thumbDropAnimation.totalFrames / 2), !0))
    }
    initElements() {
        It(__spreadValues$1({
            prefix: this.prefix,
            getObject: d=>d,
            thumb: this.options.videoProgress && !this.options.thumbSpecial ? G : ""
        }, this.options), this.container),
        this.elements = {
            wrap: this.container.querySelector(`.${this.prefix}bar-wrap`),
            bar: this.container.querySelector(`.${this.prefix}bar-normal`),
            thumb: this.container.querySelector(`.${this.prefix}thumb`),
            track: this.container.querySelector(`.${this.prefix}track`),
            dotSpecial: this.container.querySelector(`.${this.prefix}thumb-dot-special`),
            bufferBar: this.options.videoProgress ? this.container.querySelector(`.${this.prefix}bar-buffer`) : null,
            thumbTooltip: this.container.querySelector(`.${this.prefix}thumb-tooltip`),
            preview: this.container.querySelector(`.${this.prefix}preview-indicator`),
            previewPopover: this.container.querySelector(`.${this.prefix}popover`),
            timestampTooltip: this.container.querySelector(`.${this.prefix}timestamp-tooltip`),
            previewImg: this.container.querySelector(`#${this.prefix}preview-img`)
        }
    }
    handleEvent(d) {
        let y, ye, ve = 0, ie = 0;
        if (this.window === d.currentTarget && this.rect && (ve = +this.rect[this.rotate ? "top" : "left"] || 0,
        ie = +this.rect[this.rotate ? "right" : "top"] || 0),
        this.options.vertical) {
            const ae = this.rotate ? "clientX" : "clientY";
            ye = this.elements.track.getBoundingClientRect()[this.rotate ? "left" : "bottom"] - (d[ae] || d.changedTouches && d.changedTouches[0][ae] || 0) + ie,
            y = ye / this.elements.track.clientHeight
        } else {
            const ae = this.rotate ? "clientY" : "clientX";
            ye = (d[ae] || d.changedTouches && d.changedTouches[0][ae] || 0) - this.elements.track.getBoundingClientRect()[this.rotate ? "top" : "left"] - ve,
            y = ye / this.elements.track.clientWidth
        }
        return y = Math.max(y, 0),
        y = Math.min(y, 1),
        {
            percentage: y,
            distance: ye
        }
    }
    value(d, y=!1, ye) {
        return d !== void 0 && (d = parseFloat(d),
        typeof d == "number" && (d = this.getAnalyzedValue(this.options.valueSetAnalyze, d),
        d = Math.max(d, 0),
        d = Math.min(d, 1),
        d !== this.valueOut && (this.move(d, y, ye),
        this.valueOut = d,
        y || this.trigger("change", {
            value: this.getAnalyzedValue(this.options.valueGetAnalyze, d),
            manual: !1
        })))),
        this.getAnalyzedValue(this.options.valueGetAnalyze, this.valueIn)
    }
    getAnalyzedValue(d, y) {
        return d ? parseFloat(d(y).toFixed(5)) : y
    }
    resize() {
        this.containerX = this.container.getBoundingClientRect().x,
        this.containerLength = this.options.vertical ? this.container.clientHeight : this.container.clientWidth,
        this.thumbX()
    }
    bufferValue(d) {
        if (this.options.videoProgress)
            return d !== void 0 && typeof d == "number" && (d = Math.max(d, 0),
            d = Math.min(d, 1),
            this.valueBuffer = d,
            this.elements.bufferBar.style.webkitTransform = `scale ${this.direction}(${Math.max(d, .001)})`,
            this.elements.bufferBar.style.transform = `scale ${this.direction}(${Math.max(d, .001)})`),
            this.valueBuffer
    }
    disable() {
        this.disabled = !0
    }
    enable() {
        this.disabled = !1
    }
    move(d, y=!1, ye) {
        d = Math.max(d, 0),
        d = Math.min(d, 1),
        this.valueIn !== d && (this.valueIn = d,
        this.elements.bar && (this.elements.bar.style.webkitTransform = `scale ${this.direction}(${Math.max(d, .001)})`,
        this.elements.bar.style.transform = `scale ${this.direction}(${Math.max(d, .001)})`),
        this.thumbX(),
        y || this.trigger("move", {
            value: this.getAnalyzedValue(this.options.valueGetAnalyze, d)
        }))
    }
    setRotate(d) {
        this.rotate = d
    }
    setPreviewContainerPosition(d, y) {
        this.previewContainerPos = {
            x: d,
            width: y
        }
    }
    getBufferValue() {
        return this.valueBuffer
    }
    thumbX(d=this.valueIn, y) {
        const ye = (this.containerLength - this.thumbLength) * d * (this.options.vertical ? -1 : 1);
        this.elements.thumb.style.webkitTransform = `translate ${this.direction}(${ye}px)`,
        this.elements.thumb.style.transform = `translate ${this.direction}(${ye}px)`
    }
    dispose() {
        this.container.removeEventListener("mousedown", this.onSelfContainerTouchstart),
        this.container.removeEventListener("touchstart", this.onSelfContainerMousedown),
        this.container.removeEventListener("mousemove", this.onSelfContainerMousemove),
        this.container.removeEventListener("mouseenter", this.onSelfContainerMouseenter),
        this.container.removeEventListener("mouseleave", this.onSelfContainerMouseleave)
    }
    setPreviewImg(d) {
        !this.elements.previewImg || (this.elements.previewImg.src = d)
    }
}
;
g('<div class="ip-tooltip"><div class="ip-tooltip--placeholder"></div><div></div></div>');
g('<div class="ip-dropdown"><div class="ip-dropdown--placeholder"></div><div class="ip-dropdown--wrap"><div class="ip-dropdown--content"></div></div></div>');
const Xt = g('<div><span class="ip-loading-dot"></span><span class="ip-loading-dot"></span><span class="ip-loading-dot"></span></div>')
  , Ot$1 = n=>(()=>{
    const d = Xt.cloneNode(!0);
    return v(y=>_$1(d, {
        "ip-loading": !0,
        [`ip-loading--${n.size}`]: !0
    }, y)),
    d
}
)();
function r$2(n) {
    var d, y, ye = "";
    if (typeof n == "string" || typeof n == "number")
        ye += n;
    else if (typeof n == "object")
        if (Array.isArray(n))
            for (d = 0; d < n.length; d++)
                n[d] && (y = r$2(n[d])) && (ye && (ye += " "),
                ye += y);
        else
            for (d in n)
                n[d] && (ye && (ye += " "),
                ye += d);
    return ye
}
function clsx() {
    for (var n, d, y = 0, ye = ""; y < arguments.length; )
        (n = arguments[y++]) && (d = r$2(n)) && (ye && (ye += " "),
        ye += d);
    return ye
}
let nanoid = (n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((d,y)=>(y &= 63,
y < 36 ? d += y.toString(36) : y < 62 ? d += (y - 26).toString(36).toUpperCase() : y > 62 ? d += "-" : d += "_",
d), "");
const VERSION = "0.1.0";
var DFMMessageProtocol;
(n=>{
    n.VERSION = "1.0",
    (d=>{
        d[d.FORMAT_ERROR = -6e3] = "FORMAT_ERROR",
        d[d.UNKNOWN_MESSAGE = -6001] = "UNKNOWN_MESSAGE",
        d[d.NATIVE_ERROR = -7e3] = "NATIVE_ERROR",
        d[d.RESPONSE_DATA_ERROR = -8e3] = "RESPONSE_DATA_ERROR"
    }
    )(n.StatusCode || (n.StatusCode = {})),
    (d=>{
        (y=>{
            y.CLIENT_SET_DANMAKU_CONFIG = "OnDanmakuConfigChanged",
            y.CLIENT_SET_DANMAKU_VIEW_SOURCE = "OnDmViewChanged",
            y.CLIENT_UPDATE_PLAYBACK_STATUS = "OnPlaybackStatusChanged",
            y.GET_CONFIGURATIONS = "GetConfigurations",
            y.UPDATE_PLAYBACK_STATUS = "UpdatePlaybackStatus",
            y.URL_REQUEST = "URLRequest",
            y.EVENT_REPORT = "EventReport"
        }
        )(d.Method || (d.Method = {}))
    }
    )(n.Request || (n.Request = {})),
    (d=>{
        (y=>{
            y.GET = "GET",
            y.POST = "POST"
        }
        )(d.Method || (d.Method = {})),
        (y=>{
            y.RAW = "raw",
            y.BASE64 = "base64",
            y.FILE = "file",
            y.BINARY = "binary"
        }
        )(d.DataFormat || (d.DataFormat = {}))
    }
    )(n.URLRequest || (n.URLRequest = {})),
    (d=>{
        (y=>{
            y[y.CLICK = 0] = "CLICK",
            y[y.EXPOSURE = 1] = "EXPOSURE",
            y[y.PLAYER = 2] = "PLAYER",
            y[y.MONITOR = 3] = "MONITOR",
            y[y.TECH = 4] = "TECH"
        }
        )(d.Type || (d.Type = {}))
    }
    )(n.EventReport || (n.EventReport = {}))
}
)(DFMMessageProtocol || (DFMMessageProtocol = {}));
const registeredMessengers = new Map
  , registeredListeners = new Map;
var Messenger;
(n=>{
    async function d(y) {
        let ye = registeredMessengers.get(y);
        return ye || (ye = {
            sendMessage(ve, ie) {
                return ie ? y.sendMessage(ve, ie) : y.sendMessage(ve)
            },
            addListener(ve) {
                const ie = registeredListeners.get(this)
                  , ae = ie == null ? void 0 : ie.indexOf(ve);
                ae && ae >= 0 || (ie ? ie.push(ve) : registeredListeners.set(this, [ve]))
            },
            removeListener(ve) {
                const ie = registeredListeners.get(this);
                if (ie) {
                    const ae = ie.indexOf(ve);
                    ae >= 0 && ie.splice(ae, 1)
                }
            }
        },
        registeredMessengers.set(y, ye),
        y.getMessageHandler() || await y.setMessageHandler((ve,ie)=>{
            const ae = registeredMessengers.get(y);
            if (ae) {
                const i = registeredListeners.get(ae);
                if (i)
                    for (const O of i)
                        O(ve).then($=>ie($))
            }
        }
        ),
        ye)
    }
    n.from = d
}
)(Messenger || (Messenger = {}));
var Message$1;
(n=>{
    function d(ye) {
        const ve = new DataView(ye)
          , ie = new TextDecoder;
        let ae, i, O = 0;
        for (; O < ve.byteLength; ) {
            const $ = ve.getInt8(O)
              , Te = ve.getInt32(O + 1);
            switch (O += 5,
            $) {
            case 0:
                {
                    const we = new Uint8Array(ye,O,Te)
                      , Re = ie.decode(we);
                    ae = JSON.parse(Re);
                    break
                }
            case 1:
                {
                    let we = O;
                    const Re = ve.getInt32(we)
                      , Ye = new Uint8Array(ye,we + 4,Re)
                      , _t = ie.decode(Ye);
                    we += 4 + Re;
                    const Jt = ve.getInt32(we)
                      , bt = new Uint8Array(Jt);
                    bt.set(new Uint8Array(ye,we + 4,Jt));
                    const ai = bt.buffer;
                    we += 4 + Jt,
                    i || (i = {}),
                    i[_t] = ai;
                    break
                }
            }
            O += Te
        }
        if (!ae)
            throw new Error("Failed to decode message: require JSON data!");
        return {
            json: ae,
            dataMap: i
        }
    }
    n.decode = d;
    function y(ye) {
        const ve = new TextEncoder
          , ie = JSON.stringify(ye.json)
          , ae = ve.encode(ie)
          , i = 5 + ae.byteLength
          , O = {};
        let $ = 0;
        if (ye.dataMap)
            for (const bt in ye.dataMap) {
                const ai = ye.dataMap[bt]
                  , ii = {
                    keyByteArray: ve.encode(bt),
                    valueByteArray: new Uint8Array(ai)
                };
                O[bt] = ii,
                $ += 13 + ii.keyByteArray.byteLength + ai.byteLength
            }
        const Te = i + $
          , we = new ArrayBuffer(Te)
          , Re = new DataView(we);
        let Ye = 0;
        const _t = ae.byteLength;
        Re.setInt8(Ye, 0),
        Re.setInt32(Ye + 1, _t),
        new Uint8Array(we,Ye + 5,_t).set(ae),
        Ye += i;
        for (const bt in O) {
            const ai = O[bt]
              , ii = ai.keyByteArray.byteLength
              , da = ai.valueByteArray.byteLength
              , aa = 8 + ii + da;
            Re.setInt8(Ye, 1),
            Re.setInt32(Ye + 1, aa),
            Ye += 5,
            Re.setInt32(Ye, ii),
            new Uint8Array(we,Ye + 4,ii).set(ai.keyByteArray),
            Ye += 4 + ii,
            Re.setInt32(Ye, da),
            new Uint8Array(we,Ye + 4,da).set(ai.valueByteArray),
            Ye += 4 + da
        }
        return we
    }
    n.encode = y
}
)(Message$1 || (Message$1 = {}));
var EVENT_NAME = (n=>(n.ERROR = "error",
n))(EVENT_NAME || {});
const EventEmitter$1 = ()=>{
    const n = new Map;
    return {
        on: (ve,ie)=>{
            n.set(ve, [ie])
        }
        ,
        emit: (ve,ie)=>{
            const ae = n.get(ve);
            ae && ae.forEach(i=>i && i(ie))
        }
        ,
        off: ve=>{
            if (n.get(ve))
                n.delete(ve);
            else
                return
        }
    }
}
  , e$1 = EventEmitter$1();
var internal;
(n=>{
    function d(ie) {
        return !(!ie || typeof ie != "object" || !n.isValidMethod(Reflect.get(ie, "method")) || !n.isValidArgs(Reflect.get(ie, "args")))
    }
    n.isRequest = d;
    function y(ie) {
        if (!ie || typeof ie != "object")
            return !1;
        const ae = Reflect.get(ie, "result")
          , i = Reflect.get(ie, "exception");
        return typeof ae == "object" && !i || !ae && typeof i == "object"
    }
    n.isResponse = y;
    function ye(ie) {
        const ae = DFMMessageProtocol.Request.Method;
        for (const i of Reflect.ownKeys(ae))
            if (ie === Reflect.get(ae, i))
                return !0;
        return !1
    }
    n.isValidMethod = ye;
    function ve(ie) {
        return ie ? typeof ie == "object" : !0
    }
    n.isValidArgs = ve
}
)(internal || (internal = {}));
var DFMMessage;
(n=>{
    n.StatusCode = DFMMessageProtocol.StatusCode;
    function d(i) {
        let O;
        try {
            O = Message$1.decode(i)
        } catch ($) {
            throw n.encodeError(n.StatusCode.FORMAT_ERROR)
        }
        if (internal.isRequest(O.json))
            return O;
        throw n.encodeError(n.StatusCode.UNKNOWN_MESSAGE)
    }
    n.decodeRequest = d;
    function y(i) {
        return Message$1.encode(i)
    }
    n.encodeRequest = y;
    function ye(i) {
        let O;
        try {
            O = Message$1.decode(i)
        } catch ($) {
            throw n.encodeError(n.StatusCode.FORMAT_ERROR)
        }
        if (internal.isResponse(O.json))
            return O;
        throw n.encodeError(n.StatusCode.UNKNOWN_MESSAGE)
    }
    n.decodeResponse = ye;
    function ve(i) {
        return Message$1.encode(i)
    }
    n.encodeResponse = ve;
    function ie(i, O) {
        var Re;
        const $ = {
            [n.StatusCode.FORMAT_ERROR]: "Request data format error.",
            [n.StatusCode.NATIVE_ERROR]: "Native error on processing request.",
            [n.StatusCode.RESPONSE_DATA_ERROR]: "Request data format error.",
            [n.StatusCode.UNKNOWN_MESSAGE]: "Request handler is not implemented."
        }
          , Te = (Re = O != null ? O : $[i]) != null ? Re : $[n.StatusCode.UNKNOWN_MESSAGE]
          , we = {
            json: {
                exception: {
                    code: i,
                    description: Te
                }
            }
        };
        return e$1.emit(EVENT_NAME.ERROR, {
            code: i || we.json.exception.code || "-1000",
            msg: O || Te || "unknown",
            original: we
        }),
        we
    }
    n.decodeError = ie;
    function ae(i) {
        const O = n.decodeError(i);
        return n.encodeResponse(O)
    }
    n.encodeError = ae
}
)(DFMMessage || (DFMMessage = {}));
var indexMinimal = {}
  , minimal$1 = {}
  , aspromise = asPromise$1;
function asPromise$1(n, d) {
    for (var y = new Array(arguments.length - 1), ye = 0, ve = 2, ie = !0; ve < arguments.length; )
        y[ye++] = arguments[ve++];
    return new Promise(function(i, O) {
        y[ye] = function(Te) {
            if (ie)
                if (ie = !1,
                Te)
                    O(Te);
                else {
                    for (var we = new Array(arguments.length - 1), Re = 0; Re < we.length; )
                        we[Re++] = arguments[Re];
                    i.apply(null, we)
                }
        }
        ;
        try {
            n.apply(d || null, y)
        } catch ($) {
            ie && (ie = !1,
            O($))
        }
    }
    )
}
var base64$1 = {};
(function(n) {
    var d = n;
    d.length = function(i) {
        var O = i.length;
        if (!O)
            return 0;
        for (var $ = 0; --O % 4 > 1 && i.charAt(O) === "="; )
            ++$;
        return Math.ceil(i.length * 3) / 4 - $
    }
    ;
    for (var y = new Array(64), ye = new Array(123), ve = 0; ve < 64; )
        ye[y[ve] = ve < 26 ? ve + 65 : ve < 52 ? ve + 71 : ve < 62 ? ve - 4 : ve - 59 | 43] = ve++;
    d.encode = function(i, O, $) {
        for (var Te = null, we = [], Re = 0, Ye = 0, _t; O < $; ) {
            var Jt = i[O++];
            switch (Ye) {
            case 0:
                we[Re++] = y[Jt >> 2],
                _t = (Jt & 3) << 4,
                Ye = 1;
                break;
            case 1:
                we[Re++] = y[_t | Jt >> 4],
                _t = (Jt & 15) << 2,
                Ye = 2;
                break;
            case 2:
                we[Re++] = y[_t | Jt >> 6],
                we[Re++] = y[Jt & 63],
                Ye = 0;
                break
            }
            Re > 8191 && ((Te || (Te = [])).push(String.fromCharCode.apply(String, we)),
            Re = 0)
        }
        return Ye && (we[Re++] = y[_t],
        we[Re++] = 61,
        Ye === 1 && (we[Re++] = 61)),
        Te ? (Re && Te.push(String.fromCharCode.apply(String, we.slice(0, Re))),
        Te.join("")) : String.fromCharCode.apply(String, we.slice(0, Re))
    }
    ;
    var ie = "invalid encoding";
    d.decode = function(i, O, $) {
        for (var Te = $, we = 0, Re, Ye = 0; Ye < i.length; ) {
            var _t = i.charCodeAt(Ye++);
            if (_t === 61 && we > 1)
                break;
            if ((_t = ye[_t]) === void 0)
                throw Error(ie);
            switch (we) {
            case 0:
                Re = _t,
                we = 1;
                break;
            case 1:
                O[$++] = Re << 2 | (_t & 48) >> 4,
                Re = _t,
                we = 2;
                break;
            case 2:
                O[$++] = (Re & 15) << 4 | (_t & 60) >> 2,
                Re = _t,
                we = 3;
                break;
            case 3:
                O[$++] = (Re & 3) << 6 | _t,
                we = 0;
                break
            }
        }
        if (we === 1)
            throw Error(ie);
        return $ - Te
    }
    ,
    d.test = function(i) {
        return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(i)
    }
}
)(base64$1);
var eventemitter = EventEmitter;
function EventEmitter() {
    this._listeners = {}
}
EventEmitter.prototype.on = function(d, y, ye) {
    return (this._listeners[d] || (this._listeners[d] = [])).push({
        fn: y,
        ctx: ye || this
    }),
    this
}
;
EventEmitter.prototype.off = function(d, y) {
    if (d === void 0)
        this._listeners = {};
    else if (y === void 0)
        this._listeners[d] = [];
    else
        for (var ye = this._listeners[d], ve = 0; ve < ye.length; )
            ye[ve].fn === y ? ye.splice(ve, 1) : ++ve;
    return this
}
;
EventEmitter.prototype.emit = function(d) {
    var y = this._listeners[d];
    if (y) {
        for (var ye = [], ve = 1; ve < arguments.length; )
            ye.push(arguments[ve++]);
        for (ve = 0; ve < y.length; )
            y[ve].fn.apply(y[ve++].ctx, ye)
    }
    return this
}
;
var float = factory(factory);
function factory(n) {
    return typeof Float32Array < "u" ? function() {
        var d = new Float32Array([-0])
          , y = new Uint8Array(d.buffer)
          , ye = y[3] === 128;
        function ve(O, $, Te) {
            d[0] = O,
            $[Te] = y[0],
            $[Te + 1] = y[1],
            $[Te + 2] = y[2],
            $[Te + 3] = y[3]
        }
        function ie(O, $, Te) {
            d[0] = O,
            $[Te] = y[3],
            $[Te + 1] = y[2],
            $[Te + 2] = y[1],
            $[Te + 3] = y[0]
        }
        n.writeFloatLE = ye ? ve : ie,
        n.writeFloatBE = ye ? ie : ve;
        function ae(O, $) {
            return y[0] = O[$],
            y[1] = O[$ + 1],
            y[2] = O[$ + 2],
            y[3] = O[$ + 3],
            d[0]
        }
        function i(O, $) {
            return y[3] = O[$],
            y[2] = O[$ + 1],
            y[1] = O[$ + 2],
            y[0] = O[$ + 3],
            d[0]
        }
        n.readFloatLE = ye ? ae : i,
        n.readFloatBE = ye ? i : ae
    }() : function() {
        function d(ye, ve, ie, ae) {
            var i = ve < 0 ? 1 : 0;
            if (i && (ve = -ve),
            ve === 0)
                ye(1 / ve > 0 ? 0 : 2147483648, ie, ae);
            else if (isNaN(ve))
                ye(2143289344, ie, ae);
            else if (ve > 34028234663852886e22)
                ye((i << 31 | 2139095040) >>> 0, ie, ae);
            else if (ve < 11754943508222875e-54)
                ye((i << 31 | Math.round(ve / 1401298464324817e-60)) >>> 0, ie, ae);
            else {
                var O = Math.floor(Math.log(ve) / Math.LN2)
                  , $ = Math.round(ve * Math.pow(2, -O) * 8388608) & 8388607;
                ye((i << 31 | O + 127 << 23 | $) >>> 0, ie, ae)
            }
        }
        n.writeFloatLE = d.bind(null, writeUintLE),
        n.writeFloatBE = d.bind(null, writeUintBE);
        function y(ye, ve, ie) {
            var ae = ye(ve, ie)
              , i = (ae >> 31) * 2 + 1
              , O = ae >>> 23 & 255
              , $ = ae & 8388607;
            return O === 255 ? $ ? NaN : i * (1 / 0) : O === 0 ? i * 1401298464324817e-60 * $ : i * Math.pow(2, O - 150) * ($ + 8388608)
        }
        n.readFloatLE = y.bind(null, readUintLE),
        n.readFloatBE = y.bind(null, readUintBE)
    }(),
    typeof Float64Array < "u" ? function() {
        var d = new Float64Array([-0])
          , y = new Uint8Array(d.buffer)
          , ye = y[7] === 128;
        function ve(O, $, Te) {
            d[0] = O,
            $[Te] = y[0],
            $[Te + 1] = y[1],
            $[Te + 2] = y[2],
            $[Te + 3] = y[3],
            $[Te + 4] = y[4],
            $[Te + 5] = y[5],
            $[Te + 6] = y[6],
            $[Te + 7] = y[7]
        }
        function ie(O, $, Te) {
            d[0] = O,
            $[Te] = y[7],
            $[Te + 1] = y[6],
            $[Te + 2] = y[5],
            $[Te + 3] = y[4],
            $[Te + 4] = y[3],
            $[Te + 5] = y[2],
            $[Te + 6] = y[1],
            $[Te + 7] = y[0]
        }
        n.writeDoubleLE = ye ? ve : ie,
        n.writeDoubleBE = ye ? ie : ve;
        function ae(O, $) {
            return y[0] = O[$],
            y[1] = O[$ + 1],
            y[2] = O[$ + 2],
            y[3] = O[$ + 3],
            y[4] = O[$ + 4],
            y[5] = O[$ + 5],
            y[6] = O[$ + 6],
            y[7] = O[$ + 7],
            d[0]
        }
        function i(O, $) {
            return y[7] = O[$],
            y[6] = O[$ + 1],
            y[5] = O[$ + 2],
            y[4] = O[$ + 3],
            y[3] = O[$ + 4],
            y[2] = O[$ + 5],
            y[1] = O[$ + 6],
            y[0] = O[$ + 7],
            d[0]
        }
        n.readDoubleLE = ye ? ae : i,
        n.readDoubleBE = ye ? i : ae
    }() : function() {
        function d(ye, ve, ie, ae, i, O) {
            var $ = ae < 0 ? 1 : 0;
            if ($ && (ae = -ae),
            ae === 0)
                ye(0, i, O + ve),
                ye(1 / ae > 0 ? 0 : 2147483648, i, O + ie);
            else if (isNaN(ae))
                ye(0, i, O + ve),
                ye(2146959360, i, O + ie);
            else if (ae > 17976931348623157e292)
                ye(0, i, O + ve),
                ye(($ << 31 | 2146435072) >>> 0, i, O + ie);
            else {
                var Te;
                if (ae < 22250738585072014e-324)
                    Te = ae / 5e-324,
                    ye(Te >>> 0, i, O + ve),
                    ye(($ << 31 | Te / 4294967296) >>> 0, i, O + ie);
                else {
                    var we = Math.floor(Math.log(ae) / Math.LN2);
                    we === 1024 && (we = 1023),
                    Te = ae * Math.pow(2, -we),
                    ye(Te * 4503599627370496 >>> 0, i, O + ve),
                    ye(($ << 31 | we + 1023 << 20 | Te * 1048576 & 1048575) >>> 0, i, O + ie)
                }
            }
        }
        n.writeDoubleLE = d.bind(null, writeUintLE, 0, 4),
        n.writeDoubleBE = d.bind(null, writeUintBE, 4, 0);
        function y(ye, ve, ie, ae, i) {
            var O = ye(ae, i + ve)
              , $ = ye(ae, i + ie)
              , Te = ($ >> 31) * 2 + 1
              , we = $ >>> 20 & 2047
              , Re = 4294967296 * ($ & 1048575) + O;
            return we === 2047 ? Re ? NaN : Te * (1 / 0) : we === 0 ? Te * 5e-324 * Re : Te * Math.pow(2, we - 1075) * (Re + 4503599627370496)
        }
        n.readDoubleLE = y.bind(null, readUintLE, 0, 4),
        n.readDoubleBE = y.bind(null, readUintBE, 4, 0)
    }(),
    n
}
function writeUintLE(n, d, y) {
    d[y] = n & 255,
    d[y + 1] = n >>> 8 & 255,
    d[y + 2] = n >>> 16 & 255,
    d[y + 3] = n >>> 24
}
function writeUintBE(n, d, y) {
    d[y] = n >>> 24,
    d[y + 1] = n >>> 16 & 255,
    d[y + 2] = n >>> 8 & 255,
    d[y + 3] = n & 255
}
function readUintLE(n, d) {
    return (n[d] | n[d + 1] << 8 | n[d + 2] << 16 | n[d + 3] << 24) >>> 0
}
function readUintBE(n, d) {
    return (n[d] << 24 | n[d + 1] << 16 | n[d + 2] << 8 | n[d + 3]) >>> 0
}
var inquire_1 = inquire$1;
function inquire$1(moduleName) {
    try {
        var mod = eval("quire".replace(/^/, "re"))(moduleName);
        if (mod && (mod.length || Object.keys(mod).length))
            return mod
    } catch (n) {}
    return null
}
var utf8$2 = {};
(function(n) {
    var d = n;
    d.length = function(ye) {
        for (var ve = 0, ie = 0, ae = 0; ae < ye.length; ++ae)
            ie = ye.charCodeAt(ae),
            ie < 128 ? ve += 1 : ie < 2048 ? ve += 2 : (ie & 64512) === 55296 && (ye.charCodeAt(ae + 1) & 64512) === 56320 ? (++ae,
            ve += 4) : ve += 3;
        return ve
    }
    ,
    d.read = function(ye, ve, ie) {
        var ae = ie - ve;
        if (ae < 1)
            return "";
        for (var i = null, O = [], $ = 0, Te; ve < ie; )
            Te = ye[ve++],
            Te < 128 ? O[$++] = Te : Te > 191 && Te < 224 ? O[$++] = (Te & 31) << 6 | ye[ve++] & 63 : Te > 239 && Te < 365 ? (Te = ((Te & 7) << 18 | (ye[ve++] & 63) << 12 | (ye[ve++] & 63) << 6 | ye[ve++] & 63) - 65536,
            O[$++] = 55296 + (Te >> 10),
            O[$++] = 56320 + (Te & 1023)) : O[$++] = (Te & 15) << 12 | (ye[ve++] & 63) << 6 | ye[ve++] & 63,
            $ > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, O)),
            $ = 0);
        return i ? ($ && i.push(String.fromCharCode.apply(String, O.slice(0, $))),
        i.join("")) : String.fromCharCode.apply(String, O.slice(0, $))
    }
    ,
    d.write = function(ye, ve, ie) {
        for (var ae = ie, i, O, $ = 0; $ < ye.length; ++$)
            i = ye.charCodeAt($),
            i < 128 ? ve[ie++] = i : i < 2048 ? (ve[ie++] = i >> 6 | 192,
            ve[ie++] = i & 63 | 128) : (i & 64512) === 55296 && ((O = ye.charCodeAt($ + 1)) & 64512) === 56320 ? (i = 65536 + ((i & 1023) << 10) + (O & 1023),
            ++$,
            ve[ie++] = i >> 18 | 240,
            ve[ie++] = i >> 12 & 63 | 128,
            ve[ie++] = i >> 6 & 63 | 128,
            ve[ie++] = i & 63 | 128) : (ve[ie++] = i >> 12 | 224,
            ve[ie++] = i >> 6 & 63 | 128,
            ve[ie++] = i & 63 | 128);
        return ie - ae
    }
}
)(utf8$2);
var pool_1 = pool;
function pool(n, d, y) {
    var ye = y || 8192
      , ve = ye >>> 1
      , ie = null
      , ae = ye;
    return function(O) {
        if (O < 1 || O > ve)
            return n(O);
        ae + O > ye && (ie = n(ye),
        ae = 0);
        var $ = d.call(ie, ae, ae += O);
        return ae & 7 && (ae = (ae | 7) + 1),
        $
    }
}
var longbits, hasRequiredLongbits;
function requireLongbits() {
    if (hasRequiredLongbits)
        return longbits;
    hasRequiredLongbits = 1,
    longbits = d;
    var n = requireMinimal();
    function d(ie, ae) {
        this.lo = ie >>> 0,
        this.hi = ae >>> 0
    }
    var y = d.zero = new d(0,0);
    y.toNumber = function() {
        return 0
    }
    ,
    y.zzEncode = y.zzDecode = function() {
        return this
    }
    ,
    y.length = function() {
        return 1
    }
    ;
    var ye = d.zeroHash = "\0\0\0\0\0\0\0\0";
    d.fromNumber = function(ae) {
        if (ae === 0)
            return y;
        var i = ae < 0;
        i && (ae = -ae);
        var O = ae >>> 0
          , $ = (ae - O) / 4294967296 >>> 0;
        return i && ($ = ~$ >>> 0,
        O = ~O >>> 0,
        ++O > 4294967295 && (O = 0,
        ++$ > 4294967295 && ($ = 0))),
        new d(O,$)
    }
    ,
    d.from = function(ae) {
        if (typeof ae == "number")
            return d.fromNumber(ae);
        if (n.isString(ae))
            if (n.Long)
                ae = n.Long.fromString(ae);
            else
                return d.fromNumber(parseInt(ae, 10));
        return ae.low || ae.high ? new d(ae.low >>> 0,ae.high >>> 0) : y
    }
    ,
    d.prototype.toNumber = function(ae) {
        if (!ae && this.hi >>> 31) {
            var i = ~this.lo + 1 >>> 0
              , O = ~this.hi >>> 0;
            return i || (O = O + 1 >>> 0),
            -(i + O * 4294967296)
        }
        return this.lo + this.hi * 4294967296
    }
    ,
    d.prototype.toLong = function(ae) {
        return n.Long ? new n.Long(this.lo | 0,this.hi | 0,!!ae) : {
            low: this.lo | 0,
            high: this.hi | 0,
            unsigned: !!ae
        }
    }
    ;
    var ve = String.prototype.charCodeAt;
    return d.fromHash = function(ae) {
        return ae === ye ? y : new d((ve.call(ae, 0) | ve.call(ae, 1) << 8 | ve.call(ae, 2) << 16 | ve.call(ae, 3) << 24) >>> 0,(ve.call(ae, 4) | ve.call(ae, 5) << 8 | ve.call(ae, 6) << 16 | ve.call(ae, 7) << 24) >>> 0)
    }
    ,
    d.prototype.toHash = function() {
        return String.fromCharCode(this.lo & 255, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, this.hi & 255, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24)
    }
    ,
    d.prototype.zzEncode = function() {
        var ae = this.hi >> 31;
        return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ ae) >>> 0,
        this.lo = (this.lo << 1 ^ ae) >>> 0,
        this
    }
    ,
    d.prototype.zzDecode = function() {
        var ae = -(this.lo & 1);
        return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ ae) >>> 0,
        this.hi = (this.hi >>> 1 ^ ae) >>> 0,
        this
    }
    ,
    d.prototype.length = function() {
        var ae = this.lo
          , i = (this.lo >>> 28 | this.hi << 4) >>> 0
          , O = this.hi >>> 24;
        return O === 0 ? i === 0 ? ae < 16384 ? ae < 128 ? 1 : 2 : ae < 2097152 ? 3 : 4 : i < 16384 ? i < 128 ? 5 : 6 : i < 2097152 ? 7 : 8 : O < 128 ? 9 : 10
    }
    ,
    longbits
}
var hasRequiredMinimal;
function requireMinimal() {
    return hasRequiredMinimal || (hasRequiredMinimal = 1,
    function(n) {
        var d = n;
        d.asPromise = aspromise,
        d.base64 = base64$1,
        d.EventEmitter = eventemitter,
        d.float = float,
        d.inquire = inquire_1,
        d.utf8 = utf8$2,
        d.pool = pool_1,
        d.LongBits = requireLongbits(),
        d.isNode = !!(typeof commonjsGlobal < "u" && commonjsGlobal && commonjsGlobal.process && commonjsGlobal.process.versions && commonjsGlobal.process.versions.node),
        d.global = d.isNode && commonjsGlobal || typeof window < "u" && window || typeof self < "u" && self || commonjsGlobal,
        d.emptyArray = Object.freeze ? Object.freeze([]) : [],
        d.emptyObject = Object.freeze ? Object.freeze({}) : {},
        d.isInteger = Number.isInteger || function(ie) {
            return typeof ie == "number" && isFinite(ie) && Math.floor(ie) === ie
        }
        ,
        d.isString = function(ie) {
            return typeof ie == "string" || ie instanceof String
        }
        ,
        d.isObject = function(ie) {
            return ie && typeof ie == "object"
        }
        ,
        d.isset = d.isSet = function(ie, ae) {
            var i = ie[ae];
            return i != null && ie.hasOwnProperty(ae) ? typeof i != "object" || (Array.isArray(i) ? i.length : Object.keys(i).length) > 0 : !1
        }
        ,
        d.Buffer = function() {
            try {
                var ve = d.inquire("buffer").Buffer;
                return ve.prototype.utf8Write ? ve : null
            } catch (ie) {
                return null
            }
        }(),
        d._Buffer_from = null,
        d._Buffer_allocUnsafe = null,
        d.newBuffer = function(ie) {
            return typeof ie == "number" ? d.Buffer ? d._Buffer_allocUnsafe(ie) : new d.Array(ie) : d.Buffer ? d._Buffer_from(ie) : typeof Uint8Array > "u" ? ie : new Uint8Array(ie)
        }
        ,
        d.Array = typeof Uint8Array < "u" ? Uint8Array : Array,
        d.Long = d.global.dcodeIO && d.global.dcodeIO.Long || d.global.Long || d.inquire("long"),
        d.key2Re = /^true|false|0|1$/,
        d.key32Re = /^-?(?:0|[1-9][0-9]*)$/,
        d.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,
        d.longToHash = function(ie) {
            return ie ? d.LongBits.from(ie).toHash() : d.LongBits.zeroHash
        }
        ,
        d.longFromHash = function(ie, ae) {
            var i = d.LongBits.fromHash(ie);
            return d.Long ? d.Long.fromBits(i.lo, i.hi, ae) : i.toNumber(!!ae)
        }
        ;
        function y(ve, ie, ae) {
            for (var i = Object.keys(ie), O = 0; O < i.length; ++O)
                (ve[i[O]] === void 0 || !ae) && (ve[i[O]] = ie[i[O]]);
            return ve
        }
        d.merge = y,
        d.lcFirst = function(ie) {
            return ie.charAt(0).toLowerCase() + ie.substring(1)
        }
        ;
        function ye(ve) {
            function ie(ae, i) {
                if (!(this instanceof ie))
                    return new ie(ae,i);
                Object.defineProperty(this, "message", {
                    get: function() {
                        return ae
                    }
                }),
                Error.captureStackTrace ? Error.captureStackTrace(this, ie) : Object.defineProperty(this, "stack", {
                    value: new Error().stack || ""
                }),
                i && y(this, i)
            }
            return ie.prototype = Object.create(Error.prototype, {
                constructor: {
                    value: ie,
                    writable: !0,
                    enumerable: !1,
                    configurable: !0
                },
                name: {
                    get: function() {
                        return ve
                    },
                    set: void 0,
                    enumerable: !1,
                    configurable: !0
                },
                toString: {
                    value: function() {
                        return this.name + ": " + this.message
                    },
                    writable: !0,
                    enumerable: !1,
                    configurable: !0
                }
            }),
            ie
        }
        d.newError = ye,
        d.ProtocolError = ye("ProtocolError"),
        d.oneOfGetter = function(ie) {
            for (var ae = {}, i = 0; i < ie.length; ++i)
                ae[ie[i]] = 1;
            return function() {
                for (var O = Object.keys(this), $ = O.length - 1; $ > -1; --$)
                    if (ae[O[$]] === 1 && this[O[$]] !== void 0 && this[O[$]] !== null)
                        return O[$]
            }
        }
        ,
        d.oneOfSetter = function(ie) {
            return function(ae) {
                for (var i = 0; i < ie.length; ++i)
                    ie[i] !== ae && delete this[ie[i]]
            }
        }
        ,
        d.toJSONOptions = {
            longs: String,
            enums: String,
            bytes: String,
            json: !0
        },
        d._configure = function() {
            var ve = d.Buffer;
            if (!ve) {
                d._Buffer_from = d._Buffer_allocUnsafe = null;
                return
            }
            d._Buffer_from = ve.from !== Uint8Array.from && ve.from || function(ae, i) {
                return new ve(ae,i)
            }
            ,
            d._Buffer_allocUnsafe = ve.allocUnsafe || function(ae) {
                return new ve(ae)
            }
        }
    }(minimal$1)),
    minimal$1
}
var writer = Writer$1, util$7 = requireMinimal(), BufferWriter$1, LongBits$1 = util$7.LongBits, base64 = util$7.base64, utf8$1 = util$7.utf8;
function Op(n, d, y) {
    this.fn = n,
    this.len = d,
    this.next = void 0,
    this.val = y
}
function noop() {}
function State(n) {
    this.head = n.head,
    this.tail = n.tail,
    this.len = n.len,
    this.next = n.states
}
function Writer$1() {
    this.len = 0,
    this.head = new Op(noop,0,0),
    this.tail = this.head,
    this.states = null
}
var create$1 = function n() {
    return util$7.Buffer ? function() {
        return (Writer$1.create = function() {
            return new BufferWriter$1
        }
        )()
    }
    : function() {
        return new Writer$1
    }
};
Writer$1.create = create$1();
Writer$1.alloc = function n(d) {
    return new util$7.Array(d)
}
;
util$7.Array !== Array && (Writer$1.alloc = util$7.pool(Writer$1.alloc, util$7.Array.prototype.subarray));
Writer$1.prototype._push = function n(d, y, ye) {
    return this.tail = this.tail.next = new Op(d,y,ye),
    this.len += y,
    this
}
;
function writeByte(n, d, y) {
    d[y] = n & 255
}
function writeVarint32(n, d, y) {
    for (; n > 127; )
        d[y++] = n & 127 | 128,
        n >>>= 7;
    d[y] = n
}
function VarintOp(n, d) {
    this.len = n,
    this.next = void 0,
    this.val = d
}
VarintOp.prototype = Object.create(Op.prototype);
VarintOp.prototype.fn = writeVarint32;
Writer$1.prototype.uint32 = function n(d) {
    return this.len += (this.tail = this.tail.next = new VarintOp((d = d >>> 0) < 128 ? 1 : d < 16384 ? 2 : d < 2097152 ? 3 : d < 268435456 ? 4 : 5,d)).len,
    this
}
;
Writer$1.prototype.int32 = function n(d) {
    return d < 0 ? this._push(writeVarint64, 10, LongBits$1.fromNumber(d)) : this.uint32(d)
}
;
Writer$1.prototype.sint32 = function n(d) {
    return this.uint32((d << 1 ^ d >> 31) >>> 0)
}
;
function writeVarint64(n, d, y) {
    for (; n.hi; )
        d[y++] = n.lo & 127 | 128,
        n.lo = (n.lo >>> 7 | n.hi << 25) >>> 0,
        n.hi >>>= 7;
    for (; n.lo > 127; )
        d[y++] = n.lo & 127 | 128,
        n.lo = n.lo >>> 7;
    d[y++] = n.lo
}
Writer$1.prototype.uint64 = function n(d) {
    var y = LongBits$1.from(d);
    return this._push(writeVarint64, y.length(), y)
}
;
Writer$1.prototype.int64 = Writer$1.prototype.uint64;
Writer$1.prototype.sint64 = function n(d) {
    var y = LongBits$1.from(d).zzEncode();
    return this._push(writeVarint64, y.length(), y)
}
;
Writer$1.prototype.bool = function n(d) {
    return this._push(writeByte, 1, d ? 1 : 0)
}
;
function writeFixed32(n, d, y) {
    d[y] = n & 255,
    d[y + 1] = n >>> 8 & 255,
    d[y + 2] = n >>> 16 & 255,
    d[y + 3] = n >>> 24
}
Writer$1.prototype.fixed32 = function n(d) {
    return this._push(writeFixed32, 4, d >>> 0)
}
;
Writer$1.prototype.sfixed32 = Writer$1.prototype.fixed32;
Writer$1.prototype.fixed64 = function n(d) {
    var y = LongBits$1.from(d);
    return this._push(writeFixed32, 4, y.lo)._push(writeFixed32, 4, y.hi)
}
;
Writer$1.prototype.sfixed64 = Writer$1.prototype.fixed64;
Writer$1.prototype.float = function n(d) {
    return this._push(util$7.float.writeFloatLE, 4, d)
}
;
Writer$1.prototype.double = function n(d) {
    return this._push(util$7.float.writeDoubleLE, 8, d)
}
;
var writeBytes = util$7.Array.prototype.set ? function n(d, y, ye) {
    y.set(d, ye)
}
: function n(d, y, ye) {
    for (var ve = 0; ve < d.length; ++ve)
        y[ye + ve] = d[ve]
}
;
Writer$1.prototype.bytes = function n(d) {
    var y = d.length >>> 0;
    if (!y)
        return this._push(writeByte, 1, 0);
    if (util$7.isString(d)) {
        var ye = Writer$1.alloc(y = base64.length(d));
        base64.decode(d, ye, 0),
        d = ye
    }
    return this.uint32(y)._push(writeBytes, y, d)
}
;
Writer$1.prototype.string = function n(d) {
    var y = utf8$1.length(d);
    return y ? this.uint32(y)._push(utf8$1.write, y, d) : this._push(writeByte, 1, 0)
}
;
Writer$1.prototype.fork = function n() {
    return this.states = new State(this),
    this.head = this.tail = new Op(noop,0,0),
    this.len = 0,
    this
}
;
Writer$1.prototype.reset = function n() {
    return this.states ? (this.head = this.states.head,
    this.tail = this.states.tail,
    this.len = this.states.len,
    this.states = this.states.next) : (this.head = this.tail = new Op(noop,0,0),
    this.len = 0),
    this
}
;
Writer$1.prototype.ldelim = function n() {
    var d = this.head
      , y = this.tail
      , ye = this.len;
    return this.reset().uint32(ye),
    ye && (this.tail.next = d.next,
    this.tail = y,
    this.len += ye),
    this
}
;
Writer$1.prototype.finish = function n() {
    for (var d = this.head.next, y = this.constructor.alloc(this.len), ye = 0; d; )
        d.fn(d.val, y, ye),
        ye += d.len,
        d = d.next;
    return y
}
;
Writer$1._configure = function(n) {
    BufferWriter$1 = n,
    Writer$1.create = create$1(),
    BufferWriter$1._configure()
}
;
var writer_buffer = BufferWriter
  , Writer = writer;
(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;
var util$6 = requireMinimal();
function BufferWriter() {
    Writer.call(this)
}
BufferWriter._configure = function() {
    BufferWriter.alloc = util$6._Buffer_allocUnsafe,
    BufferWriter.writeBytesBuffer = util$6.Buffer && util$6.Buffer.prototype instanceof Uint8Array && util$6.Buffer.prototype.set.name === "set" ? function(d, y, ye) {
        y.set(d, ye)
    }
    : function(d, y, ye) {
        if (d.copy)
            d.copy(y, ye, 0, d.length);
        else
            for (var ve = 0; ve < d.length; )
                y[ye++] = d[ve++]
    }
}
;
BufferWriter.prototype.bytes = function n(d) {
    util$6.isString(d) && (d = util$6._Buffer_from(d, "base64"));
    var y = d.length >>> 0;
    return this.uint32(y),
    y && this._push(BufferWriter.writeBytesBuffer, y, d),
    this
}
;
function writeStringBuffer(n, d, y) {
    n.length < 40 ? util$6.utf8.write(n, d, y) : d.utf8Write ? d.utf8Write(n, y) : d.write(n, y)
}
BufferWriter.prototype.string = function n(d) {
    var y = util$6.Buffer.byteLength(d);
    return this.uint32(y),
    y && this._push(writeStringBuffer, y, d),
    this
}
;
BufferWriter._configure();
var reader = Reader$1, util$5 = requireMinimal(), BufferReader$1, LongBits = util$5.LongBits, utf8 = util$5.utf8;
function indexOutOfRange(n, d) {
    return RangeError("index out of range: " + n.pos + " + " + (d || 1) + " > " + n.len)
}
function Reader$1(n) {
    this.buf = n,
    this.pos = 0,
    this.len = n.length
}
var create_array = typeof Uint8Array < "u" ? function n(d) {
    if (d instanceof Uint8Array || Array.isArray(d))
        return new Reader$1(d);
    throw Error("illegal buffer")
}
: function n(d) {
    if (Array.isArray(d))
        return new Reader$1(d);
    throw Error("illegal buffer")
}
  , create = function n() {
    return util$5.Buffer ? function(y) {
        return (Reader$1.create = function(ve) {
            return util$5.Buffer.isBuffer(ve) ? new BufferReader$1(ve) : create_array(ve)
        }
        )(y)
    }
    : create_array
};
Reader$1.create = create();
Reader$1.prototype._slice = util$5.Array.prototype.subarray || util$5.Array.prototype.slice;
Reader$1.prototype.uint32 = function n() {
    var d = 4294967295;
    return function() {
        if (d = (this.buf[this.pos] & 127) >>> 0,
        this.buf[this.pos++] < 128 || (d = (d | (this.buf[this.pos] & 127) << 7) >>> 0,
        this.buf[this.pos++] < 128) || (d = (d | (this.buf[this.pos] & 127) << 14) >>> 0,
        this.buf[this.pos++] < 128) || (d = (d | (this.buf[this.pos] & 127) << 21) >>> 0,
        this.buf[this.pos++] < 128) || (d = (d | (this.buf[this.pos] & 15) << 28) >>> 0,
        this.buf[this.pos++] < 128))
            return d;
        if ((this.pos += 5) > this.len)
            throw this.pos = this.len,
            indexOutOfRange(this, 10);
        return d
    }
}();
Reader$1.prototype.int32 = function n() {
    return this.uint32() | 0
}
;
Reader$1.prototype.sint32 = function n() {
    var d = this.uint32();
    return d >>> 1 ^ -(d & 1) | 0
}
;
function readLongVarint() {
    var n = new LongBits(0,0)
      , d = 0;
    if (this.len - this.pos > 4) {
        for (; d < 4; ++d)
            if (n.lo = (n.lo | (this.buf[this.pos] & 127) << d * 7) >>> 0,
            this.buf[this.pos++] < 128)
                return n;
        if (n.lo = (n.lo | (this.buf[this.pos] & 127) << 28) >>> 0,
        n.hi = (n.hi | (this.buf[this.pos] & 127) >> 4) >>> 0,
        this.buf[this.pos++] < 128)
            return n;
        d = 0
    } else {
        for (; d < 3; ++d) {
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            if (n.lo = (n.lo | (this.buf[this.pos] & 127) << d * 7) >>> 0,
            this.buf[this.pos++] < 128)
                return n
        }
        return n.lo = (n.lo | (this.buf[this.pos++] & 127) << d * 7) >>> 0,
        n
    }
    if (this.len - this.pos > 4) {
        for (; d < 5; ++d)
            if (n.hi = (n.hi | (this.buf[this.pos] & 127) << d * 7 + 3) >>> 0,
            this.buf[this.pos++] < 128)
                return n
    } else
        for (; d < 5; ++d) {
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            if (n.hi = (n.hi | (this.buf[this.pos] & 127) << d * 7 + 3) >>> 0,
            this.buf[this.pos++] < 128)
                return n
        }
    throw Error("invalid varint encoding")
}
Reader$1.prototype.bool = function n() {
    return this.uint32() !== 0
}
;
function readFixed32_end(n, d) {
    return (n[d - 4] | n[d - 3] << 8 | n[d - 2] << 16 | n[d - 1] << 24) >>> 0
}
Reader$1.prototype.fixed32 = function n() {
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
    return readFixed32_end(this.buf, this.pos += 4)
}
;
Reader$1.prototype.sfixed32 = function n() {
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
    return readFixed32_end(this.buf, this.pos += 4) | 0
}
;
function readFixed64() {
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 8);
    return new LongBits(readFixed32_end(this.buf, this.pos += 4),readFixed32_end(this.buf, this.pos += 4))
}
Reader$1.prototype.float = function n() {
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
    var d = util$5.float.readFloatLE(this.buf, this.pos);
    return this.pos += 4,
    d
}
;
Reader$1.prototype.double = function n() {
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 4);
    var d = util$5.float.readDoubleLE(this.buf, this.pos);
    return this.pos += 8,
    d
}
;
Reader$1.prototype.bytes = function n() {
    var d = this.uint32()
      , y = this.pos
      , ye = this.pos + d;
    if (ye > this.len)
        throw indexOutOfRange(this, d);
    return this.pos += d,
    Array.isArray(this.buf) ? this.buf.slice(y, ye) : y === ye ? new this.buf.constructor(0) : this._slice.call(this.buf, y, ye)
}
;
Reader$1.prototype.string = function n() {
    var d = this.bytes();
    return utf8.read(d, 0, d.length)
}
;
Reader$1.prototype.skip = function n(d) {
    if (typeof d == "number") {
        if (this.pos + d > this.len)
            throw indexOutOfRange(this, d);
        this.pos += d
    } else
        do
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
        while (this.buf[this.pos++] & 128);
    return this
}
;
Reader$1.prototype.skipType = function(n) {
    switch (n) {
    case 0:
        this.skip();
        break;
    case 1:
        this.skip(8);
        break;
    case 2:
        this.skip(this.uint32());
        break;
    case 3:
        for (; (n = this.uint32() & 7) !== 4; )
            this.skipType(n);
        break;
    case 5:
        this.skip(4);
        break;
    default:
        throw Error("invalid wire type " + n + " at offset " + this.pos)
    }
    return this
}
;
Reader$1._configure = function(n) {
    BufferReader$1 = n,
    Reader$1.create = create(),
    BufferReader$1._configure();
    var d = util$5.Long ? "toLong" : "toNumber";
    util$5.merge(Reader$1.prototype, {
        int64: function() {
            return readLongVarint.call(this)[d](!1)
        },
        uint64: function() {
            return readLongVarint.call(this)[d](!0)
        },
        sint64: function() {
            return readLongVarint.call(this).zzDecode()[d](!1)
        },
        fixed64: function() {
            return readFixed64.call(this)[d](!0)
        },
        sfixed64: function() {
            return readFixed64.call(this)[d](!1)
        }
    })
}
;
var reader_buffer = BufferReader
  , Reader = reader;
(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;
var util$4 = requireMinimal();
function BufferReader(n) {
    Reader.call(this, n)
}
BufferReader._configure = function() {
    util$4.Buffer && (BufferReader.prototype._slice = util$4.Buffer.prototype.slice)
}
;
BufferReader.prototype.string = function n() {
    var d = this.uint32();
    return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + d, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + d, this.len))
}
;
BufferReader._configure();
var rpc = {}
  , service$2 = Service$1
  , util$3 = requireMinimal();
(Service$1.prototype = Object.create(util$3.EventEmitter.prototype)).constructor = Service$1;
function Service$1(n, d, y) {
    if (typeof n != "function")
        throw TypeError("rpcImpl must be a function");
    util$3.EventEmitter.call(this),
    this.rpcImpl = n,
    this.requestDelimited = !!d,
    this.responseDelimited = !!y
}
Service$1.prototype.rpcCall = function n(d, y, ye, ve, ie) {
    if (!ve)
        throw TypeError("request must be specified");
    var ae = this;
    if (!ie)
        return util$3.asPromise(n, ae, d, y, ye, ve);
    if (!ae.rpcImpl) {
        setTimeout(function() {
            ie(Error("already ended"))
        }, 0);
        return
    }
    try {
        return ae.rpcImpl(d, y[ae.requestDelimited ? "encodeDelimited" : "encode"](ve).finish(), function(O, $) {
            if (O)
                return ae.emit("error", O, d),
                ie(O);
            if ($ === null) {
                ae.end(!0);
                return
            }
            if (!($ instanceof ye))
                try {
                    $ = ye[ae.responseDelimited ? "decodeDelimited" : "decode"]($)
                } catch (Te) {
                    return ae.emit("error", Te, d),
                    ie(Te)
                }
            return ae.emit("data", $, d),
            ie(null, $)
        })
    } catch (i) {
        ae.emit("error", i, d),
        setTimeout(function() {
            ie(i)
        }, 0);
        return
    }
}
;
Service$1.prototype.end = function n(d) {
    return this.rpcImpl && (d || this.rpcImpl(null, null, null),
    this.rpcImpl = null,
    this.emit("end").off()),
    this
}
;
(function(n) {
    var d = n;
    d.Service = service$2
}
)(rpc);
var roots = {};
(function(n) {
    var d = n;
    d.build = "minimal",
    d.Writer = writer,
    d.BufferWriter = writer_buffer,
    d.Reader = reader,
    d.BufferReader = reader_buffer,
    d.util = requireMinimal(),
    d.rpc = rpc,
    d.roots = roots,
    d.configure = y;
    function y() {
        d.util._configure(),
        d.Writer._configure(d.BufferWriter),
        d.Reader._configure(d.BufferReader)
    }
    y()
}
)(indexMinimal);
var minimal = indexMinimal;
const $Reader = minimal.Reader
  , $Writer = minimal.Writer
  , $util = minimal.util
  , $root = minimal.roots.dm_pb || (minimal.roots.dm_pb = {})
  , bilibili = $root.bilibili = (()=>{
    const n = {};
    return n.community = function() {
        const d = {};
        return d.service = function() {
            const y = {};
            return y.dm = function() {
                const ye = {};
                return ye.v1 = function() {
                    const ve = {};
                    return ve.DM = function() {
                        function ie(ae, i, O) {
                            minimal.rpc.Service.call(this, ae, i, O)
                        }
                        return (ie.prototype = Object.create(minimal.rpc.Service.prototype)).constructor = ie,
                        ie.create = function(i, O, $) {
                            return new this(i,O,$)
                        }
                        ,
                        Object.defineProperty(ie.prototype.dmView = function ae(i, O) {
                            return this.rpcCall(ae, $root.bilibili.community.service.dm.v1.DmViewReq, $root.bilibili.community.service.dm.v1.DmViewReply, i, O)
                        }
                        , "name", {
                            value: "DmView"
                        }),
                        ie
                    }(),
                    ve.DmViewReq = function() {
                        function ie(ae) {
                            if (ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.pid = $util.Long ? $util.Long.fromBits(0, 0, !1) : 0,
                        ie.prototype.oid = $util.Long ? $util.Long.fromBits(0, 0, !1) : 0,
                        ie.prototype.type = 0,
                        ie.prototype.spmid = "",
                        ie.prototype.isHardBoot = 0,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            return O || (O = $Writer.create()),
                            i.pid != null && Object.hasOwnProperty.call(i, "pid") && O.uint32(8).int64(i.pid),
                            i.oid != null && Object.hasOwnProperty.call(i, "oid") && O.uint32(16).int64(i.oid),
                            i.type != null && Object.hasOwnProperty.call(i, "type") && O.uint32(24).int32(i.type),
                            i.spmid != null && Object.hasOwnProperty.call(i, "spmid") && O.uint32(34).string(i.spmid),
                            i.isHardBoot != null && Object.hasOwnProperty.call(i, "isHardBoot") && O.uint32(40).int32(i.isHardBoot),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.DmViewReq;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 1:
                                    {
                                        Te.pid = i.int64();
                                        break
                                    }
                                case 2:
                                    {
                                        Te.oid = i.int64();
                                        break
                                    }
                                case 3:
                                    {
                                        Te.type = i.int32();
                                        break
                                    }
                                case 4:
                                    {
                                        Te.spmid = i.string();
                                        break
                                    }
                                case 5:
                                    {
                                        Te.isHardBoot = i.int32();
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            return typeof i != "object" || i === null ? "object expected" : i.pid != null && i.hasOwnProperty("pid") && !$util.isInteger(i.pid) && !(i.pid && $util.isInteger(i.pid.low) && $util.isInteger(i.pid.high)) ? "pid: integer|Long expected" : i.oid != null && i.hasOwnProperty("oid") && !$util.isInteger(i.oid) && !(i.oid && $util.isInteger(i.oid.low) && $util.isInteger(i.oid.high)) ? "oid: integer|Long expected" : i.type != null && i.hasOwnProperty("type") && !$util.isInteger(i.type) ? "type: integer expected" : i.spmid != null && i.hasOwnProperty("spmid") && !$util.isString(i.spmid) ? "spmid: string expected" : i.isHardBoot != null && i.hasOwnProperty("isHardBoot") && !$util.isInteger(i.isHardBoot) ? "isHardBoot: integer expected" : null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.DmViewReq)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.DmViewReq;
                            return i.pid != null && ($util.Long ? (O.pid = $util.Long.fromValue(i.pid)).unsigned = !1 : typeof i.pid == "string" ? O.pid = parseInt(i.pid, 10) : typeof i.pid == "number" ? O.pid = i.pid : typeof i.pid == "object" && (O.pid = new $util.LongBits(i.pid.low >>> 0,i.pid.high >>> 0).toNumber())),
                            i.oid != null && ($util.Long ? (O.oid = $util.Long.fromValue(i.oid)).unsigned = !1 : typeof i.oid == "string" ? O.oid = parseInt(i.oid, 10) : typeof i.oid == "number" ? O.oid = i.oid : typeof i.oid == "object" && (O.oid = new $util.LongBits(i.oid.low >>> 0,i.oid.high >>> 0).toNumber())),
                            i.type != null && (O.type = i.type | 0),
                            i.spmid != null && (O.spmid = String(i.spmid)),
                            i.isHardBoot != null && (O.isHardBoot = i.isHardBoot | 0),
                            O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            if (O.defaults) {
                                if ($util.Long) {
                                    let Te = new $util.Long(0,0,!1);
                                    $.pid = O.longs === String ? Te.toString() : O.longs === Number ? Te.toNumber() : Te
                                } else
                                    $.pid = O.longs === String ? "0" : 0;
                                if ($util.Long) {
                                    let Te = new $util.Long(0,0,!1);
                                    $.oid = O.longs === String ? Te.toString() : O.longs === Number ? Te.toNumber() : Te
                                } else
                                    $.oid = O.longs === String ? "0" : 0;
                                $.type = 0,
                                $.spmid = "",
                                $.isHardBoot = 0
                            }
                            return i.pid != null && i.hasOwnProperty("pid") && (typeof i.pid == "number" ? $.pid = O.longs === String ? String(i.pid) : i.pid : $.pid = O.longs === String ? $util.Long.prototype.toString.call(i.pid) : O.longs === Number ? new $util.LongBits(i.pid.low >>> 0,i.pid.high >>> 0).toNumber() : i.pid),
                            i.oid != null && i.hasOwnProperty("oid") && (typeof i.oid == "number" ? $.oid = O.longs === String ? String(i.oid) : i.oid : $.oid = O.longs === String ? $util.Long.prototype.toString.call(i.oid) : O.longs === Number ? new $util.LongBits(i.oid.low >>> 0,i.oid.high >>> 0).toNumber() : i.oid),
                            i.type != null && i.hasOwnProperty("type") && ($.type = i.type),
                            i.spmid != null && i.hasOwnProperty("spmid") && ($.spmid = i.spmid),
                            i.isHardBoot != null && i.hasOwnProperty("isHardBoot") && ($.isHardBoot = i.isHardBoot),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.DmViewReq"
                        }
                        ,
                        ie
                    }(),
                    ve.DmViewReply = function() {
                        function ie(ae) {
                            if (ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.subtitle = null,
                        ie.prototype.playerConfig = null,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            return O || (O = $Writer.create()),
                            i.subtitle != null && Object.hasOwnProperty.call(i, "subtitle") && $root.bilibili.community.service.dm.v1.VideoSubtitle.encode(i.subtitle, O.uint32(26).fork()).ldelim(),
                            i.playerConfig != null && Object.hasOwnProperty.call(i, "playerConfig") && $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig.encode(i.playerConfig, O.uint32(50).fork()).ldelim(),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.DmViewReply;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 3:
                                    {
                                        Te.subtitle = $root.bilibili.community.service.dm.v1.VideoSubtitle.decode(i, i.uint32());
                                        break
                                    }
                                case 6:
                                    {
                                        Te.playerConfig = $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig.decode(i, i.uint32());
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            if (typeof i != "object" || i === null)
                                return "object expected";
                            if (i.subtitle != null && i.hasOwnProperty("subtitle")) {
                                let O = $root.bilibili.community.service.dm.v1.VideoSubtitle.verify(i.subtitle);
                                if (O)
                                    return "subtitle." + O
                            }
                            if (i.playerConfig != null && i.hasOwnProperty("playerConfig")) {
                                let O = $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig.verify(i.playerConfig);
                                if (O)
                                    return "playerConfig." + O
                            }
                            return null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.DmViewReply)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.DmViewReply;
                            if (i.subtitle != null) {
                                if (typeof i.subtitle != "object")
                                    throw TypeError(".bilibili.community.service.dm.v1.DmViewReply.subtitle: object expected");
                                O.subtitle = $root.bilibili.community.service.dm.v1.VideoSubtitle.fromObject(i.subtitle)
                            }
                            if (i.playerConfig != null) {
                                if (typeof i.playerConfig != "object")
                                    throw TypeError(".bilibili.community.service.dm.v1.DmViewReply.playerConfig: object expected");
                                O.playerConfig = $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig.fromObject(i.playerConfig)
                            }
                            return O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            return O.defaults && ($.subtitle = null,
                            $.playerConfig = null),
                            i.subtitle != null && i.hasOwnProperty("subtitle") && ($.subtitle = $root.bilibili.community.service.dm.v1.VideoSubtitle.toObject(i.subtitle, O)),
                            i.playerConfig != null && i.hasOwnProperty("playerConfig") && ($.playerConfig = $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig.toObject(i.playerConfig, O)),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.DmViewReply"
                        }
                        ,
                        ie
                    }(),
                    ve.DanmuPlayerViewConfig = function() {
                        function ie(ae) {
                            if (ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.danmukuPlayerConfig = null,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            return O || (O = $Writer.create()),
                            i.danmukuPlayerConfig != null && Object.hasOwnProperty.call(i, "danmukuPlayerConfig") && $root.bilibili.community.service.dm.v1.DanmuPlayerConfig.encode(i.danmukuPlayerConfig, O.uint32(18).fork()).ldelim(),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 2:
                                    {
                                        Te.danmukuPlayerConfig = $root.bilibili.community.service.dm.v1.DanmuPlayerConfig.decode(i, i.uint32());
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            if (typeof i != "object" || i === null)
                                return "object expected";
                            if (i.danmukuPlayerConfig != null && i.hasOwnProperty("danmukuPlayerConfig")) {
                                let O = $root.bilibili.community.service.dm.v1.DanmuPlayerConfig.verify(i.danmukuPlayerConfig);
                                if (O)
                                    return "danmukuPlayerConfig." + O
                            }
                            return null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.DanmuPlayerViewConfig;
                            if (i.danmukuPlayerConfig != null) {
                                if (typeof i.danmukuPlayerConfig != "object")
                                    throw TypeError(".bilibili.community.service.dm.v1.DanmuPlayerViewConfig.danmukuPlayerConfig: object expected");
                                O.danmukuPlayerConfig = $root.bilibili.community.service.dm.v1.DanmuPlayerConfig.fromObject(i.danmukuPlayerConfig)
                            }
                            return O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            return O.defaults && ($.danmukuPlayerConfig = null),
                            i.danmukuPlayerConfig != null && i.hasOwnProperty("danmukuPlayerConfig") && ($.danmukuPlayerConfig = $root.bilibili.community.service.dm.v1.DanmuPlayerConfig.toObject(i.danmukuPlayerConfig, O)),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.DanmuPlayerViewConfig"
                        }
                        ,
                        ie
                    }(),
                    ve.DanmuPlayerConfig = function() {
                        function ie(ae) {
                            if (ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.playerDanmakuSwitch = !1,
                        ie.prototype.playerDanmakuSwitchSave = !1,
                        ie.prototype.playerDanmakuUseDefaultConfig = !1,
                        ie.prototype.playerDanmakuAiRecommendedSwitch = !1,
                        ie.prototype.playerDanmakuAiRecommendedLevel = 0,
                        ie.prototype.playerDanmakuBlocktop = !1,
                        ie.prototype.playerDanmakuBlockscroll = !1,
                        ie.prototype.playerDanmakuBlockbottom = !1,
                        ie.prototype.playerDanmakuBlockcolorful = !1,
                        ie.prototype.playerDanmakuBlockrepeat = !1,
                        ie.prototype.playerDanmakuBlockspecial = !1,
                        ie.prototype.playerDanmakuOpacity = 0,
                        ie.prototype.playerDanmakuScalingfactor = 0,
                        ie.prototype.playerDanmakuDomain = 0,
                        ie.prototype.playerDanmakuSpeed = 0,
                        ie.prototype.playerDanmakuEnableblocklist = !1,
                        ie.prototype.inlinePlayerDanmakuSwitch = !1,
                        ie.prototype.inlinePlayerDanmakuConfig = 0,
                        ie.prototype.playerDanmakuIosSwitchSave = 0,
                        ie.prototype.playerDanmakuSeniorModeSwitch = 0,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            return O || (O = $Writer.create()),
                            i.playerDanmakuSwitch != null && Object.hasOwnProperty.call(i, "playerDanmakuSwitch") && O.uint32(8).bool(i.playerDanmakuSwitch),
                            i.playerDanmakuSwitchSave != null && Object.hasOwnProperty.call(i, "playerDanmakuSwitchSave") && O.uint32(16).bool(i.playerDanmakuSwitchSave),
                            i.playerDanmakuUseDefaultConfig != null && Object.hasOwnProperty.call(i, "playerDanmakuUseDefaultConfig") && O.uint32(24).bool(i.playerDanmakuUseDefaultConfig),
                            i.playerDanmakuAiRecommendedSwitch != null && Object.hasOwnProperty.call(i, "playerDanmakuAiRecommendedSwitch") && O.uint32(32).bool(i.playerDanmakuAiRecommendedSwitch),
                            i.playerDanmakuAiRecommendedLevel != null && Object.hasOwnProperty.call(i, "playerDanmakuAiRecommendedLevel") && O.uint32(40).int32(i.playerDanmakuAiRecommendedLevel),
                            i.playerDanmakuBlocktop != null && Object.hasOwnProperty.call(i, "playerDanmakuBlocktop") && O.uint32(48).bool(i.playerDanmakuBlocktop),
                            i.playerDanmakuBlockscroll != null && Object.hasOwnProperty.call(i, "playerDanmakuBlockscroll") && O.uint32(56).bool(i.playerDanmakuBlockscroll),
                            i.playerDanmakuBlockbottom != null && Object.hasOwnProperty.call(i, "playerDanmakuBlockbottom") && O.uint32(64).bool(i.playerDanmakuBlockbottom),
                            i.playerDanmakuBlockcolorful != null && Object.hasOwnProperty.call(i, "playerDanmakuBlockcolorful") && O.uint32(72).bool(i.playerDanmakuBlockcolorful),
                            i.playerDanmakuBlockrepeat != null && Object.hasOwnProperty.call(i, "playerDanmakuBlockrepeat") && O.uint32(80).bool(i.playerDanmakuBlockrepeat),
                            i.playerDanmakuBlockspecial != null && Object.hasOwnProperty.call(i, "playerDanmakuBlockspecial") && O.uint32(88).bool(i.playerDanmakuBlockspecial),
                            i.playerDanmakuOpacity != null && Object.hasOwnProperty.call(i, "playerDanmakuOpacity") && O.uint32(101).float(i.playerDanmakuOpacity),
                            i.playerDanmakuScalingfactor != null && Object.hasOwnProperty.call(i, "playerDanmakuScalingfactor") && O.uint32(109).float(i.playerDanmakuScalingfactor),
                            i.playerDanmakuDomain != null && Object.hasOwnProperty.call(i, "playerDanmakuDomain") && O.uint32(117).float(i.playerDanmakuDomain),
                            i.playerDanmakuSpeed != null && Object.hasOwnProperty.call(i, "playerDanmakuSpeed") && O.uint32(120).int32(i.playerDanmakuSpeed),
                            i.playerDanmakuEnableblocklist != null && Object.hasOwnProperty.call(i, "playerDanmakuEnableblocklist") && O.uint32(128).bool(i.playerDanmakuEnableblocklist),
                            i.inlinePlayerDanmakuSwitch != null && Object.hasOwnProperty.call(i, "inlinePlayerDanmakuSwitch") && O.uint32(136).bool(i.inlinePlayerDanmakuSwitch),
                            i.inlinePlayerDanmakuConfig != null && Object.hasOwnProperty.call(i, "inlinePlayerDanmakuConfig") && O.uint32(144).int32(i.inlinePlayerDanmakuConfig),
                            i.playerDanmakuIosSwitchSave != null && Object.hasOwnProperty.call(i, "playerDanmakuIosSwitchSave") && O.uint32(152).int32(i.playerDanmakuIosSwitchSave),
                            i.playerDanmakuSeniorModeSwitch != null && Object.hasOwnProperty.call(i, "playerDanmakuSeniorModeSwitch") && O.uint32(160).int32(i.playerDanmakuSeniorModeSwitch),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.DanmuPlayerConfig;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 1:
                                    {
                                        Te.playerDanmakuSwitch = i.bool();
                                        break
                                    }
                                case 2:
                                    {
                                        Te.playerDanmakuSwitchSave = i.bool();
                                        break
                                    }
                                case 3:
                                    {
                                        Te.playerDanmakuUseDefaultConfig = i.bool();
                                        break
                                    }
                                case 4:
                                    {
                                        Te.playerDanmakuAiRecommendedSwitch = i.bool();
                                        break
                                    }
                                case 5:
                                    {
                                        Te.playerDanmakuAiRecommendedLevel = i.int32();
                                        break
                                    }
                                case 6:
                                    {
                                        Te.playerDanmakuBlocktop = i.bool();
                                        break
                                    }
                                case 7:
                                    {
                                        Te.playerDanmakuBlockscroll = i.bool();
                                        break
                                    }
                                case 8:
                                    {
                                        Te.playerDanmakuBlockbottom = i.bool();
                                        break
                                    }
                                case 9:
                                    {
                                        Te.playerDanmakuBlockcolorful = i.bool();
                                        break
                                    }
                                case 10:
                                    {
                                        Te.playerDanmakuBlockrepeat = i.bool();
                                        break
                                    }
                                case 11:
                                    {
                                        Te.playerDanmakuBlockspecial = i.bool();
                                        break
                                    }
                                case 12:
                                    {
                                        Te.playerDanmakuOpacity = i.float();
                                        break
                                    }
                                case 13:
                                    {
                                        Te.playerDanmakuScalingfactor = i.float();
                                        break
                                    }
                                case 14:
                                    {
                                        Te.playerDanmakuDomain = i.float();
                                        break
                                    }
                                case 15:
                                    {
                                        Te.playerDanmakuSpeed = i.int32();
                                        break
                                    }
                                case 16:
                                    {
                                        Te.playerDanmakuEnableblocklist = i.bool();
                                        break
                                    }
                                case 17:
                                    {
                                        Te.inlinePlayerDanmakuSwitch = i.bool();
                                        break
                                    }
                                case 18:
                                    {
                                        Te.inlinePlayerDanmakuConfig = i.int32();
                                        break
                                    }
                                case 19:
                                    {
                                        Te.playerDanmakuIosSwitchSave = i.int32();
                                        break
                                    }
                                case 20:
                                    {
                                        Te.playerDanmakuSeniorModeSwitch = i.int32();
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            return typeof i != "object" || i === null ? "object expected" : i.playerDanmakuSwitch != null && i.hasOwnProperty("playerDanmakuSwitch") && typeof i.playerDanmakuSwitch != "boolean" ? "playerDanmakuSwitch: boolean expected" : i.playerDanmakuSwitchSave != null && i.hasOwnProperty("playerDanmakuSwitchSave") && typeof i.playerDanmakuSwitchSave != "boolean" ? "playerDanmakuSwitchSave: boolean expected" : i.playerDanmakuUseDefaultConfig != null && i.hasOwnProperty("playerDanmakuUseDefaultConfig") && typeof i.playerDanmakuUseDefaultConfig != "boolean" ? "playerDanmakuUseDefaultConfig: boolean expected" : i.playerDanmakuAiRecommendedSwitch != null && i.hasOwnProperty("playerDanmakuAiRecommendedSwitch") && typeof i.playerDanmakuAiRecommendedSwitch != "boolean" ? "playerDanmakuAiRecommendedSwitch: boolean expected" : i.playerDanmakuAiRecommendedLevel != null && i.hasOwnProperty("playerDanmakuAiRecommendedLevel") && !$util.isInteger(i.playerDanmakuAiRecommendedLevel) ? "playerDanmakuAiRecommendedLevel: integer expected" : i.playerDanmakuBlocktop != null && i.hasOwnProperty("playerDanmakuBlocktop") && typeof i.playerDanmakuBlocktop != "boolean" ? "playerDanmakuBlocktop: boolean expected" : i.playerDanmakuBlockscroll != null && i.hasOwnProperty("playerDanmakuBlockscroll") && typeof i.playerDanmakuBlockscroll != "boolean" ? "playerDanmakuBlockscroll: boolean expected" : i.playerDanmakuBlockbottom != null && i.hasOwnProperty("playerDanmakuBlockbottom") && typeof i.playerDanmakuBlockbottom != "boolean" ? "playerDanmakuBlockbottom: boolean expected" : i.playerDanmakuBlockcolorful != null && i.hasOwnProperty("playerDanmakuBlockcolorful") && typeof i.playerDanmakuBlockcolorful != "boolean" ? "playerDanmakuBlockcolorful: boolean expected" : i.playerDanmakuBlockrepeat != null && i.hasOwnProperty("playerDanmakuBlockrepeat") && typeof i.playerDanmakuBlockrepeat != "boolean" ? "playerDanmakuBlockrepeat: boolean expected" : i.playerDanmakuBlockspecial != null && i.hasOwnProperty("playerDanmakuBlockspecial") && typeof i.playerDanmakuBlockspecial != "boolean" ? "playerDanmakuBlockspecial: boolean expected" : i.playerDanmakuOpacity != null && i.hasOwnProperty("playerDanmakuOpacity") && typeof i.playerDanmakuOpacity != "number" ? "playerDanmakuOpacity: number expected" : i.playerDanmakuScalingfactor != null && i.hasOwnProperty("playerDanmakuScalingfactor") && typeof i.playerDanmakuScalingfactor != "number" ? "playerDanmakuScalingfactor: number expected" : i.playerDanmakuDomain != null && i.hasOwnProperty("playerDanmakuDomain") && typeof i.playerDanmakuDomain != "number" ? "playerDanmakuDomain: number expected" : i.playerDanmakuSpeed != null && i.hasOwnProperty("playerDanmakuSpeed") && !$util.isInteger(i.playerDanmakuSpeed) ? "playerDanmakuSpeed: integer expected" : i.playerDanmakuEnableblocklist != null && i.hasOwnProperty("playerDanmakuEnableblocklist") && typeof i.playerDanmakuEnableblocklist != "boolean" ? "playerDanmakuEnableblocklist: boolean expected" : i.inlinePlayerDanmakuSwitch != null && i.hasOwnProperty("inlinePlayerDanmakuSwitch") && typeof i.inlinePlayerDanmakuSwitch != "boolean" ? "inlinePlayerDanmakuSwitch: boolean expected" : i.inlinePlayerDanmakuConfig != null && i.hasOwnProperty("inlinePlayerDanmakuConfig") && !$util.isInteger(i.inlinePlayerDanmakuConfig) ? "inlinePlayerDanmakuConfig: integer expected" : i.playerDanmakuIosSwitchSave != null && i.hasOwnProperty("playerDanmakuIosSwitchSave") && !$util.isInteger(i.playerDanmakuIosSwitchSave) ? "playerDanmakuIosSwitchSave: integer expected" : i.playerDanmakuSeniorModeSwitch != null && i.hasOwnProperty("playerDanmakuSeniorModeSwitch") && !$util.isInteger(i.playerDanmakuSeniorModeSwitch) ? "playerDanmakuSeniorModeSwitch: integer expected" : null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.DanmuPlayerConfig)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.DanmuPlayerConfig;
                            return i.playerDanmakuSwitch != null && (O.playerDanmakuSwitch = !!i.playerDanmakuSwitch),
                            i.playerDanmakuSwitchSave != null && (O.playerDanmakuSwitchSave = !!i.playerDanmakuSwitchSave),
                            i.playerDanmakuUseDefaultConfig != null && (O.playerDanmakuUseDefaultConfig = !!i.playerDanmakuUseDefaultConfig),
                            i.playerDanmakuAiRecommendedSwitch != null && (O.playerDanmakuAiRecommendedSwitch = !!i.playerDanmakuAiRecommendedSwitch),
                            i.playerDanmakuAiRecommendedLevel != null && (O.playerDanmakuAiRecommendedLevel = i.playerDanmakuAiRecommendedLevel | 0),
                            i.playerDanmakuBlocktop != null && (O.playerDanmakuBlocktop = !!i.playerDanmakuBlocktop),
                            i.playerDanmakuBlockscroll != null && (O.playerDanmakuBlockscroll = !!i.playerDanmakuBlockscroll),
                            i.playerDanmakuBlockbottom != null && (O.playerDanmakuBlockbottom = !!i.playerDanmakuBlockbottom),
                            i.playerDanmakuBlockcolorful != null && (O.playerDanmakuBlockcolorful = !!i.playerDanmakuBlockcolorful),
                            i.playerDanmakuBlockrepeat != null && (O.playerDanmakuBlockrepeat = !!i.playerDanmakuBlockrepeat),
                            i.playerDanmakuBlockspecial != null && (O.playerDanmakuBlockspecial = !!i.playerDanmakuBlockspecial),
                            i.playerDanmakuOpacity != null && (O.playerDanmakuOpacity = Number(i.playerDanmakuOpacity)),
                            i.playerDanmakuScalingfactor != null && (O.playerDanmakuScalingfactor = Number(i.playerDanmakuScalingfactor)),
                            i.playerDanmakuDomain != null && (O.playerDanmakuDomain = Number(i.playerDanmakuDomain)),
                            i.playerDanmakuSpeed != null && (O.playerDanmakuSpeed = i.playerDanmakuSpeed | 0),
                            i.playerDanmakuEnableblocklist != null && (O.playerDanmakuEnableblocklist = !!i.playerDanmakuEnableblocklist),
                            i.inlinePlayerDanmakuSwitch != null && (O.inlinePlayerDanmakuSwitch = !!i.inlinePlayerDanmakuSwitch),
                            i.inlinePlayerDanmakuConfig != null && (O.inlinePlayerDanmakuConfig = i.inlinePlayerDanmakuConfig | 0),
                            i.playerDanmakuIosSwitchSave != null && (O.playerDanmakuIosSwitchSave = i.playerDanmakuIosSwitchSave | 0),
                            i.playerDanmakuSeniorModeSwitch != null && (O.playerDanmakuSeniorModeSwitch = i.playerDanmakuSeniorModeSwitch | 0),
                            O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            return O.defaults && ($.playerDanmakuSwitch = !1,
                            $.playerDanmakuSwitchSave = !1,
                            $.playerDanmakuUseDefaultConfig = !1,
                            $.playerDanmakuAiRecommendedSwitch = !1,
                            $.playerDanmakuAiRecommendedLevel = 0,
                            $.playerDanmakuBlocktop = !1,
                            $.playerDanmakuBlockscroll = !1,
                            $.playerDanmakuBlockbottom = !1,
                            $.playerDanmakuBlockcolorful = !1,
                            $.playerDanmakuBlockrepeat = !1,
                            $.playerDanmakuBlockspecial = !1,
                            $.playerDanmakuOpacity = 0,
                            $.playerDanmakuScalingfactor = 0,
                            $.playerDanmakuDomain = 0,
                            $.playerDanmakuSpeed = 0,
                            $.playerDanmakuEnableblocklist = !1,
                            $.inlinePlayerDanmakuSwitch = !1,
                            $.inlinePlayerDanmakuConfig = 0,
                            $.playerDanmakuIosSwitchSave = 0,
                            $.playerDanmakuSeniorModeSwitch = 0),
                            i.playerDanmakuSwitch != null && i.hasOwnProperty("playerDanmakuSwitch") && ($.playerDanmakuSwitch = i.playerDanmakuSwitch),
                            i.playerDanmakuSwitchSave != null && i.hasOwnProperty("playerDanmakuSwitchSave") && ($.playerDanmakuSwitchSave = i.playerDanmakuSwitchSave),
                            i.playerDanmakuUseDefaultConfig != null && i.hasOwnProperty("playerDanmakuUseDefaultConfig") && ($.playerDanmakuUseDefaultConfig = i.playerDanmakuUseDefaultConfig),
                            i.playerDanmakuAiRecommendedSwitch != null && i.hasOwnProperty("playerDanmakuAiRecommendedSwitch") && ($.playerDanmakuAiRecommendedSwitch = i.playerDanmakuAiRecommendedSwitch),
                            i.playerDanmakuAiRecommendedLevel != null && i.hasOwnProperty("playerDanmakuAiRecommendedLevel") && ($.playerDanmakuAiRecommendedLevel = i.playerDanmakuAiRecommendedLevel),
                            i.playerDanmakuBlocktop != null && i.hasOwnProperty("playerDanmakuBlocktop") && ($.playerDanmakuBlocktop = i.playerDanmakuBlocktop),
                            i.playerDanmakuBlockscroll != null && i.hasOwnProperty("playerDanmakuBlockscroll") && ($.playerDanmakuBlockscroll = i.playerDanmakuBlockscroll),
                            i.playerDanmakuBlockbottom != null && i.hasOwnProperty("playerDanmakuBlockbottom") && ($.playerDanmakuBlockbottom = i.playerDanmakuBlockbottom),
                            i.playerDanmakuBlockcolorful != null && i.hasOwnProperty("playerDanmakuBlockcolorful") && ($.playerDanmakuBlockcolorful = i.playerDanmakuBlockcolorful),
                            i.playerDanmakuBlockrepeat != null && i.hasOwnProperty("playerDanmakuBlockrepeat") && ($.playerDanmakuBlockrepeat = i.playerDanmakuBlockrepeat),
                            i.playerDanmakuBlockspecial != null && i.hasOwnProperty("playerDanmakuBlockspecial") && ($.playerDanmakuBlockspecial = i.playerDanmakuBlockspecial),
                            i.playerDanmakuOpacity != null && i.hasOwnProperty("playerDanmakuOpacity") && ($.playerDanmakuOpacity = O.json && !isFinite(i.playerDanmakuOpacity) ? String(i.playerDanmakuOpacity) : i.playerDanmakuOpacity),
                            i.playerDanmakuScalingfactor != null && i.hasOwnProperty("playerDanmakuScalingfactor") && ($.playerDanmakuScalingfactor = O.json && !isFinite(i.playerDanmakuScalingfactor) ? String(i.playerDanmakuScalingfactor) : i.playerDanmakuScalingfactor),
                            i.playerDanmakuDomain != null && i.hasOwnProperty("playerDanmakuDomain") && ($.playerDanmakuDomain = O.json && !isFinite(i.playerDanmakuDomain) ? String(i.playerDanmakuDomain) : i.playerDanmakuDomain),
                            i.playerDanmakuSpeed != null && i.hasOwnProperty("playerDanmakuSpeed") && ($.playerDanmakuSpeed = i.playerDanmakuSpeed),
                            i.playerDanmakuEnableblocklist != null && i.hasOwnProperty("playerDanmakuEnableblocklist") && ($.playerDanmakuEnableblocklist = i.playerDanmakuEnableblocklist),
                            i.inlinePlayerDanmakuSwitch != null && i.hasOwnProperty("inlinePlayerDanmakuSwitch") && ($.inlinePlayerDanmakuSwitch = i.inlinePlayerDanmakuSwitch),
                            i.inlinePlayerDanmakuConfig != null && i.hasOwnProperty("inlinePlayerDanmakuConfig") && ($.inlinePlayerDanmakuConfig = i.inlinePlayerDanmakuConfig),
                            i.playerDanmakuIosSwitchSave != null && i.hasOwnProperty("playerDanmakuIosSwitchSave") && ($.playerDanmakuIosSwitchSave = i.playerDanmakuIosSwitchSave),
                            i.playerDanmakuSeniorModeSwitch != null && i.hasOwnProperty("playerDanmakuSeniorModeSwitch") && ($.playerDanmakuSeniorModeSwitch = i.playerDanmakuSeniorModeSwitch),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.DanmuPlayerConfig"
                        }
                        ,
                        ie
                    }(),
                    ve.VideoSubtitle = function() {
                        function ie(ae) {
                            if (this.subtitles = [],
                            ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.lan = "",
                        ie.prototype.lanDoc = "",
                        ie.prototype.subtitles = $util.emptyArray,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            if (O || (O = $Writer.create()),
                            i.lan != null && Object.hasOwnProperty.call(i, "lan") && O.uint32(10).string(i.lan),
                            i.lanDoc != null && Object.hasOwnProperty.call(i, "lanDoc") && O.uint32(18).string(i.lanDoc),
                            i.subtitles != null && i.subtitles.length)
                                for (let $ = 0; $ < i.subtitles.length; ++$)
                                    $root.bilibili.community.service.dm.v1.SubtitleItem.encode(i.subtitles[$], O.uint32(26).fork()).ldelim();
                            return O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.VideoSubtitle;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 1:
                                    {
                                        Te.lan = i.string();
                                        break
                                    }
                                case 2:
                                    {
                                        Te.lanDoc = i.string();
                                        break
                                    }
                                case 3:
                                    {
                                        Te.subtitles && Te.subtitles.length || (Te.subtitles = []),
                                        Te.subtitles.push($root.bilibili.community.service.dm.v1.SubtitleItem.decode(i, i.uint32()));
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            if (typeof i != "object" || i === null)
                                return "object expected";
                            if (i.lan != null && i.hasOwnProperty("lan") && !$util.isString(i.lan))
                                return "lan: string expected";
                            if (i.lanDoc != null && i.hasOwnProperty("lanDoc") && !$util.isString(i.lanDoc))
                                return "lanDoc: string expected";
                            if (i.subtitles != null && i.hasOwnProperty("subtitles")) {
                                if (!Array.isArray(i.subtitles))
                                    return "subtitles: array expected";
                                for (let O = 0; O < i.subtitles.length; ++O) {
                                    let $ = $root.bilibili.community.service.dm.v1.SubtitleItem.verify(i.subtitles[O]);
                                    if ($)
                                        return "subtitles." + $
                                }
                            }
                            return null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.VideoSubtitle)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.VideoSubtitle;
                            if (i.lan != null && (O.lan = String(i.lan)),
                            i.lanDoc != null && (O.lanDoc = String(i.lanDoc)),
                            i.subtitles) {
                                if (!Array.isArray(i.subtitles))
                                    throw TypeError(".bilibili.community.service.dm.v1.VideoSubtitle.subtitles: array expected");
                                O.subtitles = [];
                                for (let $ = 0; $ < i.subtitles.length; ++$) {
                                    if (typeof i.subtitles[$] != "object")
                                        throw TypeError(".bilibili.community.service.dm.v1.VideoSubtitle.subtitles: object expected");
                                    O.subtitles[$] = $root.bilibili.community.service.dm.v1.SubtitleItem.fromObject(i.subtitles[$])
                                }
                            }
                            return O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            if ((O.arrays || O.defaults) && ($.subtitles = []),
                            O.defaults && ($.lan = "",
                            $.lanDoc = ""),
                            i.lan != null && i.hasOwnProperty("lan") && ($.lan = i.lan),
                            i.lanDoc != null && i.hasOwnProperty("lanDoc") && ($.lanDoc = i.lanDoc),
                            i.subtitles && i.subtitles.length) {
                                $.subtitles = [];
                                for (let Te = 0; Te < i.subtitles.length; ++Te)
                                    $.subtitles[Te] = $root.bilibili.community.service.dm.v1.SubtitleItem.toObject(i.subtitles[Te], O)
                            }
                            return $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.VideoSubtitle"
                        }
                        ,
                        ie
                    }(),
                    ve.SubtitleType = function() {
                        const ie = {}
                          , ae = Object.create(ie);
                        return ae[ie[0] = "CC"] = 0,
                        ae[ie[1] = "AI"] = 1,
                        ae
                    }(),
                    ve.SubtitleItem = function() {
                        function ie(ae) {
                            if (ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.id = $util.Long ? $util.Long.fromBits(0, 0, !1) : 0,
                        ie.prototype.idStr = "",
                        ie.prototype.lan = "",
                        ie.prototype.lanDoc = "",
                        ie.prototype.subtitleUrl = "",
                        ie.prototype.type = 0,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            return O || (O = $Writer.create()),
                            i.id != null && Object.hasOwnProperty.call(i, "id") && O.uint32(8).int64(i.id),
                            i.idStr != null && Object.hasOwnProperty.call(i, "idStr") && O.uint32(18).string(i.idStr),
                            i.lan != null && Object.hasOwnProperty.call(i, "lan") && O.uint32(26).string(i.lan),
                            i.lanDoc != null && Object.hasOwnProperty.call(i, "lanDoc") && O.uint32(34).string(i.lanDoc),
                            i.subtitleUrl != null && Object.hasOwnProperty.call(i, "subtitleUrl") && O.uint32(42).string(i.subtitleUrl),
                            i.type != null && Object.hasOwnProperty.call(i, "type") && O.uint32(56).int32(i.type),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.SubtitleItem;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 1:
                                    {
                                        Te.id = i.int64();
                                        break
                                    }
                                case 2:
                                    {
                                        Te.idStr = i.string();
                                        break
                                    }
                                case 3:
                                    {
                                        Te.lan = i.string();
                                        break
                                    }
                                case 4:
                                    {
                                        Te.lanDoc = i.string();
                                        break
                                    }
                                case 5:
                                    {
                                        Te.subtitleUrl = i.string();
                                        break
                                    }
                                case 7:
                                    {
                                        Te.type = i.int32();
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            if (typeof i != "object" || i === null)
                                return "object expected";
                            if (i.id != null && i.hasOwnProperty("id") && !$util.isInteger(i.id) && !(i.id && $util.isInteger(i.id.low) && $util.isInteger(i.id.high)))
                                return "id: integer|Long expected";
                            if (i.idStr != null && i.hasOwnProperty("idStr") && !$util.isString(i.idStr))
                                return "idStr: string expected";
                            if (i.lan != null && i.hasOwnProperty("lan") && !$util.isString(i.lan))
                                return "lan: string expected";
                            if (i.lanDoc != null && i.hasOwnProperty("lanDoc") && !$util.isString(i.lanDoc))
                                return "lanDoc: string expected";
                            if (i.subtitleUrl != null && i.hasOwnProperty("subtitleUrl") && !$util.isString(i.subtitleUrl))
                                return "subtitleUrl: string expected";
                            if (i.type != null && i.hasOwnProperty("type"))
                                switch (i.type) {
                                default:
                                    return "type: enum value expected";
                                case 0:
                                case 1:
                                    break
                                }
                            return null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.SubtitleItem)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.SubtitleItem;
                            switch (i.id != null && ($util.Long ? (O.id = $util.Long.fromValue(i.id)).unsigned = !1 : typeof i.id == "string" ? O.id = parseInt(i.id, 10) : typeof i.id == "number" ? O.id = i.id : typeof i.id == "object" && (O.id = new $util.LongBits(i.id.low >>> 0,i.id.high >>> 0).toNumber())),
                            i.idStr != null && (O.idStr = String(i.idStr)),
                            i.lan != null && (O.lan = String(i.lan)),
                            i.lanDoc != null && (O.lanDoc = String(i.lanDoc)),
                            i.subtitleUrl != null && (O.subtitleUrl = String(i.subtitleUrl)),
                            i.type) {
                            default:
                                if (typeof i.type == "number") {
                                    O.type = i.type;
                                    break
                                }
                                break;
                            case "CC":
                            case 0:
                                O.type = 0;
                                break;
                            case "AI":
                            case 1:
                                O.type = 1;
                                break
                            }
                            return O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            if (O.defaults) {
                                if ($util.Long) {
                                    let Te = new $util.Long(0,0,!1);
                                    $.id = O.longs === String ? Te.toString() : O.longs === Number ? Te.toNumber() : Te
                                } else
                                    $.id = O.longs === String ? "0" : 0;
                                $.idStr = "",
                                $.lan = "",
                                $.lanDoc = "",
                                $.subtitleUrl = "",
                                $.type = O.enums === String ? "CC" : 0
                            }
                            return i.id != null && i.hasOwnProperty("id") && (typeof i.id == "number" ? $.id = O.longs === String ? String(i.id) : i.id : $.id = O.longs === String ? $util.Long.prototype.toString.call(i.id) : O.longs === Number ? new $util.LongBits(i.id.low >>> 0,i.id.high >>> 0).toNumber() : i.id),
                            i.idStr != null && i.hasOwnProperty("idStr") && ($.idStr = i.idStr),
                            i.lan != null && i.hasOwnProperty("lan") && ($.lan = i.lan),
                            i.lanDoc != null && i.hasOwnProperty("lanDoc") && ($.lanDoc = i.lanDoc),
                            i.subtitleUrl != null && i.hasOwnProperty("subtitleUrl") && ($.subtitleUrl = i.subtitleUrl),
                            i.type != null && i.hasOwnProperty("type") && ($.type = O.enums === String ? $root.bilibili.community.service.dm.v1.SubtitleType[i.type] === void 0 ? i.type : $root.bilibili.community.service.dm.v1.SubtitleType[i.type] : i.type),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.SubtitleItem"
                        }
                        ,
                        ie
                    }(),
                    ve.DmSegMobileReply = function() {
                        function ie(ae) {
                            if (this.elems = [],
                            ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.elems = $util.emptyArray,
                        ie.prototype.state = 0,
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            if (O || (O = $Writer.create()),
                            i.elems != null && i.elems.length)
                                for (let $ = 0; $ < i.elems.length; ++$)
                                    $root.bilibili.community.service.dm.v1.DanmakuElem.encode(i.elems[$], O.uint32(10).fork()).ldelim();
                            return i.state != null && Object.hasOwnProperty.call(i, "state") && O.uint32(16).int32(i.state),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.DmSegMobileReply;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 1:
                                    {
                                        Te.elems && Te.elems.length || (Te.elems = []),
                                        Te.elems.push($root.bilibili.community.service.dm.v1.DanmakuElem.decode(i, i.uint32()));
                                        break
                                    }
                                case 2:
                                    {
                                        Te.state = i.int32();
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            if (typeof i != "object" || i === null)
                                return "object expected";
                            if (i.elems != null && i.hasOwnProperty("elems")) {
                                if (!Array.isArray(i.elems))
                                    return "elems: array expected";
                                for (let O = 0; O < i.elems.length; ++O) {
                                    let $ = $root.bilibili.community.service.dm.v1.DanmakuElem.verify(i.elems[O]);
                                    if ($)
                                        return "elems." + $
                                }
                            }
                            return i.state != null && i.hasOwnProperty("state") && !$util.isInteger(i.state) ? "state: integer expected" : null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.DmSegMobileReply)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.DmSegMobileReply;
                            if (i.elems) {
                                if (!Array.isArray(i.elems))
                                    throw TypeError(".bilibili.community.service.dm.v1.DmSegMobileReply.elems: array expected");
                                O.elems = [];
                                for (let $ = 0; $ < i.elems.length; ++$) {
                                    if (typeof i.elems[$] != "object")
                                        throw TypeError(".bilibili.community.service.dm.v1.DmSegMobileReply.elems: object expected");
                                    O.elems[$] = $root.bilibili.community.service.dm.v1.DanmakuElem.fromObject(i.elems[$])
                                }
                            }
                            return i.state != null && (O.state = i.state | 0),
                            O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            if ((O.arrays || O.defaults) && ($.elems = []),
                            O.defaults && ($.state = 0),
                            i.elems && i.elems.length) {
                                $.elems = [];
                                for (let Te = 0; Te < i.elems.length; ++Te)
                                    $.elems[Te] = $root.bilibili.community.service.dm.v1.DanmakuElem.toObject(i.elems[Te], O)
                            }
                            return i.state != null && i.hasOwnProperty("state") && ($.state = i.state),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.DmSegMobileReply"
                        }
                        ,
                        ie
                    }(),
                    ve.DanmakuElem = function() {
                        function ie(ae) {
                            if (ae)
                                for (let i = Object.keys(ae), O = 0; O < i.length; ++O)
                                    ae[i[O]] != null && (this[i[O]] = ae[i[O]])
                        }
                        return ie.prototype.id = $util.Long ? $util.Long.fromBits(0, 0, !1) : 0,
                        ie.prototype.progress = 0,
                        ie.prototype.mode = 0,
                        ie.prototype.fontsize = 0,
                        ie.prototype.color = 0,
                        ie.prototype.midHash = "",
                        ie.prototype.content = "",
                        ie.prototype.ctime = $util.Long ? $util.Long.fromBits(0, 0, !1) : 0,
                        ie.prototype.weight = 0,
                        ie.prototype.action = "",
                        ie.prototype.pool = 0,
                        ie.prototype.idStr = "",
                        ie.prototype.attr = 0,
                        ie.prototype.animation = "",
                        ie.create = function(i) {
                            return new ie(i)
                        }
                        ,
                        ie.encode = function(i, O) {
                            return O || (O = $Writer.create()),
                            i.id != null && Object.hasOwnProperty.call(i, "id") && O.uint32(8).int64(i.id),
                            i.progress != null && Object.hasOwnProperty.call(i, "progress") && O.uint32(16).int32(i.progress),
                            i.mode != null && Object.hasOwnProperty.call(i, "mode") && O.uint32(24).int32(i.mode),
                            i.fontsize != null && Object.hasOwnProperty.call(i, "fontsize") && O.uint32(32).int32(i.fontsize),
                            i.color != null && Object.hasOwnProperty.call(i, "color") && O.uint32(40).uint32(i.color),
                            i.midHash != null && Object.hasOwnProperty.call(i, "midHash") && O.uint32(50).string(i.midHash),
                            i.content != null && Object.hasOwnProperty.call(i, "content") && O.uint32(58).string(i.content),
                            i.ctime != null && Object.hasOwnProperty.call(i, "ctime") && O.uint32(64).int64(i.ctime),
                            i.weight != null && Object.hasOwnProperty.call(i, "weight") && O.uint32(72).int32(i.weight),
                            i.action != null && Object.hasOwnProperty.call(i, "action") && O.uint32(82).string(i.action),
                            i.pool != null && Object.hasOwnProperty.call(i, "pool") && O.uint32(88).int32(i.pool),
                            i.idStr != null && Object.hasOwnProperty.call(i, "idStr") && O.uint32(98).string(i.idStr),
                            i.attr != null && Object.hasOwnProperty.call(i, "attr") && O.uint32(104).int32(i.attr),
                            i.animation != null && Object.hasOwnProperty.call(i, "animation") && O.uint32(178).string(i.animation),
                            O
                        }
                        ,
                        ie.encodeDelimited = function(i, O) {
                            return this.encode(i, O).ldelim()
                        }
                        ,
                        ie.decode = function(i, O) {
                            i instanceof $Reader || (i = $Reader.create(i));
                            let $ = O === void 0 ? i.len : i.pos + O
                              , Te = new $root.bilibili.community.service.dm.v1.DanmakuElem;
                            for (; i.pos < $; ) {
                                let we = i.uint32();
                                switch (we >>> 3) {
                                case 1:
                                    {
                                        Te.id = i.int64();
                                        break
                                    }
                                case 2:
                                    {
                                        Te.progress = i.int32();
                                        break
                                    }
                                case 3:
                                    {
                                        Te.mode = i.int32();
                                        break
                                    }
                                case 4:
                                    {
                                        Te.fontsize = i.int32();
                                        break
                                    }
                                case 5:
                                    {
                                        Te.color = i.uint32();
                                        break
                                    }
                                case 6:
                                    {
                                        Te.midHash = i.string();
                                        break
                                    }
                                case 7:
                                    {
                                        Te.content = i.string();
                                        break
                                    }
                                case 8:
                                    {
                                        Te.ctime = i.int64();
                                        break
                                    }
                                case 9:
                                    {
                                        Te.weight = i.int32();
                                        break
                                    }
                                case 10:
                                    {
                                        Te.action = i.string();
                                        break
                                    }
                                case 11:
                                    {
                                        Te.pool = i.int32();
                                        break
                                    }
                                case 12:
                                    {
                                        Te.idStr = i.string();
                                        break
                                    }
                                case 13:
                                    {
                                        Te.attr = i.int32();
                                        break
                                    }
                                case 22:
                                    {
                                        Te.animation = i.string();
                                        break
                                    }
                                default:
                                    i.skipType(we & 7);
                                    break
                                }
                            }
                            return Te
                        }
                        ,
                        ie.decodeDelimited = function(i) {
                            return i instanceof $Reader || (i = new $Reader(i)),
                            this.decode(i, i.uint32())
                        }
                        ,
                        ie.verify = function(i) {
                            return typeof i != "object" || i === null ? "object expected" : i.id != null && i.hasOwnProperty("id") && !$util.isInteger(i.id) && !(i.id && $util.isInteger(i.id.low) && $util.isInteger(i.id.high)) ? "id: integer|Long expected" : i.progress != null && i.hasOwnProperty("progress") && !$util.isInteger(i.progress) ? "progress: integer expected" : i.mode != null && i.hasOwnProperty("mode") && !$util.isInteger(i.mode) ? "mode: integer expected" : i.fontsize != null && i.hasOwnProperty("fontsize") && !$util.isInteger(i.fontsize) ? "fontsize: integer expected" : i.color != null && i.hasOwnProperty("color") && !$util.isInteger(i.color) ? "color: integer expected" : i.midHash != null && i.hasOwnProperty("midHash") && !$util.isString(i.midHash) ? "midHash: string expected" : i.content != null && i.hasOwnProperty("content") && !$util.isString(i.content) ? "content: string expected" : i.ctime != null && i.hasOwnProperty("ctime") && !$util.isInteger(i.ctime) && !(i.ctime && $util.isInteger(i.ctime.low) && $util.isInteger(i.ctime.high)) ? "ctime: integer|Long expected" : i.weight != null && i.hasOwnProperty("weight") && !$util.isInteger(i.weight) ? "weight: integer expected" : i.action != null && i.hasOwnProperty("action") && !$util.isString(i.action) ? "action: string expected" : i.pool != null && i.hasOwnProperty("pool") && !$util.isInteger(i.pool) ? "pool: integer expected" : i.idStr != null && i.hasOwnProperty("idStr") && !$util.isString(i.idStr) ? "idStr: string expected" : i.attr != null && i.hasOwnProperty("attr") && !$util.isInteger(i.attr) ? "attr: integer expected" : i.animation != null && i.hasOwnProperty("animation") && !$util.isString(i.animation) ? "animation: string expected" : null
                        }
                        ,
                        ie.fromObject = function(i) {
                            if (i instanceof $root.bilibili.community.service.dm.v1.DanmakuElem)
                                return i;
                            let O = new $root.bilibili.community.service.dm.v1.DanmakuElem;
                            return i.id != null && ($util.Long ? (O.id = $util.Long.fromValue(i.id)).unsigned = !1 : typeof i.id == "string" ? O.id = parseInt(i.id, 10) : typeof i.id == "number" ? O.id = i.id : typeof i.id == "object" && (O.id = new $util.LongBits(i.id.low >>> 0,i.id.high >>> 0).toNumber())),
                            i.progress != null && (O.progress = i.progress | 0),
                            i.mode != null && (O.mode = i.mode | 0),
                            i.fontsize != null && (O.fontsize = i.fontsize | 0),
                            i.color != null && (O.color = i.color >>> 0),
                            i.midHash != null && (O.midHash = String(i.midHash)),
                            i.content != null && (O.content = String(i.content)),
                            i.ctime != null && ($util.Long ? (O.ctime = $util.Long.fromValue(i.ctime)).unsigned = !1 : typeof i.ctime == "string" ? O.ctime = parseInt(i.ctime, 10) : typeof i.ctime == "number" ? O.ctime = i.ctime : typeof i.ctime == "object" && (O.ctime = new $util.LongBits(i.ctime.low >>> 0,i.ctime.high >>> 0).toNumber())),
                            i.weight != null && (O.weight = i.weight | 0),
                            i.action != null && (O.action = String(i.action)),
                            i.pool != null && (O.pool = i.pool | 0),
                            i.idStr != null && (O.idStr = String(i.idStr)),
                            i.attr != null && (O.attr = i.attr | 0),
                            i.animation != null && (O.animation = String(i.animation)),
                            O
                        }
                        ,
                        ie.toObject = function(i, O) {
                            O || (O = {});
                            let $ = {};
                            if (O.defaults) {
                                if ($util.Long) {
                                    let Te = new $util.Long(0,0,!1);
                                    $.id = O.longs === String ? Te.toString() : O.longs === Number ? Te.toNumber() : Te
                                } else
                                    $.id = O.longs === String ? "0" : 0;
                                if ($.progress = 0,
                                $.mode = 0,
                                $.fontsize = 0,
                                $.color = 0,
                                $.midHash = "",
                                $.content = "",
                                $util.Long) {
                                    let Te = new $util.Long(0,0,!1);
                                    $.ctime = O.longs === String ? Te.toString() : O.longs === Number ? Te.toNumber() : Te
                                } else
                                    $.ctime = O.longs === String ? "0" : 0;
                                $.weight = 0,
                                $.action = "",
                                $.pool = 0,
                                $.idStr = "",
                                $.attr = 0,
                                $.animation = ""
                            }
                            return i.id != null && i.hasOwnProperty("id") && (typeof i.id == "number" ? $.id = O.longs === String ? String(i.id) : i.id : $.id = O.longs === String ? $util.Long.prototype.toString.call(i.id) : O.longs === Number ? new $util.LongBits(i.id.low >>> 0,i.id.high >>> 0).toNumber() : i.id),
                            i.progress != null && i.hasOwnProperty("progress") && ($.progress = i.progress),
                            i.mode != null && i.hasOwnProperty("mode") && ($.mode = i.mode),
                            i.fontsize != null && i.hasOwnProperty("fontsize") && ($.fontsize = i.fontsize),
                            i.color != null && i.hasOwnProperty("color") && ($.color = i.color),
                            i.midHash != null && i.hasOwnProperty("midHash") && ($.midHash = i.midHash),
                            i.content != null && i.hasOwnProperty("content") && ($.content = i.content),
                            i.ctime != null && i.hasOwnProperty("ctime") && (typeof i.ctime == "number" ? $.ctime = O.longs === String ? String(i.ctime) : i.ctime : $.ctime = O.longs === String ? $util.Long.prototype.toString.call(i.ctime) : O.longs === Number ? new $util.LongBits(i.ctime.low >>> 0,i.ctime.high >>> 0).toNumber() : i.ctime),
                            i.weight != null && i.hasOwnProperty("weight") && ($.weight = i.weight),
                            i.action != null && i.hasOwnProperty("action") && ($.action = i.action),
                            i.pool != null && i.hasOwnProperty("pool") && ($.pool = i.pool),
                            i.idStr != null && i.hasOwnProperty("idStr") && ($.idStr = i.idStr),
                            i.attr != null && i.hasOwnProperty("attr") && ($.attr = i.attr),
                            i.animation != null && i.hasOwnProperty("animation") && ($.animation = i.animation),
                            $
                        }
                        ,
                        ie.prototype.toJSON = function() {
                            return this.constructor.toObject(this, minimal.util.toJSONOptions)
                        }
                        ,
                        ie.getTypeUrl = function(i) {
                            return i === void 0 && (i = "type.googleapis.com"),
                            i + "/bilibili.community.service.dm.v1.DanmakuElem"
                        }
                        ,
                        ie
                    }(),
                    ve
                }(),
                ye
            }(),
            y
        }(),
        d
    }(),
    n
}
)();
function getCookie(n) {
    const y = `; ${document.cookie}`.split(`; ${n}=`);
    return y.length === 2 && y.pop().split(";").shift() || ""
}
const service$1 = axios.create({
    withCredentials: !1,
    timeout: 3e4
});
service$1.interceptors.request.use(n=>{
    n.params || (n.params = {});
    const d = getCookie("bili_jct");
    return n.params.csrf = d,
    n
}
, n=>Promise.reject(n));
service$1.interceptors.response.use(async n=>n, async n=>n);
function urlParams() {
    const n = {}
      , d = (location.search || location.href).split("?");
    return d[1] && d[1].split("&").forEach(ye=>{
        const [ve,ie] = ye.split("=");
        n[ve] = ie
    }
    ),
    n
}
function getPlatform() {
    let n = "unknown";
    return location.hostname.indexOf(".bilibili.tv") > -1 ? n = "bstar_web" : location.hostname.indexOf(".bilibili.com") > -1 && (n = "web"),
    n
}
const DanmakuViewSource = bilibili.community.service.dm.v1.DmViewReply
  , SubtitleCollection = bilibili.community.service.dm.v1.VideoSubtitle
  , SubtitleSource = bilibili.community.service.dm.v1.SubtitleItem;
var SubtitleType = (n=>(n[n.SRT = bilibili.community.service.dm.v1.SubtitleType.CC] = "SRT",
n[n.ASS = bilibili.community.service.dm.v1.SubtitleType.AI] = "ASS",
n))(SubtitleType || {});
async function createDFMClient(n, d) {
    let y = !1
      , ye = null
      , ve = null
      , ie = {
        playback_rate: 1,
        current_time: 0
    };
    const ae = async we=>{
        var ii, da, aa;
        const Re = (ii = we.ab_keys) != null ? ii : []
          , Ye = (da = we.config_keys) != null ? da : []
          , _t = {}
          , Jt = urlParams()
          , bt = {};
        for (const Ta of Re)
            _t[Ta] = Jt[Ta] ? !!Jt[Ta] : !1;
        for (const Ta of Ye)
            bt[Ta] = (aa = `${Jt[Ta]}`) != null ? aa : "";
        return {
            json: {
                result: {
                    version_name: getPlatform(),
                    version_code: VERSION,
                    ab: _t,
                    config: bt,
                    msg_protocol_version: DFMMessageProtocol.VERSION,
                    debug: !!Jt.debug,
                    teenager_mode: !1,
                    buvid: getCookie("buvid3"),
                    lessons_mode: !1
                }
            }
        }
    }
      , i = async we=>{
        var Re, Ye;
        return ie.playback_rate = (Re = we.playback_rate) != null ? Re : ie.playback_rate,
        ie.current_time = (Ye = we.current_time) != null ? Ye : ie.current_time,
        {
            json: {
                result: ie
            }
        }
    }
      , O = async we=>{
        var ga, ba;
        const {method: Re, url: Ye, parameters: _t, header: Jt, format: bt} = we
          , ai = {};
        switch (ai.method = Re,
        ai.headers = Jt,
        Re) {
        case DFMMessageProtocol.URLRequest.Method.GET:
            ai.params = _t;
            break;
        case DFMMessageProtocol.URLRequest.Method.POST:
            ai.data = _t;
            break
        }
        const ii = await service$1(Ye, ai)
          , da = ii.status;
        if (da != 200)
            return DFMMessage.decodeError(da, "HTTP request error");
        const aa = ii.data
          , Ta = aa instanceof ArrayBuffer
          , fa = typeof aa == "object" && !Ta
          , He = typeof aa == "string";
        let Zt, si;
        switch (bt) {
        case DFMMessageProtocol.URLRequest.DataFormat.BASE64:
        case DFMMessageProtocol.URLRequest.DataFormat.RAW:
            if (He) {
                Zt = aa;
                break
            }
            return DFMMessage.decodeError(DFMMessageProtocol.StatusCode.RESPONSE_DATA_ERROR);
        case DFMMessageProtocol.URLRequest.DataFormat.FILE:
            {
                let Ca;
                if (He && (Ca = new TextEncoder().encode(aa).buffer),
                fa && (Ca = new TextEncoder().encode(JSON.stringify(aa)).buffer),
                Ta && (Ca = aa),
                Ca) {
                    const za = `downloads/downloaded_file_ ${Date.now()}`;
                    if (!await ((ga = d.getCurrentPackage()) == null ? void 0 : ga.saveFileToSandbox(Ca, za)))
                        return DFMMessage.decodeError(DFMMessageProtocol.StatusCode.NATIVE_ERROR);
                    Zt = za;
                    break
                }
                return DFMMessage.decodeError(DFMMessageProtocol.StatusCode.RESPONSE_DATA_ERROR)
            }
        case DFMMessageProtocol.URLRequest.DataFormat.BINARY:
            if (Ta) {
                si = {
                    response: aa
                };
                break
            }
            return DFMMessage.decodeError(DFMMessageProtocol.StatusCode.RESPONSE_DATA_ERROR)
        }
        return {
            json: {
                result: {
                    code: da,
                    header: (ba = ii.headers) != null ? ba : {},
                    content: Zt,
                    format: bt
                }
            },
            dataMap: si
        }
    }
      , $ = we=>{
        var Re;
        (Re = we == null ? void 0 : we.extends_args) != null && Re.msg && e$1.emit(EVENT_NAME.ERROR, {
            code: we.status_code || we.extends_args.code || "-1000",
            msg: we.extends_args.msg || we.name || "unknown",
            original: we
        })
    }
      , Te = async we=>{
        let Re;
        try {
            Re = DFMMessage.decodeRequest(we)
        } catch (_t) {
            return _t instanceof ArrayBuffer ? _t : DFMMessage.encodeError(DFMMessageProtocol.StatusCode.NATIVE_ERROR)
        }
        let Ye = DFMMessage.encodeError(DFMMessageProtocol.StatusCode.UNKNOWN_MESSAGE);
        switch (Re.json.method) {
        case DFMMessageProtocol.Request.Method.GET_CONFIGURATIONS:
            {
                const _t = await ae(Re.json.args);
                Ye = DFMMessage.encodeResponse(_t);
                break
            }
        case DFMMessageProtocol.Request.Method.UPDATE_PLAYBACK_STATUS:
            {
                const _t = await i(Re.json.args);
                Ye = DFMMessage.encodeResponse(_t);
                break
            }
        case DFMMessageProtocol.Request.Method.URL_REQUEST:
            {
                const _t = await O(Re.json.args);
                Ye = DFMMessage.encodeResponse(_t);
                break
            }
        case DFMMessageProtocol.Request.Method.EVENT_REPORT:
            {
                $(Re.json.args);
                break
            }
        }
        return Ye
    }
    ;
    return {
        async setPackageSource(we) {
            return n.addListener(Te),
            y = await d.runPackage(we),
            y
        },
        async stop() {
            await d.runPackage(null),
            n.removeListener(Te),
            y = !1
        },
        async setDanmakuConfig(we) {
            if (y) {
                const Re = DFMMessageProtocol.Request.Method.CLIENT_SET_DANMAKU_CONFIG
                  , Ye = DFMMessage.encodeRequest({
                    json: {
                        method: Re,
                        args: we
                    }
                });
                await n.sendMessage(Ye)
            }
        },
        getDanmakuConfig() {
            return ye
        },
        async setDanmakuViewSource(we, Re) {
            if (y) {
                const Ye = DFMMessageProtocol.Request.Method.CLIENT_SET_DANMAKU_VIEW_SOURCE
                  , _t = DanmakuViewSource.encode(Re).finish()
                  , Jt = _t.buffer.slice(_t.byteOffset, _t.byteOffset + _t.byteLength)
                  , bt = DFMMessage.encodeRequest({
                    json: {
                        method: Ye,
                        args: we
                    },
                    dataMap: {
                        reply: Jt
                    }
                });
                await n.sendMessage(bt),
                ve = Re
            }
        },
        getDanmakuViewSource() {
            return ve
        },
        async setPlaybackStatus(we) {
            const {current_time: Re, playback_rate: Ye} = we;
            if (!(Re === ie.current_time && Ye === ie.playback_rate) && y) {
                const _t = DFMMessageProtocol.Request.Method.CLIENT_UPDATE_PLAYBACK_STATUS
                  , Jt = {
                    current_time: Re,
                    playback_rate: Ye,
                    timestamp: Date.now()
                }
                  , bt = DFMMessage.encodeRequest({
                    json: {
                        method: _t,
                        args: Jt
                    }
                });
                await n.sendMessage(bt),
                ie = we
            }
        },
        getPlaybackStatus() {
            return ie
        }
    }
}
const registeredManagers = new Map;
var PackageManager;
(n=>{
    function d(y, ye) {
        let ve = registeredManagers.get(y);
        return ve || (ve = {
            getCurrentPackage() {
                return y.getCurrentPackage()
            },
            async runPackage(ie) {
                if (ie) {
                    const ae = await ye.createFromPath(ie);
                    return await y.runPackage(ae)
                }
                return await y.runPackage(null)
            }
        },
        registeredManagers.set(y, ve),
        ve)
    }
    n.from = d
}
)(PackageManager || (PackageManager = {}));
const Chronos$1 = ()=>{
    const n = `https://p.bstarstatic.com/fe-lib/packages/bilibili-intl/chronos/${VERSION}/chronos.js`;
    let d = null;
    const y = ()=>new Promise((i,O)=>{
        const $ = "chronos-script"
          , Te = document.getElementById($);
        Te && Te.parentNode && Te.parentNode.removeChild(Te);
        const we = document.createElement("script");
        we.id = $,
        we.async = !0,
        document.body.appendChild(we),
        we.onload = async()=>{
            try {
                const Re = "#chronos-view { display: none; }"
                  , Ye = document.head || document.getElementsByTagName("head")[0]
                  , _t = document.createElement("style");
                Ye.appendChild(_t),
                _t.type = "text/css",
                _t.appendChild(document.createTextNode(Re)),
                i()
            } catch (Re) {
                O(Re)
            }
        }
        ,
        we.onerror = (Re,Ye,_t,Jt,bt)=>{
            O(`load chronos failed: ${bt == null ? void 0 : bt.message}`)
        }
        ,
        we.src = n
    }
    );
    return {
        init: async i=>{
            d || (d = y()),
            await d;
            const {mountElement: O=document.body, name: $} = i
              , Te = await createChronosModule()
              , we = await Te.ChronosView.createFromParent(O, $)
              , Re = await Messenger.from(we)
              , Ye = PackageManager.from(we, Te.ChronosPackage);
            let _t = null;
            const Jt = async()=>_t || (_t = await createDFMClient(Re, Ye),
            _t)
              , bt = async()=>{
                await (_t == null ? void 0 : _t.stop()),
                await we.release()
            }
            ;
            let ai = [0, 0];
            return {
                getDFMClient: Jt,
                release: bt,
                setSize: (fa,He)=>{
                    we.element.style.width = `${fa}px`,
                    we.element.style.height = `${He}px`,
                    ai = [fa, He]
                }
                ,
                getSize: ()=>ai,
                setDisplay: fa=>{
                    we.element.style.display = fa
                }
                ,
                getDisplay: ()=>we.element.style.display
            }
        }
        ,
        getCompatible: ()=>({
            gl: document.createElement("canvas").getContext("webgl2") ? 1 : 0,
            sharedArrayBuffer: typeof SharedArrayBuffer < "u" ? 1 : 0,
            finalizationRegistry: typeof FinalizationRegistry < "u" ? 1 : 0
        }),
        on: (i,O)=>{
            e$1.on(i, O)
        }
        ,
        off: i=>{
            e$1.off(i)
        }
    }
}
  , Chronos = ()=>{
    let n = null
      , d = "chronos_" + nanoid(10)
      , y = null
      , ye = !1
      , ve = null
      , ie = null
      , ae = document.querySelector(".player-mobile-subtitle");
    const i = (Jt={})=>{
        Jt.name && (d = Jt.name),
        Jt.mountElement && (ae = Jt.mountElement),
        ie = document.createElement("div"),
        ie.setAttribute("id", "chronos-view-wrapper"),
        ae && ae.appendChild(ie);
        const bt = new ResizeObserver(ai=>{
            for (const ii of ai)
                if (n) {
                    const da = +ii.contentRect.width.toFixed(0)
                      , aa = +ii.contentRect.height.toFixed(0);
                    n.setSize(da, aa)
                }
        }
        );
        return new Promise(async(ai,ii)=>{
            try {
                const da = Chronos$1()
                  , {gl: aa, sharedArrayBuffer: Ta, finalizationRegistry: fa} = da.getCompatible();
                if (!aa || !Ta || !fa) {
                    ii("no support");
                    return
                }
                n = await da.init({
                    mountElement: ie,
                    name: d
                }),
                n.setDisplay("block"),
                n.setSize(ae.offsetWidth, ae.offsetHeight),
                bt.observe(ae),
                n.createDFMClient = O,
                n.hide = Re,
                n.show = Ye,
                n.destroy = _t,
                n.on = da.on,
                n.off = da.off,
                y = document.getElementById(d),
                ai(n)
            } catch (da) {
                ii(da),
                console.error("chronos初始化时报错", da)
            }
        }
        )
    }
      , O = (Jt="//p.bstarstatic.com/fe-static/20221019/static/feature_international-new-v3-5e36d4-dfm-1.15.4.cron")=>new Promise(async(bt,ai)=>{
        try {
            ve = await n.getDFMClient(),
            ve.play = Te,
            ve.pause = we,
            ve.renderSubtitle = $,
            ye = await (ve == null ? void 0 : ve.setPackageSource(Jt)) || !1,
            bt(ve)
        } catch (ii) {
            console.error("创建弹幕客户端时报错", ii),
            ai(ii)
        }
    }
    )
      , $ = Jt=>new Promise(async(bt,ai)=>{
        var ii, da, aa, Ta;
        try {
            if (!ye || !ve)
                return;
            const {locale: fa, lang: He, assUrl: Zt, video_id: si, config: ga, subtitle_type: ba} = Jt || {}
              , Ca = [];
            Ca.push(SubtitleSource.create({
                id: new Date().getTime(),
                idStr: new Date().getTime().toString(),
                lan: fa,
                lanDoc: He,
                subtitleUrl: Zt,
                type: ba || SubtitleType.ASS.valueOf()
            }));
            const za = DanmakuViewSource.create({
                subtitle: SubtitleCollection.create({
                    lan: fa,
                    lanDoc: He,
                    subtitles: Ca
                })
            });
            await ve.setDanmakuViewSource({
                work_id: Zt,
                video_id: si
            }, za),
            await ve.setDanmakuConfig({
                transparency: (ga == null ? void 0 : ga.transparency) || 1,
                scale: (ga == null ? void 0 : ga.scale) || 1,
                screen_occupancy: (ga == null ? void 0 : ga.screen_occupancy) || 1,
                duration: (ga == null ? void 0 : ga.duration) || 4e3,
                mask_enabled: (ga == null ? void 0 : ga.mask_enabled) || !1,
                visible_rect: {
                    origin: ((ii = ga == null ? void 0 : ga.visible_rect) == null ? void 0 : ii.origin) || [0, 0],
                    size: ((da = ga == null ? void 0 : ga.visible_rect) == null ? void 0 : da.size) || n.getSize()
                },
                subtitle_config: {
                    language: fa,
                    bottom_margin: ((aa = ga == null ? void 0 : ga.subtitle_config) == null ? void 0 : aa.bottom_margin) || 10,
                    has_background: ((Ta = ga == null ? void 0 : ga.subtitle_config) == null ? void 0 : Ta.has_background) || !0
                }
            }),
            bt(!0)
        } catch (fa) {
            console.error("renderSubtitle时报错", fa),
            ai(fa)
        }
    }
    )
      , Te = (Jt=.01,bt=1)=>{
        ve && ve.setPlaybackStatus({
            current_time: Jt,
            playback_rate: bt
        })
    }
      , we = (Jt=0)=>{
        ve && ve.setPlaybackStatus({
            current_time: Jt,
            playback_rate: 0
        })
    }
      , Re = ()=>{
        n.setDisplay("none")
    }
      , Ye = ()=>{
        n.setDisplay("block")
    }
      , _t = ()=>{
        n && n.release(),
        y && y.remove()
    }
    ;
    return {
        init: i
    }
}
;
var danmaku = {
    exports: {}
};
/*! For license information please see danmaku.js.LICENSE.txt */
(function(n, d) {
    var y;
    y = function() {
        return function(ye) {
            var ve = {};
            function ie(ae) {
                if (ve[ae])
                    return ve[ae].exports;
                var i = ve[ae] = {
                    i: ae,
                    l: !1,
                    exports: {}
                };
                return ye[ae].call(i.exports, i, i.exports, ie),
                i.l = !0,
                i.exports
            }
            return ie.m = ye,
            ie.c = ve,
            ie.d = function(ae, i, O) {
                ie.o(ae, i) || Object.defineProperty(ae, i, {
                    enumerable: !0,
                    get: O
                })
            }
            ,
            ie.r = function(ae) {
                typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(ae, Symbol.toStringTag, {
                    value: "Module"
                }),
                Object.defineProperty(ae, "__esModule", {
                    value: !0
                })
            }
            ,
            ie.t = function(ae, i) {
                if (1 & i && (ae = ie(ae)),
                8 & i || 4 & i && typeof ae == "object" && ae && ae.__esModule)
                    return ae;
                var O = Object.create(null);
                if (ie.r(O),
                Object.defineProperty(O, "default", {
                    enumerable: !0,
                    value: ae
                }),
                2 & i && typeof ae != "string")
                    for (var $ in ae)
                        ie.d(O, $, function(Te) {
                            return ae[Te]
                        }
                        .bind(null, $));
                return O
            }
            ,
            ie.n = function(ae) {
                var i = ae && ae.__esModule ? function() {
                    return ae.default
                }
                : function() {
                    return ae
                }
                ;
                return ie.d(i, "a", i),
                i
            }
            ,
            ie.o = function(ae, i) {
                return Object.prototype.hasOwnProperty.call(ae, i)
            }
            ,
            ie.p = "",
            ie(ie.s = 4)
        }([function(ye, ve, ie) {
            ie.r(ve),
            ie.d(ve, "__extends", function() {
                return i
            }),
            ie.d(ve, "__assign", function() {
                return O
            }),
            ie.d(ve, "__rest", function() {
                return $
            }),
            ie.d(ve, "__decorate", function() {
                return Te
            }),
            ie.d(ve, "__param", function() {
                return we
            }),
            ie.d(ve, "__metadata", function() {
                return Re
            }),
            ie.d(ve, "__awaiter", function() {
                return Ye
            }),
            ie.d(ve, "__generator", function() {
                return _t
            }),
            ie.d(ve, "__createBinding", function() {
                return Jt
            }),
            ie.d(ve, "__exportStar", function() {
                return bt
            }),
            ie.d(ve, "__values", function() {
                return ai
            }),
            ie.d(ve, "__read", function() {
                return ii
            }),
            ie.d(ve, "__spread", function() {
                return da
            }),
            ie.d(ve, "__spreadArrays", function() {
                return aa
            }),
            ie.d(ve, "__await", function() {
                return Ta
            }),
            ie.d(ve, "__asyncGenerator", function() {
                return fa
            }),
            ie.d(ve, "__asyncDelegator", function() {
                return He
            }),
            ie.d(ve, "__asyncValues", function() {
                return Zt
            }),
            ie.d(ve, "__makeTemplateObject", function() {
                return si
            }),
            ie.d(ve, "__importStar", function() {
                return ba
            }),
            ie.d(ve, "__importDefault", function() {
                return Ca
            }),
            ie.d(ve, "__classPrivateFieldGet", function() {
                return za
            }),
            ie.d(ve, "__classPrivateFieldSet", function() {
                return Ms
            });
            var ae = function(Pa, Ua) {
                return (ae = Object.setPrototypeOf || {
                    __proto__: []
                }instanceof Array && function(Wa, Ka) {
                    Wa.__proto__ = Ka
                }
                || function(Wa, Ka) {
                    for (var Ns in Ka)
                        Object.prototype.hasOwnProperty.call(Ka, Ns) && (Wa[Ns] = Ka[Ns])
                }
                )(Pa, Ua)
            };
            function i(Pa, Ua) {
                function Wa() {
                    this.constructor = Pa
                }
                ae(Pa, Ua),
                Pa.prototype = Ua === null ? Object.create(Ua) : (Wa.prototype = Ua.prototype,
                new Wa)
            }
            var O = function() {
                return (O = Object.assign || function(Pa) {
                    for (var Ua, Wa = 1, Ka = arguments.length; Wa < Ka; Wa++)
                        for (var Ns in Ua = arguments[Wa])
                            Object.prototype.hasOwnProperty.call(Ua, Ns) && (Pa[Ns] = Ua[Ns]);
                    return Pa
                }
                ).apply(this, arguments)
            };
            function $(Pa, Ua) {
                var Wa = {};
                for (var Ka in Pa)
                    Object.prototype.hasOwnProperty.call(Pa, Ka) && Ua.indexOf(Ka) < 0 && (Wa[Ka] = Pa[Ka]);
                if (Pa != null && typeof Object.getOwnPropertySymbols == "function") {
                    var Ns = 0;
                    for (Ka = Object.getOwnPropertySymbols(Pa); Ns < Ka.length; Ns++)
                        Ua.indexOf(Ka[Ns]) < 0 && Object.prototype.propertyIsEnumerable.call(Pa, Ka[Ns]) && (Wa[Ka[Ns]] = Pa[Ka[Ns]])
                }
                return Wa
            }
            function Te(Pa, Ua, Wa, Ka) {
                var Ns, pl = arguments.length, el = pl < 3 ? Ua : Ka === null ? Ka = Object.getOwnPropertyDescriptor(Ua, Wa) : Ka;
                if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
                    el = Reflect.decorate(Pa, Ua, Wa, Ka);
                else
                    for (var wl = Pa.length - 1; wl >= 0; wl--)
                        (Ns = Pa[wl]) && (el = (pl < 3 ? Ns(el) : pl > 3 ? Ns(Ua, Wa, el) : Ns(Ua, Wa)) || el);
                return pl > 3 && el && Object.defineProperty(Ua, Wa, el),
                el
            }
            function we(Pa, Ua) {
                return function(Wa, Ka) {
                    Ua(Wa, Ka, Pa)
                }
            }
            function Re(Pa, Ua) {
                if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
                    return Reflect.metadata(Pa, Ua)
            }
            function Ye(Pa, Ua, Wa, Ka) {
                return new (Wa || (Wa = Promise))(function(Ns, pl) {
                    function el(vl) {
                        try {
                            fu(Ka.next(vl))
                        } catch (kl) {
                            pl(kl)
                        }
                    }
                    function wl(vl) {
                        try {
                            fu(Ka.throw(vl))
                        } catch (kl) {
                            pl(kl)
                        }
                    }
                    function fu(vl) {
                        var kl;
                        vl.done ? Ns(vl.value) : (kl = vl.value,
                        kl instanceof Wa ? kl : new Wa(function(Xl) {
                            Xl(kl)
                        }
                        )).then(el, wl)
                    }
                    fu((Ka = Ka.apply(Pa, Ua || [])).next())
                }
                )
            }
            function _t(Pa, Ua) {
                var Wa, Ka, Ns, pl, el = {
                    label: 0,
                    sent: function() {
                        if (1 & Ns[0])
                            throw Ns[1];
                        return Ns[1]
                    },
                    trys: [],
                    ops: []
                };
                return pl = {
                    next: wl(0),
                    throw: wl(1),
                    return: wl(2)
                },
                typeof Symbol == "function" && (pl[Symbol.iterator] = function() {
                    return this
                }
                ),
                pl;
                function wl(fu) {
                    return function(vl) {
                        return function(kl) {
                            if (Wa)
                                throw new TypeError("Generator is already executing.");
                            for (; el; )
                                try {
                                    if (Wa = 1,
                                    Ka && (Ns = 2 & kl[0] ? Ka.return : kl[0] ? Ka.throw || ((Ns = Ka.return) && Ns.call(Ka),
                                    0) : Ka.next) && !(Ns = Ns.call(Ka, kl[1])).done)
                                        return Ns;
                                    switch (Ka = 0,
                                    Ns && (kl = [2 & kl[0], Ns.value]),
                                    kl[0]) {
                                    case 0:
                                    case 1:
                                        Ns = kl;
                                        break;
                                    case 4:
                                        return el.label++,
                                        {
                                            value: kl[1],
                                            done: !1
                                        };
                                    case 5:
                                        el.label++,
                                        Ka = kl[1],
                                        kl = [0];
                                        continue;
                                    case 7:
                                        kl = el.ops.pop(),
                                        el.trys.pop();
                                        continue;
                                    default:
                                        if (!((Ns = (Ns = el.trys).length > 0 && Ns[Ns.length - 1]) || kl[0] !== 6 && kl[0] !== 2)) {
                                            el = 0;
                                            continue
                                        }
                                        if (kl[0] === 3 && (!Ns || kl[1] > Ns[0] && kl[1] < Ns[3])) {
                                            el.label = kl[1];
                                            break
                                        }
                                        if (kl[0] === 6 && el.label < Ns[1]) {
                                            el.label = Ns[1],
                                            Ns = kl;
                                            break
                                        }
                                        if (Ns && el.label < Ns[2]) {
                                            el.label = Ns[2],
                                            el.ops.push(kl);
                                            break
                                        }
                                        Ns[2] && el.ops.pop(),
                                        el.trys.pop();
                                        continue
                                    }
                                    kl = Ua.call(Pa, el)
                                } catch (Xl) {
                                    kl = [6, Xl],
                                    Ka = 0
                                } finally {
                                    Wa = Ns = 0
                                }
                            if (5 & kl[0])
                                throw kl[1];
                            return {
                                value: kl[0] ? kl[1] : void 0,
                                done: !0
                            }
                        }([fu, vl])
                    }
                }
            }
            var Jt = Object.create ? function(Pa, Ua, Wa, Ka) {
                Ka === void 0 && (Ka = Wa),
                Object.defineProperty(Pa, Ka, {
                    enumerable: !0,
                    get: function() {
                        return Ua[Wa]
                    }
                })
            }
            : function(Pa, Ua, Wa, Ka) {
                Ka === void 0 && (Ka = Wa),
                Pa[Ka] = Ua[Wa]
            }
            ;
            function bt(Pa, Ua) {
                for (var Wa in Pa)
                    Wa === "default" || Object.prototype.hasOwnProperty.call(Ua, Wa) || Jt(Ua, Pa, Wa)
            }
            function ai(Pa) {
                var Ua = typeof Symbol == "function" && Symbol.iterator
                  , Wa = Ua && Pa[Ua]
                  , Ka = 0;
                if (Wa)
                    return Wa.call(Pa);
                if (Pa && typeof Pa.length == "number")
                    return {
                        next: function() {
                            return Pa && Ka >= Pa.length && (Pa = void 0),
                            {
                                value: Pa && Pa[Ka++],
                                done: !Pa
                            }
                        }
                    };
                throw new TypeError(Ua ? "Object is not iterable." : "Symbol.iterator is not defined.")
            }
            function ii(Pa, Ua) {
                var Wa = typeof Symbol == "function" && Pa[Symbol.iterator];
                if (!Wa)
                    return Pa;
                var Ka, Ns, pl = Wa.call(Pa), el = [];
                try {
                    for (; (Ua === void 0 || Ua-- > 0) && !(Ka = pl.next()).done; )
                        el.push(Ka.value)
                } catch (wl) {
                    Ns = {
                        error: wl
                    }
                } finally {
                    try {
                        Ka && !Ka.done && (Wa = pl.return) && Wa.call(pl)
                    } finally {
                        if (Ns)
                            throw Ns.error
                    }
                }
                return el
            }
            function da() {
                for (var Pa = [], Ua = 0; Ua < arguments.length; Ua++)
                    Pa = Pa.concat(ii(arguments[Ua]));
                return Pa
            }
            function aa() {
                for (var Pa = 0, Ua = 0, Wa = arguments.length; Ua < Wa; Ua++)
                    Pa += arguments[Ua].length;
                var Ka = Array(Pa)
                  , Ns = 0;
                for (Ua = 0; Ua < Wa; Ua++)
                    for (var pl = arguments[Ua], el = 0, wl = pl.length; el < wl; el++,
                    Ns++)
                        Ka[Ns] = pl[el];
                return Ka
            }
            function Ta(Pa) {
                return this instanceof Ta ? (this.v = Pa,
                this) : new Ta(Pa)
            }
            function fa(Pa, Ua, Wa) {
                if (!Symbol.asyncIterator)
                    throw new TypeError("Symbol.asyncIterator is not defined.");
                var Ka, Ns = Wa.apply(Pa, Ua || []), pl = [];
                return Ka = {},
                el("next"),
                el("throw"),
                el("return"),
                Ka[Symbol.asyncIterator] = function() {
                    return this
                }
                ,
                Ka;
                function el(Xl) {
                    Ns[Xl] && (Ka[Xl] = function(uu) {
                        return new Promise(function(tu, Ps) {
                            pl.push([Xl, uu, tu, Ps]) > 1 || wl(Xl, uu)
                        }
                        )
                    }
                    )
                }
                function wl(Xl, uu) {
                    try {
                        (tu = Ns[Xl](uu)).value instanceof Ta ? Promise.resolve(tu.value.v).then(fu, vl) : kl(pl[0][2], tu)
                    } catch (Ps) {
                        kl(pl[0][3], Ps)
                    }
                    var tu
                }
                function fu(Xl) {
                    wl("next", Xl)
                }
                function vl(Xl) {
                    wl("throw", Xl)
                }
                function kl(Xl, uu) {
                    Xl(uu),
                    pl.shift(),
                    pl.length && wl(pl[0][0], pl[0][1])
                }
            }
            function He(Pa) {
                var Ua, Wa;
                return Ua = {},
                Ka("next"),
                Ka("throw", function(Ns) {
                    throw Ns
                }),
                Ka("return"),
                Ua[Symbol.iterator] = function() {
                    return this
                }
                ,
                Ua;
                function Ka(Ns, pl) {
                    Ua[Ns] = Pa[Ns] ? function(el) {
                        return (Wa = !Wa) ? {
                            value: Ta(Pa[Ns](el)),
                            done: Ns === "return"
                        } : pl ? pl(el) : el
                    }
                    : pl
                }
            }
            function Zt(Pa) {
                if (!Symbol.asyncIterator)
                    throw new TypeError("Symbol.asyncIterator is not defined.");
                var Ua, Wa = Pa[Symbol.asyncIterator];
                return Wa ? Wa.call(Pa) : (Pa = ai(Pa),
                Ua = {},
                Ka("next"),
                Ka("throw"),
                Ka("return"),
                Ua[Symbol.asyncIterator] = function() {
                    return this
                }
                ,
                Ua);
                function Ka(Ns) {
                    Ua[Ns] = Pa[Ns] && function(pl) {
                        return new Promise(function(el, wl) {
                            (function(fu, vl, kl, Xl) {
                                Promise.resolve(Xl).then(function(uu) {
                                    fu({
                                        value: uu,
                                        done: kl
                                    })
                                }, vl)
                            }
                            )(el, wl, (pl = Pa[Ns](pl)).done, pl.value)
                        }
                        )
                    }
                }
            }
            function si(Pa, Ua) {
                return Object.defineProperty ? Object.defineProperty(Pa, "raw", {
                    value: Ua
                }) : Pa.raw = Ua,
                Pa
            }
            var ga = Object.create ? function(Pa, Ua) {
                Object.defineProperty(Pa, "default", {
                    enumerable: !0,
                    value: Ua
                })
            }
            : function(Pa, Ua) {
                Pa.default = Ua
            }
            ;
            function ba(Pa) {
                if (Pa && Pa.__esModule)
                    return Pa;
                var Ua = {};
                if (Pa != null)
                    for (var Wa in Pa)
                        Wa !== "default" && Object.prototype.hasOwnProperty.call(Pa, Wa) && Jt(Ua, Pa, Wa);
                return ga(Ua, Pa),
                Ua
            }
            function Ca(Pa) {
                return Pa && Pa.__esModule ? Pa : {
                    default: Pa
                }
            }
            function za(Pa, Ua) {
                if (!Ua.has(Pa))
                    throw new TypeError("attempted to get private field on non-instance");
                return Ua.get(Pa)
            }
            function Ms(Pa, Ua, Wa) {
                if (!Ua.has(Pa))
                    throw new TypeError("attempted to set private field on non-instance");
                return Ua.set(Pa, Wa),
                Wa
            }
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            }),
            ve.htmlEncode = ve.reportRefreshRate = ve.getHexColor = ve.getIndex = ve.assign = ve.browser = ve.browserPrefix = void 0,
            ve.browserPrefix = ["", "-webkit-", "-moz-", "-ms-"];
            var ae, i = 1;
            ve.browser = {
                version: (ae = navigator.userAgent,
                {
                    trident: /Trident/i.test(ae),
                    presto: /Presto/i.test(ae),
                    webKit: /AppleWebKit/i.test(ae),
                    gecko: /Gecko/i.test(ae) && !/KHTML/i.test(ae),
                    mobile: /AppleWebKit.*Mobile.*/i.test(ae),
                    ios: /Mac OS X[\s\_\-\/](\d+[\.\-\_]\d+[\.\-\_]?\d*)/i.test(ae),
                    android: /Android/i.test(ae),
                    linux: /Linux/i.test(ae),
                    windowsphone: /Windows Phone/i.test(ae),
                    iPhone: /iPhone/i.test(ae),
                    iPad: /iPad/i.test(ae) || navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1,
                    MicroMessenger: /MicroMessenger/i.test(ae),
                    webApp: !/Safari/i.test(ae),
                    edge: /edge/i.test(ae),
                    safari: /(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(ae.toLowerCase()) || /(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(ae.toLowerCase())
                })
            },
            ve.assign = function() {
                for (var O = [], $ = 0; $ < arguments.length; $++)
                    O[$] = arguments[$];
                if (O.length <= 1)
                    return O[0];
                var Te = O[0] != null ? Object(O[0]) : {};
                return O.forEach(function(we, Re) {
                    if (Re !== 0 && we != null)
                        for (var Ye in we)
                            we.hasOwnProperty(Ye) && (Te[Ye] = we[Ye])
                }),
                Te
            }
            ,
            ve.getIndex = function() {
                return i++
            }
            ,
            ve.getHexColor = function(O) {
                return "#" + ("000000" + O.toString(16)).slice(-6)
            }
            ,
            ve.reportRefreshRate = function() {
                var O = window.requestIdleCallback
                  , $ = function(Te) {
                    requestAnimationFrame(function(we) {
                        requestAnimationFrame(function(Re) {
                            Te(Math.round(1e3 / (Re - we)))
                        })
                    })
                };
                return new Promise(function(Te) {
                    typeof O == "function" ? O(function(we) {
                        we && !we.didTimeout ? $(function(Re) {
                            Te(Re)
                        }) : setTimeout(function() {
                            $(function(Re) {
                                Te(Re)
                            })
                        }, 5e3)
                    }, {
                        timeout: 1e4
                    }) : setTimeout(function() {
                        $(function(we) {
                            Te(we)
                        })
                    }, 1e4)
                }
                )
            }
            ,
            ve.htmlEncode = function(O) {
                return O.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2f;").replace(/\n/g, "<br>")
            }
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            }),
            ve.loadImg = ve.loadSvg = ve.svgObj = ve.imgObj = void 0;
            var ae = ie(0)
              , i = ae.__importDefault(ie(7))
              , O = ae.__importDefault(ie(8))
              , $ = ae.__importDefault(ie(9));
            ve.imgObj = {},
            ve.svgObj = {};
            var Te = []
              , we = {
                0: O.default,
                1: i.default,
                like: $.default
            };
            ve.loadSvg = function(Re) {
                return new Promise(function(Ye, _t) {
                    var Jt = new Image;
                    Jt.src = "data:image/svg+xml;base64," + btoa(we[Re]),
                    Jt.onload = function() {
                        ve.svgObj[Re] = Jt,
                        Ye()
                    }
                    ,
                    Jt.onerror = function() {
                        _t()
                    }
                }
                )
            }
            ,
            ve.loadImg = function(Re) {
                return Te[Re] || (Te[Re] = function(Ye) {
                    return new Promise(function(_t, Jt) {
                        var bt = new Image;
                        bt.setAttribute("crossOrigin", "anonymous"),
                        bt.src = Ye,
                        bt.onload = function() {
                            ve.imgObj[Ye] = {
                                img: bt,
                                width: bt.width,
                                height: bt.height
                            },
                            _t(ve.imgObj[Ye])
                        }
                        ,
                        bt.onerror = function() {
                            Jt()
                        }
                    }
                    )
                }(Re))
            }
        }
        , function(ye, ve, ie) {
            var ae = ie(13)
              , i = ie.n(ae)
              , O = ie(14)
              , $ = ie.n(O)()(i.a);
            $.push([ye.i, '.dm-canvas{position:absolute;top:0;left:0;width:100%;height:100%}.b-danmaku{position:absolute;line-height:1.125;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:pre;-webkit-perspective:500px;perspective:500px;will-change:transform opacity;pointer-events:none}.b-danmaku.b-danmaku-hover{z-index:10}.b-danmaku.b-danmaku-visibility{visibility:hidden}.b-danmaku.b-danmaku-hide{opacity:0!important}.b-danmaku.b-danmaku-center{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);will-change:opacity}.b-danmaku-up{background-color:rgba(0,0,0,.5);border-radius:1em;line-height:1.6;padding:0 .5em 0 2.8em}.b-danmaku-up-tip{position:absolute;left:.66em;top:50%;background:#00a1d6;color:#fff;border-radius:1em;padding:0 .5em;text-shadow:none!important;line-height:1.5;-webkit-transform-origin:left center;transform-origin:left center;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.b-danmaku-actor{background-color:rgba(0,0,0,.5);border-radius:16px;padding:4px 16px 3px 40px;z-index:1}.b-danmaku-actor-img{position:absolute;top:2px;left:2px;display:inline-block;width:24px;height:24px;border-radius:50%;overflow:hidden}.b-danmaku-actor-img>img{width:100%;height:100%;border:none}.b-danmaku-actor-tip{position:absolute;bottom:2px;left:16px;width:20px;height:20px;font-size:0;-webkit-transform-origin:0 100%;transform-origin:0 100%}.b-danmaku-actor-tip>svg{width:100%;height:100%}.b-danmaku-actor-tip.b-danmaku-up-text{width:auto;height:16px;top:2px;padding:2px 8px;font-size:14px;color:#fff;text-shadow:none;-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb;line-height:1;border-radius:12px;background-color:#00a1d6;-webkit-transform-origin:0 0;transform-origin:0 0}.b-danmaku .b-danmaku-icon{vertical-align:bottom}.b-danmaku.b-danmaku-liked{z-index:2}.b-danmaku.b-danmaku-liked .b-danmaku-liked-icon{opacity:1}.b-danmaku.b-danmaku-liked .b-danmaku-high-plus{-webkit-animation:tipsPlus 1.25s forwards;animation:tipsPlus 1.25s forwards}.b-danmaku-liked-icon{display:inline-block;position:absolute;opacity:0;-webkit-transition:opacity .15s ease-in-out;-o-transition:opacity .15s ease-in-out;transition:opacity .15s ease-in-out;font-size:0;vertical-align:bottom}.b-danmaku-liked-icon svg{width:100%;height:100%;fill:#fff}.b-danmaku-like{z-index:2;line-height:1;padding:.6em}.b-danmaku-like-icon{display:inline-block;font-size:0;vertical-align:bottom}.b-danmaku-like-icon svg{width:100%;height:100%;fill:#fff}.b-danmaku-like-num{display:inline-block;margin:0 8px 0 0;font-size:14px;vertical-align:top;-webkit-transform-origin:left top;transform-origin:left top;color:#fff}.b-danmaku-like:before{content:"";position:absolute;top:.2em;left:0;bottom:.2em;right:0;background-color:hsla(0,0%,100%,.5);border:1px solid #fff;z-index:-1}.b-danmaku-high{line-height:1;padding:.2em 0;z-index:2}.b-danmaku-high.b-danmaku-high-top .b-danmaku-high-top-bg{position:absolute;top:.1em;left:0;width:100%;height:2em}.b-danmaku-high.b-danmaku-high-reverse .b-danmaku-high-text{margin:0 .2em 0 0}.b-danmaku-high.b-danmaku-high-reverse .b-danmaku-high-icon{margin-left:2px}.b-danmaku-high-plus{display:inline-block;position:absolute;right:-.5em;top:0;opacity:0;font-size:12px;color:#fff;text-shadow:none;z-index:2}.b-danmaku-high-text{margin-left:.2em}.b-danmaku-high-icon{display:inline-block;position:relative;font-size:0;vertical-align:bottom}.b-danmaku-high-icon-animate{display:inline-block;width:106%;height:106%;margin-top:-3%}.b-danmaku-high-icon .bp-svgicon{position:absolute;top:0;left:0}.b-danmaku .bp-svgicon{-webkit-transition:fill .3s;-o-transition:fill .3s;transition:fill .3s;vertical-align:middle;display:inline-block;font-size:0}.b-danmaku .bp-svgicon,.b-danmaku .bp-svgicon svg{width:100%;height:100%}@-webkit-keyframes tipsPlus{0%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}52%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}70%{opacity:1;-webkit-transform:translateY(-66%);transform:translateY(-66%)}90%{opacity:1;-webkit-transform:translateY(-66%);transform:translateY(-66%)}to{opacity:0;-webkit-transform:translateY(-130%);transform:translateY(-130%)}}@keyframes tipsPlus{0%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}52%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}70%{opacity:1;-webkit-transform:translateY(-66%);transform:translateY(-66%)}90%{opacity:1;-webkit-transform:translateY(-66%);transform:translateY(-66%)}to{opacity:0;-webkit-transform:translateY(-130%);transform:translateY(-130%)}}', "", {
                version: 3,
                sources: ["webpack://./src/less/index.less"],
                names: [],
                mappings: "AAAA,WACI,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WACJ,CACA,WACI,iBAAA,CACA,iBAAA,CACA,0BAAA,CACA,wBAAA,CAAA,qBAAA,CAAA,oBAAA,CAAA,gBAAA,CACA,eAAA,CACA,yBAAA,CAAA,iBAAA,CACA,6BAAA,CACA,mBACJ,CAAI,2BACI,UAER,CAAI,gCACI,iBAER,CAAI,0BACI,mBAER,CACI,4BACI,QAAA,CACA,kCAAA,CAAA,0BAAA,CACA,mBACR,CAEI,cACI,+BAAA,CACA,iBAAA,CACA,eAAA,CACA,sBAAR,CACQ,kBACI,iBAAA,CACA,UAAA,CACA,OAAA,CACA,kBAAA,CACA,UAAA,CACA,iBAAA,CACA,cAAA,CACA,0BAAA,CACA,eAAA,CACA,oCAAA,CAAA,4BAAA,CACA,kCAAA,CAAA,0BACZ,CAGI,iBACI,+BAAA,CACA,kBAAA,CACA,yBAAA,CACA,SADR,CAEQ,qBACI,iBAAA,CACA,OAAA,CACA,QAAA,CACA,oBAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAZ,CARQ,yBAUQ,UAAA,CACA,WAAA,CACA,WAChB,CAEQ,qBACI,iBAAA,CACA,UAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CAEA,+BAAA,CAAA,uBADZ,CAEY,yBACI,UAAA,CACA,WAAhB,CAEY,uCACI,UAAA,CACA,WAAA,CACA,OAAA,CACA,eAAA,CACA,cAAA,CACA,UAAA,CACA,gBAAA,CACA,kCAAA,CAAA,sBAAA,CAAA,0BAAA,CACA,aAAA,CACA,kBAAA,CACA,wBAAA,CACA,4BAAA,CAAA,oBAAhB,CA1FA,2BAgGQ,qBAHR,CAMI,2BACI,SAJR,CAGI,iDAGQ,SAHZ,CAAI,gDAMQ,yCAAA,CAAA,iCAHZ,CAMI,sBACI,oBAAA,CACA,iBAAA,CACA,SAAA,CACA,2CAAA,CAAA,sCAAA,CAAA,mCAAA,CACA,WAAA,CACA,qBAJR,CAFI,0BAQQ,UAAA,CACA,WAAA,CACA,SAHZ,CAOI,gBACI,SAAA,CACA,aAAA,CACA,YALR,CAMQ,qBACI,oBAAA,CACA,WAAA,CACA,qBAJZ,CACQ,yBAKQ,UAAA,CACA,WAAA,CACA,SAHhB,CAMQ,oBACI,oBAAA,CACA,gBAAA,CACA,cAAA,CACA,kBAAA,CACA,iCAAA,CAAA,yBAAA,CACA,UAJZ,CAMQ,uBACI,UAAA,CACA,iBAAA,CACA,QAAA,CACA,MAAA,CACA,WAAA,CACA,OAAA,CACA,mCAAA,CACA,qBAAA,CACA,UAJZ,CAQI,gBACI,aAAA,CACA,cAAA,CACA,SANR,CAOQ,0DAEQ,iBAAA,CACA,QAAA,CACA,MAAA,CACA,UAAA,CACA,UANhB,CAYgB,4DACI,iBAVpB,CAYgB,4DACI,eAVpB,CAcQ,qBACI,oBAAA,CACA,iBAAA,CACA,WAAA,CACA,KAAA,CACA,SAAA,CACA,cAAA,CACA,UAAA,CACA,gBAAA,CACA,SAZZ,CAcQ,qBACI,gBAZZ,CAcQ,qBACI,oBAAA,CACA,iBAAA,CACA,WAAA,CACA,qBAZZ,CAaY,6BACI,oBAAA,CACA,UAAA,CACA,WAAA,CACA,cAXhB,CAEQ,iCAYQ,iBAAA,CACA,KAAA,CACA,MAXhB,CAtMA,uBAsNQ,2BAAA,CAAA,sBAAA,CAAA,mBAAA,CACA,qBAAA,CACA,oBAAA,CACA,WAbR,CA5MA,kDA6NQ,UAAA,CACA,WAbR,CAeI,4BACI,GACI,SAAA,CACA,+BAAA,CAAA,uBAbV,CAeM,IACI,SAAA,CACA,+BAAA,CAAA,uBAbV,CAeM,IACI,SAAA,CACA,kCAAA,CAAA,0BAbV,CAeM,IACI,SAAA,CACA,kCAAA,CAAA,0BAbV,CAeM,GACI,SAAA,CACA,mCAAA,CAAA,2BAbV,CACF,CAPI,oBACI,GACI,SAAA,CACA,+BAAA,CAAA,uBAbV,CAeM,IACI,SAAA,CACA,+BAAA,CAAA,uBAbV,CAeM,IACI,SAAA,CACA,kCAAA,CAAA,0BAbV,CAeM,IACI,SAAA,CACA,kCAAA,CAAA,0BAbV,CAeM,GACI,SAAA,CACA,mCAAA,CAAA,2BAbV,CACF",
                sourcesContent: [`.dm-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.b-danmaku {
    position: absolute;
    line-height: 1.125;
    -webkit-touch-callout: none;
    user-select: none;
    white-space: pre;
    perspective: 500px;
    will-change: transform opacity;
    pointer-events: none;
    &.b-danmaku-hover {
        z-index: 10;
    }
    &.b-danmaku-visibility {
        visibility: hidden;
    }
    &.b-danmaku-hide {
        opacity: 0 !important;
        // z-index: -1;
    }
    &.b-danmaku-center {
        left: 50%;
        transform: translateX(-50%);
        will-change: opacity;
    }
    // up弹幕
    &-up {
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 1em;
        line-height: 1.6;
        padding: 0 0.5em 0 2.8em;
        &-tip {
            position: absolute;
            left: 0.66em;
            top: 50%;
            background: #00a1d6;
            color: #fff;
            border-radius: 1em;
            padding: 0 0.5em;
            text-shadow: none !important;
            line-height: 1.5;
            transform-origin: left center;
            transform: translateY(-50%);
        }
    }
    // 有头像弹幕
    &-actor {
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 16px;
        padding: 4px 16px 3px 40px;
        z-index: 1;
        &-img {
            position: absolute;
            top: 2px;
            left: 2px;
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            overflow: hidden;
            > img {
                width: 100%;
                height: 100%;
                border: none;
            }
        }
        &-tip {
            position: absolute;
            bottom: 2px;
            left: 16px;
            width: 20px;
            height: 20px;
            font-size: 0;

            transform-origin: 0 100%;
            & > svg {
                width: 100%;
                height: 100%;
            }
            &.b-danmaku-up-text {
                width: auto;
                height: 16px;
                top: 2px;
                padding: 2px 8px;
                font-size: 14px;
                color: #fff;
                text-shadow: none;
                writing-mode: horizontal-tb;
                line-height: 1;
                border-radius: 12px;
                background-color: #00a1d6;
                transform-origin: 0 0;
            }
        }
    }
    // 弹幕前后图标
    .b-danmaku-icon {
        vertical-align: bottom;
    }
    // 点击点赞
    &.b-danmaku-liked {
        z-index: 2;
        .b-danmaku-liked-icon {
            opacity: 1;
        }
        .b-danmaku-high-plus {
            animation: tipsPlus 1250ms forwards;
        }
    }
    &-liked-icon {
        display: inline-block;
        position: absolute;
        opacity: 0;
        transition: opacity 150ms ease-in-out;
        font-size: 0;
        vertical-align: bottom;
        svg {
            width: 100%;
            height: 100%;
            fill: #fff;
        }
    }
    // 消息中心跳转的弹幕
    &-like {
        z-index: 2;
        line-height: 1;
        padding: 0.6em;
        &-icon {
            display: inline-block;
            font-size: 0;
            vertical-align: bottom;
            svg {
                width: 100%;
                height: 100%;
                fill: #fff;
            }
        }
        &-num {
            display: inline-block;
            margin: 0 8px 0 0;
            font-size: 14px;
            vertical-align: top;
            transform-origin: left top;
            color: #fff;
        }
        &::before {
            content: '';
            position: absolute;
            top: 0.2em;
            left: 0;
            bottom: 0.2em;
            right: 0;
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid #fff;
            z-index: -1;
        }
    }
    // 高赞弹幕
    &-high {
        line-height: 1;
        padding: 0.2em 0;
        z-index: 2;
        &.b-danmaku-high-top {
            .b-danmaku-high-top-bg {
                position: absolute;
                top: 0.1em;
                left: 0;
                width: 100%;
                height: 2em;
            }
        }
        &.b-danmaku-high-reverse {
            // 逆向弹幕
            .b-danmaku-high {
                &-text {
                    margin: 0 0.2em 0 0;
                }
                &-icon {
                    margin-left: 2px;
                }
            }
        }
        &-plus {
            display: inline-block;
            position: absolute;
            right: -0.5em;
            top: 0;
            opacity: 0;
            font-size: 12px;
            color: #fff;
            text-shadow: none;
            z-index: 2;
        }
        &-text {
            margin-left: 0.2em;
        }
        &-icon {
            display: inline-block;
            position: relative;
            font-size: 0;
            vertical-align: bottom;
            &-animate {
                display: inline-block;
                width: 106%;
                height: 106%;
                margin-top: -3%;
            }
            .bp-svgicon {
                position: absolute;
                top: 0;
                left: 0;
            }
        }
    }
    .bp-svgicon {
        transition: fill 0.3s;
        vertical-align: middle;
        display: inline-block;
        font-size: 0;
    }
    .bp-svgicon,
    .bp-svgicon svg {
        width: 100%;
        height: 100%;
    }
    @keyframes tipsPlus {
        0% {
            opacity: 0;
            transform: translateY(0);
        }
        52% {
            opacity: 1;
            transform: translateY(0);
        }
        70% {
            opacity: 1;
            transform: translateY(-66%);
        }
        90% {
            opacity: 1;
            transform: translateY(-66%);
        }
        100% {
            opacity: 0;
            transform: translateY(-130%);
        }
    }
}
`],
                sourceRoot: ""
            }]),
            ve.a = $
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(0);
            ie(16);
            var i = ie(1)
              , O = ae.__importDefault(ie(5))
              , $ = ae.__importDefault(ie(17))
              , Te = ae.__importDefault(ie(18))
              , we = ae.__importDefault(ie(27))
              , Re = ae.__importDefault(ie(11))
              , Ye = [.2, .4, .5, .6, .7, .8, .9, .95, .97, .99]
              , _t = {
                .2: "two",
                .4: "four",
                .5: "five",
                .6: "six",
                .7: "seven",
                .8: "eight",
                .9: "nine",
                .95: "ninef",
                .97: "nines",
                .99: "ninen"
            }
              , Jt = function() {
                function bt(ai) {
                    this.fps = 0,
                    this.deviceFps = 0,
                    this.deviceFpsList = [],
                    this.fpsList = [],
                    this.fpsCount = 0,
                    this.densityList = {
                        last: 10,
                        laster: 10,
                        max: 300,
                        maxs: 20,
                        fpsLow: 0,
                        fpsup: 0
                    },
                    bt.dmSize = {},
                    this.config = i.assign({
                        container: document.getElementById("player"),
                        bold: !0,
                        duration: 4.5,
                        danmakuNumber: 300,
                        danmakuArea: 0,
                        fontBorder: 0,
                        fontFamily: 'SimHei, "Microsoft JhengHei"',
                        fontSize: 1,
                        fullScreenSync: !1,
                        opacity: 1,
                        preventShade: !1,
                        speedPlus: 1,
                        speedSync: !1,
                        density: !0,
                        videoSpeed: 1,
                        visible: !0,
                        isRecycling: !0,
                        verticalDanmaku: !1,
                        preTime: 1,
                        offsetTop: 4,
                        danmakuFilter: function(ii) {
                            return !0
                        },
                        danmakuInserting: function(ii) {},
                        containerUpdating: function(ii) {},
                        listUpdating: function(ii) {},
                        countUpdating: function(ii) {},
                        timeSyncFunc: function() {
                            return window.performance.now()
                        }
                    }, ai != null ? ai : {}),
                    this.container = this.config.container,
                    this.paused = !0,
                    this.danmakuArray = [],
                    this.time = 0,
                    this.timeZero = 0,
                    this.pauseTime = 0,
                    this.dmTrack = {
                        dmexposure: 0,
                        imgexposure: 0,
                        actor: 0,
                        actorClick: 0,
                        fps: 0,
                        info: null
                    },
                    this.startTime = Date.now(),
                    this.visualArray = new O.default,
                    this.timeLine = new $.default,
                    this.config.videoSpeed = this.config.videoSpeed || 1,
                    this.manager = new Te.default(this),
                    this.config.density && (this.config.danmakuNumber = 10,
                    this.densityList.last = this.config.danmakuNumber),
                    window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(ii) {
                        return window.setTimeout(function() {
                            ii(performance.now())
                        }, 1e3 / 60)
                    }
                    ,
                    window.cancelAnimationFrame = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function(ii) {
                        window.clearTimeout(ii)
                    }
                }
                return bt.prototype.addTimely = function(ai) {
                    var ii, da = this.renderDanmaku(ai), aa = da.border && this.config.visible;
                    ai.stime === -1 ? this.manager && this.config.visible && (da.stime = this.config.timeSyncFunc() / 1e3 + .1,
                    this.manager.insert([da], this.time / 1e3)) : (this.timeLine.insert(da),
                    aa && ((ii = this.manager) === null || ii === void 0 || ii.insert([da], this.time / 1e3)))
                }
                ,
                bt.prototype.addAll = function(ai) {
                    var ii = this;
                    Array.prototype.push.apply(this.danmakuArray, ai),
                    this.worker = new we.default,
                    this.worker.postMessage(this.danmakuArray),
                    this.worker.onmessage = function(da) {
                        ii.timeLine = new $.default(da.data),
                        ii.worker.terminate(),
                        ii.worker = null
                    }
                }
                ,
                bt.prototype.renderDanmaku = function(ai) {
                    return i.assign({}, ai, {
                        border: ai.border || !1,
                        borderColor: ai.borderColor || 6750207,
                        on: !1
                    })
                }
                ,
                bt.prototype.count = function() {
                    return this.danmakuArray ? this.danmakuArray.length : 0
                }
                ,
                bt.prototype.play = function(ai) {
                    var ii = this;
                    this.paused = !1,
                    this.timeZero = this.pauseTime,
                    this.pauseTime = 0,
                    this.animate && window.cancelAnimationFrame(this.animate),
                    this.animate = window.requestAnimationFrame(function() {
                        ii.startTime = Date.now(),
                        ii.animateTime = ii.startTime - ii.animateRange,
                        ii.nextFrame(ai)
                    }),
                    this.fpsTimer && clearTimeout(this.fpsTimer),
                    this.setFps()
                }
                ,
                bt.prototype.pause = function() {
                    if (!this.paused) {
                        this.fpsTimer && clearTimeout(this.fpsTimer),
                        this.setFps(0),
                        this.paused = !0;
                        var ai = Date.now();
                        this.pauseTime = this.timeZero + ai - this.startTime
                    }
                }
                ,
                bt.prototype.toggle = function() {
                    this.paused ? this.play() : this.pause()
                }
                ,
                bt.prototype.seek = function(ai, ii) {
                    this.timeZero = 1e3 * ai,
                    !ii && (this.timeZero - this.time > 1e3 || this.timeZero - this.time < -500) && this.clear(),
                    this.startTime = Date.now(),
                    this.manager.lastTime = ai,
                    this.animateRange = this.startTime + 1e3,
                    this.paused ? (this.play(ii ? ai : 0),
                    this.pause()) : this.play(ii ? ai : 0)
                }
                ,
                bt.prototype.add = function(ai, ii) {
                    ai.canvas && ai.canvas.length < 1 || (ii || ai.stime === -1 && (ai.stime = this.config.timeSyncFunc() / 1e3 + .1),
                    this.danmakuArray.push(ai),
                    this.addTimely(ai),
                    typeof this.config.listUpdating == "function" && this.config.listUpdating(this.danmakuArray),
                    typeof this.config.countUpdating == "function" && this.config.countUpdating(this.danmakuArray.length))
                }
                ,
                bt.prototype.remove = function(ai) {
                    if (this.manager) {
                        for (var ii = 0; ii < this.danmakuArray.length; ii++)
                            ai === this.danmakuArray[ii].dmid && this.danmakuArray.splice(ii, 1);
                        this.manager.remove(ai)
                    }
                }
                ,
                bt.prototype.multipleAdd = function(ai) {
                    if (ai && ai.length) {
                        this.danmakuArray = this.danmakuArray.concat(ai);
                        for (var ii = 0; ii < ai.length; ii++)
                            this.timeLine.insert(ai[ii]);
                        typeof this.config.listUpdating == "function" && this.config.listUpdating(this.danmakuArray),
                        typeof this.config.countUpdating == "function" && this.config.countUpdating(this.danmakuArray.length)
                    }
                    this.deviceFps || this.getRefreshRate(1)
                }
                ,
                bt.prototype.getRefreshRate = function(ai) {
                    var ii = this;
                    i.reportRefreshRate().then(function(da) {
                        var aa;
                        if (ii.deviceFpsList.length)
                            for (var Ta = void 0, fa = 0; fa < ii.deviceFpsList.length; fa++) {
                                if (da === (Ta = ii.deviceFpsList[fa])[0]) {
                                    Ta[1]++;
                                    break
                                }
                                if (da > Ta[0]) {
                                    ii.deviceFpsList.splice(fa, 0, [da, 1]);
                                    break
                                }
                            }
                        else
                            ii.deviceFpsList.push([da, 1]);
                        ii.deviceFpsList.forEach(function(He) {
                            (!aa || aa[1] < He[1]) && (aa = He)
                        }),
                        ii.deviceFps = Math.min(aa[0] || 60, 60),
                        ii.dmTrack.fps = ii.deviceFps,
                        ai < 10 && ii.getRefreshRate(++ai)
                    }).catch(function() {})
                }
                ,
                bt.prototype.searchAreaDanmaku = function(ai, ii) {
                    ai = ai || 0,
                    ii = ii || 0;
                    for (var da = [], aa = this.visualArray.length - 1; aa >= 0; aa--) {
                        var Ta = this.visualArray[aa];
                        this.config.danmakuFilter(Ta.textData) && Ta.showed && (Ta.textData && Ta.textData.mode === 6 ? ai >= this.config.width - Ta._x - Ta.width - 5 && ai <= this.config.width - Ta._x + 5 && ii >= Ta._y - 5 && ii - Ta.height <= Ta._y + 5 && da.push(Ta) : ai >= Ta._x - 5 && ai <= Ta._x + Ta.width + 5 && ii >= Ta._y - 5 && ii - Ta.height <= Ta._y + 5 && da.push(Ta))
                    }
                    return da
                }
                ,
                bt.prototype.option = function(ai, ii) {
                    if (ai && ii !== void 0)
                        switch (ai) {
                        case "fontfamily":
                            if (arguments.length === 1)
                                return this.config.fontFamily;
                            this.manager && (this.manager.config.fontFamily = ii),
                            this.wordReseted = !1,
                            this.resetWord();
                            break;
                        case "bold":
                            if (arguments.length === 1)
                                return this.config.bold;
                            this.manager && (this.manager.config.bold = ii),
                            this.wordReseted = !1,
                            this.resetWord();
                            break;
                        case "preventshade":
                            if (arguments.length === 1)
                                return this.config.preventShade;
                            this.manager && (this.manager.config.preventShade = ii);
                            break;
                        case "speedplus":
                            if (arguments.length === 1)
                                return this.config.speedPlus;
                            this.manager && (this.manager.config.speedPlus = ii);
                            break;
                        case "speedsync":
                            if (arguments.length === 1)
                                return this.config.speedSync;
                            this.manager && (this.manager.config.speedSync = ii);
                            break;
                        case "fontsize":
                            if (arguments.length === 1)
                                return this.config.fontSize;
                            this.manager && (this.manager.config.fontSize = ii);
                            break;
                        case "fullscreensync":
                            if (arguments.length === 1)
                                return this.config.fullScreenSync;
                            this.manager && (this.manager.config.fullScreenSync = ii);
                            break;
                        case "danmakunumber":
                            if (arguments.length === 1)
                                return this.config.danmakuNumber;
                            this.manager && (this.manager.config.danmakuNumber = ii);
                            break;
                        case "danmakuArea":
                            if (arguments.length === 1)
                                return this.config.danmakuArea;
                            if (this.manager) {
                                var da = +ii;
                                (da || da === 0) && (da = da < 0 ? 0 : da > 100 ? 100 : da,
                                this.manager.config.danmakuArea = da)
                            }
                            break;
                        case "duration":
                            if (arguments.length === 1)
                                return this.config.duration;
                            this.manager && (this.manager.config.duration = ii);
                            break;
                        case "fontborder":
                            if (arguments.length === 1)
                                return this.config.fontBorder;
                            this.manager && (this.manager.config.fontBorder = ii);
                            break;
                        case "visible":
                            if (arguments.length === 1)
                                return this.config.visible;
                            this.manager && (this.manager.config.visible = ii);
                            break;
                        case "speedSync":
                            if (arguments.length === 1)
                                return this.config.speedSync;
                            this.manager && (this.manager.config.speedSync = ii,
                            this.manager.update(this.time / 1e3, this.config.videoSpeed),
                            this.animateTime = 0);
                            break;
                        case "videospeed":
                            if (arguments.length === 1)
                                return this.config.videoSpeed;
                            if (this.manager) {
                                var aa = this.manager.config.videoSpeed / ii;
                                this.manager.config.videoSpeed = ii,
                                this.manager.update(this.time / 1e3, aa),
                                this.animateTime = 0
                            }
                            break;
                        case "opacity":
                            if (arguments.length === 1)
                                return this.config.opacity;
                            this.manager && (this.manager.config.opacity = ii);
                            break;
                        case "density":
                            if (arguments.length === 1)
                                return this.config.density;
                            this.fpsStart = !1,
                            this.fps = 0,
                            this.config.density = ii,
                            this.config.danmakuNumber = 300;
                            break;
                        case "isMini":
                            if (arguments.length === 1)
                                return this.config.isMini;
                            this.config.isMini = ii;
                            break;
                        default:
                            this.manager && this.manager.option(ai, ii)
                        }
                }
                ,
                bt.prototype.resetWord = function() {
                    var ai = this;
                    !this.wordReseted && this.dmTrack.div && (bt.dmSize = {},
                    this.wordReseted = !0,
                    this.wordTimer && clearTimeout(this.wordTimer),
                    this.wordTimer = window.setTimeout(function() {
                        Re.default.reset(ai.container, "font-family:" + ai.config.fontFamily + ";font-weight:" + (ai.config.bold ? "bold" : "normal") + ";")
                    }, 10))
                }
                ,
                bt.prototype.nextFrame = function(ai, ii) {
                    var da = this
                      , aa = Date.now();
                    if (this.time = this.timeZero + (aa - this.startTime) * this.config.videoSpeed,
                    typeof this.config.timeSyncFunc == "function") {
                        var Ta = this.config.timeSyncFunc();
                        (Math.abs(Ta - this.time) > 1e3 || isNaN(this.time)) && (this.time = Ta,
                        this.timeZero = Ta,
                        this.startTime = aa,
                        this.fpsStart = !1)
                    }
                    if (!isNaN(this.time) && this.manager && this.visible() && ((!this.animateTime || ai || aa - this.animateTime > 1e3 * this.config.preTime) && (this.resetWord(),
                    this.setNumber(),
                    this.fps = 0,
                    this.fpsStart = !0,
                    this.manager.onTime(this.time / 1e3, ai),
                    this.animateTime = aa),
                    this.manager.render(this.time / 1e3, this.paused, ai)),
                    this.paused)
                        this.animateRange = aa - this.animateTime;
                    else if (this.fps++,
                    this.animateRange = 0,
                    this.animate = window.requestAnimationFrame(function(fa) {
                        da.nextFrame(null, fa)
                    }),
                    this.config.visible && this.deviceFps) {
                        if (ii === this.lastTime)
                            return;
                        this.lastTime && ii && (this.insertFps(Math.round(1e3 / (ii - this.lastTime))),
                        this.lastTime = ii),
                        !this.lastTime && ii && (this.lastTime = ii)
                    }
                }
                ,
                bt.prototype.setNumber = function() {
                    if (this.config.density && this.fpsStart) {
                        var ai = this.densityList
                          , ii = ai.laster
                          , da = ai.last
                          , aa = ai.max
                          , Ta = ai.fpsLow
                          , fa = ai.maxs
                          , He = this.config.danmakuNumber
                          , Zt = this.deviceFps / this.fps;
                        if (this.densityList.laster = da,
                        this.densityList.last = He,
                        Zt > 1) {
                            var si = Math.max(fa / 2, 10)
                              , ga = Math.ceil(20 * (Math.pow(Zt, 3) || 1));
                            He = Math.max(He - ga, si),
                            Zt > 1.07 && this.visualArray.length > 40 && (this.densityList.max = Math.ceil(Math.max(512 * this.visualArray.length / (this.config.width || 512), 40))),
                            ii === da && da === He && (fa = si),
                            Ta = 0
                        } else
                            Ta++,
                            ga = 10,
                            He < aa / 3 && (ga = Math.ceil(40 * (Math.pow(2 - Zt, 2) || 1))),
                            He = Math.min(He + ga, aa),
                            Ta > 4 && (this.densityList.max = Math.min(Math.ceil(1.1 * aa), 300)),
                            fa = He;
                        this.densityList.fpsLow = Ta,
                        this.config.danmakuNumber = He,
                        this.densityList.maxs = fa
                    }
                }
                ,
                bt.prototype.visible = function(ai) {
                    if (ai === void 0)
                        return this.config.visible;
                    if (ai) {
                        var ii = this.config.timeSyncFunc();
                        this.manager.lastTime = ii / 1e3,
                        this.animateRange = Date.now() + 1e3
                    }
                    return this.config.visible !== ai && (this.config.visible = ai,
                    !this.config.visible && this.manager && this.manager.clearVisualList()),
                    ai
                }
                ,
                bt.prototype.resize = function(ai) {
                    this.manager && (this.manager.resize(ai),
                    this.time && ai && this.seek(this.time / 1e3, !0))
                }
                ,
                bt.prototype.clear = function() {
                    this.manager.clearVisualList(),
                    this.animateTime = 0
                }
                ,
                bt.prototype.reset = function() {
                    this.timeLine.reset()
                }
                ,
                bt.prototype.destroy = function() {
                    this.worker && this.worker.terminate(),
                    this.fpsTimer && clearTimeout(this.fpsTimer),
                    this.wordTimer && clearTimeout(this.wordTimer),
                    this.pause(),
                    this.clear(),
                    this.danmakuArray.length = 0,
                    this.timeLine = new $.default,
                    this.visualArray = new O.default,
                    this.fpsCount = 0,
                    this.fpsList = []
                }
                ,
                bt.prototype.reload = function(ai, ii) {
                    if (ai) {
                        var da = Date.now()
                          , aa = this.config.timeSyncFunc();
                        this.time = aa,
                        this.timeZero = aa,
                        this.startTime = da,
                        this.pauseTime = aa,
                        this.manager.lastTime = aa,
                        ii && this.visualArray.forEach(function(Ta) {
                            Ta.start -= ii,
                            Ta.end -= ii,
                            Ta.middle -= ii
                        })
                    } else
                        this.timeLine = new $.default,
                        this.visualArray = new O.default
                }
                ,
                bt.prototype.imgExposure = function(ai) {
                    switch (ai) {
                    case -2:
                        this.dmTrack.imgexposure++;
                        break;
                    case 0:
                    case 1:
                        this.dmTrack.actor++
                    }
                }
                ,
                bt.prototype.updateTrackInfo = function(ai, ii) {
                    for (var da in ii === void 0 && (ii = 0),
                    this.dmTrack.dmexposure += ii,
                    this.dmTrack.div = this.dmTrack.div || {
                        delNum: 0,
                        highNum: 0,
                        render: 0,
                        layout: 0,
                        num: 0
                    },
                    ai)
                        this.dmTrack.div[da] += ai[da] || 0
                }
                ,
                bt.prototype.setFps = function(ai) {
                    var ii = this;
                    ai === void 0 && (ai = 6e3),
                    this.paused || (this.fpsTimer = window.setTimeout(function() {
                        if (ii.setFps(),
                        !(ii.fpsCount < 100) && ii.config.visible) {
                            var da = 0
                              , aa = 0
                              , Ta = {
                                density: ii.config.density ? 1 : 0,
                                all: ii.fpsCount
                            };
                            ii.fpsList.forEach(function(fa) {
                                da += fa[1],
                                aa = da / ii.fpsCount,
                                Ye.forEach(function(He) {
                                    aa >= He && (Ta[_t[He]] = Ta[_t[He]] || Number((fa[0] / ii.deviceFps).toFixed(3)))
                                })
                            }),
                            ii.dmTrack.info = Ta
                        }
                    }, ai))
                }
                ,
                bt.prototype.insertFps = function(ai) {
                    if (!(ai < 5 || ai > 500)) {
                        this.fpsCount++;
                        var ii = this.fpsList.length;
                        if (!ii || ai < this.fpsList[ii - 1][0])
                            this.fpsList.push([ai, 1]);
                        else if (ai > this.fpsList[0][0])
                            this.fpsList.unshift([ai, 1]);
                        else
                            for (var da = 0; da < ii; da++) {
                                if (ai === this.fpsList[da][0])
                                    return void this.fpsList[da][1]++;
                                if (ai > this.fpsList[da][0])
                                    return void this.fpsList.splice(da, 0, [ai, 1])
                            }
                    }
                }
                ,
                bt.dmSize = {},
                bt
            }();
            ve.default = Jt
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(0)
              , i = ie(6)
              , O = function($) {
                function Te() {
                    var we = $.call(this) || this;
                    return Object.setPrototypeOf(we, Te.prototype),
                    we.length = 0,
                    we
                }
                return ae.__extends(Te, $),
                Te.prototype.bsearch = function(we, Re) {
                    return i.bsearch(this, we, Re)
                }
                ,
                Te.prototype.binsert = function(we, Re) {
                    var Ye = this.bsearch(we, Re);
                    return this.splice(Ye, 0, we),
                    Ye
                }
                ,
                Te.prototype.cinsert = function(we, Re) {
                    var Ye, _t, Jt = this.bsearch(we, Re);
                    return ((Ye = this[Jt - 1]) === null || Ye === void 0 ? void 0 : Ye.stime) === we.stime ? this[Jt - 1] = we : ((_t = this[Jt]) === null || _t === void 0 ? void 0 : _t.stime) === we.stime ? this[Jt] = we : this.splice(Jt, 0, we),
                    Jt
                }
                ,
                Te.prototype.bremove = function(we) {
                    for (var Re = 0; Re < this.length; Re++)
                        if (this[Re] === we)
                            return void this.splice(Re, 1)
                }
                ,
                Te
            }(Array);
            ve.default = O
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            }),
            ve.bsearch = void 0,
            ve.bsearch = function(ae, i, O) {
                if (!(ae instanceof Array && i && O instanceof Function))
                    return -1;
                var $ = ae.length;
                if (!$ || !O(i, ae[0]))
                    return 0;
                if (O(i, ae[$ - 1]))
                    return $;
                for (var Te, we = 0, Re = $ - 1, Ye = 0; we <= Re; ) {
                    if (Ye++,
                    O(i, ae[(Te = Math.floor((we + Re + 1) / 2)) - 1]) && !O(i, ae[Te]))
                        return Te;
                    if (O(i, ae[Te - 1]) ? O(i, ae[Te]) ? we = Te : window.console.error("Catch an ERROR") : Re = Te - 1,
                    Ye > 1e3) {
                        window.console.error("1000");
                        break
                    }
                }
                return -1
            }
        }
        , function(ye, ve) {
            ye.exports = '<svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><circle stroke="#FFF" fill="#4AC7FF" cx="6" cy="6" r="5.5"/><path d="M5.4 9.939a.533.533 0 01-.222.063.331.331 0 01-.338-.325.302.302 0 01.02-.092l.64-2.929-2.654.005a.334.334 0 01-.346-.325.318.318 0 01.15-.264l3.96-3.997A.467.467 0 016.843 2a.332.332 0 01.338.325.31.31 0 01-.045.153L6.5 5.359h2.658a.333.333 0 01.342.326.316.316 0 01-.15.265L5.4 9.939z" fill="#FFF"/></g></svg>'
        }
        , function(ye, ve) {
            ye.exports = '<svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><circle stroke="#FFF" fill="#FFC62E" cx="6" cy="6" r="5.5"/><path d="M5.4 9.939a.533.533 0 01-.222.063.331.331 0 01-.338-.325.302.302 0 01.02-.092l.64-2.929-2.654.005a.334.334 0 01-.346-.325.318.318 0 01.15-.264l3.96-3.997A.467.467 0 016.843 2a.332.332 0 01.338.325.31.31 0 01-.045.153L6.5 5.359h2.658a.333.333 0 01.342.326.316.316 0 01-.15.265L5.4 9.939z" fill="#FFF"/></g></svg>'
        }
        , function(ye, ve) {
            ye.exports = '<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><filter x="-12.5%" y="-8.9%" width="125%" height="125%" filterUnits="objectBoundingBox" id="svgo-inline-loader-a"><feOffset dy=".5" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation=".5" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" in="shadowBlurOuter1"/></filter><filter x="-12.5%" y="-8.9%" width="125%" height="125%" filterUnits="objectBoundingBox" id="svgo-inline-loader-c"><feOffset dy=".5" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation=".5" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" in="shadowBlurOuter1"/></filter><path d="M4.336 5.952v9.047L2.746 15C1.782 15 1 14.22 1 13.259V7.694c0-.962.782-1.741 1.746-1.741l1.59-.001zm4.581-4.806c.76.367 1.26 1.293 1.26 2.53 0 .74-.092 1.5-.276 2.277h3.349a1.75 1.75 0 011.7 2.168l-1.105 4.483A3.15 3.15 0 0110.786 15l-4.895-.001V5.324c.78-.689 1.24-1.798 1.381-3.353.076-.844.88-1.194 1.645-.825z" id="svgo-inline-loader-b"/><path d="M4.336 5.952v9.047L2.746 15C1.782 15 1 14.22 1 13.259V7.694c0-.962.782-1.741 1.746-1.741l1.59-.001zm4.581-4.806c.76.367 1.26 1.293 1.26 2.53 0 .74-.092 1.5-.276 2.277h3.349a1.75 1.75 0 011.7 2.168l-1.105 4.483A3.15 3.15 0 0110.786 15l-4.895-.001V5.324c.78-.689 1.24-1.798 1.381-3.353.076-.844.88-1.194 1.645-.825z" id="svgo-inline-loader-d"/></defs><g fill="none" fill-rule="evenodd"><g><use fill="#000" filter="url(#svgo-inline-loader-a)" xlink:href="#svgo-inline-loader-b"/><use fill="#FFF" xlink:href="#svgo-inline-loader-b"/></g><g><use fill="#000" filter="url(#svgo-inline-loader-c)" xlink:href="#svgo-inline-loader-d"/><use fill="#FFF" xlink:href="#svgo-inline-loader-d"/></g></g></svg>'
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(0)
              , i = ae.__importDefault(ie(9))
              , O = ae.__importDefault(ie(23))
              , $ = {
                like: i.default,
                high: O.default
            };
            ve.default = function() {
                var Te, we = {};
                for (var Re in $)
                    Object.prototype.hasOwnProperty.call($, Re) && (we[Re] = `
        <span class="bpx-common-svg-icon">
            <svg viewBox="` + (Te = $[Re]).viewBox + `">
                <use xlink:href="#` + Te.id + `"></use>
            </svg>
        </span>
    `);
                return we
            }()
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(24)
              , i = function() {
                function O() {}
                return O.reset = function($, Te) {
                    if ($) {
                        if (!O.fragment)
                            for (var we in O.fragment = document.createElement("div"),
                            O.sizeTest) {
                                var Re = O.sizeTest[we];
                                Re.ele = document.createElement("span"),
                                Re.ele.textContent = Re.val,
                                Re.ele.style.cssText = "margin:0;padding:0;line-height:1;font-size:20px;font-family:inherit;font-weight:inherit;",
                                O.fragment.appendChild(Re.ele)
                            }
                        for (var we in O.fragment.style.cssText = "opacity:0;pointer-events:none;" + Te,
                        $.appendChild(O.fragment),
                        O.sizeScale = {},
                        O.sizeTest) {
                            var Ye = O.sizeTest[we];
                            O.sizeScale[we] = Ye.ele.getBoundingClientRect().width / Ye.def / 20
                        }
                        $.removeChild(O.fragment)
                    } else
                        O.sizeScale = void 0
                }
                ,
                O.getLen = function($) {
                    if (!$ || !O.sizeScale)
                        return 0;
                    for (var Te, we = 0, Re = O.sizeScale.fullAngle, Ye = Re / 2, _t = 0; _t < $.length; _t++)
                        if ((Te = $.charCodeAt(_t)) >= 32 && Te <= 64)
                            we += ae.ascii[Te] * O.sizeScale.number;
                        else if (Te >= 8192 && Te <= 10175)
                            we += Re;
                        else if (Te >= 11904 && Te <= 40959)
                            we += Re;
                        else if (Te >= 63744 && Te <= 64255)
                            we += Re;
                        else if (Te >= 65040 && Te <= 65055)
                            we += Re;
                        else if (Te >= 65072 && Te <= 65103)
                            we += Re;
                        else if (Te >= 65280 && Te <= 65376)
                            we += Re;
                        else if (Te >= 65471 && Te <= 65473)
                            we += Re;
                        else if (Te >= 65480 && Te <= 65481)
                            we += Re;
                        else if (Te >= 65488 && Te <= 65489)
                            we += Re;
                        else if (Te >= 65496 && Te <= 65497)
                            we += Re;
                        else if (Te >= 65501 && Te <= 65512)
                            we += Re;
                        else if (Te !== 65519)
                            if (Te >= 65377 && Te <= 65470)
                                we += Ye;
                            else if (Te >= 65474 && Te <= 65479)
                                we += Ye;
                            else if (Te >= 65482 && Te <= 65487)
                                we += Ye;
                            else if (Te >= 65490 && Te <= 65495)
                                we += Ye;
                            else if (Te >= 65498 && Te <= 65500)
                                we += Ye;
                            else {
                                if (!(Te >= 65513 && Te <= 65518))
                                    return 0;
                                we += Ye
                            }
                        else
                            we += Re;
                    return we
                }
                ,
                O.dispose = function() {
                    O.sizeScale = void 0
                }
                ,
                O.sizeTest = {
                    number: {
                        val: "9",
                        def: .6
                    },
                    fullAngle: {
                        val: "麤",
                        def: 1
                    }
                },
                O
            }();
            ve.default = i
        }
        , function(ye, ve, ie) {
            var ae, i = function() {
                return ae === void 0 && (ae = !!(window && document && document.all && !window.atob)),
                ae
            }, O = function() {
                var aa = {};
                return function(Ta) {
                    if (aa[Ta] === void 0) {
                        var fa = document.querySelector(Ta);
                        if (window.HTMLIFrameElement && fa instanceof window.HTMLIFrameElement)
                            try {
                                fa = fa.contentDocument.head
                            } catch (He) {
                                fa = null
                            }
                        aa[Ta] = fa
                    }
                    return aa[Ta]
                }
            }(), $ = [];
            function Te(aa) {
                for (var Ta = -1, fa = 0; fa < $.length; fa++)
                    if ($[fa].identifier === aa) {
                        Ta = fa;
                        break
                    }
                return Ta
            }
            function we(aa, Ta) {
                for (var fa = {}, He = [], Zt = 0; Zt < aa.length; Zt++) {
                    var si = aa[Zt]
                      , ga = Ta.base ? si[0] + Ta.base : si[0]
                      , ba = fa[ga] || 0
                      , Ca = "".concat(ga, " ").concat(ba);
                    fa[ga] = ba + 1;
                    var za = Te(Ca)
                      , Ms = {
                        css: si[1],
                        media: si[2],
                        sourceMap: si[3]
                    };
                    za !== -1 ? ($[za].references++,
                    $[za].updater(Ms)) : $.push({
                        identifier: Ca,
                        updater: da(Ms, Ta),
                        references: 1
                    }),
                    He.push(Ca)
                }
                return He
            }
            function Re(aa) {
                var Ta = document.createElement("style")
                  , fa = aa.attributes || {};
                if (fa.nonce === void 0) {
                    var He = ie.nc;
                    He && (fa.nonce = He)
                }
                if (Object.keys(fa).forEach(function(si) {
                    Ta.setAttribute(si, fa[si])
                }),
                typeof aa.insert == "function")
                    aa.insert(Ta);
                else {
                    var Zt = O(aa.insert || "head");
                    if (!Zt)
                        throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
                    Zt.appendChild(Ta)
                }
                return Ta
            }
            var Ye, _t = (Ye = [],
            function(aa, Ta) {
                return Ye[aa] = Ta,
                Ye.filter(Boolean).join(`
`)
            }
            );
            function Jt(aa, Ta, fa, He) {
                var Zt = fa ? "" : He.media ? "@media ".concat(He.media, " {").concat(He.css, "}") : He.css;
                if (aa.styleSheet)
                    aa.styleSheet.cssText = _t(Ta, Zt);
                else {
                    var si = document.createTextNode(Zt)
                      , ga = aa.childNodes;
                    ga[Ta] && aa.removeChild(ga[Ta]),
                    ga.length ? aa.insertBefore(si, ga[Ta]) : aa.appendChild(si)
                }
            }
            function bt(aa, Ta, fa) {
                var He = fa.css
                  , Zt = fa.media
                  , si = fa.sourceMap;
                if (Zt ? aa.setAttribute("media", Zt) : aa.removeAttribute("media"),
                si && typeof btoa < "u" && (He += `
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(si)))), " */")),
                aa.styleSheet)
                    aa.styleSheet.cssText = He;
                else {
                    for (; aa.firstChild; )
                        aa.removeChild(aa.firstChild);
                    aa.appendChild(document.createTextNode(He))
                }
            }
            var ai = null
              , ii = 0;
            function da(aa, Ta) {
                var fa, He, Zt;
                if (Ta.singleton) {
                    var si = ii++;
                    fa = ai || (ai = Re(Ta)),
                    He = Jt.bind(null, fa, si, !1),
                    Zt = Jt.bind(null, fa, si, !0)
                } else
                    fa = Re(Ta),
                    He = bt.bind(null, fa, Ta),
                    Zt = function() {
                        (function(ga) {
                            if (ga.parentNode === null)
                                return !1;
                            ga.parentNode.removeChild(ga)
                        }
                        )(fa)
                    }
                    ;
                return He(aa),
                function(ga) {
                    if (ga) {
                        if (ga.css === aa.css && ga.media === aa.media && ga.sourceMap === aa.sourceMap)
                            return;
                        He(aa = ga)
                    } else
                        Zt()
                }
            }
            ye.exports = function(aa, Ta) {
                (Ta = Ta || {}).singleton || typeof Ta.singleton == "boolean" || (Ta.singleton = i());
                var fa = we(aa = aa || [], Ta);
                return function(He) {
                    if (He = He || [],
                    Object.prototype.toString.call(He) === "[object Array]") {
                        for (var Zt = 0; Zt < fa.length; Zt++) {
                            var si = Te(fa[Zt]);
                            $[si].references--
                        }
                        for (var ga = we(He, Ta), ba = 0; ba < fa.length; ba++) {
                            var Ca = Te(fa[ba]);
                            $[Ca].references === 0 && ($[Ca].updater(),
                            $.splice(Ca, 1))
                        }
                        fa = ga
                    }
                }
            }
        }
        , function(ye, ve, ie) {
            function ae(O, $) {
                return function(Te) {
                    if (Array.isArray(Te))
                        return Te
                }(O) || function(Te, we) {
                    if (typeof Symbol < "u" && Symbol.iterator in Object(Te)) {
                        var Re = []
                          , Ye = !0
                          , _t = !1
                          , Jt = void 0;
                        try {
                            for (var bt, ai = Te[Symbol.iterator](); !(Ye = (bt = ai.next()).done) && (Re.push(bt.value),
                            !we || Re.length !== we); Ye = !0)
                                ;
                        } catch (ii) {
                            _t = !0,
                            Jt = ii
                        } finally {
                            try {
                                Ye || ai.return == null || ai.return()
                            } finally {
                                if (_t)
                                    throw Jt
                            }
                        }
                        return Re
                    }
                }(O, $) || function(Te, we) {
                    if (Te) {
                        if (typeof Te == "string")
                            return i(Te, we);
                        var Re = Object.prototype.toString.call(Te).slice(8, -1);
                        return Re === "Object" && Te.constructor && (Re = Te.constructor.name),
                        Re === "Map" || Re === "Set" ? Array.from(Te) : Re === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re) ? i(Te, we) : void 0
                    }
                }(O, $) || function() {
                    throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                }()
            }
            function i(O, $) {
                ($ == null || $ > O.length) && ($ = O.length);
                for (var Te = 0, we = new Array($); Te < $; Te++)
                    we[Te] = O[Te];
                return we
            }
            ye.exports = function(O) {
                var $ = ae(O, 4)
                  , Te = $[1]
                  , we = $[3];
                if (typeof btoa == "function") {
                    var Re = btoa(unescape(encodeURIComponent(JSON.stringify(we))))
                      , Ye = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(Re)
                      , _t = "/*# ".concat(Ye, " */")
                      , Jt = we.sources.map(function(bt) {
                        return "/*# sourceURL=".concat(we.sourceRoot || "").concat(bt, " */")
                    });
                    return [Te].concat(Jt).concat([_t]).join(`
`)
                }
                return [Te].join(`
`)
            }
        }
        , function(ye, ve, ie) {
            ye.exports = function(ae) {
                var i = [];
                return i.toString = function() {
                    return this.map(function(O) {
                        var $ = ae(O);
                        return O[2] ? "@media ".concat(O[2], " {").concat($, "}") : $
                    }).join("")
                }
                ,
                i.i = function(O, $, Te) {
                    typeof O == "string" && (O = [[null, O, ""]]);
                    var we = {};
                    if (Te)
                        for (var Re = 0; Re < this.length; Re++) {
                            var Ye = this[Re][0];
                            Ye != null && (we[Ye] = !0)
                        }
                    for (var _t = 0; _t < O.length; _t++) {
                        var Jt = [].concat(O[_t]);
                        Te && we[Jt[0]] || ($ && (Jt[2] ? Jt[2] = "".concat($, " and ").concat(Jt[2]) : Jt[2] = $),
                        i.push(Jt))
                    }
                }
                ,
                i
            }
        }
        , function(ye, ve, ie) {
            ye.exports = function(ae, i, O, $) {
                try {
                    try {
                        var Te;
                        try {
                            Te = new window.Blob([ae])
                        } catch (_t) {
                            (Te = new (window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder)).append(ae),
                            Te = Te.getBlob()
                        }
                        var we = window.URL || window.webkitURL
                          , Re = we.createObjectURL(Te)
                          , Ye = new window[i](Re,O);
                        return we.revokeObjectURL(Re),
                        Ye
                    } catch (_t) {
                        return new window[i]("data:application/javascript,".concat(encodeURIComponent(ae)),O)
                    }
                } catch (_t) {
                    if (!$)
                        throw Error("Inline worker is not supported");
                    return new window[i]($,O)
                }
            }
        }
        , function(ye, ve, ie) {
            ie.r(ve);
            var ae = ie(12)
              , i = ie.n(ae)
              , O = ie(3)
              , $ = {
                attributes: {
                    "data-injector": "b-danmaku"
                },
                insert: "head",
                singleton: !1
            };
            i()(O.a, $),
            ve.default = O.a.locals || {}
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(6)
              , i = function() {
                function O($, Te) {
                    this.list = $ instanceof Array ? $ : [],
                    this.fnCompare = Te || this.fnDefault
                }
                return O.prototype.fnDefault = function($, Te) {
                    return $.stime - Te.stime >= 0
                }
                ,
                O.prototype.reset = function() {
                    this.list.length = 0
                }
                ,
                O.prototype.insert = function() {
                    for (var $ = [], Te = 0; Te < arguments.length; Te++)
                        $[Te] = arguments[Te];
                    for (var we = 0; we < $.length; ) {
                        var Re = ae.bsearch(this.list, $[we], this.fnCompare);
                        this.list.splice(Re, 0, $[we]),
                        we++
                    }
                    return this
                }
                ,
                O.prototype.remove = function($) {
                    for (var Te = ae.bsearch(this.list, $, this.fnCompare); Te >= 0; ) {
                        if (this.list[Te] === $)
                            return this.list.splice(Te, 1),
                            !0;
                        Te--
                    }
                    return !1
                }
                ,
                O.prototype.getItemsByRange = function($, Te) {
                    var we = ae.bsearch(this.list, $, this.fnCompare)
                      , Re = ae.bsearch(this.list, Te, this.fnCompare);
                    return this.getItemsByIndexRange(we, Re)
                }
                ,
                O.prototype.getItemsByIndexRange = function($, Te) {
                    var we = [];
                    if (Te <= $)
                        return we;
                    for (; $ < Te && $ < this.list.length; )
                        we.push(this.list[$]),
                        $++;
                    return we
                }
                ,
                O
            }();
            ve.default = i
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(0)
              , i = ie(19)
              , O = ae.__importDefault(ie(21))
              , $ = ae.__importDefault(ie(26))
              , Te = ie(2)
              , we = function() {
                function Re(Ye) {
                    this.mode8 = [],
                    this.recyclingDivList = [],
                    this.cDmlist = [],
                    this.hideList = [],
                    this.config = Ye.config,
                    this.core = Ye,
                    this.visualArray = Ye.visualArray,
                    this.danmakuModes = i.dmMode(this.config),
                    this.lastTime = 0,
                    this.init(),
                    this.resize(!0)
                }
                return Re.prototype.init = function() {
                    this.container = this.config.container
                }
                ,
                Re.prototype.isPause = function() {
                    return this.core.paused
                }
                ,
                Re.prototype.validate = function(Ye) {
                    return !(!Ye.border && !Ye.likes) || !!this.config.danmakuFilter(Ye) && !!$.default.validateLive({
                        density: this.config.danmakuNumber,
                        pool: Ye.pool
                    })
                }
                ,
                Re.prototype.getText = function(Ye, _t) {
                    var Jt;
                    return this.config.isRecycling && this.recyclingDivList.length && (Jt = this.recyclingDivList.splice(-1, 1)[0]),
                    new O.default(Ye,this.config,_t ? _t - Ye.stime : 0,Jt)
                }
                ,
                Re.prototype.start = function(Ye, _t) {
                    var Jt = this.danmakuModes[Ye.mode];
                    Ye.on = !0,
                    this.preLoadImg(Ye, Jt, _t)
                }
                ,
                Re.prototype.preLoadImg = function(Ye, _t, Jt) {
                    var bt = this
                      , ai = Ye.picture || Ye.head || Ye.tail
                      , ii = Te.imgObj[ai];
                    ai && !ii ? Te.loadImg(ai).then(function() {
                        bt.cDmlist.push({
                            text: bt.getText(Ye, Jt),
                            mode: _t
                        })
                    }).catch(function() {
                        Ye.picture = "",
                        Ye.head = "",
                        Ye.tail = "",
                        bt.renderHead(Ye, _t, Jt)
                    }) : this.renderHead(Ye, _t, Jt)
                }
                ,
                Re.prototype.renderHead = function(Ye, _t, Jt) {
                    Ye.attr === 2 ? (this.hasHighDm = !0,
                    this.cDmlist.unshift({
                        text: this.getText(Ye, Jt),
                        mode: _t
                    })) : this.cDmlist.push({
                        text: this.getText(Ye, Jt),
                        mode: _t
                    })
                }
                ,
                Re.prototype.onTime = function(Ye, _t) {
                    var Jt = Ye - .001;
                    if (_t && this.clearVisualList(),
                    Math.abs(this.lastTime - Jt) > 3 && !_t)
                        this.clearVisualList();
                    else {
                        Jt += this.config.preTime * this.config.videoSpeed;
                        var bt = this.config.width
                          , ai = this.core.timeLine.getItemsByRange({
                            stime: _t ? _t - bt / 512 * this.config.duration / this.config.speedPlus / this.config.videoSpeed : this.lastTime - .001
                        }, {
                            stime: _t || Jt
                        });
                        _t && (this.config.danmakuNumber = 1e3),
                        this.insert(ai, Ye, _t || Ye),
                        _t && (this.config.danmakuNumber = 300)
                    }
                    this.lastTime = Jt
                }
                ,
                Re.prototype.insert = function(Ye, _t, Jt) {
                    var bt, ai, ii, da, aa, Ta = performance.now(), fa = 0, He = Ye.length, Zt = 0, si = 0;
                    for (ai = 0; ai < Ye.length; ai++)
                        (ii = Ye[ai]).mode !== 8 ? !ii.on && this.danmakuModes[ii.mode] && this.validate(ii) || (Ye.splice(ai, 1),
                        ai--) : (this.mode8.push(ii),
                        Ye.splice(ai, 1),
                        ai--);
                    for (bt = Ye.length,
                    ai = 0; ai < Ye.length; ai++)
                        (ii = Ye[ai]).attr === 2 && this.hasHighDm && (ii.attr = -1),
                        this.start(ii, Jt);
                    for (aa = this.cDmlist.length,
                    ai = 0; ai < aa; ai++)
                        (da = this.cDmlist[ai].text).space(_t) && si++,
                        da.rest <= 0 && (this.endHide(da),
                        this.cDmlist.splice(ai, 1),
                        ai--,
                        aa--);
                    for (ai = 0; ai < aa; ai++)
                        da = (ii = this.cDmlist[ai]).text,
                        ii.mode.onStart(da),
                        da.rest < 0 && (this.endHide(da),
                        this.cDmlist.splice(ai, 1),
                        ai--,
                        aa--);
                    for (; this.cDmlist.length; )
                        (da = (ii = this.cDmlist.shift()).text).textData.mode === 4 ? (ii.mode.onUpdate(da, _t),
                        da.firstFrame(da._y)) : da.firstFrame(da.y),
                        da.textData.showed || (fa++,
                        (da.textData.headImg || da.textData.flag === -2) && this.core.imgExposure(da.textData.flag),
                        da.textData.attr === 2 && Zt++),
                        da.textData.showed = !0,
                        this.hideList.push(ii);
                    var ga = performance.now() - Ta;
                    bt > 0 && ga > 0 && this.core.updateTrackInfo({
                        delNum: bt,
                        highNum: Zt,
                        num: He,
                        layout: si,
                        render: ga
                    }, fa)
                }
                ,
                Re.prototype.resize = function(Ye) {
                    var _t = this.container.offsetWidth || 680
                      , Jt = this.container.offsetHeight || 420
                      , bt = Ye ? 0 : _t - this.config.width
                      , ai = Ye ? 0 : Jt - this.config.height;
                    if (this.config.width = _t,
                    this.config.height = Jt,
                    this.config.danmakuNumber !== 0 && $.default.resize(),
                    this.clearRecyclingDivList(),
                    !Ye)
                        for (var ii, da = this.visualArray.length, aa = 0; aa < da; aa++)
                            (ii = this.visualArray[aa]).textData.mode === 4 && (ii._y += ai,
                            ii._x += bt / 2,
                            ii.reset(ii._x, ii._y))
                }
                ,
                Re.prototype.render = function(Ye, _t, Jt) {
                    var bt, ai, ii, da, aa = this.visualArray.length, Ta = [];
                    for (da = 0; da < aa; da++)
                        (bt = this.visualArray[da]) && !bt.hided && (bt.manager.onUpdate(bt, Ye) ? Jt ? bt.pause(bt._x) : _t ? (bt.textData.border && bt.render(),
                        bt.pause(bt._x)) : bt.render() : Ta.push(bt));
                    for (da = 0; da < this.hideList.length; da++) {
                        if ((ii = Ye - (bt = (ai = this.hideList[da]).text).textData.stime) < -this.config.preTime * this.config.videoSpeed)
                            this.endHide(bt);
                        else if (bt.textData.mode === 4 || bt.textData.mode === 5) {
                            if (bt.end <= Ye) {
                                this.endHide(bt),
                                this.hideList.splice(da, 1),
                                da--;
                                continue
                            }
                            if (!(ii >= 0))
                                continue;
                            this.visualArray.push(bt),
                            bt.firstShow(),
                            bt.pause(bt._x)
                        } else
                            ai.mode.onUpdate(bt, Ye) ? (this.visualArray.push(bt),
                            bt.firstShow(),
                            bt.pause(bt._x)) : this.endHide(bt);
                        this.hideList.splice(da, 1),
                        da--
                    }
                    for (var fa = 0; fa < this.mode8.length; fa++)
                        Math.abs(Ye - this.mode8[fa].stime) < .02 && (this.config.danmakuInserting(this.mode8[fa]),
                        this.mode8.splice(fa, 1),
                        fa--);
                    for (aa = Ta.length,
                    da = 0; da < aa; da++)
                        bt = Ta[da],
                        this.end(bt)
                }
                ,
                Re.prototype.endHide = function(Ye) {
                    Ye.textData.on = !1,
                    Ye.textData.attr === 2 && (this.hasHighDm = !1);
                    var _t, Jt = Ye.manager;
                    _t = Jt ? Jt.onEnd(Ye) : Ye.free(),
                    this.config.isRecycling && _t && this.recyclingDivList.push({
                        div: _t,
                        index: Ye.index
                    })
                }
                ,
                Re.prototype.fresh = function() {
                    for (var Ye, _t = 0; _t < this.visualArray.length; _t++)
                        Ye = this.visualArray[_t],
                        this.config.danmakuFilter(Ye.textData) || Ye.textData.likes ? Ye.show() : this.core.reportDmid === Ye.textData.dmid ? (this.core.reportDmid = null,
                        Ye.hideAnimate()) : Ye.hide()
                }
                ,
                Re.prototype.update = function(Ye, _t) {
                    for (var Jt, bt = 0; bt < this.visualArray.length; bt++)
                        (Jt = this.visualArray[bt]).end = Ye + (Jt.end - Ye) / _t,
                        Jt.middle && (Jt.middle = Ye + (Jt.middle - Ye) / _t)
                }
                ,
                Re.prototype.remove = function(Ye) {
                    for (var _t = 0; _t < this.visualArray.length; _t++)
                        if (Ye === this.visualArray[_t].textData.dmid) {
                            this.visualArray[_t].hide(),
                            this.visualArray.splice(_t, 1);
                            break
                        }
                }
                ,
                Re.prototype.end = function(Ye, _t) {
                    Ye.textData.on = !1,
                    Ye.textData.attr === 2 && (this.hasHighDm = !1);
                    var Jt = Ye.manager.onEnd(Ye, _t);
                    this.config.isRecycling && Jt && (this.recyclingDivList[this.recyclingDivList.length] = {
                        div: Jt,
                        index: Ye.index2hover
                    }),
                    this.visualArray.bremove(Ye)
                }
                ,
                Re.prototype.clearVisualList = function() {
                    for (; this.visualArray.length; )
                        this.end(this.visualArray[0], !0);
                    for (; this.hideList.length; )
                        this.endHide(this.hideList.shift().text);
                    for (var Ye in this.lastTime = -3,
                    this.clearRecyclingDivList(),
                    this.danmakuModes)
                        this.danmakuModes.hasOwnProperty(Ye) && this.danmakuModes[Ye].clear()
                }
                ,
                Re.prototype.option = function(Ye, _t) {
                    this.config[Ye] = _t
                }
                ,
                Re.prototype.destroy = function() {
                    this.clearVisualList()
                }
                ,
                Re.prototype.clearRecyclingDivList = function() {
                    var Ye, _t = this.recyclingDivList && this.recyclingDivList.length;
                    if (_t)
                        for (var Jt = _t - 1; Jt >= 0; Jt--)
                            ((Ye = this.recyclingDivList[Jt]) === null || Ye === void 0 ? void 0 : Ye.div)instanceof HTMLElement && (this.recyclingDivList[Jt].div.style.display = "none")
                }
                ,
                Re
            }();
            ve.default = we
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            }),
            ve.dmMode = ve.BaseMode = void 0;
            var ae = ie(0)
              , i = ae.__importDefault(ie(20))
              , O = function() {
                function Ye(_t) {
                    this.config = _t
                }
                return Ye.prototype.onStart = function(_t) {
                    this.spaceManager.add(_t),
                    _t.manager = this
                }
                ,
                Ye.prototype.clear = function() {
                    this.spaceManager.clean()
                }
                ,
                Ye.prototype.onEnd = function(_t, Jt) {
                    return this.spaceManager.remove(_t),
                    _t.manager = null,
                    _t.free(Jt)
                }
                ,
                Ye
            }();
            ve.BaseMode = O;
            var $ = function(Ye) {
                function _t(Jt) {
                    var bt = Ye.call(this, Jt) || this;
                    return bt.spaceManager = new i.default(Jt,!0),
                    bt
                }
                return ae.__extends(_t, Ye),
                _t.prototype.onUpdate = function(Jt, bt) {
                    return !!Jt.isHover || !(!Jt.paused && Jt.rest < (+new Date - Jt.pauseTime) / 1e3) && (Jt._x = Jt.getX(),
                    Jt._y = Jt.y,
                    !0)
                }
                ,
                _t.prototype.onEnd = function(Jt, bt) {
                    return this.spaceManager.remove(Jt),
                    Jt.manager = null,
                    Jt.free(bt)
                }
                ,
                _t
            }(O)
              , Te = function(Ye) {
                function _t(Jt) {
                    var bt = Ye.call(this, Jt) || this;
                    return bt.spaceManager = new i.default(Jt),
                    bt
                }
                return ae.__extends(_t, Ye),
                _t.prototype.onUpdate = function(Jt, bt) {
                    return !!Jt.isHover || !(Jt.end < bt) && (Jt._x = Jt.x,
                    Jt._y = this.config.height * (this.config.preventShade ? .85 : 1) - Jt.y - Jt.height,
                    !0)
                }
                ,
                _t
            }(O)
              , we = function(Ye) {
                function _t(Jt) {
                    var bt = Ye.call(this, Jt) || this;
                    return bt.spaceManager = new i.default(Jt),
                    bt
                }
                return ae.__extends(_t, Ye),
                _t.prototype.onUpdate = function(Jt, bt) {
                    return !!Jt.isHover || !(Jt.end < bt) && (Jt._x = Jt.x,
                    Jt._y = Jt.y,
                    !0)
                }
                ,
                _t
            }(O)
              , Re = function(Ye) {
                function _t(Jt) {
                    var bt = Ye.call(this, Jt) || this;
                    return bt.spaceManager = new i.default(Jt,!0),
                    bt
                }
                return ae.__extends(_t, Ye),
                _t.prototype.onUpdate = function(Jt, bt) {
                    return !!Jt.isHover || !(!Jt.paused && Jt.rest < (+new Date - Jt.pauseTime) / 1e3) && (Jt._x = Jt.getX(),
                    Jt._y = Jt.y,
                    !0)
                }
                ,
                _t.prototype.onEnd = function(Jt, bt) {
                    return this.spaceManager.remove(Jt),
                    Jt.manager = null,
                    Jt.free(bt)
                }
                ,
                _t
            }(O);
            ve.dmMode = function(Ye) {
                return {
                    1: new $(Ye),
                    4: new Te(Ye),
                    5: new we(Ye),
                    6: new Re(Ye)
                }
            }
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(0).__importDefault(ie(5))
              , i = function() {
                function O($, Te) {
                    this.config = $,
                    this.scroll = Te,
                    this.lists = {},
                    this.sortFn = function(we, Re) {
                        return we.stime - Re.stime >= 0
                    }
                }
                return O.prototype.clean = function() {
                    this.lists = {}
                }
                ,
                O.prototype.add = function($) {
                    this.scroll ? $.x = $.distance : $.x = ($.distance - $.width) / 2,
                    $.height >= $.vDistance * (this.config.preventShade ? .85 : 1) ? $.setY(0, -1) : (this.scroll && ($._x = $.getX()),
                    this.setY($, 0))
                }
                ,
                O.prototype.remove = function($) {
                    if (!($.index < 0)) {
                        var Te = this.lists[$.index];
                        Te.some(function(we, Re) {
                            return we.y > $.bottom || (we === $ ? (Te.splice(Re, 1),
                            !0) : void 0)
                        })
                    }
                }
                ,
                O.prototype.hasDm = function($, Te, we, Re) {
                    for (var Ye, _t = $; _t < Re.length; _t++)
                        if (!((Ye = Re[_t]).bottom < Te)) {
                            if (Ye.y > we)
                                break;
                            return !0
                        }
                    return !1
                }
                ,
                O.prototype.setY = function($, Te) {
                    var we = this
                      , Re = this.config.offsetTop || 0
                      , Ye = $.height
                      , _t = $.textData
                      , Jt = _t.pool
                      , bt = _t.border
                      , ai = _t.attr
                      , ii = _t.stime
                      , da = Re + Ye
                      , aa = this.lists[Te]
                      , Ta = function() {
                        $.setY(Re, Te),
                        aa.cinsert($, we.sortFn)
                    };
                    if (!aa)
                        return this.lists[Te] = new ae.default,
                        aa = this.lists[Te],
                        void Ta();
                    for (var fa, He = $.vDistance * this.config.danmakuArea / 100, Zt = Jt === 1 || bt || ai === 2, si = (this.config.preventShade ? .85 : 1) * $.vDistance, ga = 0; ga < aa.length && (fa = aa[ga],
                    !(da > si)); ga++)
                        if (!(fa.bottom <= Re)) {
                            if (fa.y > da)
                                return void Ta();
                            if (fa.y <= da && fa.bottom >= Re) {
                                if (this.scroll) {
                                    if ($.x > fa._x + fa.width && $.middle > fa.end) {
                                        if (da <= fa.bottom) {
                                            if (this.hasDm(ga, Re, da, aa))
                                                continue;
                                            return void Ta()
                                        }
                                        continue
                                    }
                                } else if (ii > fa.end) {
                                    if (da <= fa.bottom)
                                        return void Ta();
                                    continue
                                }
                            }
                            if (da = (Re = fa.bottom + 1) + Ye,
                            He && !Zt && da > He)
                                return void ($.rest = -1)
                        }
                    da <= si ? Ta() : He && !Zt ? $.rest = -1 : this.setY($, Te + 1)
                }
                ,
                O
            }();
            ve.default = i
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = ie(0)
              , i = ie(1)
              , O = ae.__importDefault(ie(22))
              , $ = ie(2)
              , Te = ae.__importDefault(ie(10))
              , we = ae.__importDefault(ie(11))
              , Re = ie(25)
              , Ye = ae.__importDefault(ie(4))
              , _t = function(Jt) {
                function bt(ai, ii, da, aa) {
                    return da === void 0 && (da = 0),
                    Jt.call(this, ai, ii, da, aa) || this
                }
                return ae.__extends(bt, Jt),
                bt.prototype.init = function() {
                    Jt.prototype.init.call(this),
                    this.element = this.textRender(this.textData, this.config)
                }
                ,
                bt.prototype.space = function(ai) {
                    var ii, da, aa, Ta;
                    if (this.textData.picture)
                        da = this.width,
                        aa = this.height;
                    else {
                        var fa = this.text
                          , He = this.fontSize;
                        if (this.isCache && (!((ii = Ye.default.dmSize[fa]) === null || ii === void 0) && ii.f)) {
                            var Zt = Ye.default.dmSize[fa]
                              , si = Zt.w
                              , ga = Zt.h
                              , ba = Zt.f;
                            da = He * si / ba,
                            aa = He * ga / ba
                        } else {
                            var Ca = 0;
                            if (this.isCache && (Ca = we.default.getLen(fa)),
                            Ca)
                                da = 1.02 * Math.ceil(Ca * this.fontSize + this.width),
                                aa = Math.ceil(1.125 * this.fontSize + this.height);
                            else {
                                var za = this.element.getBoundingClientRect();
                                da = za.width,
                                aa = za.height,
                                Ta = !0
                            }
                            this.isCache && (Ye.default.dmSize[fa] = {
                                w: da,
                                h: aa,
                                f: He
                            })
                        }
                    }
                    return Jt.prototype.space.call(this, Math.ceil(da), Math.ceil(aa), ai),
                    Ta
                }
                ,
                bt.prototype.textRender = function(ai, ii) {
                    var da, aa = this, Ta = [], fa = i.getHexColor(this.GetOutlineColor(ai));
                    Ta[0] = "1px 0 1px " + fa + ",0 1px 1px " + fa + ",0 -1px 1px " + fa + ",-1px 0 1px " + fa,
                    Ta[1] = "0px 0px 1px " + fa + ",0 0 1px " + fa + ",0 0 1px " + fa,
                    Ta[2] = "1px 1px 2px " + fa + ",0 0 1px " + fa;
                    var He = !0
                      , Zt = 0;
                    this.text = i.htmlEncode(ai.text.replace(/\r/g, `\r
`) || ""),
                    this.recyclingDiv ? (da = this.recyclingDiv.div,
                    He = !1,
                    this.index2hover = this.recyclingDiv.index) : (da = document.createElement("div"),
                    this.index2hover = i.getIndex());
                    var si = this.prefix
                      , ga = si + " " + si + "-hide";
                    ai.mode !== 4 && ai.mode !== 5 || (ga += " " + si + "-center"),
                    ai.divClassName && (ga += " " + ai.divClassName);
                    var ba = "";
                    switch (ai.mode) {
                    case 1:
                        ba += "left: " + this.config.width + "px;";
                        break;
                    case 6:
                        ba += "right: " + this.config.width + "px;"
                    }
                    this.config.isMini ? Zt = 16 : (Zt = this.getFontSize(ii, ai.size),
                    Zt = Math.max(12, Zt)),
                    this.fontSize = Zt,
                    ai.border && (ba += "border: 1px solid " + i.getHexColor(ai.borderColor) + "; ",
                    ai.flag !== -2 && (ba += "padding-left: 1px; padding-right: 1px;"),
                    this.width += 4,
                    this.height += 4);
                    var Ca = function(Pa) {
                        var Ua = bt.createDom[Pa]({
                            text: aa.text,
                            textData: ai,
                            className: ga,
                            divCssText: ba,
                            fontSize: Zt,
                            prefix: si,
                            dom: da,
                            parent: aa.parent,
                            append: He
                        })
                          , Wa = Ua.style
                          , Ka = Ua.w
                          , Ns = Ua.h
                          , pl = Ua.eventRange;
                        return aa.width += Ka,
                        aa.height += Ns,
                        aa.cssTest = Wa,
                        aa.eventRange = pl,
                        da
                    };
                    if (ai.picture) {
                        if ($.imgObj[ai.picture])
                            return ai.attr = -1,
                            Ca("dmPicture");
                        ai.picture = ""
                    }
                    if (ba += "font-size: " + Zt + "px; ",
                    ba += "color: " + i.getHexColor(ai.color) + " ;",
                    ba += "font-family: " + ii.fontFamily + ", Arial, Helvetica, sans-serif; ",
                    ba += "font-weight: " + (ii.bold ? "bold" : "normal") + "; ",
                    ba += "opacity: " + (ii.opacity < .1 ? .1 : ii.opacity) + "; ",
                    ba += "text-shadow: " + Ta[ii.fontBorder] + "; ",
                    ai.headImg)
                        return Ca("dmHeadimg");
                    if (ai.flag === -2)
                        return Ca("dmUp");
                    if (ai.attr === 2 && !ai.unhigh)
                        return Ca("dmHigh");
                    if (ai.likes)
                        return Ca("dmLikes");
                    var za = ai.head || ai.tail
                      , Ms = $.imgObj[za];
                    return za && Ms ? Ca("dmIcon") : (this.isCache = !0,
                    da.innerHTML = this.text,
                    Ca("appendDom"))
                }
                ,
                bt.prototype.mouseEnter = function() {
                    this.element.classList.add("b-danmaku-hover"),
                    this.isHover = !0,
                    this.pause(this._x)
                }
                ,
                bt.prototype.mouseLeave = function() {
                    var ai;
                    (ai = this.element) === null || ai === void 0 || ai.classList.remove("b-danmaku-hover"),
                    this.isHover = !1,
                    this.pauseTime = Date.now()
                }
                ,
                bt.prototype.likeNum = function(ai) {
                    var ii = this;
                    if (!this.textData.unlike)
                        if (ai) {
                            if (this.liked || this.textData.attr === 2)
                                return void setTimeout(function() {
                                    ii.element.classList.add("b-danmaku-liked")
                                }, 20);
                            this.liked = !0;
                            var da = .8 * this.fontSize
                              , aa = "width:" + da + "px;height:" + da + "px;";
                            this.textData.mode === 6 ? aa += "right:0;margin:" + .18 * da + "px -" + 1.25 * da + "px 0 0 ;" : aa += "margin:" + .18 * da + "px 0 0 -" + 1.25 * da + "px;",
                            this.element.insertAdjacentHTML("afterbegin", '<span class="b-danmaku-liked-icon" style="' + aa + '">' + Te.default.like + "</span>"),
                            setTimeout(function() {
                                ii.element.classList.add("b-danmaku-liked")
                            }, 20)
                        } else
                            this.element.classList.remove("b-danmaku-liked")
                }
                ,
                bt.prototype.render = function() {
                    this.hided || !this.paused || this.textData.mode !== 1 && this.textData.mode !== 6 || this.isHover || (this.paused = !1,
                    this.pauseTime = Date.now(),
                    this.renderStyle(this.textData.mode === 6, this.distance + this.width, this.rest))
                }
                ,
                bt.prototype.reset = function(ai, ii) {
                    this.element.style.top = ii + "px",
                    this.cssTest = this.cssTest.replace(/top:(\d)+px/g, "top:" + ii + "px")
                }
                ,
                bt.prototype.firstShow = function() {
                    this.showed = !0,
                    this.element.classList.remove(this.prefix + "-hide")
                }
                ,
                bt.prototype.firstFrame = function(ai) {
                    switch (this.paused = !0,
                    this.element.style.top = ai + "px",
                    this.cssTest += "top:" + ai + "px;",
                    this.textData.mode) {
                    case 1:
                        this.cssTest += "left:" + this.distance + "px;",
                        this.element.style.left = this.distance + "px";
                        break;
                    case 6:
                        this.cssTest += "right:" + this.distance + "px;",
                        this.element.style.right = this.distance + "px"
                    }
                }
                ,
                bt.prototype.pause = function(ai) {
                    this.paused || this.textData.mode !== 1 && this.textData.mode !== 6 || (this.paused = !0,
                    this.pauseTime && (this.rest = this.rest - (Date.now() - this.pauseTime) / 1e3),
                    this.pauseTime = Date.now(),
                    this.renderStyle(this.textData.mode === 6, this.distance - ai, 0))
                }
                ,
                bt.prototype.hideAnimate = function() {
                    var ai = this;
                    this.hided = !0,
                    this.pause(this._x),
                    setTimeout(function() {
                        ai.textData.mode === 4 || ai.textData.mode === 5 ? (ai.cssTest += "margin-left:" + -(ai.width / 2 - ai.height) + "px;opacity: 0;transition: all 0.35s linear;",
                        ai.element.style.cssText = ai.cssTest) : ai.renderAnimateStyle(ai.textData.mode === 6, ai.distance - ai._x - ai.height, .35);
                        try {
                            setTimeout(function() {
                                ai.hide(),
                                ai.hided = !1
                            }, 400)
                        } catch (ii) {}
                    }, 1)
                }
                ,
                bt.prototype.renderStyle = function(ai, ii, da) {
                    for (var aa = "", Ta = 0; Ta < i.browserPrefix.length; Ta++)
                        aa += i.browserPrefix[Ta] + "transform: translateX(" + (ai ? 1 : -1) * ii + `px) translateY(0px) translateZ(0px);
            ` + i.browserPrefix[Ta] + "transition: " + i.browserPrefix[Ta] + "transform " + da + "s linear;";
                    this.element.style.cssText = this.cssTest + aa
                }
                ,
                bt.prototype.renderAnimateStyle = function(ai, ii, da) {
                    for (var aa = "", Ta = 0; Ta < i.browserPrefix.length; Ta++)
                        aa += i.browserPrefix[Ta] + "transform: translateX(" + (ai ? 1 : -1) * ii + `px) translateY(0px) translateZ(0px);
            ` + i.browserPrefix[Ta] + "transition: all " + da + "s linear;";
                    this.element.style.cssText = this.cssTest + "opacity: 0;" + aa
                }
                ,
                bt.createDom = {
                    dmPicture: Re.dmPicture,
                    dmHeadimg: Re.dmHeadimg,
                    dmUp: Re.dmUp,
                    dmLikes: Re.dmLikes,
                    dmHigh: Re.dmHigh,
                    dmIcon: Re.dmIcon,
                    appendDom: Re.appendDom
                },
                bt
            }(O.default);
            ve.default = _t
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = function() {
                function i(O, $, Te, we) {
                    Te === void 0 && (Te = 0),
                    this.prefix = "b-danmaku",
                    this.textData = O,
                    this.config = $,
                    this.width = 0,
                    this.height = 0,
                    this.element = null,
                    this.start = 0,
                    this.end = 0,
                    this.speed = 0,
                    this.rest = 0,
                    this.x = 0,
                    this.y = 0,
                    this.bottom = 0,
                    this.index = -1,
                    this.precise = Te || 0,
                    this.parent = this.config.container,
                    this.recyclingDiv = we,
                    this.init()
                }
                return i.prototype.init = function() {
                    this.textData.mode !== 1 && this.textData.mode !== 4 && this.textData.mode !== 5 && this.textData.mode !== 6 || (window.String.prototype.trim || (window.String.prototype.trim = function() {
                        return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
                    }
                    ),
                    this.textData.text && (this.textData.text = this.textData.text.trim()))
                }
                ,
                i.prototype.space = function(O, $, Te) {
                    this.width = O,
                    this.height = $,
                    this.distance = this.config.width + 1,
                    this.range = this.config.width,
                    this.vDistance = this.config.height,
                    this.start = Te,
                    this.textData.mode === 1 || this.textData.mode === 6 ? (this.getSpeed(),
                    this.distance -= this.precise * this.speed,
                    this.rest = (this.distance + this.width) / this.speed,
                    this.end = this.start + this.rest * this.config.videoSpeed,
                    this.middle = this.start + this.distance / this.speed * this.config.videoSpeed) : (this.end = this.textData.stime + (this.textData.duration || this.config.duration) * this.config.videoSpeed,
                    this.middle = this.end,
                    this.rest = this.end - this.start)
                }
                ,
                i.prototype.GetOutlineColor = function(O) {
                    return O.color ? 0 : 16777215
                }
                ,
                i.prototype.getSpeed = function() {
                    this.speed = (512 + this.width) / (this.textData.duration || this.config.duration) * this.config.speedPlus * (this.config.speedSync ? this.config.videoSpeed : 1)
                }
                ,
                i.prototype.setY = function(O, $) {
                    this.y = O,
                    this.bottom = this.y + this.height,
                    this.index = $,
                    this.stime = +("1" + O + this.bottom)
                }
                ,
                i.prototype.getX = function() {
                    return this.pauseTime = this.pauseTime || Date.now(),
                    this.distance - (Date.now() - this.pauseTime + 1e3 * ((this.distance + this.width) / this.speed - this.rest)) / 1e3 * this.speed
                }
                ,
                i.prototype.getRight = function() {
                    return this.getX() + this.width
                }
                ,
                i.prototype.free = function(O) {
                    var $ = this.config && this.config.isRecycling
                      , Te = this.element;
                    if (this.showed = !1,
                    $ && !O)
                        return Te.classList.add(this.prefix + "-hide"),
                        this.config = null,
                        this.textData = null,
                        Te;
                    this.config = null,
                    this.textData = null,
                    this.textFree(),
                    this.element = null
                }
                ,
                i.prototype.getFontSize = function(O, $) {
                    var Te = O.fontSize;
                    if (O.fullScreenSync) {
                        var we = O.height
                          , Re = Te * $ / 25;
                        return we <= 314 ? 16 : we <= 499 ? Re * (.0385 * we + 3.29) : we <= 608 ? Re * (.041 * we) : we <= 700 ? Re * (.022 * we + 12) : we <= 816 ? 27 * Re : we <= 980 ? Re * (.0365 * we - 2.5) : we <= 1300 ? Re * (.022 * we + 18.5) : 40 * Re
                    }
                    return Te * $
                }
                ,
                i.prototype.hide = function() {
                    this.element.classList.add(this.prefix + "-visibility")
                }
                ,
                i.prototype.show = function() {
                    this.element.classList.remove(this.prefix + "-visibility")
                }
                ,
                i.prototype.textFree = function() {
                    try {
                        this.parent.removeChild(this.element)
                    } catch (O) {}
                }
                ,
                i
            }();
            ve.default = ae
        }
        , function(ye, ve) {
            ye.exports = '<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><filter x="-12.5%" y="-8.9%" width="125%" height="125%" filterUnits="objectBoundingBox" id="svgo-inline-loader-a"><feOffset dy=".5" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation=".5" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" in="shadowBlurOuter1"/></filter><path d="M4.393 5.952V15H2.746C1.782 15 1 14.22 1 13.259V7.694c0-.962.782-1.741 1.746-1.741l1.647-.001zm4.524-4.806c.76.367 1.26 1.293 1.26 2.53 0 .74-.092 1.5-.276 2.277h3.349a1.75 1.75 0 011.7 2.168l-1.105 4.483A3.15 3.15 0 0110.786 15h-5.12l.001-9.496c.917-.667 1.451-1.834 1.605-3.533.076-.844.88-1.194 1.645-.825z" id="svgo-inline-loader-b"/></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#svgo-inline-loader-a)" xlink:href="#svgo-inline-loader-b"/><use fill="#FFD070" xlink:href="#svgo-inline-loader-b"/></g></svg>'
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            }),
            ve.ascii = void 0,
            ve.ascii = {
                32: .5,
                33: .4,
                34: .55,
                35: .6,
                36: .6,
                37: 1,
                38: .8,
                39: .36,
                40: .4,
                41: .4,
                42: .6,
                43: .7,
                44: .4,
                45: .7,
                46: .4,
                47: .6,
                48: .65,
                49: .5,
                50: .6,
                51: .6,
                52: .6,
                53: .6,
                54: .6,
                55: .6,
                56: .6,
                57: .6,
                58: .4,
                59: .4,
                60: .7,
                61: .7,
                62: .7,
                63: .6,
                64: .95
            }
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            }),
            ve.dmIcon = ve.dmLikes = ve.dmHigh = ve.dmUp = ve.dmHeadimg = ve.dmPicture = ve.appendDom = void 0;
            var ae = ie(0)
              , i = ie(1)
              , O = ae.__importDefault(ie(10))
              , $ = ie(2)
              , Te = ae.__importDefault(ie(7))
              , we = ae.__importDefault(ie(8));
            function Re(Ye) {
                var _t = Ye.append
                  , Jt = Ye.parent
                  , bt = Ye.dom
                  , ai = Ye.className
                  , ii = Ye.divCssText;
                return bt.className = ai,
                bt.style.cssText = ii,
                _t && Jt.appendChild(bt),
                {
                    w: 0,
                    h: 0,
                    style: ii
                }
            }
            ve.appendDom = Re,
            ve.dmPicture = function(Ye) {
                var _t = Ye.dom
                  , Jt = Ye.textData
                  , bt = Ye.divCssText
                  , ai = Ye.fontSize
                  , ii = $.imgObj[Jt.picture]
                  , da = 0
                  , aa = 0;
                return ii && (da = ii.width,
                aa = ii.height,
                Jt.scale && (aa = Jt.scale * ai * 1.125,
                da = ii.width * aa / ii.height),
                _t.innerHTML = '<img src="' + Jt.picture + '" style="width:' + da + "px;height:" + aa + 'px;">',
                bt += "width:" + da + "px;height:" + aa + "px;",
                Re(Ye)),
                {
                    w: da,
                    h: aa,
                    style: bt
                }
            }
            ,
            ve.dmHeadimg = function(Ye) {
                var _t = Ye.text
                  , Jt = Ye.dom
                  , bt = Ye.textData
                  , ai = Ye.divCssText
                  , ii = Ye.fontSize
                  , da = Ye.prefix
                  , aa = ii / 25
                  , Ta = "";
                Ye.className += " " + da + "-actor";
                var fa = 1.125 * ii + 7 * aa - 4;
                switch (ai += "padding: " + 4 * aa + "px " + 16 * aa + "px " + 3 * aa + "px " + (12 * aa + fa + 2) + "px; border-radius: " + (fa + 4) / 2 + "px;",
                bt.flag) {
                case 0:
                    Ta = we.default;
                    break;
                case 1:
                    Ta = Te.default
                }
                return Jt.innerHTML = '<span class="' + da + '-actor-img" style="width:' + fa + "px;height:" + fa + 'px"><img src="' + bt.headImg + '"></span><span class="' + da + '-actor-tip" style="left:' + (fa / 2 + 4) + "px;transform:scale(" + ii / 40 + ')">' + Ta + "</span>" + _t,
                Re(Ye),
                {
                    w: 28 * aa + fa + 2,
                    h: 4,
                    style: ai
                }
            }
            ,
            ve.dmUp = function(Ye) {
                var _t = Ye.text
                  , Jt = Ye.dom
                  , bt = Ye.divCssText
                  , ai = Ye.fontSize
                  , ii = Ye.prefix;
                Ye.className += " " + ii + "-up";
                var da = .6 * ai
                  , aa = "font-size:" + (da = Math.max(da, 12)) + "px;";
                if (ai < 20) {
                    for (var Ta = 0; Ta < i.browserPrefix.length; Ta++)
                        aa += i.browserPrefix[Ta] + "transform: translateY(-50%) scale(" + ai / 20 + ");";
                    aa += "left: " + .6 * ai / 20 + "em;"
                }
                return Jt.innerHTML = '<span class="' + ii + '-up-tip" style="' + aa + '">UP主</span>' + _t,
                Re(Ye),
                {
                    w: 3.2 * ai,
                    h: .5 * ai,
                    style: bt
                }
            }
            ,
            ve.dmHigh = function(Ye) {
                var _t = Ye.text
                  , Jt = Ye.dom
                  , bt = Ye.textData
                  , ai = Ye.divCssText
                  , ii = Ye.fontSize
                  , da = Ye.prefix;
                Ye.className += " " + da + "-high";
                var aa = '<span class="' + da + '-high-icon" style="width:' + ii + "px;height:" + ii + `px;">
    <em class="` + da + '-high-plus" style="font-size:' + ii / 2 + `px;">+1</em>
    <span class="` + da + '-high-icon-animate">' + O.default.high + "</span></span>"
                  , Ta = [0, ii]
                  , fa = "";
                switch (bt.mode) {
                case 6:
                    Ta = [-ii],
                    Ye.className += " " + da + "-high-reverse",
                    fa = aa,
                    aa = "";
                    break;
                case 4:
                case 5:
                    Ye.className += " " + da + "-high-top"
                }
                return Jt.innerHTML = aa + '<span class="' + da + '-high-text">' + _t + "</span>" + fa,
                Re(Ye),
                {
                    eventRange: Ta,
                    w: 3.2 * ii,
                    h: .4 * ii,
                    style: ai
                }
            }
            ,
            ve.dmLikes = function(Ye) {
                var _t = Ye.text
                  , Jt = Ye.dom
                  , bt = Ye.textData
                  , ai = Ye.divCssText
                  , ii = Ye.fontSize
                  , da = Ye.prefix
                  , aa = ii / 25;
                Ye.className += " " + da + "-like";
                var Ta = "font-size:" + ii / 2 + "px;";
                if (ii < 24) {
                    Ta = "font-size:12px;";
                    for (var fa = 0; fa < i.browserPrefix.length; fa++)
                        Ta += i.browserPrefix[fa] + "transform: scale(" + aa + ");"
                }
                var He = '<span class="' + da + '-like-icon" style="width:' + ii + "px;height:" + ii + 'px;">' + O.default.like + '</span><span class="b-danmaku-like-num" style="' + Ta + '">' + (bt.likes || 1) + "</span>";
                return bt.mode === 6 ? (Ye.className += " " + da + "-like-reverse",
                Jt.innerHTML = _t + He) : Jt.innerHTML = He + _t,
                Re(Ye),
                {
                    w: 0,
                    h: 0,
                    style: ai
                }
            }
            ,
            ve.dmIcon = function(Ye) {
                var _t, Jt = Ye.text, bt = Ye.dom, ai = Ye.textData, ii = Ye.divCssText, da = 1.2 * Ye.fontSize, aa = 0, Ta = "", fa = "";
                if (ai.head && (_t = $.imgObj[ai.head]) && (aa = da * _t.width / _t.height,
                Ta = '<img src="' + ai.head + '" class="b-danmaku-icon" style="width:' + aa + "px;height:" + da + 'px;">'),
                ai.tail && (_t = $.imgObj[ai.tail])) {
                    var He = da * _t.width / _t.height;
                    fa = '<img src="' + ai.tail + '" class="b-danmaku-icon" style="width:' + He + "px;height:" + da + 'px;">',
                    aa += He
                }
                return ai.mode === 6 ? bt.innerHTML = fa + Jt + Ta : bt.innerHTML = Ta + Jt + fa,
                Re(Ye),
                {
                    w: aa,
                    h: da,
                    style: ii
                }
            }
        }
        , function(ye, ve, ie) {
            Object.defineProperty(ve, "__esModule", {
                value: !0
            });
            var ae = {
                field: 1e3,
                duration: 3,
                liveStart: 0,
                liveCurrent: 0,
                density: 0,
                speed: 1.2,
                resize: function() {
                    this.liveCurrent = 0
                },
                validateLive: function(i) {
                    if (this.config = i,
                    this.density = i == null ? void 0 : i.density,
                    i != null && i.speed && (this.speed = i.speed),
                    this.density < 0 || (i == null ? void 0 : i.pool) !== 0)
                        return !0;
                    var O = Math.floor(this.density * (.5 * this.speed) / this.duration * this.field / 1e3);
                    O < 1 && (O = 1),
                    this.liveStart === 0 && (this.liveStart = +new Date);
                    var $ = +new Date;
                    if ($ > this.liveStart + this.field)
                        for (this.liveCurrent = 0; $ > this.liveStart + this.field; )
                            this.liveStart += this.field;
                    return this.liveCurrent < O && (this.liveCurrent++,
                    !0)
                }
            };
            ve.default = ae
        }
        , function(ye, ve, ie) {
            ie.r(ve);
            var ae = ie(15)
              , i = ie.n(ae);
            ve.default = function() {
                return i()(`/*! For license information please see insert.worker.worker.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=self;n.addEventListener("message",(function(e){for(var t=e.data,r=[],o=0,u=t.length;o<u;o++){var f=l(t[o]);r.splice(f,0,t[o])}function i(e,t){return e.stime-t.stime}function l(e){if(0===r.length)return 0;if(i(e,r[0])<0)return 0;if(i(e,r[r.length-1])>=0)return r.length;for(var t,n=0,o=r.length-1,u=0;n<=o;){if(t=Math.floor((n+o+1)/2),u++,i(e,r[t-1])>=0&&i(e,r[t])<0)return t;if(i(e,r[t-1])<0?o=t-1:i(e,r[t])>=0&&(n=t),u>1e3)break}return-1}n.postMessage(r)})),t.default=null}]);
`, "Worker", void 0, void 0)
            }
        }
        ]).default
    }
    ,
    n.exports = y()
}
)(danmaku);
var danmakuExports = danmaku.exports;
const h = getDefaultExportFromCjs(danmakuExports);
let l$2 = class {
    constructor(d) {
        this.clear = ()=>{
            this.core.clear()
        }
        ,
        this.option = (y,ye)=>{
            this.core.option(y, ye)
        }
        ,
        this.resize = ()=>{
            this.core.resize()
        }
        ,
        this.play = y=>{
            this.core.play(y)
        }
        ,
        this.pause = ()=>{
            this.core.pause()
        }
        ,
        this.toggle = ()=>{
            this.core.paused ? this.play() : this.pause()
        }
        ,
        this.seek = (y,ye)=>{
            this.core.seek(y, ye)
        }
        ,
        this.send = y=>{
            this.core.add(Object.assign(Object.assign({}, y), {
                stime: -1
            }))
        }
        ,
        this.add = y=>{
            this.core.add(y)
        }
        ,
        this.addTimely = y=>{
            this.core.addTimely(y)
        }
        ,
        this.batchAdd = y=>{
            this.core.multipleAdd(y)
        }
        ,
        this.destroy = ()=>{
            this.core.destroy()
        }
        ,
        this.core = new h(d)
    }
    set visible(d) {
        this.core.visible(d)
    }
    get visible() {
        return this.core.visible()
    }
}
;
var r$1;
(function(n) {
    n[n.Unknown = 0] = "Unknown",
    n[n.Ugc = 1] = "Ugc",
    n[n.Ogv = 2] = "Ogv"
}
)(r$1 || (r$1 = {}));
var o;
(function(n) {
    n[n.Normal = 1] = "Normal",
    n[n.Bottom = 4] = "Bottom",
    n[n.Top = 5] = "Top",
    n[n.Reverse = 6] = "Reverse",
    n[n.Advanced = 7] = "Advanced",
    n[n.Code = 8] = "Code",
    n[n.BAS = 9] = "BAS"
}
)(o || (o = {}));
var c$1;
(function(n) {
    n[n.Normal = 0] = "Normal",
    n[n.Closed = 1] = "Closed"
}
)(c$1 || (c$1 = {}));
var src = {
    exports: {}
}
  , indexLight = {
    exports: {}
}
  , util$2 = {
    exports: {}
}
  , codegen_1 = codegen;
function codegen(n, d) {
    typeof n == "string" && (d = n,
    n = void 0);
    var y = [];
    function ye(ie) {
        if (typeof ie != "string") {
            var ae = ve();
            if (codegen.verbose && console.log("codegen: " + ae),
            ae = "return " + ae,
            ie) {
                for (var i = Object.keys(ie), O = new Array(i.length + 1), $ = new Array(i.length), Te = 0; Te < i.length; )
                    O[Te] = i[Te],
                    $[Te] = ie[i[Te++]];
                return O[Te] = ae,
                Function.apply(null, O).apply(null, $)
            }
            return Function(ae)()
        }
        for (var we = new Array(arguments.length - 1), Re = 0; Re < we.length; )
            we[Re] = arguments[++Re];
        if (Re = 0,
        ie = ie.replace(/%([%dfijs])/g, function(_t, Jt) {
            var bt = we[Re++];
            switch (Jt) {
            case "d":
            case "f":
                return String(Number(bt));
            case "i":
                return String(Math.floor(bt));
            case "j":
                return JSON.stringify(bt);
            case "s":
                return String(bt)
            }
            return "%"
        }),
        Re !== we.length)
            throw Error("parameter count mismatch");
        return y.push(ie),
        ye
    }
    function ve(ie) {
        return "function " + (ie || d || "") + "(" + (n && n.join(",") || "") + `){
  ` + y.join(`
  `) + `
}`
    }
    return ye.toString = ve,
    ye
}
codegen.verbose = !1;
var fetch_1 = fetch$1
  , asPromise = aspromise
  , inquire = inquire_1
  , fs$1 = inquire("fs");
function fetch$1(n, d, y) {
    return typeof d == "function" ? (y = d,
    d = {}) : d || (d = {}),
    y ? !d.xhr && fs$1 && fs$1.readFile ? fs$1.readFile(n, function(ve, ie) {
        return ve && typeof XMLHttpRequest < "u" ? fetch$1.xhr(n, d, y) : ve ? y(ve) : y(null, d.binary ? ie : ie.toString("utf8"))
    }) : fetch$1.xhr(n, d, y) : asPromise(fetch$1, this, n, d)
}
fetch$1.xhr = function n(d, y, ye) {
    var ve = new XMLHttpRequest;
    ve.onreadystatechange = function() {
        if (ve.readyState === 4) {
            if (ve.status !== 0 && ve.status !== 200)
                return ye(Error("status " + ve.status));
            if (y.binary) {
                var ae = ve.response;
                if (!ae) {
                    ae = [];
                    for (var i = 0; i < ve.responseText.length; ++i)
                        ae.push(ve.responseText.charCodeAt(i) & 255)
                }
                return ye(null, typeof Uint8Array < "u" ? new Uint8Array(ae) : ae)
            }
            return ye(null, ve.responseText)
        }
    }
    ,
    y.binary && ("overrideMimeType"in ve && ve.overrideMimeType("text/plain; charset=x-user-defined"),
    ve.responseType = "arraybuffer"),
    ve.open("GET", d),
    ve.send()
}
;
var path = {};
(function(n) {
    var d = n
      , y = d.isAbsolute = function(ie) {
        return /^(?:\/|\w+:)/.test(ie)
    }
      , ye = d.normalize = function(ie) {
        ie = ie.replace(/\\/g, "/").replace(/\/{2,}/g, "/");
        var ae = ie.split("/")
          , i = y(ie)
          , O = "";
        i && (O = ae.shift() + "/");
        for (var $ = 0; $ < ae.length; )
            ae[$] === ".." ? $ > 0 && ae[$ - 1] !== ".." ? ae.splice(--$, 2) : i ? ae.splice($, 1) : ++$ : ae[$] === "." ? ae.splice($, 1) : ++$;
        return O + ae.join("/")
    }
    ;
    d.resolve = function(ie, ae, i) {
        return i || (ae = ye(ae)),
        y(ae) ? ae : (i || (ie = ye(ie)),
        (ie = ie.replace(/(?:\/|^)[^/]+$/, "")).length ? ye(ie + "/" + ae) : ae)
    }
}
)(path);
var types$1 = {}, hasRequiredTypes;
function requireTypes() {
    return hasRequiredTypes || (hasRequiredTypes = 1,
    function(n) {
        var d = n
          , y = requireUtil()
          , ye = ["double", "float", "int32", "uint32", "sint32", "fixed32", "sfixed32", "int64", "uint64", "sint64", "fixed64", "sfixed64", "bool", "string", "bytes"];
        function ve(ie, ae) {
            var i = 0
              , O = {};
            for (ae |= 0; i < ie.length; )
                O[ye[i + ae]] = ie[i++];
            return O
        }
        d.basic = ve([1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2, 2]),
        d.defaults = ve([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, !1, "", y.emptyArray, null]),
        d.long = ve([0, 0, 0, 1, 1], 7),
        d.mapKey = ve([0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2], 2),
        d.packed = ve([1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0])
    }(types$1)),
    types$1
}
var field, hasRequiredField;
function requireField() {
    if (hasRequiredField)
        return field;
    hasRequiredField = 1,
    field = ae;
    var n = requireObject();
    ((ae.prototype = Object.create(n.prototype)).constructor = ae).className = "Field";
    var d = require_enum(), y = requireTypes(), ye = requireUtil(), ve, ie = /^required|optional|repeated$/;
    ae.fromJSON = function(O, $) {
        return new ae(O,$.id,$.type,$.rule,$.extend,$.options,$.comment)
    }
    ;
    function ae(i, O, $, Te, we, Re, Ye) {
        if (ye.isObject(Te) ? (Ye = we,
        Re = Te,
        Te = we = void 0) : ye.isObject(we) && (Ye = Re,
        Re = we,
        we = void 0),
        n.call(this, i, Re),
        !ye.isInteger(O) || O < 0)
            throw TypeError("id must be a non-negative integer");
        if (!ye.isString($))
            throw TypeError("type must be a string");
        if (Te !== void 0 && !ie.test(Te = Te.toString().toLowerCase()))
            throw TypeError("rule must be a string rule");
        if (we !== void 0 && !ye.isString(we))
            throw TypeError("extend must be a string");
        Te === "proto3_optional" && (Te = "optional"),
        this.rule = Te && Te !== "optional" ? Te : void 0,
        this.type = $,
        this.id = O,
        this.extend = we || void 0,
        this.required = Te === "required",
        this.optional = !this.required,
        this.repeated = Te === "repeated",
        this.map = !1,
        this.message = null,
        this.partOf = null,
        this.typeDefault = null,
        this.defaultValue = null,
        this.long = ye.Long ? y.long[$] !== void 0 : !1,
        this.bytes = $ === "bytes",
        this.resolvedType = null,
        this.extensionField = null,
        this.declaringField = null,
        this._packed = null,
        this.comment = Ye
    }
    return Object.defineProperty(ae.prototype, "packed", {
        get: function() {
            return this._packed === null && (this._packed = this.getOption("packed") !== !1),
            this._packed
        }
    }),
    ae.prototype.setOption = function(O, $, Te) {
        return O === "packed" && (this._packed = null),
        n.prototype.setOption.call(this, O, $, Te)
    }
    ,
    ae.prototype.toJSON = function(O) {
        var $ = O ? !!O.keepComments : !1;
        return ye.toObject(["rule", this.rule !== "optional" && this.rule || void 0, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", $ ? this.comment : void 0])
    }
    ,
    ae.prototype.resolve = function() {
        if (this.resolved)
            return this;
        if ((this.typeDefault = y.defaults[this.type]) === void 0 ? (this.resolvedType = (this.declaringField ? this.declaringField.parent : this.parent).lookupTypeOrEnum(this.type),
        this.resolvedType instanceof ve ? this.typeDefault = null : this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]) : this.options && this.options.proto3_optional && (this.typeDefault = null),
        this.options && this.options.default != null && (this.typeDefault = this.options.default,
        this.resolvedType instanceof d && typeof this.typeDefault == "string" && (this.typeDefault = this.resolvedType.values[this.typeDefault])),
        this.options && ((this.options.packed === !0 || this.options.packed !== void 0 && this.resolvedType && !(this.resolvedType instanceof d)) && delete this.options.packed,
        Object.keys(this.options).length || (this.options = void 0)),
        this.long)
            this.typeDefault = ye.Long.fromNumber(this.typeDefault, this.type.charAt(0) === "u"),
            Object.freeze && Object.freeze(this.typeDefault);
        else if (this.bytes && typeof this.typeDefault == "string") {
            var O;
            ye.base64.test(this.typeDefault) ? ye.base64.decode(this.typeDefault, O = ye.newBuffer(ye.base64.length(this.typeDefault)), 0) : ye.utf8.write(this.typeDefault, O = ye.newBuffer(ye.utf8.length(this.typeDefault)), 0),
            this.typeDefault = O
        }
        return this.map ? this.defaultValue = ye.emptyObject : this.repeated ? this.defaultValue = ye.emptyArray : this.defaultValue = this.typeDefault,
        this.parent instanceof ve && (this.parent.ctor.prototype[this.name] = this.defaultValue),
        n.prototype.resolve.call(this)
    }
    ,
    ae.d = function(O, $, Te, we) {
        return typeof $ == "function" ? $ = ye.decorateType($).name : $ && typeof $ == "object" && ($ = ye.decorateEnum($).name),
        function(Ye, _t) {
            ye.decorateType(Ye.constructor).add(new ae(_t,O,$,Te,{
                default: we
            }))
        }
    }
    ,
    ae._configure = function(O) {
        ve = O
    }
    ,
    field
}
var oneof, hasRequiredOneof;
function requireOneof() {
    if (hasRequiredOneof)
        return oneof;
    hasRequiredOneof = 1,
    oneof = ye;
    var n = requireObject();
    ((ye.prototype = Object.create(n.prototype)).constructor = ye).className = "OneOf";
    var d = requireField()
      , y = requireUtil();
    function ye(ie, ae, i, O) {
        if (Array.isArray(ae) || (i = ae,
        ae = void 0),
        n.call(this, ie, i),
        !(ae === void 0 || Array.isArray(ae)))
            throw TypeError("fieldNames must be an Array");
        this.oneof = ae || [],
        this.fieldsArray = [],
        this.comment = O
    }
    ye.fromJSON = function(ae, i) {
        return new ye(ae,i.oneof,i.options,i.comment)
    }
    ,
    ye.prototype.toJSON = function(ae) {
        var i = ae ? !!ae.keepComments : !1;
        return y.toObject(["options", this.options, "oneof", this.oneof, "comment", i ? this.comment : void 0])
    }
    ;
    function ve(ie) {
        if (ie.parent)
            for (var ae = 0; ae < ie.fieldsArray.length; ++ae)
                ie.fieldsArray[ae].parent || ie.parent.add(ie.fieldsArray[ae])
    }
    return ye.prototype.add = function(ae) {
        if (!(ae instanceof d))
            throw TypeError("field must be a Field");
        return ae.parent && ae.parent !== this.parent && ae.parent.remove(ae),
        this.oneof.push(ae.name),
        this.fieldsArray.push(ae),
        ae.partOf = this,
        ve(this),
        this
    }
    ,
    ye.prototype.remove = function(ae) {
        if (!(ae instanceof d))
            throw TypeError("field must be a Field");
        var i = this.fieldsArray.indexOf(ae);
        if (i < 0)
            throw Error(ae + " is not a member of " + this);
        return this.fieldsArray.splice(i, 1),
        i = this.oneof.indexOf(ae.name),
        i > -1 && this.oneof.splice(i, 1),
        ae.partOf = null,
        this
    }
    ,
    ye.prototype.onAdd = function(ae) {
        n.prototype.onAdd.call(this, ae);
        for (var i = this, O = 0; O < this.oneof.length; ++O) {
            var $ = ae.get(this.oneof[O]);
            $ && !$.partOf && ($.partOf = i,
            i.fieldsArray.push($))
        }
        ve(this)
    }
    ,
    ye.prototype.onRemove = function(ae) {
        for (var i = 0, O; i < this.fieldsArray.length; ++i)
            (O = this.fieldsArray[i]).parent && O.parent.remove(O);
        n.prototype.onRemove.call(this, ae)
    }
    ,
    ye.d = function() {
        for (var ae = new Array(arguments.length), i = 0; i < arguments.length; )
            ae[i] = arguments[i++];
        return function($, Te) {
            y.decorateType($.constructor).add(new ye(Te,ae)),
            Object.defineProperty($, Te, {
                get: y.oneOfGetter(ae),
                set: y.oneOfSetter(ae)
            })
        }
    }
    ,
    oneof
}
var namespace, hasRequiredNamespace;
function requireNamespace() {
    if (hasRequiredNamespace)
        return namespace;
    hasRequiredNamespace = 1,
    namespace = O;
    var n = requireObject();
    ((O.prototype = Object.create(n.prototype)).constructor = O).className = "Namespace";
    var d = requireField(), y = requireUtil(), ye = requireOneof(), ve, ie, ae;
    O.fromJSON = function(we, Re) {
        return new O(we,Re.options).addJSON(Re.nested)
    }
    ;
    function i(Te, we) {
        if (Te && Te.length) {
            for (var Re = {}, Ye = 0; Ye < Te.length; ++Ye)
                Re[Te[Ye].name] = Te[Ye].toJSON(we);
            return Re
        }
    }
    O.arrayToJSON = i,
    O.isReservedId = function(we, Re) {
        if (we) {
            for (var Ye = 0; Ye < we.length; ++Ye)
                if (typeof we[Ye] != "string" && we[Ye][0] <= Re && we[Ye][1] > Re)
                    return !0
        }
        return !1
    }
    ,
    O.isReservedName = function(we, Re) {
        if (we) {
            for (var Ye = 0; Ye < we.length; ++Ye)
                if (we[Ye] === Re)
                    return !0
        }
        return !1
    }
    ;
    function O(Te, we) {
        n.call(this, Te, we),
        this.nested = void 0,
        this._nestedArray = null
    }
    function $(Te) {
        return Te._nestedArray = null,
        Te
    }
    return Object.defineProperty(O.prototype, "nestedArray", {
        get: function() {
            return this._nestedArray || (this._nestedArray = y.toArray(this.nested))
        }
    }),
    O.prototype.toJSON = function(we) {
        return y.toObject(["options", this.options, "nested", i(this.nestedArray, we)])
    }
    ,
    O.prototype.addJSON = function(we) {
        var Re = this;
        if (we)
            for (var Ye = Object.keys(we), _t = 0, Jt; _t < Ye.length; ++_t)
                Jt = we[Ye[_t]],
                Re.add((Jt.fields !== void 0 ? ve.fromJSON : Jt.values !== void 0 ? ae.fromJSON : Jt.methods !== void 0 ? ie.fromJSON : Jt.id !== void 0 ? d.fromJSON : O.fromJSON)(Ye[_t], Jt));
        return this
    }
    ,
    O.prototype.get = function(we) {
        return this.nested && this.nested[we] || null
    }
    ,
    O.prototype.getEnum = function(we) {
        if (this.nested && this.nested[we]instanceof ae)
            return this.nested[we].values;
        throw Error("no such enum: " + we)
    }
    ,
    O.prototype.add = function(we) {
        if (!(we instanceof d && we.extend !== void 0 || we instanceof ve || we instanceof ye || we instanceof ae || we instanceof ie || we instanceof O))
            throw TypeError("object must be a valid nested object");
        if (!this.nested)
            this.nested = {};
        else {
            var Re = this.get(we.name);
            if (Re)
                if (Re instanceof O && we instanceof O && !(Re instanceof ve || Re instanceof ie)) {
                    for (var Ye = Re.nestedArray, _t = 0; _t < Ye.length; ++_t)
                        we.add(Ye[_t]);
                    this.remove(Re),
                    this.nested || (this.nested = {}),
                    we.setOptions(Re.options, !0)
                } else
                    throw Error("duplicate name '" + we.name + "' in " + this)
        }
        return this.nested[we.name] = we,
        we.onAdd(this),
        $(this)
    }
    ,
    O.prototype.remove = function(we) {
        if (!(we instanceof n))
            throw TypeError("object must be a ReflectionObject");
        if (we.parent !== this)
            throw Error(we + " is not a member of " + this);
        return delete this.nested[we.name],
        Object.keys(this.nested).length || (this.nested = void 0),
        we.onRemove(this),
        $(this)
    }
    ,
    O.prototype.define = function(we, Re) {
        if (y.isString(we))
            we = we.split(".");
        else if (!Array.isArray(we))
            throw TypeError("illegal path");
        if (we && we.length && we[0] === "")
            throw Error("path must be relative");
        for (var Ye = this; we.length > 0; ) {
            var _t = we.shift();
            if (Ye.nested && Ye.nested[_t]) {
                if (Ye = Ye.nested[_t],
                !(Ye instanceof O))
                    throw Error("path conflicts with non-namespace objects")
            } else
                Ye.add(Ye = new O(_t))
        }
        return Re && Ye.addJSON(Re),
        Ye
    }
    ,
    O.prototype.resolveAll = function() {
        for (var we = this.nestedArray, Re = 0; Re < we.length; )
            we[Re]instanceof O ? we[Re++].resolveAll() : we[Re++].resolve();
        return this.resolve()
    }
    ,
    O.prototype.lookup = function(we, Re, Ye) {
        if (typeof Re == "boolean" ? (Ye = Re,
        Re = void 0) : Re && !Array.isArray(Re) && (Re = [Re]),
        y.isString(we) && we.length) {
            if (we === ".")
                return this.root;
            we = we.split(".")
        } else if (!we.length)
            return this;
        if (we[0] === "")
            return this.root.lookup(we.slice(1), Re);
        var _t = this.get(we[0]);
        if (_t) {
            if (we.length === 1) {
                if (!Re || Re.indexOf(_t.constructor) > -1)
                    return _t
            } else if (_t instanceof O && (_t = _t.lookup(we.slice(1), Re, !0)))
                return _t
        } else
            for (var Jt = 0; Jt < this.nestedArray.length; ++Jt)
                if (this._nestedArray[Jt]instanceof O && (_t = this._nestedArray[Jt].lookup(we, Re, !0)))
                    return _t;
        return this.parent === null || Ye ? null : this.parent.lookup(we, Re)
    }
    ,
    O.prototype.lookupType = function(we) {
        var Re = this.lookup(we, [ve]);
        if (!Re)
            throw Error("no such type: " + we);
        return Re
    }
    ,
    O.prototype.lookupEnum = function(we) {
        var Re = this.lookup(we, [ae]);
        if (!Re)
            throw Error("no such Enum '" + we + "' in " + this);
        return Re
    }
    ,
    O.prototype.lookupTypeOrEnum = function(we) {
        var Re = this.lookup(we, [ve, ae]);
        if (!Re)
            throw Error("no such Type or Enum '" + we + "' in " + this);
        return Re
    }
    ,
    O.prototype.lookupService = function(we) {
        var Re = this.lookup(we, [ie]);
        if (!Re)
            throw Error("no such Service '" + we + "' in " + this);
        return Re
    }
    ,
    O._configure = function(Te, we, Re) {
        ve = Te,
        ie = we,
        ae = Re
    }
    ,
    namespace
}
var mapfield, hasRequiredMapfield;
function requireMapfield() {
    if (hasRequiredMapfield)
        return mapfield;
    hasRequiredMapfield = 1,
    mapfield = ye;
    var n = requireField();
    ((ye.prototype = Object.create(n.prototype)).constructor = ye).className = "MapField";
    var d = requireTypes()
      , y = requireUtil();
    function ye(ve, ie, ae, i, O, $) {
        if (n.call(this, ve, ie, i, void 0, void 0, O, $),
        !y.isString(ae))
            throw TypeError("keyType must be a string");
        this.keyType = ae,
        this.resolvedKeyType = null,
        this.map = !0
    }
    return ye.fromJSON = function(ie, ae) {
        return new ye(ie,ae.id,ae.keyType,ae.type,ae.options,ae.comment)
    }
    ,
    ye.prototype.toJSON = function(ie) {
        var ae = ie ? !!ie.keepComments : !1;
        return y.toObject(["keyType", this.keyType, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", ae ? this.comment : void 0])
    }
    ,
    ye.prototype.resolve = function() {
        if (this.resolved)
            return this;
        if (d.mapKey[this.keyType] === void 0)
            throw Error("invalid key type: " + this.keyType);
        return n.prototype.resolve.call(this)
    }
    ,
    ye.d = function(ie, ae, i) {
        return typeof i == "function" ? i = y.decorateType(i).name : i && typeof i == "object" && (i = y.decorateEnum(i).name),
        function($, Te) {
            y.decorateType($.constructor).add(new ye(Te,ie,ae,i))
        }
    }
    ,
    mapfield
}
var method, hasRequiredMethod;
function requireMethod() {
    if (hasRequiredMethod)
        return method;
    hasRequiredMethod = 1,
    method = y;
    var n = requireObject();
    ((y.prototype = Object.create(n.prototype)).constructor = y).className = "Method";
    var d = requireUtil();
    function y(ye, ve, ie, ae, i, O, $, Te, we) {
        if (d.isObject(i) ? ($ = i,
        i = O = void 0) : d.isObject(O) && ($ = O,
        O = void 0),
        !(ve === void 0 || d.isString(ve)))
            throw TypeError("type must be a string");
        if (!d.isString(ie))
            throw TypeError("requestType must be a string");
        if (!d.isString(ae))
            throw TypeError("responseType must be a string");
        n.call(this, ye, $),
        this.type = ve || "rpc",
        this.requestType = ie,
        this.requestStream = i ? !0 : void 0,
        this.responseType = ae,
        this.responseStream = O ? !0 : void 0,
        this.resolvedRequestType = null,
        this.resolvedResponseType = null,
        this.comment = Te,
        this.parsedOptions = we
    }
    return y.fromJSON = function(ve, ie) {
        return new y(ve,ie.type,ie.requestType,ie.responseType,ie.requestStream,ie.responseStream,ie.options,ie.comment,ie.parsedOptions)
    }
    ,
    y.prototype.toJSON = function(ve) {
        var ie = ve ? !!ve.keepComments : !1;
        return d.toObject(["type", this.type !== "rpc" && this.type || void 0, "requestType", this.requestType, "requestStream", this.requestStream, "responseType", this.responseType, "responseStream", this.responseStream, "options", this.options, "comment", ie ? this.comment : void 0, "parsedOptions", this.parsedOptions])
    }
    ,
    y.prototype.resolve = function() {
        return this.resolved ? this : (this.resolvedRequestType = this.parent.lookupType(this.requestType),
        this.resolvedResponseType = this.parent.lookupType(this.responseType),
        n.prototype.resolve.call(this))
    }
    ,
    method
}
var service, hasRequiredService;
function requireService() {
    if (hasRequiredService)
        return service;
    hasRequiredService = 1,
    service = ve;
    var n = requireNamespace();
    ((ve.prototype = Object.create(n.prototype)).constructor = ve).className = "Service";
    var d = requireMethod()
      , y = requireUtil()
      , ye = rpc;
    function ve(ae, i) {
        n.call(this, ae, i),
        this.methods = {},
        this._methodsArray = null
    }
    ve.fromJSON = function(i, O) {
        var $ = new ve(i,O.options);
        if (O.methods)
            for (var Te = Object.keys(O.methods), we = 0; we < Te.length; ++we)
                $.add(d.fromJSON(Te[we], O.methods[Te[we]]));
        return O.nested && $.addJSON(O.nested),
        $.comment = O.comment,
        $
    }
    ,
    ve.prototype.toJSON = function(i) {
        var O = n.prototype.toJSON.call(this, i)
          , $ = i ? !!i.keepComments : !1;
        return y.toObject(["options", O && O.options || void 0, "methods", n.arrayToJSON(this.methodsArray, i) || {}, "nested", O && O.nested || void 0, "comment", $ ? this.comment : void 0])
    }
    ,
    Object.defineProperty(ve.prototype, "methodsArray", {
        get: function() {
            return this._methodsArray || (this._methodsArray = y.toArray(this.methods))
        }
    });
    function ie(ae) {
        return ae._methodsArray = null,
        ae
    }
    return ve.prototype.get = function(i) {
        return this.methods[i] || n.prototype.get.call(this, i)
    }
    ,
    ve.prototype.resolveAll = function() {
        for (var i = this.methodsArray, O = 0; O < i.length; ++O)
            i[O].resolve();
        return n.prototype.resolve.call(this)
    }
    ,
    ve.prototype.add = function(i) {
        if (this.get(i.name))
            throw Error("duplicate name '" + i.name + "' in " + this);
        return i instanceof d ? (this.methods[i.name] = i,
        i.parent = this,
        ie(this)) : n.prototype.add.call(this, i)
    }
    ,
    ve.prototype.remove = function(i) {
        if (i instanceof d) {
            if (this.methods[i.name] !== i)
                throw Error(i + " is not a member of " + this);
            return delete this.methods[i.name],
            i.parent = null,
            ie(this)
        }
        return n.prototype.remove.call(this, i)
    }
    ,
    ve.prototype.create = function(i, O, $) {
        for (var Te = new ye.Service(i,O,$), we = 0, Re; we < this.methodsArray.length; ++we) {
            var Ye = y.lcFirst((Re = this._methodsArray[we]).resolve().name).replace(/[^$\w_]/g, "");
            Te[Ye] = y.codegen(["r", "c"], y.isReserved(Ye) ? Ye + "_" : Ye)("return this.rpcCall(m,q,s,r,c)")({
                m: Re,
                q: Re.resolvedRequestType.ctor,
                s: Re.resolvedResponseType.ctor
            })
        }
        return Te
    }
    ,
    service
}
var message = Message
  , util$1 = requireMinimal();
function Message(n) {
    if (n)
        for (var d = Object.keys(n), y = 0; y < d.length; ++y)
            this[d[y]] = n[d[y]]
}
Message.create = function n(d) {
    return this.$type.create(d)
}
;
Message.encode = function n(d, y) {
    return this.$type.encode(d, y)
}
;
Message.encodeDelimited = function n(d, y) {
    return this.$type.encodeDelimited(d, y)
}
;
Message.decode = function n(d) {
    return this.$type.decode(d)
}
;
Message.decodeDelimited = function n(d) {
    return this.$type.decodeDelimited(d)
}
;
Message.verify = function n(d) {
    return this.$type.verify(d)
}
;
Message.fromObject = function n(d) {
    return this.$type.fromObject(d)
}
;
Message.toObject = function n(d, y) {
    return this.$type.toObject(d, y)
}
;
Message.prototype.toJSON = function n() {
    return this.$type.toObject(this, util$1.toJSONOptions)
}
;
var decoder_1, hasRequiredDecoder;
function requireDecoder() {
    if (hasRequiredDecoder)
        return decoder_1;
    hasRequiredDecoder = 1,
    decoder_1 = ve;
    var n = require_enum()
      , d = requireTypes()
      , y = requireUtil();
    function ye(ie) {
        return "missing required '" + ie.name + "'"
    }
    function ve(ie) {
        var ae = y.codegen(["r", "l"], ie.name + "$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor" + (ie.fieldsArray.filter(function(Re) {
            return Re.map
        }).length ? ",k,value" : ""))("while(r.pos<c){")("var t=r.uint32()");
        ie.group && ae("if((t&7)===4)")("break"),
        ae("switch(t>>>3){");
        for (var i = 0; i < ie.fieldsArray.length; ++i) {
            var O = ie._fieldsArray[i].resolve()
              , $ = O.resolvedType instanceof n ? "int32" : O.type
              , Te = "m" + y.safeProp(O.name);
            ae("case %i: {", O.id),
            O.map ? (ae("if(%s===util.emptyObject)", Te)("%s={}", Te)("var c2 = r.uint32()+r.pos"),
            d.defaults[O.keyType] !== void 0 ? ae("k=%j", d.defaults[O.keyType]) : ae("k=null"),
            d.defaults[$] !== void 0 ? ae("value=%j", d.defaults[$]) : ae("value=null"),
            ae("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break", O.keyType)("case 2:"),
            d.basic[$] === void 0 ? ae("value=types[%i].decode(r,r.uint32())", i) : ae("value=r.%s()", $),
            ae("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),
            d.long[O.keyType] !== void 0 ? ae('%s[typeof k==="object"?util.longToHash(k):k]=value', Te) : ae("%s[k]=value", Te)) : O.repeated ? (ae("if(!(%s&&%s.length))", Te, Te)("%s=[]", Te),
            d.packed[$] !== void 0 && ae("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())", Te, $)("}else"),
            d.basic[$] === void 0 ? ae(O.resolvedType.group ? "%s.push(types[%i].decode(r))" : "%s.push(types[%i].decode(r,r.uint32()))", Te, i) : ae("%s.push(r.%s())", Te, $)) : d.basic[$] === void 0 ? ae(O.resolvedType.group ? "%s=types[%i].decode(r)" : "%s=types[%i].decode(r,r.uint32())", Te, i) : ae("%s=r.%s()", Te, $),
            ae("break")("}")
        }
        for (ae("default:")("r.skipType(t&7)")("break")("}")("}"),
        i = 0; i < ie._fieldsArray.length; ++i) {
            var we = ie._fieldsArray[i];
            we.required && ae("if(!m.hasOwnProperty(%j))", we.name)("throw util.ProtocolError(%j,{instance:m})", ye(we))
        }
        return ae("return m")
    }
    return decoder_1
}
var verifier_1, hasRequiredVerifier;
function requireVerifier() {
    if (hasRequiredVerifier)
        return verifier_1;
    hasRequiredVerifier = 1,
    verifier_1 = ie;
    var n = require_enum()
      , d = requireUtil();
    function y(ae, i) {
        return ae.name + ": " + i + (ae.repeated && i !== "array" ? "[]" : ae.map && i !== "object" ? "{k:" + ae.keyType + "}" : "") + " expected"
    }
    function ye(ae, i, O, $) {
        if (i.resolvedType)
            if (i.resolvedType instanceof n) {
                ae("switch(%s){", $)("default:")("return%j", y(i, "enum value"));
                for (var Te = Object.keys(i.resolvedType.values), we = 0; we < Te.length; ++we)
                    ae("case %i:", i.resolvedType.values[Te[we]]);
                ae("break")("}")
            } else
                ae("{")("var e=types[%i].verify(%s);", O, $)("if(e)")("return%j+e", i.name + ".")("}");
        else
            switch (i.type) {
            case "int32":
            case "uint32":
            case "sint32":
            case "fixed32":
            case "sfixed32":
                ae("if(!util.isInteger(%s))", $)("return%j", y(i, "integer"));
                break;
            case "int64":
            case "uint64":
            case "sint64":
            case "fixed64":
            case "sfixed64":
                ae("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))", $, $, $, $)("return%j", y(i, "integer|Long"));
                break;
            case "float":
            case "double":
                ae('if(typeof %s!=="number")', $)("return%j", y(i, "number"));
                break;
            case "bool":
                ae('if(typeof %s!=="boolean")', $)("return%j", y(i, "boolean"));
                break;
            case "string":
                ae("if(!util.isString(%s))", $)("return%j", y(i, "string"));
                break;
            case "bytes":
                ae('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))', $, $, $)("return%j", y(i, "buffer"));
                break
            }
        return ae
    }
    function ve(ae, i, O) {
        switch (i.keyType) {
        case "int32":
        case "uint32":
        case "sint32":
        case "fixed32":
        case "sfixed32":
            ae("if(!util.key32Re.test(%s))", O)("return%j", y(i, "integer key"));
            break;
        case "int64":
        case "uint64":
        case "sint64":
        case "fixed64":
        case "sfixed64":
            ae("if(!util.key64Re.test(%s))", O)("return%j", y(i, "integer|Long key"));
            break;
        case "bool":
            ae("if(!util.key2Re.test(%s))", O)("return%j", y(i, "boolean key"));
            break
        }
        return ae
    }
    function ie(ae) {
        var i = d.codegen(["m"], ae.name + "$verify")('if(typeof m!=="object"||m===null)')("return%j", "object expected")
          , O = ae.oneofsArray
          , $ = {};
        O.length && i("var p={}");
        for (var Te = 0; Te < ae.fieldsArray.length; ++Te) {
            var we = ae._fieldsArray[Te].resolve()
              , Re = "m" + d.safeProp(we.name);
            if (we.optional && i("if(%s!=null&&m.hasOwnProperty(%j)){", Re, we.name),
            we.map)
                i("if(!util.isObject(%s))", Re)("return%j", y(we, "object"))("var k=Object.keys(%s)", Re)("for(var i=0;i<k.length;++i){"),
                ve(i, we, "k[i]"),
                ye(i, we, Te, Re + "[k[i]]")("}");
            else if (we.repeated)
                i("if(!Array.isArray(%s))", Re)("return%j", y(we, "array"))("for(var i=0;i<%s.length;++i){", Re),
                ye(i, we, Te, Re + "[i]")("}");
            else {
                if (we.partOf) {
                    var Ye = d.safeProp(we.partOf.name);
                    $[we.partOf.name] === 1 && i("if(p%s===1)", Ye)("return%j", we.partOf.name + ": multiple values"),
                    $[we.partOf.name] = 1,
                    i("p%s=1", Ye)
                }
                ye(i, we, Te, Re)
            }
            we.optional && i("}")
        }
        return i("return null")
    }
    return verifier_1
}
var converter = {}, hasRequiredConverter;
function requireConverter() {
    return hasRequiredConverter || (hasRequiredConverter = 1,
    function(n) {
        var d = n
          , y = require_enum()
          , ye = requireUtil();
        function ve(ae, i, O, $) {
            var Te = !1;
            if (i.resolvedType)
                if (i.resolvedType instanceof y) {
                    ae("switch(d%s){", $);
                    for (var we = i.resolvedType.values, Re = Object.keys(we), Ye = 0; Ye < Re.length; ++Ye)
                        we[Re[Ye]] === i.typeDefault && !Te && (ae("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}', $, $, $),
                        i.repeated || ae("break"),
                        Te = !0),
                        ae("case%j:", Re[Ye])("case %i:", we[Re[Ye]])("m%s=%j", $, we[Re[Ye]])("break");
                    ae("}")
                } else
                    ae('if(typeof d%s!=="object")', $)("throw TypeError(%j)", i.fullName + ": object expected")("m%s=types[%i].fromObject(d%s)", $, O, $);
            else {
                var _t = !1;
                switch (i.type) {
                case "double":
                case "float":
                    ae("m%s=Number(d%s)", $, $);
                    break;
                case "uint32":
                case "fixed32":
                    ae("m%s=d%s>>>0", $, $);
                    break;
                case "int32":
                case "sint32":
                case "sfixed32":
                    ae("m%s=d%s|0", $, $);
                    break;
                case "uint64":
                    _t = !0;
                case "int64":
                case "sint64":
                case "fixed64":
                case "sfixed64":
                    ae("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j", $, $, _t)('else if(typeof d%s==="string")', $)("m%s=parseInt(d%s,10)", $, $)('else if(typeof d%s==="number")', $)("m%s=d%s", $, $)('else if(typeof d%s==="object")', $)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)", $, $, $, _t ? "true" : "");
                    break;
                case "bytes":
                    ae('if(typeof d%s==="string")', $)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)", $, $, $)("else if(d%s.length >= 0)", $)("m%s=d%s", $, $);
                    break;
                case "string":
                    ae("m%s=String(d%s)", $, $);
                    break;
                case "bool":
                    ae("m%s=Boolean(d%s)", $, $);
                    break
                }
            }
            return ae
        }
        d.fromObject = function(i) {
            var O = i.fieldsArray
              , $ = ye.codegen(["d"], i.name + "$fromObject")("if(d instanceof this.ctor)")("return d");
            if (!O.length)
                return $("return new this.ctor");
            $("var m=new this.ctor");
            for (var Te = 0; Te < O.length; ++Te) {
                var we = O[Te].resolve()
                  , Re = ye.safeProp(we.name);
                we.map ? ($("if(d%s){", Re)('if(typeof d%s!=="object")', Re)("throw TypeError(%j)", we.fullName + ": object expected")("m%s={}", Re)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){", Re),
                ve($, we, Te, Re + "[ks[i]]")("}")("}")) : we.repeated ? ($("if(d%s){", Re)("if(!Array.isArray(d%s))", Re)("throw TypeError(%j)", we.fullName + ": array expected")("m%s=[]", Re)("for(var i=0;i<d%s.length;++i){", Re),
                ve($, we, Te, Re + "[i]")("}")("}")) : (we.resolvedType instanceof y || $("if(d%s!=null){", Re),
                ve($, we, Te, Re),
                we.resolvedType instanceof y || $("}"))
            }
            return $("return m")
        }
        ;
        function ie(ae, i, O, $) {
            if (i.resolvedType)
                i.resolvedType instanceof y ? ae("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s", $, O, $, $, O, $, $) : ae("d%s=types[%i].toObject(m%s,o)", $, O, $);
            else {
                var Te = !1;
                switch (i.type) {
                case "double":
                case "float":
                    ae("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s", $, $, $, $);
                    break;
                case "uint64":
                    Te = !0;
                case "int64":
                case "sint64":
                case "fixed64":
                case "sfixed64":
                    ae('if(typeof m%s==="number")', $)("d%s=o.longs===String?String(m%s):m%s", $, $, $)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s", $, $, $, $, Te ? "true" : "", $);
                    break;
                case "bytes":
                    ae("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s", $, $, $, $, $);
                    break;
                default:
                    ae("d%s=m%s", $, $);
                    break
                }
            }
            return ae
        }
        d.toObject = function(i) {
            var O = i.fieldsArray.slice().sort(ye.compareFieldsById);
            if (!O.length)
                return ye.codegen()("return {}");
            for (var $ = ye.codegen(["m", "o"], i.name + "$toObject")("if(!o)")("o={}")("var d={}"), Te = [], we = [], Re = [], Ye = 0; Ye < O.length; ++Ye)
                O[Ye].partOf || (O[Ye].resolve().repeated ? Te : O[Ye].map ? we : Re).push(O[Ye]);
            if (Te.length) {
                for ($("if(o.arrays||o.defaults){"),
                Ye = 0; Ye < Te.length; ++Ye)
                    $("d%s=[]", ye.safeProp(Te[Ye].name));
                $("}")
            }
            if (we.length) {
                for ($("if(o.objects||o.defaults){"),
                Ye = 0; Ye < we.length; ++Ye)
                    $("d%s={}", ye.safeProp(we[Ye].name));
                $("}")
            }
            if (Re.length) {
                for ($("if(o.defaults){"),
                Ye = 0; Ye < Re.length; ++Ye) {
                    var _t = Re[Ye]
                      , Jt = ye.safeProp(_t.name);
                    if (_t.resolvedType instanceof y)
                        $("d%s=o.enums===String?%j:%j", Jt, _t.resolvedType.valuesById[_t.typeDefault], _t.typeDefault);
                    else if (_t.long)
                        $("if(util.Long){")("var n=new util.Long(%i,%i,%j)", _t.typeDefault.low, _t.typeDefault.high, _t.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n", Jt)("}else")("d%s=o.longs===String?%j:%i", Jt, _t.typeDefault.toString(), _t.typeDefault.toNumber());
                    else if (_t.bytes) {
                        var bt = "[" + Array.prototype.slice.call(_t.typeDefault).join(",") + "]";
                        $("if(o.bytes===String)d%s=%j", Jt, String.fromCharCode.apply(String, _t.typeDefault))("else{")("d%s=%s", Jt, bt)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)", Jt, Jt)("}")
                    } else
                        $("d%s=%j", Jt, _t.typeDefault)
                }
                $("}")
            }
            var ai = !1;
            for (Ye = 0; Ye < O.length; ++Ye) {
                var _t = O[Ye]
                  , ii = i._fieldsArray.indexOf(_t)
                  , Jt = ye.safeProp(_t.name);
                _t.map ? (ai || (ai = !0,
                $("var ks2")),
                $("if(m%s&&(ks2=Object.keys(m%s)).length){", Jt, Jt)("d%s={}", Jt)("for(var j=0;j<ks2.length;++j){"),
                ie($, _t, ii, Jt + "[ks2[j]]")("}")) : _t.repeated ? ($("if(m%s&&m%s.length){", Jt, Jt)("d%s=[]", Jt)("for(var j=0;j<m%s.length;++j){", Jt),
                ie($, _t, ii, Jt + "[j]")("}")) : ($("if(m%s!=null&&m.hasOwnProperty(%j)){", Jt, _t.name),
                ie($, _t, ii, Jt),
                _t.partOf && $("if(o.oneofs)")("d%s=%j", ye.safeProp(_t.partOf.name), _t.name)),
                $("}")
            }
            return $("return d")
        }
    }(converter)),
    converter
}
var wrappers = {};
(function(n) {
    var d = n
      , y = message;
    d[".google.protobuf.Any"] = {
        fromObject: function(ye) {
            if (ye && ye["@type"]) {
                var ve = ye["@type"].substring(ye["@type"].lastIndexOf("/") + 1)
                  , ie = this.lookup(ve);
                if (ie) {
                    var ae = ye["@type"].charAt(0) === "." ? ye["@type"].slice(1) : ye["@type"];
                    return ae.indexOf("/") === -1 && (ae = "/" + ae),
                    this.create({
                        type_url: ae,
                        value: ie.encode(ie.fromObject(ye)).finish()
                    })
                }
            }
            return this.fromObject(ye)
        },
        toObject: function(ye, ve) {
            var ie = "type.googleapis.com/"
              , ae = ""
              , i = "";
            if (ve && ve.json && ye.type_url && ye.value) {
                i = ye.type_url.substring(ye.type_url.lastIndexOf("/") + 1),
                ae = ye.type_url.substring(0, ye.type_url.lastIndexOf("/") + 1);
                var O = this.lookup(i);
                O && (ye = O.decode(ye.value))
            }
            if (!(ye instanceof this.ctor) && ye instanceof y) {
                var $ = ye.$type.toObject(ye, ve)
                  , Te = ye.$type.fullName[0] === "." ? ye.$type.fullName.slice(1) : ye.$type.fullName;
                return ae === "" && (ae = ie),
                i = ae + Te,
                $["@type"] = i,
                $
            }
            return this.toObject(ye, ve)
        }
    }
}
)(wrappers);
var type, hasRequiredType;
function requireType() {
    if (hasRequiredType)
        return type;
    hasRequiredType = 1,
    type = Jt;
    var n = requireNamespace();
    ((Jt.prototype = Object.create(n.prototype)).constructor = Jt).className = "Type";
    var d = require_enum()
      , y = requireOneof()
      , ye = requireField()
      , ve = requireMapfield()
      , ie = requireService()
      , ae = message
      , i = reader
      , O = writer
      , $ = requireUtil()
      , Te = requireEncoder()
      , we = requireDecoder()
      , Re = requireVerifier()
      , Ye = requireConverter()
      , _t = wrappers;
    function Jt(ai, ii) {
        n.call(this, ai, ii),
        this.fields = {},
        this.oneofs = void 0,
        this.extensions = void 0,
        this.reserved = void 0,
        this.group = void 0,
        this._fieldsById = null,
        this._fieldsArray = null,
        this._oneofsArray = null,
        this._ctor = null
    }
    Object.defineProperties(Jt.prototype, {
        fieldsById: {
            get: function() {
                if (this._fieldsById)
                    return this._fieldsById;
                this._fieldsById = {};
                for (var ai = Object.keys(this.fields), ii = 0; ii < ai.length; ++ii) {
                    var da = this.fields[ai[ii]]
                      , aa = da.id;
                    if (this._fieldsById[aa])
                        throw Error("duplicate id " + aa + " in " + this);
                    this._fieldsById[aa] = da
                }
                return this._fieldsById
            }
        },
        fieldsArray: {
            get: function() {
                return this._fieldsArray || (this._fieldsArray = $.toArray(this.fields))
            }
        },
        oneofsArray: {
            get: function() {
                return this._oneofsArray || (this._oneofsArray = $.toArray(this.oneofs))
            }
        },
        ctor: {
            get: function() {
                return this._ctor || (this.ctor = Jt.generateConstructor(this)())
            },
            set: function(ai) {
                var ii = ai.prototype;
                ii instanceof ae || ((ai.prototype = new ae).constructor = ai,
                $.merge(ai.prototype, ii)),
                ai.$type = ai.prototype.$type = this,
                $.merge(ai, ae, !0),
                this._ctor = ai;
                for (var da = 0; da < this.fieldsArray.length; ++da)
                    this._fieldsArray[da].resolve();
                var aa = {};
                for (da = 0; da < this.oneofsArray.length; ++da)
                    aa[this._oneofsArray[da].resolve().name] = {
                        get: $.oneOfGetter(this._oneofsArray[da].oneof),
                        set: $.oneOfSetter(this._oneofsArray[da].oneof)
                    };
                da && Object.defineProperties(ai.prototype, aa)
            }
        }
    }),
    Jt.generateConstructor = function(ii) {
        for (var da = $.codegen(["p"], ii.name), aa = 0, Ta; aa < ii.fieldsArray.length; ++aa)
            (Ta = ii._fieldsArray[aa]).map ? da("this%s={}", $.safeProp(Ta.name)) : Ta.repeated && da("this%s=[]", $.safeProp(Ta.name));
        return da("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")
    }
    ;
    function bt(ai) {
        return ai._fieldsById = ai._fieldsArray = ai._oneofsArray = null,
        delete ai.encode,
        delete ai.decode,
        delete ai.verify,
        ai
    }
    return Jt.fromJSON = function(ii, da) {
        var aa = new Jt(ii,da.options);
        aa.extensions = da.extensions,
        aa.reserved = da.reserved;
        for (var Ta = Object.keys(da.fields), fa = 0; fa < Ta.length; ++fa)
            aa.add((typeof da.fields[Ta[fa]].keyType < "u" ? ve.fromJSON : ye.fromJSON)(Ta[fa], da.fields[Ta[fa]]));
        if (da.oneofs)
            for (Ta = Object.keys(da.oneofs),
            fa = 0; fa < Ta.length; ++fa)
                aa.add(y.fromJSON(Ta[fa], da.oneofs[Ta[fa]]));
        if (da.nested)
            for (Ta = Object.keys(da.nested),
            fa = 0; fa < Ta.length; ++fa) {
                var He = da.nested[Ta[fa]];
                aa.add((He.id !== void 0 ? ye.fromJSON : He.fields !== void 0 ? Jt.fromJSON : He.values !== void 0 ? d.fromJSON : He.methods !== void 0 ? ie.fromJSON : n.fromJSON)(Ta[fa], He))
            }
        return da.extensions && da.extensions.length && (aa.extensions = da.extensions),
        da.reserved && da.reserved.length && (aa.reserved = da.reserved),
        da.group && (aa.group = !0),
        da.comment && (aa.comment = da.comment),
        aa
    }
    ,
    Jt.prototype.toJSON = function(ii) {
        var da = n.prototype.toJSON.call(this, ii)
          , aa = ii ? !!ii.keepComments : !1;
        return $.toObject(["options", da && da.options || void 0, "oneofs", n.arrayToJSON(this.oneofsArray, ii), "fields", n.arrayToJSON(this.fieldsArray.filter(function(Ta) {
            return !Ta.declaringField
        }), ii) || {}, "extensions", this.extensions && this.extensions.length ? this.extensions : void 0, "reserved", this.reserved && this.reserved.length ? this.reserved : void 0, "group", this.group || void 0, "nested", da && da.nested || void 0, "comment", aa ? this.comment : void 0])
    }
    ,
    Jt.prototype.resolveAll = function() {
        for (var ii = this.fieldsArray, da = 0; da < ii.length; )
            ii[da++].resolve();
        var aa = this.oneofsArray;
        for (da = 0; da < aa.length; )
            aa[da++].resolve();
        return n.prototype.resolveAll.call(this)
    }
    ,
    Jt.prototype.get = function(ii) {
        return this.fields[ii] || this.oneofs && this.oneofs[ii] || this.nested && this.nested[ii] || null
    }
    ,
    Jt.prototype.add = function(ii) {
        if (this.get(ii.name))
            throw Error("duplicate name '" + ii.name + "' in " + this);
        if (ii instanceof ye && ii.extend === void 0) {
            if (this._fieldsById ? this._fieldsById[ii.id] : this.fieldsById[ii.id])
                throw Error("duplicate id " + ii.id + " in " + this);
            if (this.isReservedId(ii.id))
                throw Error("id " + ii.id + " is reserved in " + this);
            if (this.isReservedName(ii.name))
                throw Error("name '" + ii.name + "' is reserved in " + this);
            return ii.parent && ii.parent.remove(ii),
            this.fields[ii.name] = ii,
            ii.message = this,
            ii.onAdd(this),
            bt(this)
        }
        return ii instanceof y ? (this.oneofs || (this.oneofs = {}),
        this.oneofs[ii.name] = ii,
        ii.onAdd(this),
        bt(this)) : n.prototype.add.call(this, ii)
    }
    ,
    Jt.prototype.remove = function(ii) {
        if (ii instanceof ye && ii.extend === void 0) {
            if (!this.fields || this.fields[ii.name] !== ii)
                throw Error(ii + " is not a member of " + this);
            return delete this.fields[ii.name],
            ii.parent = null,
            ii.onRemove(this),
            bt(this)
        }
        if (ii instanceof y) {
            if (!this.oneofs || this.oneofs[ii.name] !== ii)
                throw Error(ii + " is not a member of " + this);
            return delete this.oneofs[ii.name],
            ii.parent = null,
            ii.onRemove(this),
            bt(this)
        }
        return n.prototype.remove.call(this, ii)
    }
    ,
    Jt.prototype.isReservedId = function(ii) {
        return n.isReservedId(this.reserved, ii)
    }
    ,
    Jt.prototype.isReservedName = function(ii) {
        return n.isReservedName(this.reserved, ii)
    }
    ,
    Jt.prototype.create = function(ii) {
        return new this.ctor(ii)
    }
    ,
    Jt.prototype.setup = function() {
        for (var ii = this.fullName, da = [], aa = 0; aa < this.fieldsArray.length; ++aa)
            da.push(this._fieldsArray[aa].resolve().resolvedType);
        this.encode = Te(this)({
            Writer: O,
            types: da,
            util: $
        }),
        this.decode = we(this)({
            Reader: i,
            types: da,
            util: $
        }),
        this.verify = Re(this)({
            types: da,
            util: $
        }),
        this.fromObject = Ye.fromObject(this)({
            types: da,
            util: $
        }),
        this.toObject = Ye.toObject(this)({
            types: da,
            util: $
        });
        var Ta = _t[ii];
        if (Ta) {
            var fa = Object.create(this);
            fa.fromObject = this.fromObject,
            this.fromObject = Ta.fromObject.bind(fa),
            fa.toObject = this.toObject,
            this.toObject = Ta.toObject.bind(fa)
        }
        return this
    }
    ,
    Jt.prototype.encode = function(ii, da) {
        return this.setup().encode(ii, da)
    }
    ,
    Jt.prototype.encodeDelimited = function(ii, da) {
        return this.encode(ii, da && da.len ? da.fork() : da).ldelim()
    }
    ,
    Jt.prototype.decode = function(ii, da) {
        return this.setup().decode(ii, da)
    }
    ,
    Jt.prototype.decodeDelimited = function(ii) {
        return ii instanceof i || (ii = i.create(ii)),
        this.decode(ii, ii.uint32())
    }
    ,
    Jt.prototype.verify = function(ii) {
        return this.setup().verify(ii)
    }
    ,
    Jt.prototype.fromObject = function(ii) {
        return this.setup().fromObject(ii)
    }
    ,
    Jt.prototype.toObject = function(ii, da) {
        return this.setup().toObject(ii, da)
    }
    ,
    Jt.d = function(ii) {
        return function(aa) {
            $.decorateType(aa, ii)
        }
    }
    ,
    type
}
var root, hasRequiredRoot;
function requireRoot() {
    if (hasRequiredRoot)
        return root;
    hasRequiredRoot = 1,
    root = O;
    var n = requireNamespace();
    ((O.prototype = Object.create(n.prototype)).constructor = O).className = "Root";
    var d = requireField(), y = require_enum(), ye = requireOneof(), ve = requireUtil(), ie, ae, i;
    function O(Re) {
        n.call(this, "", Re),
        this.deferred = [],
        this.files = []
    }
    O.fromJSON = function(Ye, _t) {
        return _t || (_t = new O),
        Ye.options && _t.setOptions(Ye.options),
        _t.addJSON(Ye.nested)
    }
    ,
    O.prototype.resolvePath = ve.path.resolve,
    O.prototype.fetch = ve.fetch;
    function $() {}
    O.prototype.load = function Re(Ye, _t, Jt) {
        typeof _t == "function" && (Jt = _t,
        _t = void 0);
        var bt = this;
        if (!Jt)
            return ve.asPromise(Re, bt, Ye, _t);
        var ai = Jt === $;
        function ii(si, ga) {
            if (Jt) {
                var ba = Jt;
                if (Jt = null,
                ai)
                    throw si;
                ba(si, ga)
            }
        }
        function da(si) {
            var ga = si.lastIndexOf("google/protobuf/");
            if (ga > -1) {
                var ba = si.substring(ga);
                if (ba in i)
                    return ba
            }
            return null
        }
        function aa(si, ga) {
            try {
                if (ve.isString(ga) && ga.charAt(0) === "{" && (ga = JSON.parse(ga)),
                !ve.isString(ga))
                    bt.setOptions(ga.options).addJSON(ga.nested);
                else {
                    ae.filename = si;
                    var ba = ae(ga, bt, _t), Ca, za = 0;
                    if (ba.imports)
                        for (; za < ba.imports.length; ++za)
                            (Ca = da(ba.imports[za]) || bt.resolvePath(si, ba.imports[za])) && Ta(Ca);
                    if (ba.weakImports)
                        for (za = 0; za < ba.weakImports.length; ++za)
                            (Ca = da(ba.weakImports[za]) || bt.resolvePath(si, ba.weakImports[za])) && Ta(Ca, !0)
                }
            } catch (Ms) {
                ii(Ms)
            }
            !ai && !fa && ii(null, bt)
        }
        function Ta(si, ga) {
            if (si = da(si) || si,
            !(bt.files.indexOf(si) > -1)) {
                if (bt.files.push(si),
                si in i) {
                    ai ? aa(si, i[si]) : (++fa,
                    setTimeout(function() {
                        --fa,
                        aa(si, i[si])
                    }));
                    return
                }
                if (ai) {
                    var ba;
                    try {
                        ba = ve.fs.readFileSync(si).toString("utf8")
                    } catch (Ca) {
                        ga || ii(Ca);
                        return
                    }
                    aa(si, ba)
                } else
                    ++fa,
                    bt.fetch(si, function(Ca, za) {
                        if (--fa,
                        !!Jt) {
                            if (Ca) {
                                ga ? fa || ii(null, bt) : ii(Ca);
                                return
                            }
                            aa(si, za)
                        }
                    })
            }
        }
        var fa = 0;
        ve.isString(Ye) && (Ye = [Ye]);
        for (var He = 0, Zt; He < Ye.length; ++He)
            (Zt = bt.resolvePath("", Ye[He])) && Ta(Zt);
        if (ai)
            return bt;
        fa || ii(null, bt)
    }
    ,
    O.prototype.loadSync = function(Ye, _t) {
        if (!ve.isNode)
            throw Error("not supported");
        return this.load(Ye, _t, $)
    }
    ,
    O.prototype.resolveAll = function() {
        if (this.deferred.length)
            throw Error("unresolvable extensions: " + this.deferred.map(function(Ye) {
                return "'extend " + Ye.extend + "' in " + Ye.parent.fullName
            }).join(", "));
        return n.prototype.resolveAll.call(this)
    }
    ;
    var Te = /^[A-Z]/;
    function we(Re, Ye) {
        var _t = Ye.parent.lookup(Ye.extend);
        if (_t) {
            var Jt = new d(Ye.fullName,Ye.id,Ye.type,Ye.rule,void 0,Ye.options);
            return _t.get(Jt.name) || (Jt.declaringField = Ye,
            Ye.extensionField = Jt,
            _t.add(Jt)),
            !0
        }
        return !1
    }
    return O.prototype._handleAdd = function(Ye) {
        if (Ye instanceof d)
            Ye.extend !== void 0 && !Ye.extensionField && (we(this, Ye) || this.deferred.push(Ye));
        else if (Ye instanceof y)
            Te.test(Ye.name) && (Ye.parent[Ye.name] = Ye.values);
        else if (!(Ye instanceof ye)) {
            if (Ye instanceof ie)
                for (var _t = 0; _t < this.deferred.length; )
                    we(this, this.deferred[_t]) ? this.deferred.splice(_t, 1) : ++_t;
            for (var Jt = 0; Jt < Ye.nestedArray.length; ++Jt)
                this._handleAdd(Ye._nestedArray[Jt]);
            Te.test(Ye.name) && (Ye.parent[Ye.name] = Ye)
        }
    }
    ,
    O.prototype._handleRemove = function(Ye) {
        if (Ye instanceof d) {
            if (Ye.extend !== void 0)
                if (Ye.extensionField)
                    Ye.extensionField.parent.remove(Ye.extensionField),
                    Ye.extensionField = null;
                else {
                    var _t = this.deferred.indexOf(Ye);
                    _t > -1 && this.deferred.splice(_t, 1)
                }
        } else if (Ye instanceof y)
            Te.test(Ye.name) && delete Ye.parent[Ye.name];
        else if (Ye instanceof n) {
            for (var Jt = 0; Jt < Ye.nestedArray.length; ++Jt)
                this._handleRemove(Ye._nestedArray[Jt]);
            Te.test(Ye.name) && delete Ye.parent[Ye.name]
        }
    }
    ,
    O._configure = function(Re, Ye, _t) {
        ie = Re,
        ae = Ye,
        i = _t
    }
    ,
    root
}
var hasRequiredUtil;
function requireUtil() {
    if (hasRequiredUtil)
        return util$2.exports;
    hasRequiredUtil = 1;
    var n = util$2.exports = requireMinimal(), d = roots, y, ye;
    n.codegen = codegen_1,
    n.fetch = fetch_1,
    n.path = path,
    n.fs = n.inquire("fs"),
    n.toArray = function($) {
        if ($) {
            for (var Te = Object.keys($), we = new Array(Te.length), Re = 0; Re < Te.length; )
                we[Re] = $[Te[Re++]];
            return we
        }
        return []
    }
    ,
    n.toObject = function($) {
        for (var Te = {}, we = 0; we < $.length; ) {
            var Re = $[we++]
              , Ye = $[we++];
            Ye !== void 0 && (Te[Re] = Ye)
        }
        return Te
    }
    ;
    var ve = /\\/g
      , ie = /"/g;
    n.isReserved = function($) {
        return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test($)
    }
    ,
    n.safeProp = function($) {
        return !/^[$\w_]+$/.test($) || n.isReserved($) ? '["' + $.replace(ve, "\\\\").replace(ie, '\\"') + '"]' : "." + $
    }
    ,
    n.ucFirst = function($) {
        return $.charAt(0).toUpperCase() + $.substring(1)
    }
    ;
    var ae = /_([a-z])/g;
    n.camelCase = function($) {
        return $.substring(0, 1) + $.substring(1).replace(ae, function(Te, we) {
            return we.toUpperCase()
        })
    }
    ,
    n.compareFieldsById = function($, Te) {
        return $.id - Te.id
    }
    ,
    n.decorateType = function($, Te) {
        if ($.$type)
            return Te && $.$type.name !== Te && (n.decorateRoot.remove($.$type),
            $.$type.name = Te,
            n.decorateRoot.add($.$type)),
            $.$type;
        y || (y = requireType());
        var we = new y(Te || $.name);
        return n.decorateRoot.add(we),
        we.ctor = $,
        Object.defineProperty($, "$type", {
            value: we,
            enumerable: !1
        }),
        Object.defineProperty($.prototype, "$type", {
            value: we,
            enumerable: !1
        }),
        we
    }
    ;
    var i = 0;
    return n.decorateEnum = function($) {
        if ($.$type)
            return $.$type;
        ye || (ye = require_enum());
        var Te = new ye("Enum" + i++,$);
        return n.decorateRoot.add(Te),
        Object.defineProperty($, "$type", {
            value: Te,
            enumerable: !1
        }),
        Te
    }
    ,
    n.setProperty = function($, Te, we) {
        function Re(Ye, _t, Jt) {
            var bt = _t.shift();
            if (bt === "__proto__" || bt === "prototype")
                return Ye;
            if (_t.length > 0)
                Ye[bt] = Re(Ye[bt] || {}, _t, Jt);
            else {
                var ai = Ye[bt];
                ai && (Jt = [].concat(ai).concat(Jt)),
                Ye[bt] = Jt
            }
            return Ye
        }
        if (typeof $ != "object")
            throw TypeError("dst must be an object");
        if (!Te)
            throw TypeError("path must be specified");
        return Te = Te.split("."),
        Re($, Te, we)
    }
    ,
    Object.defineProperty(n, "decorateRoot", {
        get: function() {
            return d.decorated || (d.decorated = new (requireRoot()))
        }
    }),
    util$2.exports
}
var object, hasRequiredObject;
function requireObject() {
    if (hasRequiredObject)
        return object;
    hasRequiredObject = 1,
    object = y,
    y.className = "ReflectionObject";
    var n = requireUtil(), d;
    function y(ye, ve) {
        if (!n.isString(ye))
            throw TypeError("name must be a string");
        if (ve && !n.isObject(ve))
            throw TypeError("options must be an object");
        this.options = ve,
        this.parsedOptions = null,
        this.name = ye,
        this.parent = null,
        this.resolved = !1,
        this.comment = null,
        this.filename = null
    }
    return Object.defineProperties(y.prototype, {
        root: {
            get: function() {
                for (var ye = this; ye.parent !== null; )
                    ye = ye.parent;
                return ye
            }
        },
        fullName: {
            get: function() {
                for (var ye = [this.name], ve = this.parent; ve; )
                    ye.unshift(ve.name),
                    ve = ve.parent;
                return ye.join(".")
            }
        }
    }),
    y.prototype.toJSON = function() {
        throw Error()
    }
    ,
    y.prototype.onAdd = function(ve) {
        this.parent && this.parent !== ve && this.parent.remove(this),
        this.parent = ve,
        this.resolved = !1;
        var ie = ve.root;
        ie instanceof d && ie._handleAdd(this)
    }
    ,
    y.prototype.onRemove = function(ve) {
        var ie = ve.root;
        ie instanceof d && ie._handleRemove(this),
        this.parent = null,
        this.resolved = !1
    }
    ,
    y.prototype.resolve = function() {
        return this.resolved ? this : (this.root instanceof d && (this.resolved = !0),
        this)
    }
    ,
    y.prototype.getOption = function(ve) {
        if (this.options)
            return this.options[ve]
    }
    ,
    y.prototype.setOption = function(ve, ie, ae) {
        return (!ae || !this.options || this.options[ve] === void 0) && ((this.options || (this.options = {}))[ve] = ie),
        this
    }
    ,
    y.prototype.setParsedOption = function(ve, ie, ae) {
        this.parsedOptions || (this.parsedOptions = []);
        var i = this.parsedOptions;
        if (ae) {
            var O = i.find(function(we) {
                return Object.prototype.hasOwnProperty.call(we, ve)
            });
            if (O) {
                var $ = O[ve];
                n.setProperty($, ae, ie)
            } else
                O = {},
                O[ve] = n.setProperty({}, ae, ie),
                i.push(O)
        } else {
            var Te = {};
            Te[ve] = ie,
            i.push(Te)
        }
        return this
    }
    ,
    y.prototype.setOptions = function(ve, ie) {
        if (ve)
            for (var ae = Object.keys(ve), i = 0; i < ae.length; ++i)
                this.setOption(ae[i], ve[ae[i]], ie);
        return this
    }
    ,
    y.prototype.toString = function() {
        var ve = this.constructor.className
          , ie = this.fullName;
        return ie.length ? ve + " " + ie : ve
    }
    ,
    y._configure = function(ye) {
        d = ye
    }
    ,
    object
}
var _enum, hasRequired_enum;
function require_enum() {
    if (hasRequired_enum)
        return _enum;
    hasRequired_enum = 1,
    _enum = ye;
    var n = requireObject();
    ((ye.prototype = Object.create(n.prototype)).constructor = ye).className = "Enum";
    var d = requireNamespace()
      , y = requireUtil();
    function ye(ve, ie, ae, i, O, $) {
        if (n.call(this, ve, ae),
        ie && typeof ie != "object")
            throw TypeError("values must be an object");
        if (this.valuesById = {},
        this.values = Object.create(this.valuesById),
        this.comment = i,
        this.comments = O || {},
        this.valuesOptions = $,
        this.reserved = void 0,
        ie)
            for (var Te = Object.keys(ie), we = 0; we < Te.length; ++we)
                typeof ie[Te[we]] == "number" && (this.valuesById[this.values[Te[we]] = ie[Te[we]]] = Te[we])
    }
    return ye.fromJSON = function(ie, ae) {
        var i = new ye(ie,ae.values,ae.options,ae.comment,ae.comments);
        return i.reserved = ae.reserved,
        i
    }
    ,
    ye.prototype.toJSON = function(ie) {
        var ae = ie ? !!ie.keepComments : !1;
        return y.toObject(["options", this.options, "valuesOptions", this.valuesOptions, "values", this.values, "reserved", this.reserved && this.reserved.length ? this.reserved : void 0, "comment", ae ? this.comment : void 0, "comments", ae ? this.comments : void 0])
    }
    ,
    ye.prototype.add = function(ie, ae, i, O) {
        if (!y.isString(ie))
            throw TypeError("name must be a string");
        if (!y.isInteger(ae))
            throw TypeError("id must be an integer");
        if (this.values[ie] !== void 0)
            throw Error("duplicate name '" + ie + "' in " + this);
        if (this.isReservedId(ae))
            throw Error("id " + ae + " is reserved in " + this);
        if (this.isReservedName(ie))
            throw Error("name '" + ie + "' is reserved in " + this);
        if (this.valuesById[ae] !== void 0) {
            if (!(this.options && this.options.allow_alias))
                throw Error("duplicate id " + ae + " in " + this);
            this.values[ie] = ae
        } else
            this.valuesById[this.values[ie] = ae] = ie;
        return O && (this.valuesOptions === void 0 && (this.valuesOptions = {}),
        this.valuesOptions[ie] = O || null),
        this.comments[ie] = i || null,
        this
    }
    ,
    ye.prototype.remove = function(ie) {
        if (!y.isString(ie))
            throw TypeError("name must be a string");
        var ae = this.values[ie];
        if (ae == null)
            throw Error("name '" + ie + "' does not exist in " + this);
        return delete this.valuesById[ae],
        delete this.values[ie],
        delete this.comments[ie],
        this.valuesOptions && delete this.valuesOptions[ie],
        this
    }
    ,
    ye.prototype.isReservedId = function(ie) {
        return d.isReservedId(this.reserved, ie)
    }
    ,
    ye.prototype.isReservedName = function(ie) {
        return d.isReservedName(this.reserved, ie)
    }
    ,
    _enum
}
var encoder_1, hasRequiredEncoder;
function requireEncoder() {
    if (hasRequiredEncoder)
        return encoder_1;
    hasRequiredEncoder = 1,
    encoder_1 = ve;
    var n = require_enum()
      , d = requireTypes()
      , y = requireUtil();
    function ye(ie, ae, i, O) {
        return ae.resolvedType.group ? ie("types[%i].encode(%s,w.uint32(%i)).uint32(%i)", i, O, (ae.id << 3 | 3) >>> 0, (ae.id << 3 | 4) >>> 0) : ie("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()", i, O, (ae.id << 3 | 2) >>> 0)
    }
    function ve(ie) {
        for (var ae = y.codegen(["m", "w"], ie.name + "$encode")("if(!w)")("w=Writer.create()"), i, O, $ = ie.fieldsArray.slice().sort(y.compareFieldsById), i = 0; i < $.length; ++i) {
            var Te = $[i].resolve()
              , we = ie._fieldsArray.indexOf(Te)
              , Re = Te.resolvedType instanceof n ? "int32" : Te.type
              , Ye = d.basic[Re];
            O = "m" + y.safeProp(Te.name),
            Te.map ? (ae("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){", O, Te.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){", O)("w.uint32(%i).fork().uint32(%i).%s(ks[i])", (Te.id << 3 | 2) >>> 0, 8 | d.mapKey[Te.keyType], Te.keyType),
            Ye === void 0 ? ae("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()", we, O) : ae(".uint32(%i).%s(%s[ks[i]]).ldelim()", 16 | Ye, Re, O),
            ae("}")("}")) : Te.repeated ? (ae("if(%s!=null&&%s.length){", O, O),
            Te.packed && d.packed[Re] !== void 0 ? ae("w.uint32(%i).fork()", (Te.id << 3 | 2) >>> 0)("for(var i=0;i<%s.length;++i)", O)("w.%s(%s[i])", Re, O)("w.ldelim()") : (ae("for(var i=0;i<%s.length;++i)", O),
            Ye === void 0 ? ye(ae, Te, we, O + "[i]") : ae("w.uint32(%i).%s(%s[i])", (Te.id << 3 | Ye) >>> 0, Re, O)),
            ae("}")) : (Te.optional && ae("if(%s!=null&&Object.hasOwnProperty.call(m,%j))", O, Te.name),
            Ye === void 0 ? ye(ae, Te, we, O) : ae("w.uint32(%i).%s(%s)", (Te.id << 3 | Ye) >>> 0, Re, O))
        }
        return ae("return w")
    }
    return encoder_1
}
var protobuf$1 = indexLight.exports = indexMinimal;
protobuf$1.build = "light";
function load(n, d, y) {
    return typeof d == "function" ? (y = d,
    d = new protobuf$1.Root) : d || (d = new protobuf$1.Root),
    d.load(n, y)
}
protobuf$1.load = load;
function loadSync(n, d) {
    return d || (d = new protobuf$1.Root),
    d.loadSync(n)
}
protobuf$1.loadSync = loadSync;
protobuf$1.encoder = requireEncoder();
protobuf$1.decoder = requireDecoder();
protobuf$1.verifier = requireVerifier();
protobuf$1.converter = requireConverter();
protobuf$1.ReflectionObject = requireObject();
protobuf$1.Namespace = requireNamespace();
protobuf$1.Root = requireRoot();
protobuf$1.Enum = require_enum();
protobuf$1.Type = requireType();
protobuf$1.Field = requireField();
protobuf$1.OneOf = requireOneof();
protobuf$1.MapField = requireMapfield();
protobuf$1.Service = requireService();
protobuf$1.Method = requireMethod();
protobuf$1.Message = message;
protobuf$1.wrappers = wrappers;
protobuf$1.types = requireTypes();
protobuf$1.util = requireUtil();
protobuf$1.ReflectionObject._configure(protobuf$1.Root);
protobuf$1.Namespace._configure(protobuf$1.Type, protobuf$1.Service, protobuf$1.Enum);
protobuf$1.Root._configure(protobuf$1.Type);
protobuf$1.Field._configure(protobuf$1.Type);
var indexLightExports = indexLight.exports
  , tokenize_1 = tokenize$1
  , delimRe = /[\s{}=;:[\],'"()<>]/g
  , stringDoubleRe = /(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g
  , stringSingleRe = /(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g
  , setCommentRe = /^ *[*/]+ */
  , setCommentAltRe = /^\s*\*?\/*/
  , setCommentSplitRe = /\n/g
  , whitespaceRe = /\s/
  , unescapeRe = /\\(.?)/g
  , unescapeMap = {
    0: "\0",
    r: "\r",
    n: `
`,
    t: "	"
};
function unescape$1(n) {
    return n.replace(unescapeRe, function(d, y) {
        switch (y) {
        case "\\":
        case "":
            return y;
        default:
            return unescapeMap[y] || ""
        }
    })
}
tokenize$1.unescape = unescape$1;
function tokenize$1(n, d) {
    n = n.toString();
    var y = 0
      , ye = n.length
      , ve = 1
      , ie = 0
      , ae = {}
      , i = []
      , O = null;
    function $(aa) {
        return Error("illegal " + aa + " (line " + ve + ")")
    }
    function Te() {
        var aa = O === "'" ? stringSingleRe : stringDoubleRe;
        aa.lastIndex = y - 1;
        var Ta = aa.exec(n);
        if (!Ta)
            throw $("string");
        return y = aa.lastIndex,
        bt(O),
        O = null,
        unescape$1(Ta[1])
    }
    function we(aa) {
        return n.charAt(aa)
    }
    function Re(aa, Ta, fa) {
        var He = {
            type: n.charAt(aa++),
            lineEmpty: !1,
            leading: fa
        }, Zt;
        d ? Zt = 2 : Zt = 3;
        var si = aa - Zt, ga;
        do
            if (--si < 0 || (ga = n.charAt(si)) === `
`) {
                He.lineEmpty = !0;
                break
            }
        while (ga === " " || ga === "	");
        for (var ba = n.substring(aa, Ta).split(setCommentSplitRe), Ca = 0; Ca < ba.length; ++Ca)
            ba[Ca] = ba[Ca].replace(d ? setCommentAltRe : setCommentRe, "").trim();
        He.text = ba.join(`
`).trim(),
        ae[ve] = He,
        ie = ve
    }
    function Ye(aa) {
        var Ta = _t(aa)
          , fa = n.substring(aa, Ta)
          , He = /^\s*\/{1,2}/.test(fa);
        return He
    }
    function _t(aa) {
        for (var Ta = aa; Ta < ye && we(Ta) !== `
`; )
            Ta++;
        return Ta
    }
    function Jt() {
        if (i.length > 0)
            return i.shift();
        if (O)
            return Te();
        var aa, Ta, fa, He, Zt, si = y === 0;
        do {
            if (y === ye)
                return null;
            for (aa = !1; whitespaceRe.test(fa = we(y)); )
                if (fa === `
` && (si = !0,
                ++ve),
                ++y === ye)
                    return null;
            if (we(y) === "/") {
                if (++y === ye)
                    throw $("comment");
                if (we(y) === "/")
                    if (d) {
                        if (He = y,
                        Zt = !1,
                        Ye(y)) {
                            Zt = !0;
                            do
                                if (y = _t(y),
                                y === ye || (y++,
                                !si))
                                    break;
                            while (Ye(y))
                        } else
                            y = Math.min(ye, _t(y) + 1);
                        Zt && (Re(He, y, si),
                        si = !0),
                        ve++,
                        aa = !0
                    } else {
                        for (Zt = we(He = y + 1) === "/"; we(++y) !== `
`; )
                            if (y === ye)
                                return null;
                        ++y,
                        Zt && (Re(He, y - 1, si),
                        si = !0),
                        ++ve,
                        aa = !0
                    }
                else if ((fa = we(y)) === "*") {
                    He = y + 1,
                    Zt = d || we(He) === "*";
                    do {
                        if (fa === `
` && ++ve,
                        ++y === ye)
                            throw $("comment");
                        Ta = fa,
                        fa = we(y)
                    } while (Ta !== "*" || fa !== "/");
                    ++y,
                    Zt && (Re(He, y - 2, si),
                    si = !0),
                    aa = !0
                } else
                    return "/"
            }
        } while (aa);
        var ga = y;
        delimRe.lastIndex = 0;
        var ba = delimRe.test(we(ga++));
        if (!ba)
            for (; ga < ye && !delimRe.test(we(ga)); )
                ++ga;
        var Ca = n.substring(y, y = ga);
        return (Ca === '"' || Ca === "'") && (O = Ca),
        Ca
    }
    function bt(aa) {
        i.push(aa)
    }
    function ai() {
        if (!i.length) {
            var aa = Jt();
            if (aa === null)
                return null;
            bt(aa)
        }
        return i[0]
    }
    function ii(aa, Ta) {
        var fa = ai()
          , He = fa === aa;
        if (He)
            return Jt(),
            !0;
        if (!Ta)
            throw $("token '" + fa + "', '" + aa + "' expected");
        return !1
    }
    function da(aa) {
        var Ta = null, fa;
        return aa === void 0 ? (fa = ae[ve - 1],
        delete ae[ve - 1],
        fa && (d || fa.type === "*" || fa.lineEmpty) && (Ta = fa.leading ? fa.text : null)) : (ie < aa && ai(),
        fa = ae[aa],
        delete ae[aa],
        fa && !fa.lineEmpty && (d || fa.type === "/") && (Ta = fa.leading ? null : fa.text)),
        Ta
    }
    return Object.defineProperty({
        next: Jt,
        peek: ai,
        push: bt,
        skip: ii,
        cmnt: da
    }, "line", {
        get: function() {
            return ve
        }
    })
}
var parse_1 = parse;
parse.filename = null;
parse.defaults = {
    keepCase: !1
};
var tokenize = tokenize_1
  , Root = requireRoot()
  , Type = requireType()
  , Field = requireField()
  , MapField = requireMapfield()
  , OneOf = requireOneof()
  , Enum = require_enum()
  , Service = requireService()
  , Method = requireMethod()
  , types = requireTypes()
  , util = requireUtil()
  , base10Re = /^[1-9][0-9]*$/
  , base10NegRe = /^-?[1-9][0-9]*$/
  , base16Re = /^0[x][0-9a-fA-F]+$/
  , base16NegRe = /^-?0[x][0-9a-fA-F]+$/
  , base8Re = /^0[0-7]+$/
  , base8NegRe = /^-?0[0-7]+$/
  , numberRe = /^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/
  , nameRe = /^[a-zA-Z_][a-zA-Z_0-9]*$/
  , typeRefRe = /^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/
  , fqTypeRefRe = /^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;
function parse(n, d, y) {
    d instanceof Root || (y = d,
    d = new Root),
    y || (y = parse.defaults);
    var ye = y.preferTrailingComment || !1, ve = tokenize(n, y.alternateCommentMode || !1), ie = ve.next, ae = ve.push, i = ve.peek, O = ve.skip, $ = ve.cmnt, Te = !0, we, Re, Ye, _t, Jt = !1, bt = d, ai = y.keepCase ? function(Ps) {
        return Ps
    }
    : util.camelCase;
    function ii(Ps, $s, nl) {
        var Ll = parse.filename;
        return nl || (parse.filename = null),
        Error("illegal " + ($s || "token") + " '" + Ps + "' (" + (Ll ? Ll + ", " : "") + "line " + ve.line + ")")
    }
    function da() {
        var Ps = [], $s;
        do {
            if (($s = ie()) !== '"' && $s !== "'")
                throw ii($s);
            Ps.push(ie()),
            O($s),
            $s = i()
        } while ($s === '"' || $s === "'");
        return Ps.join("")
    }
    function aa(Ps) {
        var $s = ie();
        switch ($s) {
        case "'":
        case '"':
            return ae($s),
            da();
        case "true":
        case "TRUE":
            return !0;
        case "false":
        case "FALSE":
            return !1
        }
        try {
            return fa($s, !0)
        } catch (nl) {
            if (Ps && typeRefRe.test($s))
                return $s;
            throw ii($s, "value")
        }
    }
    function Ta(Ps, $s) {
        var nl, Ll;
        do
            $s && ((nl = i()) === '"' || nl === "'") ? Ps.push(da()) : Ps.push([Ll = He(ie()), O("to", !0) ? He(ie()) : Ll]);
        while (O(",", !0));
        O(";")
    }
    function fa(Ps, $s) {
        var nl = 1;
        switch (Ps.charAt(0) === "-" && (nl = -1,
        Ps = Ps.substring(1)),
        Ps) {
        case "inf":
        case "INF":
        case "Inf":
            return nl * (1 / 0);
        case "nan":
        case "NAN":
        case "Nan":
        case "NaN":
            return NaN;
        case "0":
            return 0
        }
        if (base10Re.test(Ps))
            return nl * parseInt(Ps, 10);
        if (base16Re.test(Ps))
            return nl * parseInt(Ps, 16);
        if (base8Re.test(Ps))
            return nl * parseInt(Ps, 8);
        if (numberRe.test(Ps))
            return nl * parseFloat(Ps);
        throw ii(Ps, "number", $s)
    }
    function He(Ps, $s) {
        switch (Ps) {
        case "max":
        case "MAX":
        case "Max":
            return 536870911;
        case "0":
            return 0
        }
        if (!$s && Ps.charAt(0) === "-")
            throw ii(Ps, "id");
        if (base10NegRe.test(Ps))
            return parseInt(Ps, 10);
        if (base16NegRe.test(Ps))
            return parseInt(Ps, 16);
        if (base8NegRe.test(Ps))
            return parseInt(Ps, 8);
        throw ii(Ps, "id")
    }
    function Zt() {
        if (we !== void 0)
            throw ii("package");
        if (we = ie(),
        !typeRefRe.test(we))
            throw ii(we, "name");
        bt = bt.define(we),
        O(";")
    }
    function si() {
        var Ps = i(), $s;
        switch (Ps) {
        case "weak":
            $s = Ye || (Ye = []),
            ie();
            break;
        case "public":
            ie();
        default:
            $s = Re || (Re = []);
            break
        }
        Ps = da(),
        O(";"),
        $s.push(Ps)
    }
    function ga() {
        if (O("="),
        _t = da(),
        Jt = _t === "proto3",
        !Jt && _t !== "proto2")
            throw ii(_t, "syntax");
        O(";")
    }
    function ba(Ps, $s) {
        switch ($s) {
        case "option":
            return pl(Ps, $s),
            O(";"),
            !0;
        case "message":
            return za(Ps, $s),
            !0;
        case "enum":
            return Ka(Ps, $s),
            !0;
        case "service":
            return kl(Ps, $s),
            !0;
        case "extend":
            return uu(Ps, $s),
            !0
        }
        return !1
    }
    function Ca(Ps, $s, nl) {
        var Ll = ve.line;
        if (Ps && (typeof Ps.comment != "string" && (Ps.comment = $()),
        Ps.filename = parse.filename),
        O("{", !0)) {
            for (var Nl; (Nl = ie()) !== "}"; )
                $s(Nl);
            O(";", !0)
        } else
            nl && nl(),
            O(";"),
            Ps && (typeof Ps.comment != "string" || ye) && (Ps.comment = $(Ll) || Ps.comment)
    }
    function za(Ps, $s) {
        if (!nameRe.test($s = ie()))
            throw ii($s, "type name");
        var nl = new Type($s);
        Ca(nl, function(Nl) {
            if (!ba(nl, Nl))
                switch (Nl) {
                case "map":
                    Ua(nl);
                    break;
                case "required":
                case "repeated":
                    Ms(nl, Nl);
                    break;
                case "optional":
                    Jt ? Ms(nl, "proto3_optional") : Ms(nl, "optional");
                    break;
                case "oneof":
                    Wa(nl, Nl);
                    break;
                case "extensions":
                    Ta(nl.extensions || (nl.extensions = []));
                    break;
                case "reserved":
                    Ta(nl.reserved || (nl.reserved = []), !0);
                    break;
                default:
                    if (!Jt || !typeRefRe.test(Nl))
                        throw ii(Nl);
                    ae(Nl),
                    Ms(nl, "optional");
                    break
                }
        }),
        Ps.add(nl)
    }
    function Ms(Ps, $s, nl) {
        var Ll = ie();
        if (Ll === "group") {
            Pa(Ps, $s);
            return
        }
        for (; Ll.endsWith(".") || i().startsWith("."); )
            Ll += ie();
        if (!typeRefRe.test(Ll))
            throw ii(Ll, "type");
        var Nl = ie();
        if (!nameRe.test(Nl))
            throw ii(Nl, "name");
        Nl = ai(Nl),
        O("=");
        var Gl = new Field(Nl,He(ie()),Ll,$s,nl);
        if (Ca(Gl, function(Ru) {
            if (Ru === "option")
                pl(Gl, Ru),
                O(";");
            else
                throw ii(Ru)
        }, function() {
            vl(Gl)
        }),
        $s === "proto3_optional") {
            var vu = new OneOf("_" + Nl);
            Gl.setOption("proto3_optional", !0),
            vu.add(Gl),
            Ps.add(vu)
        } else
            Ps.add(Gl);
        !Jt && Gl.repeated && (types.packed[Ll] !== void 0 || types.basic[Ll] === void 0) && Gl.setOption("packed", !1, !0)
    }
    function Pa(Ps, $s) {
        var nl = ie();
        if (!nameRe.test(nl))
            throw ii(nl, "name");
        var Ll = util.lcFirst(nl);
        nl === Ll && (nl = util.ucFirst(nl)),
        O("=");
        var Nl = He(ie())
          , Gl = new Type(nl);
        Gl.group = !0;
        var vu = new Field(Ll,Nl,nl,$s);
        vu.filename = parse.filename,
        Ca(Gl, function(Ru) {
            switch (Ru) {
            case "option":
                pl(Gl, Ru),
                O(";");
                break;
            case "required":
            case "repeated":
                Ms(Gl, Ru);
                break;
            case "optional":
                Jt ? Ms(Gl, "proto3_optional") : Ms(Gl, "optional");
                break;
            case "message":
                za(Gl, Ru);
                break;
            case "enum":
                Ka(Gl, Ru);
                break;
            default:
                throw ii(Ru)
            }
        }),
        Ps.add(Gl).add(vu)
    }
    function Ua(Ps) {
        O("<");
        var $s = ie();
        if (types.mapKey[$s] === void 0)
            throw ii($s, "type");
        O(",");
        var nl = ie();
        if (!typeRefRe.test(nl))
            throw ii(nl, "type");
        O(">");
        var Ll = ie();
        if (!nameRe.test(Ll))
            throw ii(Ll, "name");
        O("=");
        var Nl = new MapField(ai(Ll),He(ie()),$s,nl);
        Ca(Nl, function(vu) {
            if (vu === "option")
                pl(Nl, vu),
                O(";");
            else
                throw ii(vu)
        }, function() {
            vl(Nl)
        }),
        Ps.add(Nl)
    }
    function Wa(Ps, $s) {
        if (!nameRe.test($s = ie()))
            throw ii($s, "name");
        var nl = new OneOf(ai($s));
        Ca(nl, function(Nl) {
            Nl === "option" ? (pl(nl, Nl),
            O(";")) : (ae(Nl),
            Ms(nl, "optional"))
        }),
        Ps.add(nl)
    }
    function Ka(Ps, $s) {
        if (!nameRe.test($s = ie()))
            throw ii($s, "name");
        var nl = new Enum($s);
        Ca(nl, function(Nl) {
            switch (Nl) {
            case "option":
                pl(nl, Nl),
                O(";");
                break;
            case "reserved":
                Ta(nl.reserved || (nl.reserved = []), !0);
                break;
            default:
                Ns(nl, Nl)
            }
        }),
        Ps.add(nl)
    }
    function Ns(Ps, $s) {
        if (!nameRe.test($s))
            throw ii($s, "name");
        O("=");
        var nl = He(ie(), !0)
          , Ll = {
            options: void 0
        };
        Ll.setOption = function(Nl, Gl) {
            this.options === void 0 && (this.options = {}),
            this.options[Nl] = Gl
        }
        ,
        Ca(Ll, function(Gl) {
            if (Gl === "option")
                pl(Ll, Gl),
                O(";");
            else
                throw ii(Gl)
        }, function() {
            vl(Ll)
        }),
        Ps.add($s, nl, Ll.comment, Ll.options)
    }
    function pl(Ps, $s) {
        var nl = O("(", !0);
        if (!typeRefRe.test($s = ie()))
            throw ii($s, "name");
        var Ll = $s, Nl = Ll, Gl;
        nl && (O(")"),
        Ll = "(" + Ll + ")",
        Nl = Ll,
        $s = i(),
        fqTypeRefRe.test($s) && (Gl = $s.slice(1),
        Ll += $s,
        ie())),
        O("=");
        var vu = el(Ps, Ll);
        fu(Ps, Nl, vu, Gl)
    }
    function el(Ps, $s) {
        if (O("{", !0)) {
            for (var nl = {}; !O("}", !0); ) {
                if (!nameRe.test(tu = ie()))
                    throw ii(tu, "name");
                var Ll, Nl = tu;
                if (O(":", !0),
                i() === "{")
                    Ll = el(Ps, $s + "." + tu);
                else if (i() === "[") {
                    Ll = [];
                    var Gl;
                    if (O("[", !0)) {
                        do
                            Gl = aa(!0),
                            Ll.push(Gl);
                        while (O(",", !0));
                        O("]"),
                        typeof Gl < "u" && wl(Ps, $s + "." + tu, Gl)
                    }
                } else
                    Ll = aa(!0),
                    wl(Ps, $s + "." + tu, Ll);
                var vu = nl[Nl];
                vu && (Ll = [].concat(vu).concat(Ll)),
                nl[Nl] = Ll,
                O(",", !0),
                O(";", !0)
            }
            return nl
        }
        var Cu = aa(!0);
        return wl(Ps, $s, Cu),
        Cu
    }
    function wl(Ps, $s, nl) {
        Ps.setOption && Ps.setOption($s, nl)
    }
    function fu(Ps, $s, nl, Ll) {
        Ps.setParsedOption && Ps.setParsedOption($s, nl, Ll)
    }
    function vl(Ps) {
        if (O("[", !0)) {
            do
                pl(Ps, "option");
            while (O(",", !0));
            O("]")
        }
        return Ps
    }
    function kl(Ps, $s) {
        if (!nameRe.test($s = ie()))
            throw ii($s, "service name");
        var nl = new Service($s);
        Ca(nl, function(Nl) {
            if (!ba(nl, Nl))
                if (Nl === "rpc")
                    Xl(nl, Nl);
                else
                    throw ii(Nl)
        }),
        Ps.add(nl)
    }
    function Xl(Ps, $s) {
        var nl = $()
          , Ll = $s;
        if (!nameRe.test($s = ie()))
            throw ii($s, "name");
        var Nl = $s, Gl, vu, Cu, Ru;
        if (O("("),
        O("stream", !0) && (vu = !0),
        !typeRefRe.test($s = ie()) || (Gl = $s,
        O(")"),
        O("returns"),
        O("("),
        O("stream", !0) && (Ru = !0),
        !typeRefRe.test($s = ie())))
            throw ii($s);
        Cu = $s,
        O(")");
        var Yu = new Method(Nl,Ll,Gl,Cu,vu,Ru);
        Yu.comment = nl,
        Ca(Yu, function(qu) {
            if (qu === "option")
                pl(Yu, qu),
                O(";");
            else
                throw ii(qu)
        }),
        Ps.add(Yu)
    }
    function uu(Ps, $s) {
        if (!typeRefRe.test($s = ie()))
            throw ii($s, "reference");
        var nl = $s;
        Ca(null, function(Nl) {
            switch (Nl) {
            case "required":
            case "repeated":
                Ms(Ps, Nl, nl);
                break;
            case "optional":
                Jt ? Ms(Ps, "proto3_optional", nl) : Ms(Ps, "optional", nl);
                break;
            default:
                if (!Jt || !typeRefRe.test(Nl))
                    throw ii(Nl);
                ae(Nl),
                Ms(Ps, "optional", nl);
                break
            }
        })
    }
    for (var tu; (tu = ie()) !== null; )
        switch (tu) {
        case "package":
            if (!Te)
                throw ii(tu);
            Zt();
            break;
        case "import":
            if (!Te)
                throw ii(tu);
            si();
            break;
        case "syntax":
            if (!Te)
                throw ii(tu);
            ga();
            break;
        case "option":
            pl(bt, tu),
            O(";");
            break;
        default:
            if (ba(bt, tu)) {
                Te = !1;
                continue
            }
            throw ii(tu)
        }
    return parse.filename = null,
    {
        package: we,
        imports: Re,
        weakImports: Ye,
        syntax: _t,
        root: d
    }
}
var common_1 = common
  , commonRe = /\/|\./;
function common(n, d) {
    commonRe.test(n) || (n = "google/protobuf/" + n + ".proto",
    d = {
        nested: {
            google: {
                nested: {
                    protobuf: {
                        nested: d
                    }
                }
            }
        }
    }),
    common[n] = d
}
common("any", {
    Any: {
        fields: {
            type_url: {
                type: "string",
                id: 1
            },
            value: {
                type: "bytes",
                id: 2
            }
        }
    }
});
var timeType;
common("duration", {
    Duration: timeType = {
        fields: {
            seconds: {
                type: "int64",
                id: 1
            },
            nanos: {
                type: "int32",
                id: 2
            }
        }
    }
});
common("timestamp", {
    Timestamp: timeType
});
common("empty", {
    Empty: {
        fields: {}
    }
});
common("struct", {
    Struct: {
        fields: {
            fields: {
                keyType: "string",
                type: "Value",
                id: 1
            }
        }
    },
    Value: {
        oneofs: {
            kind: {
                oneof: ["nullValue", "numberValue", "stringValue", "boolValue", "structValue", "listValue"]
            }
        },
        fields: {
            nullValue: {
                type: "NullValue",
                id: 1
            },
            numberValue: {
                type: "double",
                id: 2
            },
            stringValue: {
                type: "string",
                id: 3
            },
            boolValue: {
                type: "bool",
                id: 4
            },
            structValue: {
                type: "Struct",
                id: 5
            },
            listValue: {
                type: "ListValue",
                id: 6
            }
        }
    },
    NullValue: {
        values: {
            NULL_VALUE: 0
        }
    },
    ListValue: {
        fields: {
            values: {
                rule: "repeated",
                type: "Value",
                id: 1
            }
        }
    }
});
common("wrappers", {
    DoubleValue: {
        fields: {
            value: {
                type: "double",
                id: 1
            }
        }
    },
    FloatValue: {
        fields: {
            value: {
                type: "float",
                id: 1
            }
        }
    },
    Int64Value: {
        fields: {
            value: {
                type: "int64",
                id: 1
            }
        }
    },
    UInt64Value: {
        fields: {
            value: {
                type: "uint64",
                id: 1
            }
        }
    },
    Int32Value: {
        fields: {
            value: {
                type: "int32",
                id: 1
            }
        }
    },
    UInt32Value: {
        fields: {
            value: {
                type: "uint32",
                id: 1
            }
        }
    },
    BoolValue: {
        fields: {
            value: {
                type: "bool",
                id: 1
            }
        }
    },
    StringValue: {
        fields: {
            value: {
                type: "string",
                id: 1
            }
        }
    },
    BytesValue: {
        fields: {
            value: {
                type: "bytes",
                id: 1
            }
        }
    }
});
common("field_mask", {
    FieldMask: {
        fields: {
            paths: {
                rule: "repeated",
                type: "string",
                id: 1
            }
        }
    }
});
common.get = function n(d) {
    return common[d] || null
}
;
var protobuf = src.exports = indexLightExports;
protobuf.build = "full";
protobuf.tokenize = tokenize_1;
protobuf.parse = parse_1;
protobuf.common = common_1;
protobuf.Root._configure(protobuf.Type, protobuf.parse, protobuf.common);
var srcExports = src.exports
  , protobufjs = srcExports;
const l$1 = n=>new Promise((d,y)=>{
    const ye = document.createElement("script");
    ye.async = !0,
    ye.src = n,
    ye.onload = d,
    ye.onerror = y,
    document.body.appendChild(ye)
}
)
  , t = "https://imasdk.googleapis.com/js/sdkloader/ima3.js";
let e = null;
const r = ()=>{
    e = null
}
  , c = ()=>{
    const n = window;
    return n.google && n.google.ima ? Promise.resolve(n.google.ima) : e || (e = l$1(t).then(()=>n.google.ima),
    e.then(r).catch(r),
    e)
}
;
var dashPlayer = {
    exports: {}
};
/*!
 * Bilibili Dash Player v1.15.7 (341-a8f92de1)
 * 
 * Copyright 2018 - 2023 bilibili, Inc.
 * Released in Mon Apr 17 2023 17:04:37 GMT+0800 (中国标准时间)
 */
(function(n, d) {
    (function(y, ye) {
        n.exports = ye()
    }
    )(window, function() {
        return function(y) {
            var ye = {};
            function ve(ie) {
                if (ye[ie])
                    return ye[ie].exports;
                var ae = ye[ie] = {
                    i: ie,
                    l: !1,
                    exports: {}
                };
                return y[ie].call(ae.exports, ae, ae.exports, ve),
                ae.l = !0,
                ae.exports
            }
            return ve.m = y,
            ve.c = ye,
            ve.d = function(ie, ae, i) {
                ve.o(ie, ae) || Object.defineProperty(ie, ae, {
                    enumerable: !0,
                    get: i
                })
            }
            ,
            ve.r = function(ie) {
                typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(ie, Symbol.toStringTag, {
                    value: "Module"
                }),
                Object.defineProperty(ie, "__esModule", {
                    value: !0
                })
            }
            ,
            ve.t = function(ie, ae) {
                if (1 & ae && (ie = ve(ie)),
                8 & ae || 4 & ae && typeof ie == "object" && ie && ie.__esModule)
                    return ie;
                var i = Object.create(null);
                if (ve.r(i),
                Object.defineProperty(i, "default", {
                    enumerable: !0,
                    value: ie
                }),
                2 & ae && typeof ie != "string")
                    for (var O in ie)
                        ve.d(i, O, function($) {
                            return ie[$]
                        }
                        .bind(null, O));
                return i
            }
            ,
            ve.n = function(ie) {
                var ae = ie && ie.__esModule ? function() {
                    return ie.default
                }
                : function() {
                    return ie
                }
                ;
                return ve.d(ae, "a", ae),
                ae
            }
            ,
            ve.o = function(ie, ae) {
                return Object.prototype.hasOwnProperty.call(ie, ae)
            }
            ,
            ve.p = "",
            ve(ve.s = 15)
        }([function(y, ye, ve) {
            var ie = function() {
                var ae = void 0
                  , i = []
                  , O = {}
                  , $ = {};
                function Te(_t, Jt) {
                    for (var bt in i) {
                        var ai = i[bt];
                        if (ai.context === _t && ai.name === Jt)
                            return ai.instance
                    }
                    return null
                }
                function we(_t, Jt) {
                    return Jt[_t]
                }
                function Re(_t, Jt, bt) {
                    _t in bt && (bt[_t] = Jt)
                }
                function Ye(_t, Jt, bt) {
                    var ai = void 0
                      , ii = _t.__dashjs_factory_name
                      , da = Jt[ii];
                    if (da) {
                        var aa = da.instance;
                        if (!da.override)
                            return aa.apply({
                                context: Jt,
                                factory: ae
                            }, bt);
                        for (var Ta in ai = _t.apply({
                            context: Jt
                        }, bt),
                        aa = aa.apply({
                            context: Jt,
                            factory: ae,
                            parent: ai
                        }, bt))
                            ai.hasOwnProperty(Ta) && (ai[Ta] = aa[Ta])
                    } else
                        ai = _t.apply({
                            context: Jt
                        }, bt);
                    return ai.getClassName = function() {
                        return ii
                    }
                    ,
                    ai
                }
                return ae = {
                    extend: function(_t, Jt, bt, ai) {
                        !ai[_t] && Jt && (ai[_t] = {
                            instance: Jt,
                            override: bt
                        })
                    },
                    getSingletonInstance: Te,
                    setSingletonInstance: function(_t, Jt, bt) {
                        for (var ai in i) {
                            var ii = i[ai];
                            if (ii.context === _t && ii.name === Jt)
                                return void (i[ai].instance = bt)
                        }
                        i.push({
                            name: Jt,
                            context: _t,
                            instance: bt
                        })
                    },
                    getSingletonFactory: function(_t) {
                        var Jt = we(_t.__dashjs_factory_name, O);
                        return Jt || (Jt = function(bt) {
                            var ai = void 0;
                            return bt === void 0 && (bt = {}),
                            {
                                getInstance: function() {
                                    return ai || (ai = Te(bt, _t.__dashjs_factory_name)),
                                    ai || (ai = Ye(_t, bt, arguments),
                                    i.push({
                                        name: _t.__dashjs_factory_name,
                                        context: bt,
                                        instance: ai
                                    })),
                                    ai
                                }
                            }
                        }
                        ,
                        O[_t.__dashjs_factory_name] = Jt),
                        Jt
                    },
                    getSingletonFactoryByName: function(_t) {
                        return we(_t, O)
                    },
                    updateSingletonFactory: function(_t, Jt) {
                        Re(_t, Jt, O)
                    },
                    getClassFactory: function(_t) {
                        var Jt = we(_t.__dashjs_factory_name, $);
                        return Jt || (Jt = function(bt) {
                            return bt === void 0 && (bt = {}),
                            {
                                create: function() {
                                    return Ye(_t, bt, arguments)
                                }
                            }
                        }
                        ,
                        $[_t.__dashjs_factory_name] = Jt),
                        Jt
                    },
                    getClassFactoryByName: function(_t) {
                        return we(_t, $)
                    },
                    updateClassFactory: function(_t, Jt) {
                        Re(_t, Jt, $)
                    }
                }
            }();
            ye.a = ie
        }
        , function(y, ye, ve) {
            /*! codem-isoboxer v0.3.7 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
            var ie = {
                parseBuffer: function(O) {
                    return new ae(O).parse()
                },
                addBoxProcessor: function(O, $) {
                    typeof O == "string" && typeof $ == "function" && (i.prototype._boxProcessors[O] = $)
                },
                createFile: function() {
                    return new ae
                },
                createBox: function(O, $, Te) {
                    var we = i.create(O);
                    return $ && $.append(we, Te),
                    we
                },
                createFullBox: function(O, $, Te) {
                    var we = ie.createBox(O, $, Te);
                    return we.version = 0,
                    we.flags = 0,
                    we
                },
                Utils: {}
            };
            ie.Utils.dataViewToString = function(O, $) {
                var Te = $ || "utf-8";
                if (typeof TextDecoder < "u")
                    return new TextDecoder(Te).decode(O);
                var we = []
                  , Re = 0;
                if (Te === "utf-8")
                    for (; Re < O.byteLength; ) {
                        var Ye = O.getUint8(Re++);
                        Ye < 128 || (Ye < 224 ? (Ye = (31 & Ye) << 6,
                        Ye |= 63 & O.getUint8(Re++)) : Ye < 240 ? (Ye = (15 & Ye) << 12,
                        Ye |= (63 & O.getUint8(Re++)) << 6,
                        Ye |= 63 & O.getUint8(Re++)) : (Ye = (7 & Ye) << 18,
                        Ye |= (63 & O.getUint8(Re++)) << 12,
                        Ye |= (63 & O.getUint8(Re++)) << 6,
                        Ye |= 63 & O.getUint8(Re++))),
                        we.push(String.fromCharCode(Ye))
                    }
                else
                    for (; Re < O.byteLength; )
                        we.push(String.fromCharCode(O.getUint8(Re++)));
                return we.join("")
            }
            ,
            ie.Utils.utf8ToByteArray = function(O) {
                var $, Te;
                if (typeof TextEncoder < "u")
                    $ = new TextEncoder().encode(O);
                else
                    for ($ = [],
                    Te = 0; Te < O.length; ++Te) {
                        var we = O.charCodeAt(Te);
                        we < 128 ? $.push(we) : we < 2048 ? ($.push(192 | we >> 6),
                        $.push(128 | 63 & we)) : we < 65536 ? ($.push(224 | we >> 12),
                        $.push(128 | 63 & we >> 6),
                        $.push(128 | 63 & we)) : ($.push(240 | we >> 18),
                        $.push(128 | 63 & we >> 12),
                        $.push(128 | 63 & we >> 6),
                        $.push(128 | 63 & we))
                    }
                return $
            }
            ,
            ie.Utils.appendBox = function(O, $, Te) {
                if ($._offset = O._cursor.offset,
                $._root = O._root ? O._root : O,
                $._raw = O._raw,
                $._parent = O,
                Te !== -1)
                    if (Te != null) {
                        var we, Re = -1;
                        if (typeof Te == "number")
                            Re = Te;
                        else {
                            if (typeof Te == "string")
                                we = Te;
                            else {
                                if (typeof Te != "object" || !Te.type)
                                    return void O.boxes.push($);
                                we = Te.type
                            }
                            for (var Ye = 0; Ye < O.boxes.length; Ye++)
                                if (we === O.boxes[Ye].type) {
                                    Re = Ye + 1;
                                    break
                                }
                        }
                        O.boxes.splice(Re, 0, $)
                    } else
                        O.boxes.push($)
            }
            ,
            ye.parseBuffer = ie.parseBuffer,
            ye.addBoxProcessor = ie.addBoxProcessor,
            ye.createFile = ie.createFile,
            ye.createBox = ie.createBox,
            ye.createFullBox = ie.createFullBox,
            ye.Utils = ie.Utils,
            ie.Cursor = function(O) {
                this.offset = O === void 0 ? 0 : O
            }
            ;
            var ae = function(O) {
                this._cursor = new ie.Cursor,
                this.boxes = [],
                O && (this._raw = new DataView(O))
            };
            ae.prototype.fetch = function(O) {
                var $ = this.fetchAll(O, !0);
                return $.length ? $[0] : null
            }
            ,
            ae.prototype.fetchAll = function(O, $) {
                var Te = [];
                return ae._sweep.call(this, O, Te, $),
                Te
            }
            ,
            ae.prototype.parse = function() {
                for (this._cursor.offset = 0,
                this.boxes = []; this._cursor.offset < this._raw.byteLength; ) {
                    var O = i.parse(this);
                    if (O.type === void 0)
                        break;
                    this.boxes.push(O)
                }
                return this
            }
            ,
            ae._sweep = function(O, $, Te) {
                for (var we in this.type && this.type == O && $.push(this),
                this.boxes) {
                    if ($.length && Te)
                        return;
                    ae._sweep.call(this.boxes[we], O, $, Te)
                }
            }
            ,
            ae.prototype.write = function() {
                var O, $ = 0;
                for (O = 0; O < this.boxes.length; O++)
                    $ += this.boxes[O].getLength(!1);
                var Te = new Uint8Array($);
                for (this._rawo = new DataView(Te.buffer),
                this.bytes = Te,
                this._cursor.offset = 0,
                O = 0; O < this.boxes.length; O++)
                    this.boxes[O].write();
                return Te.buffer
            }
            ,
            ae.prototype.append = function(O, $) {
                ie.Utils.appendBox(this, O, $)
            }
            ;
            var i = function() {
                this._cursor = new ie.Cursor
            };
            i.parse = function(O) {
                var $ = new i;
                return $._offset = O._cursor.offset,
                $._root = O._root ? O._root : O,
                $._raw = O._raw,
                $._parent = O,
                $._parseBox(),
                O._cursor.offset = $._raw.byteOffset + $._raw.byteLength,
                $
            }
            ,
            i.create = function(O) {
                var $ = new i;
                return $.type = O,
                $.boxes = [],
                $
            }
            ,
            i.prototype._boxContainers = ["dinf", "edts", "mdia", "meco", "mfra", "minf", "moof", "moov", "mvex", "stbl", "strk", "traf", "trak", "tref", "udta", "vttc", "sinf", "schi", "encv", "enca"],
            i.prototype._boxProcessors = {},
            i.prototype._procField = function(O, $, Te) {
                this._parsing ? this[O] = this._readField($, Te) : this._writeField($, Te, this[O])
            }
            ,
            i.prototype._procFieldArray = function(O, $, Te, we) {
                var Re;
                if (this._parsing)
                    for (this[O] = [],
                    Re = 0; Re < $; Re++)
                        this[O][Re] = this._readField(Te, we);
                else
                    for (Re = 0; Re < this[O].length; Re++)
                        this._writeField(Te, we, this[O][Re])
            }
            ,
            i.prototype._procFullBox = function() {
                this._procField("version", "uint", 8),
                this._procField("flags", "uint", 24)
            }
            ,
            i.prototype._procEntries = function(O, $, Te) {
                var we;
                if (this._parsing)
                    for (this[O] = [],
                    we = 0; we < $; we++)
                        this[O].push({}),
                        Te.call(this, this[O][we]);
                else
                    for (we = 0; we < $; we++)
                        Te.call(this, this[O][we])
            }
            ,
            i.prototype._procSubEntries = function(O, $, Te, we) {
                var Re;
                if (this._parsing)
                    for (O[$] = [],
                    Re = 0; Re < Te; Re++)
                        O[$].push({}),
                        we.call(this, O[$][Re]);
                else
                    for (Re = 0; Re < Te; Re++)
                        we.call(this, O[$][Re])
            }
            ,
            i.prototype._procEntryField = function(O, $, Te, we) {
                this._parsing ? O[$] = this._readField(Te, we) : this._writeField(Te, we, O[$])
            }
            ,
            i.prototype._procSubBoxes = function(O, $) {
                var Te;
                if (this._parsing)
                    for (this[O] = [],
                    Te = 0; Te < $; Te++)
                        this[O].push(i.parse(this));
                else
                    for (Te = 0; Te < $; Te++)
                        this._rawo ? this[O][Te].write() : this.size += this[O][Te].getLength()
            }
            ,
            i.prototype._readField = function(O, $) {
                switch (O) {
                case "uint":
                    return this._readUint($);
                case "int":
                    return this._readInt($);
                case "template":
                    return this._readTemplate($);
                case "string":
                    return $ === -1 ? this._readTerminatedString() : this._readString($);
                case "data":
                    return this._readData($);
                case "utf8":
                    return this._readUTF8String();
                default:
                    return -1
                }
            }
            ,
            i.prototype._readInt = function(O) {
                var $ = null
                  , Te = this._cursor.offset - this._raw.byteOffset;
                switch (O) {
                case 8:
                    $ = this._raw.getInt8(Te);
                    break;
                case 16:
                    $ = this._raw.getInt16(Te);
                    break;
                case 32:
                    $ = this._raw.getInt32(Te);
                    break;
                case 64:
                    var we = this._raw.getInt32(Te)
                      , Re = this._raw.getInt32(Te + 4);
                    $ = we * Math.pow(2, 32) + Re
                }
                return this._cursor.offset += O >> 3,
                $
            }
            ,
            i.prototype._readUint = function(O) {
                var $, Te, we = null, Re = this._cursor.offset - this._raw.byteOffset;
                switch (O) {
                case 8:
                    we = this._raw.getUint8(Re);
                    break;
                case 16:
                    we = this._raw.getUint16(Re);
                    break;
                case 24:
                    we = (($ = this._raw.getUint16(Re)) << 8) + (Te = this._raw.getUint8(Re + 2));
                    break;
                case 32:
                    we = this._raw.getUint32(Re);
                    break;
                case 64:
                    $ = this._raw.getUint32(Re),
                    Te = this._raw.getUint32(Re + 4),
                    we = $ * Math.pow(2, 32) + Te
                }
                return this._cursor.offset += O >> 3,
                we
            }
            ,
            i.prototype._readString = function(O) {
                for (var $ = "", Te = 0; Te < O; Te++) {
                    var we = this._readUint(8);
                    $ += String.fromCharCode(we)
                }
                return $
            }
            ,
            i.prototype._readTemplate = function(O) {
                return this._readUint(O / 2) + this._readUint(O / 2) / Math.pow(2, O / 2)
            }
            ,
            i.prototype._readTerminatedString = function() {
                for (var O = ""; this._cursor.offset - this._offset < this._raw.byteLength; ) {
                    var $ = this._readUint(8);
                    if ($ === 0)
                        break;
                    O += String.fromCharCode($)
                }
                return O
            }
            ,
            i.prototype._readData = function(O) {
                var $ = O > 0 ? O : this._raw.byteLength - (this._cursor.offset - this._offset);
                if ($ > 0) {
                    var Te = new Uint8Array(this._raw.buffer,this._cursor.offset,$);
                    return this._cursor.offset += $,
                    Te
                }
                return null
            }
            ,
            i.prototype._readUTF8String = function() {
                var O = this._raw.byteLength - (this._cursor.offset - this._offset)
                  , $ = null;
                return O > 0 && ($ = new DataView(this._raw.buffer,this._cursor.offset,O),
                this._cursor.offset += O),
                $ && ie.Utils.dataViewToString($)
            }
            ,
            i.prototype._parseBox = function() {
                if (this._parsing = !0,
                this._cursor.offset = this._offset,
                this._offset + 8 > this._raw.buffer.byteLength)
                    this._root._incomplete = !0;
                else {
                    switch (this._procField("size", "uint", 32),
                    this._procField("type", "string", 4),
                    this.size === 1 && this._procField("largesize", "uint", 64),
                    this.type === "uuid" && this._procFieldArray("usertype", 16, "uint", 8),
                    this.size) {
                    case 0:
                        this._raw = new DataView(this._raw.buffer,this._offset,this._raw.byteLength - this._cursor.offset + 8);
                        break;
                    case 1:
                        this._offset + this.size > this._raw.buffer.byteLength ? (this._incomplete = !0,
                        this._root._incomplete = !0) : this._raw = new DataView(this._raw.buffer,this._offset,this.largesize);
                        break;
                    default:
                        this._offset + this.size > this._raw.buffer.byteLength ? (this._incomplete = !0,
                        this._root._incomplete = !0) : this._raw = new DataView(this._raw.buffer,this._offset,this.size)
                    }
                    this._incomplete || (this._boxProcessors[this.type] && this._boxProcessors[this.type].call(this),
                    this._boxContainers.indexOf(this.type) !== -1 ? this._parseContainerBox() : this._data = this._readData())
                }
            }
            ,
            i.prototype._parseFullBox = function() {
                this.version = this._readUint(8),
                this.flags = this._readUint(24)
            }
            ,
            i.prototype._parseContainerBox = function() {
                for (this.boxes = []; this._cursor.offset - this._raw.byteOffset < this._raw.byteLength; )
                    this.boxes.push(i.parse(this))
            }
            ,
            i.prototype.append = function(O, $) {
                ie.Utils.appendBox(this, O, $)
            }
            ,
            i.prototype.getLength = function() {
                if (this._parsing = !1,
                this._rawo = null,
                this.size = 0,
                this._procField("size", "uint", 32),
                this._procField("type", "string", 4),
                this.size === 1 && this._procField("largesize", "uint", 64),
                this.type === "uuid" && this._procFieldArray("usertype", 16, "uint", 8),
                this._boxProcessors[this.type] && this._boxProcessors[this.type].call(this),
                this._boxContainers.indexOf(this.type) !== -1)
                    for (var O = 0; O < this.boxes.length; O++)
                        this.size += this.boxes[O].getLength();
                return this._data && this._writeData(this._data),
                this.size
            }
            ,
            i.prototype.write = function() {
                switch (this._parsing = !1,
                this._cursor.offset = this._parent._cursor.offset,
                this.size) {
                case 0:
                    this._rawo = new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength - this._cursor.offset);
                    break;
                case 1:
                    this._rawo = new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);
                    break;
                default:
                    this._rawo = new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)
                }
                if (this._procField("size", "uint", 32),
                this._procField("type", "string", 4),
                this.size === 1 && this._procField("largesize", "uint", 64),
                this.type === "uuid" && this._procFieldArray("usertype", 16, "uint", 8),
                this._boxProcessors[this.type] && this._boxProcessors[this.type].call(this),
                this._boxContainers.indexOf(this.type) !== -1)
                    for (var O = 0; O < this.boxes.length; O++)
                        this.boxes[O].write();
                return this._data && this._writeData(this._data),
                this._parent._cursor.offset += this.size,
                this.size
            }
            ,
            i.prototype._writeInt = function(O, $) {
                if (this._rawo) {
                    var Te = this._cursor.offset - this._rawo.byteOffset;
                    switch (O) {
                    case 8:
                        this._rawo.setInt8(Te, $);
                        break;
                    case 16:
                        this._rawo.setInt16(Te, $);
                        break;
                    case 32:
                        this._rawo.setInt32(Te, $);
                        break;
                    case 64:
                        var we = Math.floor($ / Math.pow(2, 32))
                          , Re = $ - we * Math.pow(2, 32);
                        this._rawo.setUint32(Te, we),
                        this._rawo.setUint32(Te + 4, Re)
                    }
                    this._cursor.offset += O >> 3
                } else
                    this.size += O >> 3
            }
            ,
            i.prototype._writeUint = function(O, $) {
                if (this._rawo) {
                    var Te, we, Re = this._cursor.offset - this._rawo.byteOffset;
                    switch (O) {
                    case 8:
                        this._rawo.setUint8(Re, $);
                        break;
                    case 16:
                        this._rawo.setUint16(Re, $);
                        break;
                    case 24:
                        Te = (16776960 & $) >> 8,
                        we = 255 & $,
                        this._rawo.setUint16(Re, Te),
                        this._rawo.setUint8(Re + 2, we);
                        break;
                    case 32:
                        this._rawo.setUint32(Re, $);
                        break;
                    case 64:
                        we = $ - (Te = Math.floor($ / Math.pow(2, 32))) * Math.pow(2, 32),
                        this._rawo.setUint32(Re, Te),
                        this._rawo.setUint32(Re + 4, we)
                    }
                    this._cursor.offset += O >> 3
                } else
                    this.size += O >> 3
            }
            ,
            i.prototype._writeString = function(O, $) {
                for (var Te = 0; Te < O; Te++)
                    this._writeUint(8, $.charCodeAt(Te))
            }
            ,
            i.prototype._writeTerminatedString = function(O) {
                if (O.length !== 0) {
                    for (var $ = 0; $ < O.length; $++)
                        this._writeUint(8, O.charCodeAt($));
                    this._writeUint(8, 0)
                }
            }
            ,
            i.prototype._writeTemplate = function(O, $) {
                var Te = Math.floor($)
                  , we = ($ - Te) * Math.pow(2, O / 2);
                this._writeUint(O / 2, Te),
                this._writeUint(O / 2, we)
            }
            ,
            i.prototype._writeData = function(O) {
                if (O)
                    if (this._rawo) {
                        if (O instanceof Array) {
                            for (var $ = this._cursor.offset - this._rawo.byteOffset, Te = 0; Te < O.length; Te++)
                                this._rawo.setInt8($ + Te, O[Te]);
                            this._cursor.offset += O.length
                        }
                        O instanceof Uint8Array && (this._root.bytes.set(O, this._cursor.offset),
                        this._cursor.offset += O.length)
                    } else
                        this.size += O.length
            }
            ,
            i.prototype._writeUTF8String = function(O) {
                var $ = ie.Utils.utf8ToByteArray(O);
                if (this._rawo)
                    for (var Te = new DataView(this._rawo.buffer,this._cursor.offset,$.length), we = 0; we < $.length; we++)
                        Te.setUint8(we, $[we]);
                else
                    this.size += $.length
            }
            ,
            i.prototype._writeField = function(O, $, Te) {
                switch (O) {
                case "uint":
                    this._writeUint($, Te);
                    break;
                case "int":
                    this._writeInt($, Te);
                    break;
                case "template":
                    this._writeTemplate($, Te);
                    break;
                case "string":
                    $ == -1 ? this._writeTerminatedString(Te) : this._writeString($, Te);
                    break;
                case "data":
                    this._writeData(Te);
                    break;
                case "utf8":
                    this._writeUTF8String(Te)
                }
            }
            ,
            i.prototype._boxProcessors.avc1 = i.prototype._boxProcessors.avc2 = i.prototype._boxProcessors.avc3 = i.prototype._boxProcessors.avc4 = i.prototype._boxProcessors.hvc1 = i.prototype._boxProcessors.hev1 = i.prototype._boxProcessors.encv = function() {
                this._procFieldArray("reserved1", 6, "uint", 8),
                this._procField("data_reference_index", "uint", 16),
                this._procField("pre_defined1", "uint", 16),
                this._procField("reserved2", "uint", 16),
                this._procFieldArray("pre_defined2", 3, "uint", 32),
                this._procField("width", "uint", 16),
                this._procField("height", "uint", 16),
                this._procField("horizresolution", "template", 32),
                this._procField("vertresolution", "template", 32),
                this._procField("reserved3", "uint", 32),
                this._procField("frame_count", "uint", 16),
                this._procFieldArray("compressorname", 32, "uint", 8),
                this._procField("depth", "uint", 16),
                this._procField("pre_defined3", "int", 16),
                this._procField("config", "data", -1)
            }
            ,
            i.prototype._boxProcessors.dref = function() {
                this._procFullBox(),
                this._procField("entry_count", "uint", 32),
                this._procSubBoxes("entries", this.entry_count)
            }
            ,
            i.prototype._boxProcessors.elst = function() {
                this._procFullBox(),
                this._procField("entry_count", "uint", 32),
                this._procEntries("entries", this.entry_count, function(O) {
                    this._procEntryField(O, "segment_duration", "uint", this.version === 1 ? 64 : 32),
                    this._procEntryField(O, "media_time", "int", this.version === 1 ? 64 : 32),
                    this._procEntryField(O, "media_rate_integer", "int", 16),
                    this._procEntryField(O, "media_rate_fraction", "int", 16)
                })
            }
            ,
            i.prototype._boxProcessors.emsg = function() {
                this._procFullBox(),
                this.version == 1 ? (this._procField("timescale", "uint", 32),
                this._procField("presentation_time", "uint", 64),
                this._procField("event_duration", "uint", 32),
                this._procField("id", "uint", 32),
                this._procField("scheme_id_uri", "string", -1),
                this._procField("value", "string", -1)) : (this._procField("scheme_id_uri", "string", -1),
                this._procField("value", "string", -1),
                this._procField("timescale", "uint", 32),
                this._procField("presentation_time_delta", "uint", 32),
                this._procField("event_duration", "uint", 32),
                this._procField("id", "uint", 32)),
                this._procField("message_data", "data", -1)
            }
            ,
            i.prototype._boxProcessors.free = i.prototype._boxProcessors.skip = function() {
                this._procField("data", "data", -1)
            }
            ,
            i.prototype._boxProcessors.frma = function() {
                this._procField("data_format", "uint", 32)
            }
            ,
            i.prototype._boxProcessors.ftyp = i.prototype._boxProcessors.styp = function() {
                this._procField("major_brand", "string", 4),
                this._procField("minor_version", "uint", 32);
                var O = -1;
                this._parsing && (O = (this._raw.byteLength - (this._cursor.offset - this._raw.byteOffset)) / 4),
                this._procFieldArray("compatible_brands", O, "string", 4)
            }
            ,
            i.prototype._boxProcessors.hdlr = function() {
                this._procFullBox(),
                this._procField("pre_defined", "uint", 32),
                this._procField("handler_type", "string", 4),
                this._procFieldArray("reserved", 3, "uint", 32),
                this._procField("name", "string", -1)
            }
            ,
            i.prototype._boxProcessors.mdat = function() {
                this._procField("data", "data", -1)
            }
            ,
            i.prototype._boxProcessors.mdhd = function() {
                this._procFullBox(),
                this._procField("creation_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("modification_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("timescale", "uint", 32),
                this._procField("duration", "uint", this.version == 1 ? 64 : 32),
                this._parsing || typeof this.language != "string" || (this.language = this.language.charCodeAt(0) - 96 << 10 | this.language.charCodeAt(1) - 96 << 5 | this.language.charCodeAt(2) - 96),
                this._procField("language", "uint", 16),
                this._parsing && (this.language = String.fromCharCode(96 + (this.language >> 10 & 31), 96 + (this.language >> 5 & 31), 96 + (31 & this.language))),
                this._procField("pre_defined", "uint", 16)
            }
            ,
            i.prototype._boxProcessors.mehd = function() {
                this._procFullBox(),
                this._procField("fragment_duration", "uint", this.version == 1 ? 64 : 32)
            }
            ,
            i.prototype._boxProcessors.mfhd = function() {
                this._procFullBox(),
                this._procField("sequence_number", "uint", 32)
            }
            ,
            i.prototype._boxProcessors.mfro = function() {
                this._procFullBox(),
                this._procField("mfra_size", "uint", 32)
            }
            ,
            i.prototype._boxProcessors.mp4a = i.prototype._boxProcessors.enca = function() {
                this._procFieldArray("reserved1", 6, "uint", 8),
                this._procField("data_reference_index", "uint", 16),
                this._procFieldArray("reserved2", 2, "uint", 32),
                this._procField("channelcount", "uint", 16),
                this._procField("samplesize", "uint", 16),
                this._procField("pre_defined", "uint", 16),
                this._procField("reserved3", "uint", 16),
                this._procField("samplerate", "template", 32),
                this._procField("esds", "data", -1)
            }
            ,
            i.prototype._boxProcessors.mvhd = function() {
                this._procFullBox(),
                this._procField("creation_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("modification_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("timescale", "uint", 32),
                this._procField("duration", "uint", this.version == 1 ? 64 : 32),
                this._procField("rate", "template", 32),
                this._procField("volume", "template", 16),
                this._procField("reserved1", "uint", 16),
                this._procFieldArray("reserved2", 2, "uint", 32),
                this._procFieldArray("matrix", 9, "template", 32),
                this._procFieldArray("pre_defined", 6, "uint", 32),
                this._procField("next_track_ID", "uint", 32)
            }
            ,
            i.prototype._boxProcessors.payl = function() {
                this._procField("cue_text", "utf8")
            }
            ,
            i.prototype._boxProcessors.pssh = function() {
                this._procFullBox(),
                this._procFieldArray("SystemID", 16, "uint", 8),
                this._procField("DataSize", "uint", 32),
                this._procFieldArray("Data", this.DataSize, "uint", 8)
            }
            ,
            i.prototype._boxProcessors.schm = function() {
                this._procFullBox(),
                this._procField("scheme_type", "uint", 32),
                this._procField("scheme_version", "uint", 32),
                1 & this.flags && this._procField("scheme_uri", "string", -1)
            }
            ,
            i.prototype._boxProcessors.sdtp = function() {
                this._procFullBox();
                var O = -1;
                this._parsing && (O = this._raw.byteLength - (this._cursor.offset - this._raw.byteOffset)),
                this._procFieldArray("sample_dependency_table", O, "uint", 8)
            }
            ,
            i.prototype._boxProcessors.sidx = function() {
                this._procFullBox(),
                this._procField("reference_ID", "uint", 32),
                this._procField("timescale", "uint", 32),
                this._procField("earliest_presentation_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("first_offset", "uint", this.version == 1 ? 64 : 32),
                this._procField("reserved", "uint", 16),
                this._procField("reference_count", "uint", 16),
                this._procEntries("references", this.reference_count, function(O) {
                    this._parsing || (O.reference = (1 & O.reference_type) << 31,
                    O.reference |= 2147483647 & O.referenced_size,
                    O.sap = (1 & O.starts_with_SAP) << 31,
                    O.sap |= (3 & O.SAP_type) << 28,
                    O.sap |= 268435455 & O.SAP_delta_time),
                    this._procEntryField(O, "reference", "uint", 32),
                    this._procEntryField(O, "subsegment_duration", "uint", 32),
                    this._procEntryField(O, "sap", "uint", 32),
                    this._parsing && (O.reference_type = O.reference >> 31 & 1,
                    O.referenced_size = 2147483647 & O.reference,
                    O.starts_with_SAP = O.sap >> 31 & 1,
                    O.SAP_type = O.sap >> 28 & 7,
                    O.SAP_delta_time = 268435455 & O.sap)
                })
            }
            ,
            i.prototype._boxProcessors.smhd = function() {
                this._procFullBox(),
                this._procField("balance", "uint", 16),
                this._procField("reserved", "uint", 16)
            }
            ,
            i.prototype._boxProcessors.ssix = function() {
                this._procFullBox(),
                this._procField("subsegment_count", "uint", 32),
                this._procEntries("subsegments", this.subsegment_count, function(O) {
                    this._procEntryField(O, "ranges_count", "uint", 32),
                    this._procSubEntries(O, "ranges", O.ranges_count, function($) {
                        this._procEntryField($, "level", "uint", 8),
                        this._procEntryField($, "range_size", "uint", 24)
                    })
                })
            }
            ,
            i.prototype._boxProcessors.stsd = function() {
                this._procFullBox(),
                this._procField("entry_count", "uint", 32),
                this._procSubBoxes("entries", this.entry_count)
            }
            ,
            i.prototype._boxProcessors.subs = function() {
                this._procFullBox(),
                this._procField("entry_count", "uint", 32),
                this._procEntries("entries", this.entry_count, function(O) {
                    this._procEntryField(O, "sample_delta", "uint", 32),
                    this._procEntryField(O, "subsample_count", "uint", 16),
                    this._procSubEntries(O, "subsamples", O.subsample_count, function($) {
                        this._procEntryField($, "subsample_size", "uint", this.version === 1 ? 32 : 16),
                        this._procEntryField($, "subsample_priority", "uint", 8),
                        this._procEntryField($, "discardable", "uint", 8),
                        this._procEntryField($, "codec_specific_parameters", "uint", 32)
                    })
                })
            }
            ,
            i.prototype._boxProcessors.tenc = function() {
                this._procFullBox(),
                this._procField("default_IsEncrypted", "uint", 24),
                this._procField("default_IV_size", "uint", 8),
                this._procFieldArray("default_KID", 16, "uint", 8)
            }
            ,
            i.prototype._boxProcessors.tfdt = function() {
                this._procFullBox(),
                this._procField("baseMediaDecodeTime", "uint", this.version == 1 ? 64 : 32)
            }
            ,
            i.prototype._boxProcessors.tfhd = function() {
                this._procFullBox(),
                this._procField("track_ID", "uint", 32),
                1 & this.flags && this._procField("base_data_offset", "uint", 64),
                2 & this.flags && this._procField("sample_description_offset", "uint", 32),
                8 & this.flags && this._procField("default_sample_duration", "uint", 32),
                16 & this.flags && this._procField("default_sample_size", "uint", 32),
                32 & this.flags && this._procField("default_sample_flags", "uint", 32)
            }
            ,
            i.prototype._boxProcessors.tfra = function() {
                this._procFullBox(),
                this._procField("track_ID", "uint", 32),
                this._parsing || (this.reserved = 0,
                this.reserved |= (48 & this.length_size_of_traf_num) << 4,
                this.reserved |= (12 & this.length_size_of_trun_num) << 2,
                this.reserved |= 3 & this.length_size_of_sample_num),
                this._procField("reserved", "uint", 32),
                this._parsing && (this.length_size_of_traf_num = (48 & this.reserved) >> 4,
                this.length_size_of_trun_num = (12 & this.reserved) >> 2,
                this.length_size_of_sample_num = 3 & this.reserved),
                this._procField("number_of_entry", "uint", 32),
                this._procEntries("entries", this.number_of_entry, function(O) {
                    this._procEntryField(O, "time", "uint", this.version === 1 ? 64 : 32),
                    this._procEntryField(O, "moof_offset", "uint", this.version === 1 ? 64 : 32),
                    this._procEntryField(O, "traf_number", "uint", 8 * (this.length_size_of_traf_num + 1)),
                    this._procEntryField(O, "trun_number", "uint", 8 * (this.length_size_of_trun_num + 1)),
                    this._procEntryField(O, "sample_number", "uint", 8 * (this.length_size_of_sample_num + 1))
                })
            }
            ,
            i.prototype._boxProcessors.tkhd = function() {
                this._procFullBox(),
                this._procField("creation_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("modification_time", "uint", this.version == 1 ? 64 : 32),
                this._procField("track_ID", "uint", 32),
                this._procField("reserved1", "uint", 32),
                this._procField("duration", "uint", this.version == 1 ? 64 : 32),
                this._procFieldArray("reserved2", 2, "uint", 32),
                this._procField("layer", "uint", 16),
                this._procField("alternate_group", "uint", 16),
                this._procField("volume", "template", 16),
                this._procField("reserved3", "uint", 16),
                this._procFieldArray("matrix", 9, "template", 32),
                this._procField("width", "template", 32),
                this._procField("height", "template", 32)
            }
            ,
            i.prototype._boxProcessors.trex = function() {
                this._procFullBox(),
                this._procField("track_ID", "uint", 32),
                this._procField("default_sample_description_index", "uint", 32),
                this._procField("default_sample_duration", "uint", 32),
                this._procField("default_sample_size", "uint", 32),
                this._procField("default_sample_flags", "uint", 32)
            }
            ,
            i.prototype._boxProcessors.trun = function() {
                this._procFullBox(),
                this._procField("sample_count", "uint", 32),
                1 & this.flags && this._procField("data_offset", "int", 32),
                4 & this.flags && this._procField("first_sample_flags", "uint", 32),
                this._procEntries("samples", this.sample_count, function(O) {
                    256 & this.flags && this._procEntryField(O, "sample_duration", "uint", 32),
                    512 & this.flags && this._procEntryField(O, "sample_size", "uint", 32),
                    1024 & this.flags && this._procEntryField(O, "sample_flags", "uint", 32),
                    2048 & this.flags && this._procEntryField(O, "sample_composition_time_offset", this.version === 1 ? "int" : "uint", 32)
                })
            }
            ,
            i.prototype._boxProcessors["url "] = i.prototype._boxProcessors["urn "] = function() {
                this._procFullBox(),
                this.type === "urn " && this._procField("name", "string", -1),
                this._procField("location", "string", -1)
            }
            ,
            i.prototype._boxProcessors.vlab = function() {
                this._procField("source_label", "utf8")
            }
            ,
            i.prototype._boxProcessors.vmhd = function() {
                this._procFullBox(),
                this._procField("graphicsmode", "uint", 16),
                this._procFieldArray("opcolor", 3, "uint", 16)
            }
            ,
            i.prototype._boxProcessors.vttC = function() {
                this._procField("config", "utf8")
            }
            ,
            i.prototype._boxProcessors.vtte = function() {}
        }
        , function(y, ye, ve) {
            var ie = function() {
                function ae() {
                    (function(i, O) {
                        if (!(i instanceof O))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, ae)
                }
                return ae.prototype.extend = function(i, O) {
                    if (i) {
                        var $ = !!O && O.override
                          , Te = !!O && O.publicOnly;
                        for (var we in i)
                            !i.hasOwnProperty(we) || this[we] && !$ || Te && i[we].indexOf("public_") === -1 || (this[we] = i[we])
                    }
                }
                ,
                ae
            }();
            ye.a = ie
        }
        , function(y, ye, ve) {
            Object.defineProperty(ye, "__esModule", {
                value: !0
            }),
            ye.SPECIAL_AUDIO_TYPE = ye.USER_CODEC_PREFER_TYPE = ye.FILTER_VIDEO_URL_REASON = ye.VIDEO_CODEC_ID = ye.VIDEO_QN = ye.ERROR_CODE = ye.DOLBY_AUDIO_QN = ye.FLAC_QN = ye.STRING = ye.ERROR = ye.EVENTS = void 0,
            ye.EVENTS = {
                SCRIPT_LOADED: "scripLoaded",
                VIDEO_INFO: "videoInfo",
                WARNING: "warning",
                AST_IN_FUTURE: "astInFuture",
                BUFFER_EMPTY: "bufferStalled",
                BUFFER_LOADED: "bufferLoaded",
                BUFFER_LEVEL_STATE_CHANGED: "bufferStateChanged",
                ERROR: "error",
                FRAGMENT_LOADING_COMPLETED: "fragmentLoadingCompleted",
                FRAGMENT_LOADING_HEADER_RECEIVED: "fragmentLoadingHeaderReceived",
                FRAGMENT_LOADING_PROGRESS: "fragmentLoadingProgress",
                FRAGMENT_LOADING_STARTED: "fragmentLoadingStarted",
                FRAGMENT_LOADING_ABANDONED: "fragmentLoadingAbandoned",
                FRAGMENT_LOADED_ERROR: "fragmentLoadedError",
                FRAGMENT_P2P_LOAD_INFO: "fragmentP2pLoadInfo",
                CDN_LOAD_INFO: "cdnLoadInfo",
                PCDN_LOADED_ERROR: "pcdnLoadedError",
                LOG: "log",
                MANIFEST_LOADED: "manifestLoaded",
                METRICS_CHANGED: "metricsChanged",
                METRIC_CHANGED: "metricChanged",
                METRIC_ADDED: "metricAdded",
                METRIC_UPDATED: "metricUpdated",
                PERIOD_SWITCH_COMPLETED: "periodSwitchCompleted",
                PERIOD_SWITCH_STARTED: "periodSwitchStarted",
                QUALITY_CHANGE_REQUESTED: "qualityChangeRequested",
                QUALITY_CHANGE_RENDERED: "qualityChangeRendered",
                TRACK_CHANGE_RENDERED: "trackChangeRendered",
                SOURCE_INITIALIZED: "sourceInitialized",
                STREAM_INITIALIZED: "streamInitialized",
                STREAM_TEARDOWN_COMPLETE: "streamTeardownComplete",
                TEXT_TRACKS_ADDED: "allTextTracksAdded",
                TEXT_TRACK_ADDED: "textTrackAdded",
                TTML_PARSED: "ttmlParsed",
                TTML_TO_PARSE: "ttmlToParse",
                CAN_PLAY: "canPlay",
                PLAYBACK_ENDED: "playbackEnded",
                PLAYBACK_ERROR: "playbackError",
                PLAYBACK_NOT_ALLOWED: "playbackNotAllowed",
                PLAYBACK_METADATA_LOADED: "playbackMetaDataLoaded",
                PLAYBACK_PAUSED: "playbackPaused",
                PLAYBACK_PLAYING: "playbackPlaying",
                PLAYBACK_PROGRESS: "playbackProgress",
                PLAYBACK_RATE_CHANGED: "playbackRateChanged",
                PLAYBACK_SEEKED: "playbackSeeked",
                PLAYBACK_SEEKING: "playbackSeeking",
                PLAYBACK_SEEK_ASKED: "playbackSeekAsked",
                PLAYBACK_STARTED: "playbackStarted",
                PLAYBACK_TIME_UPDATED: "playbackTimeUpdated",
                PLAYBACK_WAITING: "playbackWaiting",
                MANIFEST_VALIDITY_CHANGED: "manifestValidityChanged",
                KEY_ADDED: "public_keyAdded",
                KEY_ERROR: "public_keyError",
                KEY_MESSAGE: "public_keyMessage",
                KEY_SESSION_CLOSED: "public_keySessionClosed",
                KEY_SESSION_CREATED: "public_keySessionCreated",
                KEY_SESSION_REMOVED: "public_keySessionRemoved",
                KEY_STATUSES_CHANGED: "public_keyStatusesChanged",
                KEY_SYSTEM_ACCESS_COMPLETE: "public_keySystemAccessComplete",
                KEY_SYSTEM_SELECTED: "public_keySystemSelected",
                LICENSE_REQUEST_COMPLETE: "public_licenseRequestComplete",
                PROTECTION_CREATED: "public_protectioncreated",
                PROTECTION_DESTROYED: "public_protectiondestroyed",
                DELAY_TO_APPEND_TO_BUFFER: "delayToAppendBuffer",
                QUALITY_CHANGE_DOWNLOADED: "qualityChangeDownloaded",
                QUOTA_EXCEEDED: "quotaExceeded",
                GET_NEXT_FRAGMENT: "getNextFragment",
                APPENDING_NEXT_SOURCE: "appendingNextSource",
                APPENDED_NEXT_SOURCE: "appendedNextSource",
                APPENDED_NEXT_SOURCE_DURATION_CHANGED: "appendedNextSourceDurationChanged",
                START_OFFSET_TIME_WARNING: "startOffsetTimeWarning",
                BUFFERING_OPTIMIZATION: "buffering_optimization",
                QUALITY_CHANGE_ABNORMAL: "qualityChangeAbnormal",
                SWITCH_AUDIO_TRACK_REQUEST: "switchAudioTrackRequest",
                SWITCH_AUDIO_TRACK_RENDERED: "switchAudioTrackRendered",
                REQUEST_RETRYED: "requestRetryed",
                PREDICT_SEEK: "predictSeek"
            },
            ye.ERROR = {
                INTERNAL_ERROR: -1,
                DURATION_IS_NOT_ALL_EQUAL: -2,
                DURATION_DEVIATION_IS_TOO_LARGE: -3,
                START_OFFSET_TIME_WARNING: -4,
                DOWNLOAD_ERROR: 4,
                DOWNLOAD_MPD_ERROR: 4001,
                DOWNLOAD_XINK_ERROR: 4002,
                DOWNLOAD_INIT_SEGMENT_ERROR: 4003,
                DOWNLOAD_MEDIA_SEGMENT_ERROR: 4004,
                DOWNLOAD_INDEX_SEGMENT_ERROR: 4005,
                DOWNLOAD_SWITCHING_SEGMENT_ERROR: 4006,
                DOWNLOAD_OTHER_ERROR: 4007,
                DOWNLOAD_FRAGMENT_ERROR: 4101,
                DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS: 4102,
                DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE: 4103,
                DOWNLOAD_FRAGMENT_ERROR_TIMEOUT: 4105,
                CONNECT_FRAGMENT_ERROR_TIMEOUT: 4106,
                CONNECT_FRAGMENT_ERROR_OFFLINE: 4107,
                MANIFEST_ERROR: 5,
                MANIFEST_TYPE_ERROR: 5001,
                MANIFEST_RESOLVE_ERROR: 5002,
                MEDIA_ERROR: 6,
                MEDIA_ABORTED_ERROR: 6001,
                MEDIA_NETWORK_ERROR: 6002,
                MEDIA_DECODE_ERROR: 6003,
                MEDIA_SUPPORTED_ERROR: 6004,
                MEDIA_ENCRYPTED_ERROR: 6005,
                MEDIA_UNKNOWN_ERROR: 6e3
            },
            ye.STRING = {
                VIDEO: "video",
                AUDIO: "audio",
                LOG: "log",
                WARNING: "warning",
                ERROR: "error",
                ABR_DYNAMIC: "abrDynamic",
                ABR_BOLA: "abrBola",
                ABR_THROUGHPUT: "abrThroughput",
                SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME: "bilidp-switch-source-transition-canvas"
            };
            var ie, ae, i, O, $, Te, we;
            ye.FLAC_QN = 30251,
            function(Re) {
                Re[Re.AUDIO = 30255] = "AUDIO",
                Re[Re.AMTOS = 30250] = "AMTOS"
            }(ie || (ie = {})),
            ye.DOLBY_AUDIO_QN = ie,
            function(Re) {
                Re[Re.SET_QUALITY_ERR = 2e4] = "SET_QUALITY_ERR",
                Re[Re.SET_QUALITY_VALUE_ERR = 20001] = "SET_QUALITY_VALUE_ERR",
                Re[Re.SET_QUALITY_TYPE_ERR = 20002] = "SET_QUALITY_TYPE_ERR",
                Re[Re.SET_QUALITY_APENDING_ERR = 20003] = "SET_QUALITY_APENDING_ERR",
                Re[Re.SET_QUALITY_SAME_VALUE = 20004] = "SET_QUALITY_SAME_VALUE",
                Re[Re.SET_QUALITY_TIME_OUT = 20005] = "SET_QUALITY_TIME_OUT",
                Re[Re.SET_QUALITY_RENDER_CHANGED = 20006] = "SET_QUALITY_RENDER_CHANGED",
                Re[Re.SET_QUALITY_MULTI_TRACK = 20007] = "SET_QUALITY_MULTI_TRACK",
                Re[Re.SET_QUALITY_ABR = 20008] = "SET_QUALITY_ABR",
                Re[Re.SWITCH_AUDIO_TRACK_ERR = 3e4] = "SWITCH_AUDIO_TRACK_ERR",
                Re[Re.SWITCH_AUDIO_TRACK_NOT_SUPPORT = 30001] = "SWITCH_AUDIO_TRACK_NOT_SUPPORT",
                Re[Re.SWITCH_AUDIO_TRACK_ID_NOT_CHANGED = 30002] = "SWITCH_AUDIO_TRACK_ID_NOT_CHANGED",
                Re[Re.SWITCH_AUDIO_TRACK_ID_NOT_EXIST = 30003] = "SWITCH_AUDIO_TRACK_ID_NOT_EXIST"
            }(ae || (ae = {})),
            ye.ERROR_CODE = ae,
            function(Re) {
                Re[Re.QN_8K = 127] = "QN_8K",
                Re[Re.QN_DOLBY_VISION = 126] = "QN_DOLBY_VISION",
                Re[Re.QN_HDR10 = 125] = "QN_HDR10",
                Re[Re.QN_4K = 120] = "QN_4K",
                Re[Re.QN_1080P_60 = 116] = "QN_1080P_60",
                Re[Re.QN_1080P_PLUS = 112] = "QN_1080P_PLUS",
                Re[Re.QN_1080P = 80] = "QN_1080P",
                Re[Re.QN_720P_60 = 74] = "QN_720P_60",
                Re[Re.QN_720P = 64] = "QN_720P",
                Re[Re.QN_480P = 32] = "QN_480P",
                Re[Re.QN_360P = 16] = "QN_360P"
            }(i || (i = {})),
            ye.VIDEO_QN = i,
            function(Re) {
                Re[Re.AVC = 7] = "AVC",
                Re[Re.HEVC = 12] = "HEVC",
                Re[Re.AV1 = 13] = "AV1"
            }(O || (O = {})),
            ye.VIDEO_CODEC_ID = O,
            function(Re) {
                Re.USE_HEVC_INSTEADOF_AVC = "USE_HEVC_INSTEADOF_AVC",
                Re.FILTER_SPECIAL_VIDEO = "FILTER_SPECIAL_VIDEO"
            }($ || ($ = {})),
            ye.FILTER_VIDEO_URL_REASON = $,
            function(Re) {
                Re[Re.RECOMMEND = 0] = "RECOMMEND",
                Re[Re.HEVC = 1] = "HEVC",
                Re[Re.DISABLE = 2] = "DISABLE",
                Re[Re.AV1 = 3] = "AV1"
            }(Te || (Te = {})),
            ye.USER_CODEC_PREFER_TYPE = Te,
            function(Re) {
                Re.DOLBY = "dolby",
                Re.FLAC = "flac"
            }(we || (we = {})),
            ye.SPECIAL_AUDIO_TYPE = we
        }
        , function(y, ye, ve) {
            Object.defineProperty(ye, "__esModule", {
                value: !0
            });
            var ie = function() {
                function ae() {}
                return ae.getLocalStorage = function(i) {
                    var O = "";
                    try {
                        O = window.localStorage.getItem(i)
                    } catch ($) {}
                    return O
                }
                ,
                ae.setLocalStorage = function(i, O) {
                    try {
                        window.localStorage.setItem(i, O)
                    } catch ($) {}
                }
                ,
                ae.getSessionStorage = function(i) {
                    var O = "";
                    try {
                        O = window.sessionStorage.getItem(i)
                    } catch ($) {}
                    return O
                }
                ,
                ae.setSessionStorage = function(i, O) {
                    try {
                        window.sessionStorage.setItem(i, O)
                    } catch ($) {}
                }
                ,
                ae.toFixed = function(i, O) {
                    return O === void 0 && (O = 2),
                    parseFloat(i == null ? void 0 : i.toFixed(O))
                }
                ,
                ae
            }();
            ye.default = ie
        }
        , function(y, ye, ve) {
            ve.d(ye, "a", function() {
                return ie
            });
            function ie() {
                return "2.7.0"
            }
        }
        , function(y, ye, ve) {
            var ie = new (function() {
                function xe() {
                    (function(qt, Pe) {
                        if (!(qt instanceof Pe))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this.init()
                }
                return xe.prototype.init = function() {
                    this.STREAM = "stream",
                    this.VIDEO = "video",
                    this.AUDIO = "audio",
                    this.TEXT = "text",
                    this.FRAGMENTED_TEXT = "fragmentedText",
                    this.EMBEDDED_TEXT = "embeddedText",
                    this.MUXED = "muxed",
                    this.IMAGE = "image",
                    this.LOCATION = "Location",
                    this.INITIALIZE = "initialize",
                    this.TEXT_SHOWING = "showing",
                    this.TEXT_HIDDEN = "hidden",
                    this.CC1 = "CC1",
                    this.CC3 = "CC3",
                    this.STPP = "stpp",
                    this.TTML = "ttml",
                    this.VTT = "vtt",
                    this.WVTT = "wvtt",
                    this.UTF8 = "utf-8",
                    this.SUGGESTED_PRESENTATION_DELAY = "suggestedPresentationDelay",
                    this.SCHEME_ID_URI = "schemeIdUri",
                    this.START_TIME = "starttime",
                    this.ABR_STRATEGY_DYNAMIC = "abrDynamic",
                    this.ABR_STRATEGY_BOLA = "abrBola",
                    this.ABR_STRATEGY_THROUGHPUT = "abrThroughput",
                    this.MOVING_AVERAGE_SLIDING_WINDOW = "slidingWindow",
                    this.MOVING_AVERAGE_EWMA = "ewma"
                }
                ,
                xe
            }())
              , ae = new (function() {
                function xe() {
                    (function(qt, Pe) {
                        if (!(qt instanceof Pe))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this.init()
                }
                return xe.prototype.init = function() {
                    this.TCP_CONNECTION = "TcpList",
                    this.HTTP_REQUEST = "HttpList",
                    this.TRACK_SWITCH = "RepSwitchList",
                    this.BUFFER_LEVEL = "BufferLevel",
                    this.BUFFER_STATE = "BufferState",
                    this.DVR_INFO = "DVRInfo",
                    this.DROPPED_FRAMES = "DroppedFrames",
                    this.SCHEDULING_INFO = "SchedulingInfo",
                    this.REQUESTS_QUEUE = "RequestsQueue",
                    this.MANIFEST_UPDATE = "ManifestUpdate",
                    this.MANIFEST_UPDATE_STREAM_INFO = "ManifestUpdatePeriodInfo",
                    this.MANIFEST_UPDATE_TRACK_INFO = "ManifestUpdateRepresentationInfo",
                    this.PLAY_LIST = "PlayList",
                    this.DVB_ERRORS = "DVBErrors"
                }
                ,
                xe
            }())
              , i = new (function() {
                function xe() {
                    (function(qt, Pe) {
                        if (!(qt instanceof Pe))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this.init()
                }
                return xe.prototype.init = function() {
                    this.DOWNLOAD_ERROR = 4,
                    this.DOWNLOAD_MPD_ERROR = 4001,
                    this.DOWNLOAD_XINK_ERROR = 4002,
                    this.DOWNLOAD_INIT_SEGMENT_ERROR = 4003,
                    this.DOWNLOAD_MEDIA_SEGMENT_ERROR = 4004,
                    this.DOWNLOAD_INDEX_SEGMENT_ERROR = 4005,
                    this.DOWNLOAD_SWITCHING_SEGMENT_ERROR = 4006,
                    this.DOWNLOAD_OTHER_ERROR = 4007,
                    this.DOWNLOAD_FRAGMENT_ERROR = 4101,
                    this.DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS = 4102,
                    this.DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE = 4103,
                    this.DOWNLOAD_FRAGMENT_ERROR_RANGE = 4104,
                    this.DOWNLOAD_FRAGMENT_ERROR_TIMEOUT = 4105,
                    this.CONNECT_FRAGMENT_ERROR_TIMEOUT = 4106,
                    this.CONNECT_FRAGMENT_ERROR_OFFLINE = 4107,
                    this.DOWNLOAD_PCDN_SCRIPT_ERROR = 4201,
                    this.DOWNLOAD_PCDN_SCRIPT_TIMEOUT = 4202,
                    this.DOWNLOAD_PCDN_DISABLED = 4203,
                    this.MANIFEST_ERROR = 5,
                    this.MANIFEST_TYPE_ERROR = 5001,
                    this.MANIFEST_RESOLVE_ERROR = 5002,
                    this.MEDIA_ERROR = 6,
                    this.MEDIA_ABORTED_ERROR = 6001,
                    this.MEDIA_NETWORK_ERROR = 6002,
                    this.MEDIA_DECODE_ERROR = 6003,
                    this.MEDIA_SUPPORTED_ERROR = 6004,
                    this.MEDIA_ENCRYPTED_ERROR = 6005,
                    this.MEDIA_UNKNOWN_ERROR = 6e3
                }
                ,
                xe
            }())
              , O = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.schemeIdUri = "",
                this.value = ""
            }
              , $ = ve(0);
            function Te() {
                var xe = {};
                function qt(Pe, Qe, ei) {
                    var sa = -1;
                    return xe[Pe] && xe[Pe].some(function(la, ha) {
                        if (la && la.callback === Qe && (!ei || ei === la.scope))
                            return sa = ha,
                            !0
                    }),
                    sa
                }
                return {
                    on: function(Pe, Qe, ei) {
                        var sa = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0;
                        if (!Pe)
                            throw new Error("event type cannot be null or undefined");
                        if (!Qe || typeof Qe != "function")
                            throw new Error("listener must be a function: " + Qe);
                        if (!(qt(Pe, Qe, ei) >= 0)) {
                            xe[Pe] = xe[Pe] || [];
                            var la = {
                                callback: Qe,
                                scope: ei,
                                priority: sa
                            }
                              , ha = xe[Pe].some(function(ca, pa) {
                                if (ca && sa > ca.priority)
                                    return xe[Pe].splice(pa, 0, la),
                                    !0
                            });
                            ha || xe[Pe].push(la)
                        }
                    },
                    off: function(Pe, Qe, ei) {
                        if (Pe && Qe && xe[Pe]) {
                            var sa = qt(Pe, Qe, ei);
                            sa < 0 || (xe[Pe][sa] = null)
                        }
                    },
                    trigger: function(Pe, Qe) {
                        if (Pe && xe[Pe]) {
                            if ((Qe = Qe || {}).hasOwnProperty("type"))
                                throw new Error("'type' is a reserved word for event dispatching");
                            Qe.type = Pe,
                            xe[Pe] = xe[Pe].filter(function(ei) {
                                return ei
                            }),
                            xe[Pe].forEach(function(ei) {
                                return ei && ei.callback.call(ei.scope, Qe)
                            })
                        }
                    },
                    reset: function() {
                        xe = {}
                    }
                }
            }
            Te.__dashjs_factory_name = "EventBus";
            var we = $.a.getSingletonFactory(Te);
            we.EVENT_PRIORITY_LOW = 0,
            we.EVENT_PRIORITY_HIGH = 5e3,
            $.a.updateSingletonFactory(Te.__dashjs_factory_name, we);
            var Re = we
              , Ye = ve(2);
            function _t(xe, qt) {
                if (!(xe instanceof qt))
                    throw new TypeError("Cannot call a class as a function")
            }
            function Jt(xe, qt) {
                if (!xe)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !qt || typeof qt != "object" && typeof qt != "function" ? xe : qt
            }
            var bt = new (function(xe) {
                function qt() {
                    return _t(this, qt),
                    Jt(this, xe.apply(this, arguments))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(function(xe) {
                function qt() {
                    (function(Qe, ei) {
                        if (!(Qe instanceof ei))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, qt);
                    var Pe = function(Qe, ei) {
                        if (!Qe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !ei || typeof ei != "object" && typeof ei != "function" ? Qe : ei
                    }(this, xe.call(this));
                    return Pe.BUFFERING_COMPLETED = "bufferingCompleted",
                    Pe.BUFFER_CLEARED = "bufferCleared",
                    Pe.BUFFER_LEVEL_UPDATED = "bufferLevelUpdated",
                    Pe.BYTES_APPENDED = "bytesAppended",
                    Pe.BYTES_APPENDED_END_FRAGMENT = "bytesAppendedEndFragment",
                    Pe.CHECK_FOR_EXISTENCE_COMPLETED = "checkForExistenceCompleted",
                    Pe.CURRENT_TRACK_CHANGED = "currentTrackChanged",
                    Pe.DATA_UPDATE_COMPLETED = "dataUpdateCompleted",
                    Pe.DATA_UPDATE_STARTED = "dataUpdateStarted",
                    Pe.INITIALIZATION_LOADED = "initializationLoaded",
                    Pe.INIT_FRAGMENT_LOADED = "initFragmentLoaded",
                    Pe.INIT_REQUESTED = "initRequested",
                    Pe.INTERNAL_MANIFEST_LOADED = "internalManifestLoaded",
                    Pe.LIVE_EDGE_SEARCH_COMPLETED = "liveEdgeSearchCompleted",
                    Pe.LOADING_COMPLETED = "loadingCompleted",
                    Pe.LOADING_PROGRESS = "loadingProgress",
                    Pe.LOADING_DATA_PROGRESS = "loadingDataProgress",
                    Pe.LOADING_ABANDONED = "loadingAborted",
                    Pe.MANIFEST_UPDATED = "manifestUpdated",
                    Pe.MEDIA_FRAGMENT_LOADED = "mediaFragmentLoaded",
                    Pe.QUOTA_EXCEEDED = "quotaExceeded",
                    Pe.REPRESENTATION_UPDATED = "representationUpdated",
                    Pe.SEGMENTS_LOADED = "segmentsLoaded",
                    Pe.SERVICE_LOCATION_BLACKLIST_ADD = "serviceLocationBlacklistAdd",
                    Pe.SERVICE_LOCATION_BLACKLIST_CHANGED = "serviceLocationBlacklistChanged",
                    Pe.SOURCEBUFFER_REMOVE_COMPLETED = "sourceBufferRemoveCompleted",
                    Pe.STREAMS_COMPOSED = "streamsComposed",
                    Pe.STREAM_BUFFERING_COMPLETED = "streamBufferingCompleted",
                    Pe.STREAM_COMPLETED = "streamCompleted",
                    Pe.TEXT_TRACKS_QUEUE_INITIALIZED = "textTracksQueueInitialized",
                    Pe.TIMED_TEXT_REQUESTED = "timedTextRequested",
                    Pe.TIME_SYNCHRONIZATION_COMPLETED = "timeSynchronizationComplete",
                    Pe.URL_RESOLUTION_FAILED = "urlResolutionFailed",
                    Pe.VIDEO_CHUNK_RECEIVED = "videoChunkReceived",
                    Pe.WALLCLOCK_TIME_UPDATED = "wallclockTimeUpdated",
                    Pe.XLINK_ELEMENT_LOADED = "xlinkElementLoaded",
                    Pe.XLINK_READY = "xlinkReady",
                    Pe.REQUEST_RETRYED = "requestRetryed",
                    Pe.BUFFER_CREATED = "bufferCreated",
                    Pe.VERIFY_SEGMENT_WARNING = "verifySegmentWarning",
                    Pe.INIT_HID = "initHID",
                    Pe.BIND_MEDIA_SOURCE_LOADER = "bindMediaSourceLoader",
                    Pe.SWITCH_AUDIO_TRACK_REQUEST = "switchAudioTrackRequest",
                    Pe.MULTI_AUDIO_TRACK_APPEND = "multiAudioTrackAppend",
                    Pe.SWITCH_AUDIO_TRACK_RENDERED = "switchAudioTrackRendered",
                    Pe.PREDICT_SEEK = "predictSeek",
                    Pe
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(Ye.a)))
              , ai = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.action = xe.ACTION_DOWNLOAD,
                this.startTime = NaN,
                this.mediaType = null,
                this.mediaInfo = null,
                this.type = null,
                this.duration = NaN,
                this.timescale = NaN,
                this.range = null,
                this.url = null,
                this.serviceLocation = null,
                this.requestStartDate = null,
                this.firstByteDate = null,
                this.requestEndDate = null,
                this.quality = NaN,
                this.index = NaN,
                this.availabilityStartTime = null,
                this.availabilityEndTime = null,
                this.wallStartTime = null,
                this.bytesLoaded = NaN,
                this.bytesTotal = NaN,
                this.delayLoadingTime = NaN,
                this.responseType = "arraybuffer",
                this.representationId = null,
                this.timeout = 1e4
            };
            ai.ACTION_DOWNLOAD = "download",
            ai.ACTION_COMPLETE = "complete";
            var ii = ai;
            function da() {
                var xe, qt = this.context, Pe = Re(qt).getInstance(), Qe = void 0, ei = void 0, sa = void 0, la = void 0, ha = void 0;
                return xe = {
                    log: function() {
                        var ca = ""
                          , pa = null;
                        ei && (pa = new Date().getTime(),
                        ca += "[" + (pa - ha) + "]"),
                        sa && this && this.getClassName && (ca += "[" + this.getClassName() + "]",
                        this.getType && (ca += "[" + this.getType() + "]")),
                        ca.length > 0 && (ca += " "),
                        Array.apply(null, arguments).forEach(function(ti) {
                            ca += ti + " "
                        }),
                        Qe && console.log(ca),
                        Pe.trigger(bt.LOG, {
                            message: ca
                        })
                    },
                    setLogTimestampVisible: function(ca) {
                        ei = ca
                    },
                    setCalleeNameVisible: function(ca) {
                        sa = ca
                    },
                    setLogToBrowserConsole: function(ca) {
                        Qe = ca
                    },
                    getLogToBrowserConsole: function() {
                        return Qe
                    },
                    setABRLogVisible: function(ca) {
                        la = ca
                    },
                    getABRLogVisible: function() {
                        return la || Qe
                    }
                },
                Qe = !1,
                la = !1,
                ei = !0,
                sa = !1,
                ha = new Date().getTime(),
                xe
            }
            da.__dashjs_factory_name = "Debug";
            var aa = $.a.getSingletonFactory(da)
              , Ta = "loading"
              , fa = "executed"
              , He = "failed";
            function Zt(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = Re(qt).getInstance()
                  , ei = xe.metricsModel
                  , sa = xe.fragmentLoader
                  , la = {}
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0;
                function ra(ua) {
                    var ta;
                    return !!ua && (ta = !1,
                    pa.some(function(ma) {
                        if (ia = ua,
                        na = ma,
                        !isNaN(ia.index) && ia.startTime === na.startTime && ia.adaptationIndex === na.adaptationIndex && ia.type === na.type || function(va, Sa) {
                            return isNaN(va.index) && isNaN(Sa.index) && va.quality === Sa.quality
                        }(ua, ma) || function(va, Sa) {
                            return va.action === ii.ACTION_COMPLETE && va.action === Sa.action
                        }(ua, ma))
                            return ta = !0;
                        var ia, na
                    }),
                    ta)
                }
                function ni(ua) {
                    return isNaN(ua.duration) ? .25 : ua.duration / 8
                }
                function Kt(ua) {
                    pa = pa.filter(function(ta) {
                        var ma = ni(ta);
                        return isNaN(ta.startTime) || ua !== void 0 && ta.startTime >= ua - ma
                    })
                }
                function oi(ua, ta) {
                    ta <= ua + .5 || (pa = pa.filter(function(ma) {
                        var ia = ni(ma);
                        return isNaN(ma.startTime) || ma.startTime >= ta - ia || isNaN(ma.duration) || ma.startTime + ma.duration <= ua + ia
                    }))
                }
                function Ea(ua, ta, ma) {
                    for (var ia = ua.length - 1; ia >= 0; ia--) {
                        var na = ua[ia]
                          , va = na.startTime
                          , Sa = va + na.duration;
                        if (ma = isNaN(ma) ? ni(na) : ma,
                        !isNaN(va) && !isNaN(Sa) && ta + ma >= va && ta - ma < Sa || isNaN(va) && isNaN(ta))
                            return na
                    }
                    return null
                }
                function ri(ua) {
                    var ta = void 0;
                    switch (ua) {
                    case Ta:
                        ta = ti;
                        break;
                    case fa:
                        ta = pa;
                        break;
                    default:
                        ta = []
                    }
                    return ta
                }
                function ya(ua, ta) {
                    ei.addSchedulingInfo(ua.mediaType, new Date, ua.type, ua.startTime, ua.availabilityStartTime, ua.duration, ua.quality, ua.range, ta),
                    ei.addRequestsQueue(ua.mediaType, ti, pa)
                }
                function Aa(ua) {
                    if (ua.sender === sa && !ua.error) {
                        if (ti.splice(ti.indexOf(ua.request), 1),
                        ua.response && !ua.error) {
                            var ta = pa && pa[pa.length - 1]
                              , ma = ca.getPlaybackController().getTime() || 0
                              , ia = ua.request
                              , na = ta && (isNaN(ta.index) || isNaN(ta.startTime) && isNaN(ta.duration))
                              , va = ia && (isNaN(ia.index) || isNaN(ia.startTime) && isNaN(ia.duration))
                              , Sa = ta && (ma === 0 || ia.startTime - 1 <= ma && ia.startTime + ia.duration + 1 >= ma)
                              , Na = ta && ia.index - ta.index == 1 || pa && pa.length && pa.filter(function(Oa) {
                                return ia.index - Oa.index == 1
                            }).length || ia.index === 0;
                            if (Pe("push", ia.mediaType, JSON.stringify({
                                index: ia.index,
                                isLastNaNRequest: na,
                                isCurrentNaNRequest: va,
                                isCurrentTimeInFirstRequest: Sa,
                                isMediaRequest: Na,
                                currentTime: ma,
                                range: ia.range
                            })),
                            !va && Sa && pa.length > 1 && !Na && pa.splice(1, pa.length - 1),
                            ta && !va && !Sa && !Na)
                                return void ca.getScheduleController().start();
                            pa.push(ua.request)
                        }
                        ya(ua.request, ua.error ? He : fa),
                        Qe.trigger(bt.FRAGMENT_LOADING_COMPLETED, {
                            request: ua.request,
                            response: ua.response,
                            error: ua.error,
                            sender: this
                        }),
                        ua.request && ua.request.p2pLoadInfo && JSON.stringify(ua.request.p2pLoadInfo) != "{}" && Qe.trigger(bt.FRAGMENT_P2P_LOAD_INFO, {
                            p2pLoadInfo: ua.request.p2pLoadInfo
                        }),
                        ua.request && ua.request.loadInfo && JSON.stringify(ua.request.loadInfo) != "{}" && Qe.trigger(bt.CDN_LOAD_INFO, {
                            loadInfo: ua.request.loadInfo,
                            NCInfo: ua.request.NCInfo,
                            mediaInfo: {
                                mediaType: ua.request.mediaType,
                                quality: ua.request.quality,
                                id: ua.request.representationId
                            }
                        })
                    }
                }
                function wa(ua) {
                    ua.sender === sa && Qe.trigger(bt.FRAGMENT_LOADING_PROGRESS, {
                        request: ua.request,
                        response: ua.response,
                        error: ua.error,
                        sender: this
                    })
                }
                function _a(ua) {
                    if (ua.sender === sa && (Qe.trigger(bt.FRAGMENT_LOADING_ABANDONED, {
                        streamProcessor: this.getStreamProcessor(),
                        request: ua.request,
                        mediaType: ua.mediaType
                    }),
                    ua.request && ua.request.NCInfo && JSON.stringify(ua.request.NCInfo) != "{}")) {
                        var ta = ua.request;
                        if (la !== {} && la.mediaType === ta.mediaType && la.quality === ta.quality && la.range === ta.range && la.delayLoadingTime === ta.delayLoadingTime)
                            return;
                        la = {
                            mediaType: ta.mediaType,
                            quality: ta.quality,
                            range: ta.range,
                            delayLoadingTime: ta.delayLoadingTime
                        },
                        Qe.trigger(bt.CDN_LOAD_INFO, {
                            NCInfo: ua.request.NCInfo,
                            mediaInfo: {
                                mediaType: ua.request.mediaType,
                                quality: ua.request.quality,
                                id: ua.request.representationId
                            }
                        })
                    }
                }
                function Da() {
                    pa = [],
                    ti = []
                }
                return ha = {
                    setStreamProcessor: function(ua) {
                        ca = ua
                    },
                    getStreamProcessor: function() {
                        return ca
                    },
                    getRequests: function(ua) {
                        var ta = ua ? ua.state instanceof Array ? ua.state : [ua.state] : []
                          , ma = [];
                        return ta.forEach(function(ia) {
                            var na = ri(ia);
                            ma = ma.concat(function(va, Sa) {
                                return Sa.hasOwnProperty("time") ? [Ea(va, Sa.time, Sa.threshold)] : va.filter(function(Na) {
                                    for (var Oa in Sa)
                                        if (Oa !== "state" && Sa.hasOwnProperty(Oa) && Na[Oa] != Sa[Oa])
                                            return !1;
                                    return !0
                                })
                            }(na, ua))
                        }),
                        ma
                    },
                    isFragmentLoaded: ra,
                    isFragmentLoadedOrPending: function(ua) {
                        var ta = !1
                          , ma = 0
                          , ia = void 0;
                        if (!(ta = ra(ua)))
                            for (ma = 0; ma < ti.length; ma++)
                                ia = ti[ma],
                                ua.url === ia.url && ua.startTime === ia.startTime && (ta = !0);
                        return ta
                    },
                    removeExecutedRequestsBeforeTime: Kt,
                    removeExecutedRequestsAfterTime: function(ua) {
                        pa = pa.filter(function(ta) {
                            return isNaN(ta.startTime) || ua !== void 0 && ta.startTime <= ua
                        })
                    },
                    syncExecutedRequestsWithBufferedRange: function(ua, ta) {
                        if (ua && ua.length !== 0) {
                            for (var ma = 0, ia = 0, na = ua.length; ia < na; ia++)
                                oi(ma, ua.start(ia)),
                                ma = ua.end(ia);
                            ta > 0 && oi(ma, ta)
                        } else
                            Kt()
                    },
                    clearExecutedRequestBySeeking: function() {
                        pa = []
                    },
                    abortRequests: function() {
                        sa.abort(),
                        ti = []
                    },
                    executeRequest: function(ua) {
                        switch (ua.action) {
                        case ii.ACTION_COMPLETE:
                            pa.push(ua),
                            ya(ua, fa),
                            Pe("[FragmentModel] executeRequest trigger STREAM_COMPLETED"),
                            Qe.trigger(bt.STREAM_COMPLETED, {
                                request: ua,
                                fragmentModel: this
                            });
                            break;
                        case ii.ACTION_DOWNLOAD:
                            ya(ua, Ta),
                            ti.push(ua),
                            function(ta) {
                                Qe.trigger(bt.FRAGMENT_LOADING_STARTED, {
                                    sender: ha,
                                    request: ta
                                });
                                var ma = ca && ca.getBufferLevel();
                                ta.bufferLevel = ma,
                                sa.load(ta)
                            }(ua);
                            break;
                        default:
                            Pe("Unknown request action.")
                        }
                    },
                    reset: function() {
                        Qe.off(bt.LOADING_COMPLETED, Aa, this),
                        Qe.off(bt.LOADING_DATA_PROGRESS, wa, this),
                        Qe.off(bt.LOADING_ABANDONED, _a, this),
                        sa && sa.reset(),
                        Da()
                    },
                    addExecutedRequest: function() {},
                    resetInitialSettings: Da,
                    getLastQnFragmentCompletedCnts: function(ua) {
                        var ta = 0;
                        if (pa && pa.length > 0)
                            for (var ma = pa.length - 1; ma >= 0 && ua === pa[ma].quality; ma--)
                                ta++;
                        return ta
                    },
                    resetPreloadData: function() {
                        sa && sa.resetPreloadData()
                    },
                    syncExecutedRequestsWithMultipleLevels: function(ua, ta) {
                        if (ua && ua.length !== 0) {
                            for (var ma = 0, ia = 0, na = ua.length; ia < na; ia++) {
                                var va = ua[ia];
                                oi(ma, va.start),
                                ma = va.end
                            }
                            ta > 0 && oi(ma, ta)
                        } else
                            Kt()
                    },
                    getRequestsForState: ri
                },
                Da(),
                Qe.on(bt.LOADING_COMPLETED, Aa, ha),
                Qe.on(bt.LOADING_DATA_PROGRESS, wa, ha),
                Qe.on(bt.LOADING_ABANDONED, _a, ha),
                ha
            }
            Zt.__dashjs_factory_name = "FragmentModel";
            var si = $.a.getClassFactory(Zt);
            si.FRAGMENT_MODEL_LOADING = Ta,
            si.FRAGMENT_MODEL_EXECUTED = fa,
            si.FRAGMENT_MODEL_CANCELED = "canceled",
            si.FRAGMENT_MODEL_FAILED = He,
            $.a.updateClassFactory(Zt.__dashjs_factory_name, si);
            var ga = si
              , ba = function xe(qt, Pe, Qe, ei, sa) {
                (function(la, ha) {
                    if (!(la instanceof ha))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.code = qt || null,
                this.message = Pe || null,
                this.data = Qe || null,
                this.errorCode = ei || null,
                this.httpCode = sa || null
            };
            function Ca(xe, qt, Pe) {
                var Qe = this.context
                  , ei = aa(Qe).getInstance().log
                  , sa = Re(Qe).getInstance()
                  , la = void 0
                  , ha = void 0
                  , ca = []
                  , pa = Pe;
                function ti() {
                    return la ? la.buffered : []
                }
                function ra() {
                    var oi = this;
                    if (ca.length > 0) {
                        ha = !0;
                        var Ea = ca[0];
                        ca.splice(0, 1);
                        var ri = []
                          , ya = function() {
                            var Aa = ti();
                            (function(wa, _a, Da, ua) {
                                _a && _a.length > 0 && _a.length < Da.length && function(ta, ma) {
                                    for (var ia = 0; ia < ta.length; ia++) {
                                        var na = Math.round(ta.start(ia))
                                          , va = Math.round(ta.end(ia));
                                        if (va === ma.start || na === ma.end || ma.start >= na && ma.end <= va)
                                            return !0
                                    }
                                    return !1
                                }(_a, ua) && sa.trigger(bt.SOURCEBUFFER_REMOVE_COMPLETED, {
                                    buffer: wa,
                                    from: Da.end(Da.length - 2),
                                    to: Da.start(Da.length - 1),
                                    unintended: !0
                                })
                            }
                            )(oi, ri, Aa, Ea),
                            ca.length > 0 ? ra.call(this) : (ha = !1,
                            pa && pa({
                                chunk: Ea
                            }))
                        };
                        try {
                            Ea.bytes.length === 0 ? ya.call(this) : (ri = ti(),
                            la.appendBuffer ? la.appendBuffer(Ea.bytes) : la.append(Ea.bytes, Ea),
                            ni(la, ya.bind(this)))
                        } catch (Aa) {
                            ei('SourceBuffer append failed "' + Aa + '"'),
                            ca.length > 0 ? ra() : ha = !1,
                            pa && pa({
                                chunk: Ea,
                                error: new ba(Aa.code,Aa.message,null)
                            })
                        }
                    }
                }
                function ni(oi, Ea) {
                    var ri = void 0
                      , ya = function() {
                        oi.updating || (clearInterval(ri),
                        Ea())
                    };
                    if (oi.updating)
                        if (typeof oi.addEventListener == "function")
                            try {
                                oi.addEventListener("updateend", function Aa() {
                                    oi.updating || (oi.removeEventListener("updateend", Aa, !1),
                                    Ea())
                                }, !1)
                            } catch (Aa) {
                                ri = setInterval(ya, 50)
                            }
                        else
                            ri = setInterval(ya, 50);
                    else
                        Ea()
                }
                var Kt = {
                    getAllBufferRanges: ti,
                    getBuffer: function() {
                        return la
                    },
                    append: function(oi) {
                        ca.push(oi),
                        ha || ni(la, ra.bind(this))
                    },
                    remove: function(oi, Ea, ri) {
                        var ya = this;
                        ni(la, function() {
                            try {
                                oi >= 0 && Ea > oi && (ri || xe.readyState !== "ended") && la.remove(oi, Ea),
                                ni(la, function() {
                                    sa.trigger(bt.SOURCEBUFFER_REMOVE_COMPLETED, {
                                        buffer: ya,
                                        from: oi,
                                        to: Ea,
                                        unintended: !1
                                    })
                                })
                            } catch (Aa) {
                                sa.trigger(bt.SOURCEBUFFER_REMOVE_COMPLETED, {
                                    buffer: ya,
                                    from: oi,
                                    to: Ea,
                                    unintended: !1,
                                    error: new ba(Aa.code,Aa.message,null)
                                })
                            }
                        })
                    },
                    abort: function() {
                        try {
                            (xe.readyState === "open" || la.setTextTrack && xe.readyState === "ended") && la.abort()
                        } catch (oi) {
                            ei('SourceBuffer append abort failed: "' + oi + '"')
                        }
                        ca = []
                    },
                    reset: function() {
                        if (la) {
                            try {
                                xe.removeSourceBuffer(la)
                            } catch (oi) {
                                ei("Failed to remove source buffer from media source.")
                            }
                            ha = !1,
                            la = null
                        }
                        ca = [],
                        pa = null
                    },
                    setAppendWindowEnd: function oi(Ea) {
                        Ea <= 0 || ni(la, function() {
                            if (xe.readyState === "open")
                                la.appendWindowEnd = Ea;
                            else
                                var ri = setTimeout(function() {
                                    clearTimeout(ri),
                                    oi(Ea)
                                }, 50)
                        })
                    },
                    updateTimestampOffset: function(oi) {
                        la.timestampOffset === oi || isNaN(oi) || ni(la, function() {
                            la.timestampOffset = oi
                        })
                    }
                };
                return function() {
                    ha = !1;
                    var oi = qt.codec;
                    try {
                        if (oi.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))
                            throw new Error("not really supported");
                        la = xe.addSourceBuffer(oi)
                    } catch (Ea) {
                        throw Ea
                    }
                }(),
                Kt
            }
            Ca.__dashjs_factory_name = "SourceBufferSink";
            var za = $.a.getClassFactory(Ca);
            function Ms(xe) {
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = []
                  , ei = void 0
                  , sa = xe;
                function la(ha, ca) {
                    Qe = Qe.filter(function(pa) {
                        return !((isNaN(ca) || pa.start < ca) && (isNaN(ha) || pa.end > ha))
                    })
                }
                return {
                    getAllBufferRanges: function() {
                        for (var ha = [], ca = 0; ca < Qe.length; ca++) {
                            var pa = Qe[ca];
                            ha.length === 0 || pa.start > ha[ha.length - 1].end ? ha.push({
                                start: pa.start,
                                end: pa.end
                            }) : ha[ha.length - 1].end = pa.end
                        }
                        var ti = {
                            start: function(ra) {
                                return ha[ra].start
                            },
                            end: function(ra) {
                                return ha[ra].end
                            }
                        };
                        return Object.defineProperty(ti, "length", {
                            get: function() {
                                return ha.length
                            }
                        }),
                        ti
                    },
                    append: function(ha) {
                        ha.segmentType !== "InitializationSegment" ? (Qe.push(ha),
                        Qe.sort(function(ca, pa) {
                            return ca.start - pa.start
                        }),
                        ei = null) : ei = ha,
                        Pe("PreBufferSink appended chunk s: " + ha.start + "; e: " + ha.end),
                        sa && sa({
                            chunk: ha
                        })
                    },
                    remove: la,
                    abort: function() {},
                    discharge: function(ha, ca) {
                        var pa = function(ti, ra) {
                            return Qe.filter(function(ni) {
                                return (isNaN(ra) || ni.start < ra) && (isNaN(ti) || ni.end > ti)
                            })
                        }(ha, ca);
                        return ei && (pa.push(ei),
                        ei = null),
                        la(ha, ca),
                        pa
                    },
                    reset: function() {
                        Qe = [],
                        ei = null,
                        sa = null
                    }
                }
            }
            Ms.__dashjs_factory_name = "PreBufferSink";
            var Pa = $.a.getClassFactory(Ms)
              , Ua = {
                DEFAULT: .5,
                STRONG: 1,
                WEAK: 0
            };
            function Wa(xe, qt, Pe) {
                return {
                    quality: xe === void 0 ? -1 : xe,
                    reason: qt === void 0 ? null : qt,
                    priority: function(Qe) {
                        var ei = Ua.DEFAULT;
                        return Qe !== Ua.DEFAULT && Qe !== Ua.STRONG && Qe !== Ua.WEAK || (ei = Qe),
                        ei
                    }(Pe)
                }
            }
            Wa.__dashjs_factory_name = "SwitchRequest";
            var Ka = $.a.getClassFactory(Wa);
            Ka.NO_CHANGE = -1,
            Ka.PRIORITY = Ua,
            $.a.updateClassFactory(Wa.__dashjs_factory_name, Ka);
            var Ns = Ka;
            function pl(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = xe.metricsModel;
                return {
                    getMaxIndex: function(ei) {
                        var sa = Ns(qt).create();
                        if (!(ei && ei.hasOwnProperty("getMediaInfo") && ei.hasOwnProperty("getMediaType") && ei.hasOwnProperty("useBufferOccupancyABR") && ei.hasOwnProperty("getAbrController") && ei.hasOwnProperty("getStreamProcessor")))
                            return sa;
                        (function() {
                            if (!Qe || !Qe.hasOwnProperty("getReadOnlyMetricsFor"))
                                throw new Error("Missing config parameter(s)")
                        }
                        )();
                        var la = ei.getMediaInfo()
                          , ha = ei.getMediaType()
                          , ca = Qe.getReadOnlyMetricsFor(ha)
                          , pa = ei.getStreamProcessor()
                          , ti = ei.getAbrController()
                          , ra = ei.getStreamInfo()
                          , ni = ra && ra.manifestInfo ? ra.manifestInfo.isDynamic : null
                          , Kt = ti.getThroughputHistory()
                          , oi = Kt.getSafeAverageThroughput(ha, ni)
                          , Ea = Kt.getAverageLatency(ha)
                          , ri = ca.BufferState.length > 0 ? ca.BufferState[ca.BufferState.length - 1] : null
                          , ya = ei.useBufferOccupancyABR();
                        return !ca || isNaN(oi) || !ri || ya || ti.getAbandonmentStateFor(ha) !== Ba.ABANDON_LOAD && (ri || ni) && (sa.quality = ti.getQualityForBitrate(la, oi, Ea),
                        pa.getScheduleController().setTimeToLoadDelay(0),
                        Pe("ThroughputRule requesting switch to index: ", sa.quality, "type: ", ha, "Average throughput", Math.round(oi), "kbps"),
                        sa.reason = {
                            throughput: oi,
                            latency: Ea
                        }),
                        sa
                    },
                    reset: function() {}
                }
            }
            pl.__dashjs_factory_name = "ThroughputRule";
            var el = $.a.getClassFactory(pl);
            function wl(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = xe.mediaPlayerModel
                  , ei = xe.metricsModel
                  , sa = xe.dashMetrics
                  , la = void 0
                  , ha = void 0
                  , ca = void 0;
                function pa() {
                    la = {},
                    ha = {},
                    ca = []
                }
                var ti = {
                    shouldAbandon: function(ra) {
                        var ni = Ns(qt).create(Ns.NO_CHANGE, {
                            name: wl.__dashjs_factory_name
                        });
                        if (!(ra && ra.hasOwnProperty("getMediaInfo") && ra.hasOwnProperty("getMediaType") && ra.hasOwnProperty("getCurrentRequest") && ra.hasOwnProperty("getRepresentationInfo") && ra.hasOwnProperty("getAbrController")))
                            return ni;
                        var Kt, oi, Ea = ra.getMediaInfo(), ri = ra.getMediaType(), ya = ra.getCurrentRequest();
                        if (!isNaN(ya.index)) {
                            Kt = ri,
                            oi = ya.index,
                            la[Kt] = la[Kt] || {},
                            la[Kt][oi] = la[Kt][oi] || {};
                            var Aa = Qe.getStableBufferTime()
                              , wa = sa.getCurrentBufferLevel(ei.getReadOnlyMetricsFor(ri));
                            if (wa > Aa)
                                return ni;
                            var _a = la[ri][ya.index];
                            if (_a === null || ya.firstByteDate === null || ha.hasOwnProperty(_a.id))
                                return ni;
                            if (_a.firstByteTime === void 0 && (ca[ri] = [],
                            _a.firstByteTime = ya.firstByteDate.getTime(),
                            _a.segmentDuration = ya.duration,
                            _a.bytesTotal = ya.bytesTotal,
                            _a.id = ya.index),
                            _a.bytesLoaded = ya.bytesLoaded,
                            _a.elapsedTime = new Date().getTime() - _a.firstByteTime,
                            _a.bytesLoaded > 0 && _a.elapsedTime > 0 && function(Sa, Na) {
                                ca[Sa] = ca[Sa] || [],
                                ca[Sa].push(Na)
                            }(ri, Math.round(8 * _a.bytesLoaded / _a.elapsedTime)),
                            ca[ri].length >= 5 && _a.elapsedTime > 500 && _a.bytesLoaded < _a.bytesTotal) {
                                var Da = ca[ri].reduce(function(Sa, Na) {
                                    return Sa + Na
                                }, 0);
                                _a.measuredBandwidthInKbps = Math.round(Da / ca[ri].length),
                                _a.estimatedTimeOfDownload = +(8 * _a.bytesTotal / _a.measuredBandwidthInKbps / 1e3).toFixed(2);
                                var ua = _a.estimatedTimeOfDownload;
                                if (ua < 1.8 * _a.segmentDuration && ua < .8 * wa || ra.getRepresentationInfo().quality === 0)
                                    return ni;
                                if (!ha.hasOwnProperty(_a.id)) {
                                    var ta = ra.getAbrController()
                                      , ma = _a.bytesTotal - _a.bytesLoaded
                                      , ia = ta.getBitrateList(Ea)
                                      , na = ta.getQualityFor(ri, Ea.streamInfo)
                                      , va = function(Sa, Na, Oa) {
                                        var Ia = ta.getQualityForBitrate(Ea, _a.measuredBandwidthInKbps * Qe.getBandwidthSafetyFactor())
                                          , Ra = ta.getMinAllowedIndexFor(ri)
                                          , ka = ei.getReadOnlyMetricsFor(ri)
                                          , Va = ka.BufferState.length > 0 ? ka.BufferState[ka.BufferState.length - 1] : null;
                                        return Na >= .8 * Oa && Ia > Sa ? Sa > 0 ? Sa - 1 : Sa : Oa < 1 || Va && Va.state === ku.BUFFER_EMPTY ? 0 : Ra !== void 0 ? Math.max(Ra, Ia) : Ia
                                    }(na, ua, wa);
                                    ma > _a.bytesTotal * ia[va].bitrate / ia[na].bitrate && va !== na && (ni.quality = va,
                                    ni.reason.throughput = _a.measuredBandwidthInKbps,
                                    ni.reason.fragmentID = _a.id,
                                    ha[_a.id] = _a,
                                    Pe("AbandonRequestsRule ( ", ri, "frag id", _a.id, ") is asking to abandon and switch to quality to ", va, "from quality " + na, " measured bandwidth was", _a.measuredBandwidthInKbps),
                                    delete la[ri][_a.id])
                                }
                            } else
                                _a.bytesLoaded === _a.bytesTotal && delete la[ri][_a.id]
                        }
                        return ni
                    },
                    reset: pa
                };
                return pa(),
                ti
            }
            wl.__dashjs_factory_name = "AbandonRequestsRule",
            $.a.getClassFactory(wl);
            function fu(xe, qt) {
                if (!(xe instanceof qt))
                    throw new TypeError("Cannot call a class as a function")
            }
            var vl = function xe() {
                fu(this, xe),
                this.tcpid = null,
                this.type = null,
                this.url = null,
                this.actualurl = null,
                this.range = null,
                this.trequest = null,
                this.tresponse = null,
                this.responsecode = null,
                this.interval = null,
                this.trace = [],
                this._stream = null,
                this._tfinish = null,
                this._mediaduration = null,
                this._responseHeaders = null,
                this._serviceLocation = null
            }
              , kl = function xe() {
                fu(this, xe),
                this.s = null,
                this.d = null,
                this.b = []
            };
            vl.GET = "GET",
            vl.HEAD = "HEAD",
            vl.MPD_TYPE = "MPD",
            vl.XLINK_EXPANSION_TYPE = "XLinkExpansion",
            vl.INIT_SEGMENT_TYPE = "InitializationSegment",
            vl.INDEX_SEGMENT_TYPE = "IndexSegment",
            vl.MEDIA_SEGMENT_TYPE = "MediaSegment",
            vl.BITSTREAM_SWITCHING_SEGMENT_TYPE = "BitstreamSwitchingSegment",
            vl.OTHER_TYPE = "other";
            function Xl(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = xe.dashMetrics
                  , ei = xe.metricsModel
                  , sa = xe.mediaPlayerModel
                  , la = Re(qt).getInstance()
                  , ha = void 0
                  , ca = void 0;
                function pa(_a) {
                    var Da = {}
                      , ua = _a.getMediaInfo().bitrateList.map(function(na) {
                        return na.bandwidth
                    })
                      , ta = function(na) {
                        return na.map(function(va) {
                            return Math.log(va)
                        })
                    }(ua);
                    ta = ta.map(function(na) {
                        return na - ta[0] + 1
                    });
                    var ma = sa.getStableBufferTime()
                      , ia = function(na, va, Sa) {
                        var Na = Sa.reduce(function(Ra, ka, Va) {
                            return ka > Sa[Ra] ? Va : Ra
                        }, 0);
                        if (Na === 0)
                            return null;
                        var Oa = Math.max(na, 10 + 2 * va.length)
                          , Ia = (Sa[Na] - 1) / (Oa / 10 - 1);
                        return {
                            gp: Ia,
                            Vp: 10 / Ia
                        }
                    }(ma, ua, ta);
                    return ia ? (Da.state = 1,
                    Da.bitrates = ua,
                    Da.utilities = ta,
                    Da.stableBufferTime = ma,
                    Da.Vp = ia.Vp,
                    Da.gp = 3,
                    Da.lastQuality = 0,
                    ti(Da)) : Da.state = 0,
                    Da
                }
                function ti(_a) {
                    _a.placeholderBuffer = 0,
                    _a.mostAdvancedSegmentStart = NaN,
                    _a.lastSegmentWasReplacement = !1,
                    _a.lastSegmentStart = NaN,
                    _a.lastSegmentDurationS = NaN,
                    _a.lastSegmentRequestTimeMs = NaN,
                    _a.lastSegmentFinishTimeMs = NaN
                }
                function ra() {
                    for (var _a in ca)
                        if (ca.hasOwnProperty(_a)) {
                            var Da = ca[_a];
                            Da.state !== 0 && ti(Da)
                        }
                }
                function ni() {}
                function Kt(_a, Da) {
                    if (!isNaN(_a.lastSegmentStart) && !isNaN(_a.lastSegmentRequestTimeMs) && !isNaN(_a.placeholderBuffer)) {
                        if (_a.placeholderBuffer *= .99,
                        !isNaN(_a.lastSegmentFinishTimeMs)) {
                            var ua = Qe.getCurrentBufferLevel(ei.getReadOnlyMetricsFor(Da)) + .001 * (_a.lastSegmentFinishTimeMs - _a.lastSegmentRequestTimeMs)
                              , ta = function(ia, na) {
                                return ia.Vp * (ia.utilities[na] + ia.gp)
                            }(_a, _a.lastQuality)
                              , ma = Math.max(0, ta - ua);
                            _a.placeholderBuffer = Math.min(ma, _a.placeholderBuffer)
                        }
                        _a.lastSegmentWasReplacement && !isNaN(_a.lastSegmentDurationS) && (_a.placeholderBuffer += _a.lastSegmentDurationS),
                        _a.lastSegmentStart = NaN,
                        _a.lastSegmentRequestTimeMs = NaN
                    }
                }
                function oi(_a) {
                    if (_a && _a.chunk && _a.chunk.mediaInfo) {
                        var Da = ca[_a.chunk.mediaInfo.type];
                        if (Da && Da.state !== 0) {
                            var ua = _a.chunk.start;
                            isNaN(Da.mostAdvancedSegmentStart) || ua > Da.mostAdvancedSegmentStart ? (Da.mostAdvancedSegmentStart = ua,
                            Da.lastSegmentWasReplacement = !1) : Da.lastSegmentWasReplacement = !0,
                            Da.lastSegmentStart = ua,
                            Da.lastSegmentDurationS = _a.chunk.duration,
                            Da.lastQuality = _a.chunk.quality,
                            Kt(Da, _a.chunk.mediaInfo.type)
                        }
                    }
                }
                function Ea(_a) {
                    if (_a && _a.metric === ae.HTTP_REQUEST && _a.value && _a.value.type === vl.MEDIA_SEGMENT_TYPE && _a.value.trace && _a.value.trace.length) {
                        var Da = ca[_a.mediaType];
                        Da && Da.state !== 0 && (Da.lastSegmentRequestTimeMs = _a.value.trequest.getTime(),
                        Da.lastSegmentFinishTimeMs = _a.value._tfinish.getTime(),
                        Kt(Da, _a.mediaType))
                    }
                }
                function ri(_a) {
                    if (_a) {
                        var Da = ca[_a.mediaType];
                        Da && Da.state !== 0 && (Da.abrQuality = _a.newQuality)
                    }
                }
                function ya(_a) {}
                function Aa(_a, Da, ua, ta) {
                    var ma = _a.getRealBufferLevel();
                    return +(5 * ua[Da].bandwidth / (1e3 * ta)).toFixed(2) > ma - 3
                }
                function wa() {
                    ca = {}
                }
                return ha = {
                    getMaxIndex: function(_a) {
                        var Da = _a.getMediaInfo()
                          , ua = _a.getMediaType()
                          , ta = ei.getReadOnlyMetricsFor(ua)
                          , ma = _a.getStreamProcessor()
                          , ia = _a.getStreamInfo()
                          , na = _a.getAbrController()
                          , va = na.getThroughputHistory()
                          , Sa = (ia && ia.id,
                        ia && ia.manifestInfo && ia.manifestInfo.isDynamic)
                          , Na = _a.useBufferOccupancyABR()
                          , Oa = Ns(qt).create();
                        if (Oa.reason = Oa.reason || {},
                        !Na)
                            return Oa;
                        ma.getScheduleController().setTimeToLoadDelay(0);
                        var Ia = function(il) {
                            var Ol = il.getMediaType()
                              , _l = ca[Ol];
                            return _l || (_l = pa(il),
                            ca[Ol] = _l),
                            _l
                        }(_a);
                        if (Ia.state === 0)
                            return Oa;
                        var Ra = Qe.getCurrentBufferLevel(ta)
                          , ka = va.getAverageThroughput(ua, Sa)
                          , Va = va.getSafeAverageThroughput(ua, Sa)
                          , Ha = va.getAverageLatency(ua)
                          , xa = void 0;
                        if (Oa.reason.state = Ia.state,
                        Oa.reason.throughput = ka,
                        Oa.reason.latency = Ha,
                        isNaN(ka))
                            return Oa;
                        switch (Ia.state) {
                        case 1:
                            xa = na.getQualityForBitrate(Da, .4 * Va, Ha);
                            var sl = _a.getCurrentValue();
                            xa > sl && (xa = sl),
                            Oa.quality = xa,
                            Oa.reason.throughput = Va,
                            Ia.lastQuality = xa,
                            Ia.lastPredictQn = xa,
                            isNaN(Ia.lastSegmentDurationS),
                            !isNaN(Ia.lastSegmentDurationS) && Ra >= 1 * Ia.lastSegmentDurationS && (Ia.state = 2),
                            Pe("【bolaV2 " + ua + "】use throughput qn is " + Da.bitrateList[xa].id);
                            break;
                        case 2:
                            var gl = na.getPlaybackRate()
                              , Ya = na.getRealBufferLevel();
                            xa = function(il, Ol, _l, Ul) {
                                var Yl = 0
                                  , ql = _l.getMediaInfo()
                                  , Ml = _l.getMediaType()
                                  , ul = _l.getAbrController()
                                  , al = ul.getThroughputHistory()
                                  , El = al.getAverageLatency(Ml);
                                if (il > Ul) {
                                    var Tl = al.getMinThroughput(Ml)
                                      , $l = Ol;
                                    Yl = Tl * sa.getFactorByBufferLevel($l),
                                    Pe("【bolaV2 cac " + Ml + "】 min throughput: " + Tl)
                                } else
                                    Yl = al.getSafeAverageThroughput(Ml),
                                    Pe("【bolaV2 cac " + Ml + "】 avg throughput: " + al.getAverageThroughput(Ml));
                                var Qa = ul.getQualityForBitrate(ql, Yl, El)
                                  , Sl = ql.bitrateList;
                                if (Pe("【bolaV2 adjust " + Ml + "】startQn: " + Sl[il].id + ", curQn: " + Sl[Ul].id + ", cache: " + Ol + ", adapter: " + Yl + ", latency: " + El + ", thQn: " + Sl[Qa].id),
                                il > Ul) {
                                    var nu = 3;
                                    Qa < Ul || ul.getHasChangedByABRStrategy(Ml) && ul.getLastQnFragmentCompletedCnts(Ml, Ul) < nu || ul.getRealBufferLevel() < 12 ? Qa < Ul && Aa(ul, Ul, Sl, Yl) ? il = Qa : il = Ul : il = Qa > il ? il : Qa
                                } else {
                                    var ru = al.getDict(Ml)
                                      , ol = 2;
                                    Qa >= Ul || !ru || ru.length < ol ? Aa(ul, Ul, Sl, Yl) && (il = Ul) : Qa > il ? il = Qa : Qa < il && Aa(ul, il, Sl, Yl) && (il = Qa)
                                }
                                return il
                            }(xa = function(il, Ol, _l, Ul, Yl) {
                                var ql = Ol.bitrates.length
                                  , Ml = Math.min(1, _l / il) / Yl
                                  , ul = NaN
                                  , al = NaN
                                  , El = Ol.utilities
                                  , Tl = Ol.gp
                                  , $l = El[El.length - 1];
                                Pe("【bolaV2 getQn " + Ul + "】, efcBuf: " + il + ", curBufLv: " + Ml + ", high: " + $l);
                                for (var Qa = ql - 1; Qa >= 0; Qa--) {
                                    var Sl = Ml;
                                    Qa < Ol.lastQuality && (Sl = Math.min(1, Sl + .1));
                                    var nu = Ol.utilities[Qa]
                                      , ru = ((nu + Tl) / ($l + Tl) - Sl) / nu;
                                    (isNaN(al) || ru >= al) && (al = ru,
                                    ul = Qa)
                                }
                                return ul
                            }(na.getEffectiveBufferTime(), Ia, Ya, ua, gl), Ya / gl, _a, Ia.lastPredictQn),
                            Oa.quality = xa,
                            Oa.reason.throughput = ka,
                            Oa.reason.latency = Ha,
                            Oa.reason.bufferLevel = Ya,
                            Ia.lastQuality = xa,
                            Ia.lastPredictQn = xa,
                            Pe("【bolaV2 " + ua + "】final qn is " + Da.bitrateList[xa].id);
                            break;
                        case 3:
                            xa = na.getQualityForBitrate(Da, .5 * Va, Ha),
                            !isNaN(Ia.lastSegmentDurationS) && Ra >= 1 * Ia.lastSegmentDurationS && (Ia.state = 2),
                            Oa.quality = xa,
                            Oa.reason.throughput = ka,
                            Oa.reason.latency = Ha,
                            Oa.reason.bufferLevel = Ra,
                            Pe("【bolaV2 " + ua + "】seek use throughput qn is " + Da.bitrateList[xa].id);
                            break;
                        default:
                            Pe("BOLA ABR rule invoked in bad state."),
                            Oa.quality = na.getQualityForBitrate(Da, Va, Ha),
                            Oa.reason.state = Ia.state,
                            Oa.reason.throughput = Va,
                            Oa.reason.latency = Ha,
                            Ia.state = 1,
                            ti(Ia)
                        }
                        return Oa
                    },
                    reset: function() {
                        wa(),
                        la.off(bt.PLAYBACK_xING, ra, ha),
                        la.off(bt.PERIOD_SWITCH_STARTED, ni, ha),
                        la.off(bt.MEDIA_FRAGMENT_LOADED, oi, ha),
                        la.off(bt.METRIC_ADDED, Ea, ha),
                        la.off(bt.QUALITY_CHANGE_REQUESTED, ri, ha),
                        la.off(bt.FRAGMENT_LOADING_ABANDONED, ya, ha)
                    }
                },
                wa(),
                la.on(bt.PLAYBACK_SEEKING, ra, ha),
                la.on(bt.PERIOD_SWITCH_STARTED, ni, ha),
                la.on(bt.MEDIA_FRAGMENT_LOADED, oi, ha),
                la.on(bt.METRIC_ADDED, Ea, ha),
                la.on(bt.QUALITY_CHANGE_REQUESTED, ri, ha),
                la.on(bt.FRAGMENT_LOADING_ABANDONED, ya, ha),
                ha
            }
            Xl.__dashjs_factory_name = "BolaRuleV2";
            var uu = $.a.getClassFactory(Xl)
              , tu = "qualitySwitchRules"
              , Ps = "abandonFragmentRules";
            function $s(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = xe.mediaPlayerModel
                  , Qe = xe.metricsModel
                  , ei = xe.dashMetrics
                  , sa = void 0
                  , la = void 0;
                function ha(pa) {
                    return pa.filter(function(ti) {
                        return ti.quality > Ns.NO_CHANGE
                    })
                }
                function ca(pa) {
                    var ti, ra = {}, ni = void 0, Kt = void 0, oi = void 0, Ea = void 0;
                    if (pa.length !== 0) {
                        for (ra[Ns.PRIORITY.STRONG] = Ns.NO_CHANGE,
                        ra[Ns.PRIORITY.WEAK] = Ns.NO_CHANGE,
                        ra[Ns.PRIORITY.DEFAULT] = Ns.NO_CHANGE,
                        ni = 0,
                        ti = pa.length; ni < ti; ni += 1)
                            (Kt = pa[ni]).quality !== Ns.NO_CHANGE && (ra[Kt.priority] = ra[Kt.priority] > Ns.NO_CHANGE ? Math.min(ra[Kt.priority], Kt.quality) : Kt.quality);
                        return ra[Ns.PRIORITY.WEAK] !== Ns.NO_CHANGE && (oi = ra[Ns.PRIORITY.WEAK]),
                        ra[Ns.PRIORITY.DEFAULT] !== Ns.NO_CHANGE && (oi = ra[Ns.PRIORITY.DEFAULT]),
                        ra[Ns.PRIORITY.STRONG] !== Ns.NO_CHANGE && (oi = ra[Ns.PRIORITY.STRONG]),
                        oi !== Ns.NO_CHANGE && (Ea = oi),
                        Ns(qt).create(Ea)
                    }
                }
                return {
                    initialize: function() {
                        sa = [],
                        la = [],
                        Pe.getUseDefaultABRRules() && (sa.push(uu(qt).create({
                            metricsModel: Qe,
                            dashMetrics: ei,
                            mediaPlayerModel: Pe
                        })),
                        sa.push(el(qt).create({
                            metricsModel: Qe,
                            dashMetrics: ei
                        }))),
                        Pe.getABRCustomRules().forEach(function(pa) {
                            pa.type === tu && sa.push(pa.rule(qt).create()),
                            pa.type === Ps && la.push(pa.rule(qt).create())
                        })
                    },
                    reset: function() {
                        [sa, la].forEach(function(pa) {
                            pa && pa.length && pa.forEach(function(ti) {
                                return ti.reset && ti.reset()
                            })
                        }),
                        sa = [],
                        la = []
                    },
                    getMaxQuality: function(pa) {
                        return ca(ha(sa.map(function(ti) {
                            return ti.getMaxIndex(pa)
                        }))) || Ns(qt).create()
                    },
                    shouldAbandonFragment: function(pa) {
                        return ca(ha(la.map(function(ti) {
                            return ti.shouldAbandon(pa)
                        }))) || Ns(qt).create()
                    }
                }
            }
            $s.__dashjs_factory_name = "ABRRulesCollection";
            var nl = $.a.getClassFactory($s);
            nl.QUALITY_SWITCH_RULES = tu,
            nl.ABANDON_FRAGMENT_RULES = Ps,
            $.a.updateSingletonFactory($s.__dashjs_factory_name, nl);
            var Ll = nl
              , Nl = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.mediaType = null,
                this.bitrate = null,
                this.width = null,
                this.height = null,
                this.scanType = null,
                this.qualityIndex = NaN,
                this.id = ""
            };
            function Gl(xe) {
                var qt = (xe = xe || {}).abrController
                  , Pe = xe.streamProcessor
                  , Qe = xe.streamProcessor.getCurrentRepresentationInfo()
                  , ei = xe.switchHistory
                  , sa = xe.droppedFramesHistory
                  , la = xe.currentRequest
                  , ha = xe.useBufferOccupancyABR
                  , ca = xe.currentValue;
                return {
                    getMediaType: function() {
                        return Qe.mediaInfo.type
                    },
                    getMediaInfo: function() {
                        return Qe.mediaInfo
                    },
                    getDroppedFramesHistory: function() {
                        return sa
                    },
                    getCurrentRequest: function() {
                        return la
                    },
                    getSwitchHistory: function() {
                        return ei
                    },
                    getStreamInfo: function() {
                        return Qe.mediaInfo.streamInfo
                    },
                    getStreamProcessor: function() {
                        return Pe
                    },
                    getAbrController: function() {
                        return qt
                    },
                    getRepresentationInfo: function() {
                        return Qe
                    },
                    useBufferOccupancyABR: function() {
                        return ha
                    },
                    getCurrentValue: function() {
                        return ca
                    }
                }
            }
            Gl.__dashjs_factory_name = "RulesContext";
            var vu = $.a.getClassFactory(Gl);
            function Cu() {
                var xe = []
                  , qt = [];
                return {
                    push: function(Pe) {
                        Pe.newValue === Ns.NO_CHANGE && (Pe.newValue = Pe.oldValue),
                        xe[Pe.oldValue] || (xe[Pe.oldValue] = {
                            noDrops: 0,
                            drops: 0,
                            dropSize: 0
                        });
                        var Qe = Pe.newValue - Pe.oldValue
                          , ei = Qe < 0 ? 1 : 0
                          , sa = ei ? -Qe : 0
                          , la = ei ? 0 : 1;
                        if (xe[Pe.oldValue].drops += ei,
                        xe[Pe.oldValue].dropSize += sa,
                        xe[Pe.oldValue].noDrops += la,
                        qt.push({
                            idx: Pe.oldValue,
                            noDrop: la,
                            drop: ei,
                            dropSize: sa
                        }),
                        qt.length > 8) {
                            var ha = qt.shift();
                            xe[ha.idx].drops -= ha.drop,
                            xe[ha.idx].dropSize -= ha.dropSize,
                            xe[ha.idx].noDrops -= ha.noDrop
                        }
                    },
                    getSwitchRequests: function() {
                        return xe
                    },
                    reset: function() {
                        xe = [],
                        qt = []
                    }
                }
            }
            Cu.__dashjs_factory_name = "SwitchRequestHistory";
            var Ru = $.a.getClassFactory(Cu);
            function Yu() {
                var xe = []
                  , qt = 0
                  , Pe = 0;
                return {
                    push: function(Qe, ei) {
                        var sa = ei && ei.droppedVideoFrames ? ei.droppedVideoFrames : 0
                          , la = ei && ei.totalVideoFrames ? ei.totalVideoFrames : 0
                          , ha = sa - qt;
                        qt = sa;
                        var ca = la - Pe;
                        Pe = la,
                        isNaN(Qe) || (xe[Qe] ? (xe[Qe].droppedVideoFrames += ha,
                        xe[Qe].totalVideoFrames += ca) : xe[Qe] = {
                            droppedVideoFrames: ha,
                            totalVideoFrames: ca
                        })
                    },
                    getFrameHistory: function() {
                        return xe
                    },
                    getFrameInfo: function() {
                        return {
                            droppedFrames: qt,
                            totalFrames: Pe
                        }
                    },
                    reset: function(Qe) {
                        xe = [],
                        qt = Qe.droppedVideoFrames,
                        Pe = Qe.totalVideoFrames
                    }
                }
            }
            Yu.__dashjs_factory_name = "DroppedFramesHistory";
            var nd = $.a.getClassFactory(Yu);
            function qu(xe) {
                var qt = (xe = xe || {}).mediaPlayerModel
                  , Pe = void 0
                  , Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0;
                function ha(Kt, oi, Ea, ri) {
                    var ya = Math.pow(.5, Ea / ri.fast);
                    Kt.fastEstimate = (1 - ya) * oi + ya * Kt.fastEstimate;
                    var Aa = Math.pow(.5, Ea / ri.slow);
                    Kt.slowEstimate = (1 - Aa) * oi + Aa * Kt.slowEstimate,
                    Kt.totalWeight += Ea
                }
                function ca(Kt, oi, Ea) {
                    return qt.getMovingAverageMethod() !== ie.MOVING_AVERAGE_SLIDING_WINDOW ? function(ri, ya) {
                        var Aa = ri ? la.throughputHalfLife : la.latencyHalfLife
                          , wa = ri ? ei[ya] : sa[ya];
                        if (!wa || wa.totalWeight <= 0)
                            return NaN;
                        var _a = wa.fastEstimate / (1 - Math.pow(.5, wa.totalWeight / Aa.fast))
                          , Da = wa.slowEstimate / (1 - Math.pow(.5, wa.totalWeight / Aa.slow));
                        return ri ? Math.min(_a, Da) : Math.max(_a, Da)
                    }(Kt, oi) : function(ri, ya, Aa) {
                        var wa = function(Da, ua, ta) {
                            var ma = void 0
                              , ia = void 0;
                            if (Da ? (ma = Pe[ua],
                            ia = ta ? 3 : 4) : (ma = Qe[ua],
                            ia = 4),
                            ma) {
                                if (ia >= ma.length)
                                    ia = ma.length;
                                else if (Da)
                                    for (var na = 1; na < ia; ++na) {
                                        var va = ma[na] / ma[na - 1];
                                        if ((va >= 1.3 || va <= .7692307692307692) && (ia += 1) === ma.length)
                                            break
                                    }
                            } else
                                ia = 0;
                            return ia
                        }(ri, ya, Aa)
                          , _a = (ri ? Pe : Qe)[ya];
                        return wa === 0 || !_a || _a.length === 0 ? NaN : (_a = _a.slice(-wa)).reduce(function(Da, ua) {
                            return Da + ua
                        }) / _a.length
                    }(Kt, oi, Ea)
                }
                function pa(Kt, oi) {
                    return ca(!0, Kt, oi)
                }
                function ti(Kt) {
                    Pe[Kt] = Pe[Kt] || [],
                    Qe[Kt] = Qe[Kt] || [],
                    ei[Kt] = ei[Kt] || {
                        fastEstimate: 0,
                        slowEstimate: 0,
                        totalWeight: 0
                    },
                    sa[Kt] = sa[Kt] || {
                        fastEstimate: 0,
                        slowEstimate: 0,
                        totalWeight: 0
                    }
                }
                function ra() {
                    Pe = {},
                    Qe = {},
                    ei = {},
                    sa = {}
                }
                var ni = {
                    push: function(Kt, oi, Ea) {
                        if (oi.trace && oi.trace.length) {
                            var ri = oi.tresponse.getTime() - oi.trequest.getTime() || 1
                              , ya = oi._tfinish.getTime() - oi.tresponse.getTime() || 1
                              , Aa = oi.trace.reduce(function(Da, ua) {
                                return Da + ua.b[0]
                            }, 0)
                              , wa = ri + ya
                              , _a = Math.round(8 * Aa / wa);
                            if (!(Aa < 1e4)) {
                                if (ti(Kt),
                                function(Da, ua, ta) {
                                    return Da === ie.VIDEO ? ta + ua < qt.getCacheLoadThresholdForType(ie.VIDEO) : Da === ie.AUDIO ? ta + ua < qt.getCacheLoadThresholdForType(ie.AUDIO) : void 0
                                }(Kt, ri, ya)) {
                                    if (Pe[Kt].length > 0 && !Pe[Kt].hasCachedEntries)
                                        return;
                                    Pe[Kt].hasCachedEntries = !0
                                } else
                                    Pe[Kt] && Pe[Kt].hasCachedEntries && function(Da) {
                                        delete Pe[Da],
                                        delete Qe[Da],
                                        delete ei[Da],
                                        delete sa[Da],
                                        ti(Da)
                                    }(Kt);
                                _a > 9900 && (_a = 9900),
                                Pe[Kt].push(_a),
                                Pe[Kt].length > 5 && Pe[Kt].shift(),
                                Qe[Kt].push(ri),
                                Qe[Kt].length > 5 && Qe[Kt].shift(),
                                ha(ei[Kt], _a, .001 * ya, la.throughputHalfLife),
                                ha(sa[Kt], ri, 1, la.latencyHalfLife)
                            }
                        }
                    },
                    getAverageThroughput: pa,
                    getSafeAverageThroughput: function(Kt, oi) {
                        var Ea = pa(Kt, oi);
                        return isNaN(Ea) || (Ea *= qt.getBandwidthSafetyFactor()),
                        Ea
                    },
                    getAverageLatency: function(Kt) {
                        return ca(!1, Kt)
                    },
                    getMinThroughput: function(Kt) {
                        return Math.min.apply(Math, function(oi) {
                            if (Array.isArray(oi)) {
                                for (var Ea = 0, ri = Array(oi.length); Ea < oi.length; Ea++)
                                    ri[Ea] = oi[Ea];
                                return ri
                            }
                            return Array.from(oi)
                        }(Pe[Kt]))
                    },
                    getDict: function(Kt) {
                        return {
                            throughput: Pe[Kt],
                            latency: Qe[Kt]
                        }
                    },
                    onProgress: function(Kt, oi) {
                        if (!oi.requestStartDate && !oi.p2pLoadInfo || Kt !== "video")
                            return !1;
                        var Ea = new Date().getTime()
                          , ri = null;
                        if (oi.headersReceivedDate ? ri = oi.headersReceivedDate.getTime() : oi.p2pLoadInfo.requestStartTime && (ri = oi.p2pLoadInfo.requestStartTime.getTime()),
                        ri) {
                            var ya = Ea - ri || 1
                              , Aa = null;
                            oi.headersReceivedDate && oi.requestStartDate && (Aa = oi.headersReceivedDate.getTime() - oi.requestStartDate.getTime());
                            var wa = ya
                              , _a = oi.bytesLoaded;
                            if (_a < 76100)
                                return !1;
                            oi.lastByte = _a;
                            var Da = Math.round(8 * _a / wa);
                            return oi.p2pLoadInfo && oi.p2pLoadInfo.requestStartTime,
                            ti(Kt),
                            typeof Aa != "number" || isNaN(Aa) || (Qe[Kt].push(Aa),
                            Qe[Kt].length > 5 && Qe[Kt].shift()),
                            Da > 9900 && (Da = 9900),
                            Pe[Kt].push(Da),
                            Pe[Kt].length > 5 && Pe[Kt].shift(),
                            ha(ei[Kt], Da, .001 * ya, la.throughputHalfLife),
                            !0
                        }
                    },
                    reset: ra
                };
                return la = {
                    throughputHalfLife: {
                        fast: 3,
                        slow: 8
                    },
                    latencyHalfLife: {
                        fast: 1,
                        slow: 2
                    }
                },
                ra(),
                ni
            }
            qu.__dashjs_factory_name = "ThroughputHistory";
            var ml = $.a.getClassFactory(qu)
              , Fa = "abandonload"
              , Za = "allowload";
            function $a() {
                var xe = this.context
                  , qt = aa(xe).getInstance()
                  , Pe = Re(xe).getInstance()
                  , Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0
                  , ra = void 0
                  , ni = void 0
                  , Kt = void 0
                  , oi = void 0
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = void 0
                  , wa = void 0
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0
                  , Na = void 0
                  , Oa = void 0
                  , Ia = void 0
                  , Ra = void 0
                  , ka = void 0
                  , Va = void 0
                  , Ha = void 0
                  , xa = {
                    video: 0,
                    audio: 0
                }
                  , sl = {
                    video: {},
                    audio: {}
                };
                function gl(Ma) {
                    var xs = Ma.request.mediaType;
                    Ma.request.type === "MediaSegment" && xs === "video" && Na.onProgress(xs, Ma.request, Ma.response)
                }
                function Ya(Ma) {
                    Ma || (ha = {
                        video: !0,
                        audio: !0
                    }),
                    ca = {},
                    pa = {},
                    ti = {},
                    ra = {},
                    Kt = {},
                    ni = {},
                    va = {},
                    Oa = {},
                    Ea = !1,
                    ka = !0,
                    ri = !1,
                    ya === void 0 && (ya = !1),
                    na = void 0,
                    Sa = void 0,
                    Na = void 0,
                    clearTimeout(oi),
                    oi = null,
                    Va = {
                        video: !1,
                        audio: !1
                    }
                }
                function il(Ma) {
                    Ma.mediaType === ie.VIDEO && (na = Ma.oldQuality,
                    Sa.push(na, ta.getPlaybackQuality()))
                }
                function Ol(Ma) {
                    Ma.metric !== ae.HTTP_REQUEST || !Ma.value || Ma.value.type !== vl.MEDIA_SEGMENT_TYPE || Ma.mediaType !== ie.AUDIO && Ma.mediaType !== ie.VIDEO || Na.push(Ma.mediaType, Ma.value, ka),
                    Ma.metric !== ae.BUFFER_LEVEL || Ma.mediaType !== ie.AUDIO && Ma.mediaType !== ie.VIDEO || function(xs, fl) {
                        var bl = ma.getABRStrategy();
                        if (bl === ie.ABR_STRATEGY_BOLA)
                            return void (Oa[xs] = !0);
                        if (bl === ie.ABR_STRATEGY_THROUGHPUT)
                            return void (Oa[xs] = !1);
                        var Cl = ma.getStableBufferTime()
                          , xl = Cl
                          , Zl = .5 * Cl
                          , hu = Oa[xs]
                          , Au = fl > (hu ? Zl : xl);
                        Oa[xs] = Au,
                        Au !== hu && ei(Au ? "AbrController (" + xs + ") switching from throughput to buffer occupancy ABR rule (buffer: " + fl.toFixed(3) + ")." : "AbrController (" + xs + ") switching from buffer occupancy to throughput ABR rule (buffer: " + fl.toFixed(3) + ").")
                    }(Ma.mediaType, .001 * Ma.value.level)
                }
                function _l(Ma, xs) {
                    return ca[xs] = ca[xs] || {},
                    ca[xs].hasOwnProperty(Ma) || (ca[xs][Ma] = 0),
                    function(fl, bl) {
                        if (bl !== ie.VIDEO || !Ea || !ni[bl])
                            return fl;
                        ya || ol();
                        var Cl = _a.getValue()
                          , xl = Da.getAdaptationForType(Cl, 0, bl).Representation
                          , Zl = fl;
                        if (Aa > 0 && wa > 0) {
                            for (; Zl > 0 && xl[Zl] && Aa < xl[Zl].width && Aa - xl[Zl - 1].width < xl[Zl].width - Aa; )
                                Zl -= 1;
                            xl.length - 2 >= Zl && xl[Zl].width === xl[Zl + 1].width && (Zl = Math.min(fl, Zl + 1))
                        }
                        return Zl
                    }(function(fl, bl, Cl) {
                        var xl = ul(bl);
                        return isNaN(xl) || xl >= 1 || xl < 0 ? fl : Math.min(fl, Math.round(Cl * xl))
                    }(function(fl, bl) {
                        var Cl = fl;
                        if (!ni[bl])
                            return Cl;
                        var xl = Ml(bl);
                        xl !== void 0 && (Cl = Math.max(fl, xl));
                        var Zl = ql(bl);
                        return Zl !== void 0 && (Cl = Math.min(Cl, Zl)),
                        Cl
                    }(ca[xs][Ma], Ma), Ma, ca[xs][Ma]), Ma)
                }
                function Ul(Ma) {
                    return ti.hasOwnProperty("max") && ti.max.hasOwnProperty(Ma) ? ti.max[Ma] : NaN
                }
                function Yl(Ma) {
                    return ti.hasOwnProperty("min") && ti.min.hasOwnProperty(Ma) ? ti.min[Ma] : NaN
                }
                function ql(Ma) {
                    var xs = Ul(Ma);
                    return xs ? Qa(ni[Ma].getMediaInfo(), xs) : void 0
                }
                function Ml(Ma) {
                    var xs = Yl(Ma);
                    if (xs) {
                        var fl = Sl(ni[Ma].getMediaInfo())
                          , bl = Qa(ni[Ma].getMediaInfo(), xs);
                        return fl[bl] && bl < fl.length - 1 && fl[bl].bitrate < 1e3 * xs && bl++,
                        bl
                    }
                }
                function ul(Ma) {
                    return ra.hasOwnProperty("max") && ra.max.hasOwnProperty(Ma) ? ra.max[Ma] : 1
                }
                function al(Ma) {
                    return ha[Ma]
                }
                function El(Ma, xs, fl, bl) {
                    var Cl = xs.id
                      , xl = ru(Ma);
                    if (!(fl !== null && !isNaN(fl) && fl % 1 == 0))
                        throw new Error("argument is not an integer");
                    var Zl = _l(Ma, Cl);
                    fl !== xl && fl >= 0 && fl <= Zl && Tl(Ma, xl, fl, Zl, bl)
                }
                function Tl(Ma, xs, fl, bl, Cl) {
                    if (Ma && ni[Ma]) {
                        var xl = ni[Ma].getStreamInfo()
                          , Zl = xl ? xl.id : null;
                        if (qt.getABRLogVisible()) {
                            var hu = Ra.getCurrentBufferLevel(Ia.getReadOnlyMetricsFor(Ma));
                            ei("AbrController (" + Ma + ") switch from " + xs + " to " + fl + "/" + bl + " (buffer: " + hu + ") " + (Cl ? JSON.stringify(Cl) : "."))
                        }
                        (function(Au, wu, xu) {
                            pa[wu] = pa[wu] || {},
                            pa[wu][Au] = xu
                        }
                        )(Ma, Zl, fl),
                        Pe.trigger(bt.QUALITY_CHANGE_REQUESTED, {
                            mediaType: Ma,
                            streamInfo: xl,
                            oldQuality: xs,
                            newQuality: fl,
                            reason: Cl
                        })
                    }
                }
                function $l(Ma, xs) {
                    Kt[Ma].state = xs,
                    Kt[Ma].time = xs === Fa ? performance.now() : NaN
                }
                function Qa(Ma, xs, fl) {
                    if (ka && fl && ni[Ma.type].getCurrentRepresentationInfo() && ni[Ma.type].getCurrentRepresentationInfo().fragmentDuration) {
                        fl /= 1e3;
                        var bl = ni[Ma.type].getCurrentRepresentationInfo().fragmentDuration;
                        if (fl > bl)
                            return 0;
                        xs *= 1 - fl / bl
                    }
                    var Cl = Sl(Ma);
                    if (!Cl || Cl.length === 0)
                        return 0;
                    for (var xl = Cl.length - 1; xl >= 0; xl--)
                        if (1e3 * xs >= Cl[xl].bitrate)
                            return xl;
                    return 0
                }
                function Sl(Ma) {
                    if (!Ma || !Ma.bitrateList)
                        return null;
                    for (var xs = Ma.bitrateList, fl = Ma.type, bl = [], Cl = void 0, xl = 0, Zl = xs.length; xl < Zl; xl++)
                        (Cl = new Nl).mediaType = fl,
                        Cl.qualityIndex = xl,
                        Cl.id = xs[xl].id,
                        Cl.bitrate = xs[xl].bandwidth,
                        Cl.width = xs[xl].width,
                        Cl.height = xs[xl].height,
                        Cl.scanType = xs[xl].scanType,
                        bl.push(Cl);
                    return bl
                }
                function nu(Ma) {
                    return Oa[Ma]
                }
                function ru(Ma) {
                    if (Ma && ni[Ma]) {
                        var xs = ni[Ma].getStreamInfo()
                          , fl = xs ? xs.id : null;
                        if (fl)
                            return pa[fl] = pa[fl] || {},
                            pa[fl].hasOwnProperty(Ma) || (pa[fl][Ma] = Kl(Ma, !1) || 0),
                            pa[fl][Ma]
                    }
                    return 0
                }
                function ol() {
                    if (ta) {
                        var Ma = ri && window.hasOwnProperty("devicePixelRatio") ? window.devicePixelRatio : 1;
                        Aa = ta.getClientWidth() * Ma,
                        wa = ta.getClientHeight() * Ma
                    }
                }
                function cl(Ma) {
                    var xs = Ma.request.mediaType;
                    if (al(xs)) {
                        var fl = ni[xs];
                        if (!fl)
                            return;
                        var bl = vu(xe).create({
                            abrController: Qe,
                            streamProcessor: fl,
                            currentRequest: Ma.request,
                            useBufferOccupancyABR: nu(xs)
                        })
                          , Cl = sa.shouldAbandonFragment(bl);
                        if (Cl.quality > Ns.NO_CHANGE) {
                            var xl = fl.getFragmentModel();
                            xl.getRequests({
                                state: ga.FRAGMENT_MODEL_LOADING,
                                index: Ma.request.index
                            })[0] && (xl.abortRequests(),
                            $l(xs, Fa),
                            va[xs].reset(),
                            va[xs].push({
                                oldValue: ru(xs, la.getActiveStreamInfo()),
                                newValue: Cl.quality,
                                confidence: 1,
                                reason: Cl.reason
                            }),
                            El(xs, la.getActiveStreamInfo(), Cl.quality, Cl.reason),
                            clearTimeout(oi),
                            oi = setTimeout(function() {
                                $l(xs, Za),
                                oi = null
                            }, ma.getAbandonLoadTimeout()))
                        }
                    }
                }
                function Kl(Ma) {
                    var xs = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
                    if (xs) {
                        var fl = ma.getPreloadData();
                        if (fl && fl[Ma + "id"])
                            return ni[Ma].getRepresentationController().getQualityForRepresentationId(fl[Ma + "id"])
                    }
                    return xa[Ma] || 0
                }
                return Qe = {
                    isPlayingAtTopQuality: function(Ma) {
                        var xs = Ma.id
                          , fl = ru(ie.AUDIO)
                          , bl = ru(ie.VIDEO);
                        return fl === _l(ie.AUDIO, xs) && bl === _l(ie.VIDEO, xs)
                    },
                    updateTopQualityIndex: function(Ma) {
                        var xs = Ma.type
                          , fl = Ma.streamInfo.id
                          , bl = Ma.representationCount - 1;
                        return function(Cl, xl, Zl) {
                            ca[xl] = ca[xl] || {},
                            ca[xl][Cl] = Zl
                        }(xs, fl, bl),
                        bl
                    },
                    getThroughputHistory: function() {
                        return Na
                    },
                    getBitrateList: Sl,
                    getQualityForBitrate: Qa,
                    getMaxAllowedBitrateFor: Ul,
                    getTopBitrateInfoFor: function(Ma) {
                        if (Ma && ni && ni[Ma]) {
                            var xs = ni[Ma].getStreamInfo();
                            if (xs.id) {
                                var fl = _l(Ma, xs.id)
                                  , bl = Sl(ni[Ma].getMediaInfo());
                                return bl[fl] ? bl[fl] : null
                            }
                        }
                        return null
                    },
                    getMinAllowedBitrateFor: Yl,
                    setMaxAllowedBitrateFor: function(Ma, xs) {
                        ti.max = ti.max || {},
                        ti.max[Ma] = xs
                    },
                    setMinAllowedBitrateFor: function(Ma, xs) {
                        ti.min = ti.min || {},
                        ti.min[Ma] = xs
                    },
                    getMaxAllowedIndexFor: ql,
                    getMinAllowedIndexFor: Ml,
                    getMaxAllowedRepresentationRatioFor: ul,
                    setMaxAllowedRepresentationRatioFor: function(Ma, xs) {
                        ra.max = ra.max || {},
                        ra.max[Ma] = xs
                    },
                    getInitialBitrateFor: function(Ma) {
                        var xs = ia.getSavedBitrateSettings(Ma);
                        if (!ti.hasOwnProperty(Ma))
                            if (ra.hasOwnProperty(Ma)) {
                                var fl = _a.getValue()
                                  , bl = Da.getAdaptationForType(fl, 0, Ma).Representation;
                                if (Array.isArray(bl)) {
                                    var Cl = Math.max(Math.round(bl.length * ra[Ma]) - 1, 0);
                                    ti[Ma] = bl[Cl].bandwidth
                                } else
                                    ti[Ma] = 0
                            } else
                                isNaN(xs) ? ti[Ma] = Ma === ie.VIDEO ? 1e3 : 100 : ti[Ma] = xs;
                        return ti[Ma]
                    },
                    setInitialBitrateFor: function(Ma, xs) {
                        ti[Ma] = xs
                    },
                    getInitialRepresentationRatioFor: function(Ma) {
                        return ra.hasOwnProperty(Ma) ? ra[Ma] : null
                    },
                    setInitialRepresentationRatioFor: function(Ma, xs) {
                        ra[Ma] = xs
                    },
                    setAutoSwitchBitrateFor: function(Ma, xs) {
                        ha[Ma] = xs
                    },
                    getAutoSwitchBitrateFor: al,
                    getUseDeadTimeLatency: function() {
                        return ka
                    },
                    setUseDeadTimeLatency: function(Ma) {
                        ka = Ma
                    },
                    setLimitBitrateByPortal: function(Ma) {
                        Ea = Ma
                    },
                    getLimitBitrateByPortal: function() {
                        return Ea
                    },
                    getUsePixelRatioInLimitBitrateByPortal: function() {
                        return ri
                    },
                    setUsePixelRatioInLimitBitrateByPortal: function(Ma) {
                        ri = Ma
                    },
                    getQualityFor: ru,
                    getAbandonmentStateFor: function(Ma) {
                        return Kt[Ma] ? Kt[Ma].state : null
                    },
                    setPlaybackQuality: El,
                    checkPlaybackQuality: function(Ma) {
                        if (Ma && ni && ni[Ma]) {
                            var xs = ni[Ma].getStreamInfo()
                              , fl = xs ? xs.id : null
                              , bl = ru(Ma)
                              , Cl = vu(xe).create({
                                abrController: Qe,
                                streamProcessor: ni[Ma],
                                currentValue: bl,
                                switchHistory: va[Ma],
                                droppedFramesHistory: Sa,
                                useBufferOccupancyABR: nu(Ma)
                            });
                            if (Sa) {
                                var xl = ta.getPlaybackQuality();
                                xl && Sa.push(na, xl)
                            }
                            if (al(Ma)) {
                                var Zl = Ml(Ma)
                                  , hu = _l(Ma, fl)
                                  , Au = sa.getMaxQuality(Cl)
                                  , wu = Au.quality;
                                if (Zl !== void 0 && wu < Zl && (wu = Zl),
                                wu > hu && (wu = hu),
                                va[Ma].push({
                                    oldValue: bl,
                                    newValue: wu
                                }),
                                wu > Ns.NO_CHANGE && wu != bl) {
                                    if (Kt[Ma].state === Za || wu > bl)
                                        return Va[Ma] = !0,
                                        Tl(Ma, bl, wu, hu, Au.reason),
                                        !0
                                } else if (qt.getABRLogVisible()) {
                                    var xu = Ra.getCurrentBufferLevel(Ia.getReadOnlyMetricsFor(Ma));
                                    ei("AbrController (" + Ma + ") stay on " + bl + "/" + hu + " (buffer: " + xu + ")")
                                }
                            }
                        }
                        return !1
                    },
                    getTopQualityIndexFor: _l,
                    setElementSize: ol,
                    setWindowResizeEventCalled: function(Ma) {
                        ya = Ma
                    },
                    createAbrRulesCollection: function() {
                        (sa = Ll(xe).create({
                            metricsModel: Ia,
                            dashMetrics: Ra,
                            mediaPlayerModel: ma,
                            videoModel: ta,
                            adapter: ua
                        })).initialize()
                    },
                    registerStreamType: function(Ma, xs) {
                        va[Ma] = Ru(xe).create(),
                        ni[Ma] = xs,
                        Kt[Ma] = Kt[Ma] || {},
                        Kt[Ma].state = Za,
                        Oa[Ma] = !1,
                        Pe.on(bt.LOADING_PROGRESS, cl, this),
                        Pe.on(bt.FRAGMENT_LOADING_PROGRESS, gl, this),
                        Ma == ie.VIDEO && (Pe.on(bt.QUALITY_CHANGE_RENDERED, il, this),
                        Sa = nd(xe).create()),
                        Pe.on(bt.METRIC_ADDED, Ol, this),
                        Na = ml(xe).create({
                            mediaPlayerModel: ma
                        })
                    },
                    unRegisterStreamType: function(Ma) {
                        delete ni[Ma]
                    },
                    setDefaultQualityFor: function(Ma, xs) {
                        xa[Ma] = Number(xs) || 0,
                        ei("Set default quality for " + Ma + " - " + xa[Ma])
                    },
                    getDefaultQualityFor: Kl,
                    getDroppedFramesInfo: function() {
                        return Sa && Sa.getFrameInfo && Sa.getFrameInfo() || {}
                    },
                    setCurrentSegmentInfoFor: function(Ma, xs) {
                        sl[Ma] = xs
                    },
                    getCurrentSegmentInfoFor: function(Ma) {
                        return sl[Ma]
                    },
                    getInitializeDate: function() {
                        return Ha
                    },
                    getHasChangedByABRStrategy: function(Ma) {
                        return Va[Ma]
                    },
                    setConfig: function(Ma) {
                        Ma && (Ma.streamController && (la = Ma.streamController),
                        Ma.domStorage && (ia = Ma.domStorage),
                        Ma.mediaPlayerModel && (ma = Ma.mediaPlayerModel),
                        Ma.metricsModel && (Ia = Ma.metricsModel),
                        Ma.dashMetrics && (Ra = Ma.dashMetrics),
                        Ma.dashManifestModel && (Da = Ma.dashManifestModel),
                        Ma.adapter && (ua = Ma.adapter),
                        Ma.manifestModel && (_a = Ma.manifestModel),
                        Ma.videoModel && (ta = Ma.videoModel),
                        Ma.initializeDate && (Ha = Ma.initializeDate))
                    },
                    getLastQnFragmentCompletedCnts: function(Ma, xs) {
                        var fl = ni[Ma];
                        return fl ? fl.getFragmentModel().getLastQnFragmentCompletedCnts(xs) : 0
                    },
                    getEffectiveBufferTime: function() {
                        var Ma = ma.getStableBufferTime()
                          , xs = ta.getTime()
                          , fl = ta.getDuration() - xs
                          , bl = 0
                          , Cl = new Date().getTime()
                          , xl = ma.getLastStartSeekTime()
                          , Zl = ma.getStartPlaybackTime()
                          , hu = (Cl - Math.max(xl, Zl)) / 1e3;
                        return bl = hu < 10 ? Math.min(10, Ma) : Math.min(Math.min(fl, hu), Ma),
                        ei("【bolaV2 getEfc】max: " + Ma + ", curTime: " + xs + ",playTime: " + hu + ", lseek: " + xl),
                        bl
                    },
                    getPlaybackRate: function() {
                        return ta.getPlaybackRate() || 1
                    },
                    reset: function() {
                        Ya(!0),
                        Pe.off(bt.LOADING_PROGRESS, cl, this),
                        Pe.off(bt.FRAGMENT_LOADING_PROGRESS, gl, this),
                        Pe.off(bt.QUALITY_CHANGE_RENDERED, il, this),
                        Pe.off(bt.METRIC_ADDED, Ol, this),
                        sa && sa.reset()
                    },
                    shouldAbandon: function(Ma, xs) {
                        var fl = Ma.retry
                          , bl = Ma.retryTimes
                          , Cl = Ma.bytesTotal
                          , xl = Ma.bytesLoaded;
                        return fl > 0 || bl > 0 || +((Cl - xl) / (1e3 * Na.getSafeAverageThroughput(xs, !1))).toFixed(2) > Ra.getCurrentBufferLevel(Ia.getReadOnlyMetricsFor(xs)) - 5
                    },
                    getRealBufferLevel: function() {
                        var Ma = ta.getVideoBufferRanges();
                        if (!Ma || Ma.length <= 0)
                            return 0;
                        var xs = ta.getTime();
                        return Ma[Ma.length - 1].end - xs || 0
                    }
                },
                ei = qt.log.bind(Qe),
                Ya(),
                Qe
            }
            $a.__dashjs_factory_name = "AbrController";
            var ja = $.a.getSingletonFactory($a);
            ja.ABANDON_LOAD = Fa,
            ja.QUALITY_DEFAULT = 0,
            $.a.updateSingletonFactory($a.__dashjs_factory_name, ja);
            var Ba = ja
              , rl = "neverReplace"
              , Xa = "alwaysReplace"
              , Cs = "highestBitrate"
              , yl = "widestRange"
              , hl = Cs;
            function ll() {
                var xe, qt = this.context, Pe = aa(qt).getInstance().log, Qe = Re(qt).getInstance(), ei = void 0, sa = void 0, la = void 0, ha = void 0, ca = void 0, pa = [Xa, rl], ti = [Cs, yl], ra = {
                    video: 0,
                    audio: 0
                };
                function ni(ta, ma) {
                    if (!ta || !ma)
                        return [];
                    var ia = ma.id;
                    return ei[ia] && ei[ia][ta] ? ei[ia][ta].list : []
                }
                function Kt(ta, ma) {
                    return !ta || !ma || ma && !ei[ma.id] ? null : ei[ma.id][ta].current
                }
                function oi(ta) {
                    if (ta) {
                        var ma = ta.type
                          , ia = ta.streamInfo
                          , na = ia.id
                          , va = Kt(ma, ia);
                        if (ei[na] && ei[na][ma] && (!va || !wa(ta, va))) {
                            ei[na][ma].current = ta,
                            va && Qe.trigger(bt.CURRENT_TRACK_CHANGED, {
                                oldMediaInfo: va,
                                newMediaInfo: ta,
                                switchMode: ha[ma]
                            });
                            var Sa = function(Na) {
                                var Oa = {
                                    lang: Na.lang,
                                    viewpoint: Na.viewpoint,
                                    roles: Na.roles,
                                    accessibility: Na.accessibility,
                                    audioChannelConfiguration: Na.audioChannelConfiguration
                                };
                                return Oa.lang || Oa.viewpoint || Oa.role && Oa.role.length > 0 || Oa.accessibility && Oa.accessibility.length > 0 || Oa.audioChannelConfiguration && Oa.audioChannelConfiguration.length > 0 ? Oa : null
                            }(ta);
                            Sa && ei[na][ma].storeLastSettings && (Sa.roles && (Sa.role = Sa.roles[0],
                            delete Sa.roles),
                            Sa.accessibility && (Sa.accessibility = Sa.accessibility[0]),
                            Sa.audioChannelConfiguration && (Sa.audioChannelConfiguration = Sa.audioChannelConfiguration[0]),
                            ca.setSavedMediaSettings(ma, Sa))
                        }
                    }
                }
                function Ea(ta, ma) {
                    ta && ma && (sa[ta] = ma)
                }
                function ri(ta) {
                    return ta ? sa[ta] : null
                }
                function ya() {
                    return la || hl
                }
                function Aa(ta) {
                    return ta === ie.AUDIO || ta === ie.VIDEO || ta === ie.TEXT || ta === ie.FRAGMENTED_TEXT || ta === ie.IMAGE
                }
                function wa(ta, ma) {
                    var ia = ta.id === ma.id
                      , na = ta.viewpoint === ma.viewpoint
                      , va = ta.lang === ma.lang
                      , Sa = ta.roles.toString() === ma.roles.toString()
                      , Na = ta.accessibility.toString() === ma.accessibility.toString()
                      , Oa = ta.audioChannelConfiguration.toString() === ma.audioChannelConfiguration.toString();
                    return ia && na && va && Sa && Na && Oa
                }
                function _a() {
                    ei = {},
                    sa = {
                        audio: null,
                        video: null
                    },
                    ha = {
                        audio: Xa,
                        video: rl
                    }
                }
                function Da(ta, ma) {
                    var ia = !ta.lang || ta.lang === ma.lang
                      , na = !ta.viewpoint || ta.viewpoint === ma.viewpoint
                      , va = !ta.role || !!ma.roles.filter(function(Oa) {
                        return Oa === ta.role
                    })[0]
                      , Sa = !ta.accessibility || !!ma.accessibility.filter(function(Oa) {
                        return Oa === ta.accessibility
                    })[0]
                      , Na = !ta.audioChannelConfiguration || !!ma.audioChannelConfiguration.filter(function(Oa) {
                        return Oa === ta.audioChannelConfiguration
                    })[0];
                    return ia && na && va && Sa && Na
                }
                function ua(ta) {
                    var ma = ya()
                      , ia = []
                      , na = function(Sa) {
                        var Na = 0
                          , Oa = []
                          , Ia = void 0;
                        return Sa.forEach(function(Ra) {
                            (Ia = Math.max.apply(Math, Ra.bitrateList.map(function(ka) {
                                return ka.bandwidth
                            }))) > Na ? (Na = Ia,
                            Oa = [Ra]) : Ia === Na && Oa.push(Ra)
                        }),
                        Oa
                    }
                      , va = function(Sa) {
                        var Na = 0
                          , Oa = []
                          , Ia = void 0;
                        return Sa.forEach(function(Ra) {
                            (Ia = Ra.representationCount) > Na ? (Na = Ia,
                            Oa = [Ra]) : Ia === Na && Oa.push(Ra)
                        }),
                        Oa
                    };
                    switch (ma) {
                    case Cs:
                        (ia = na(ta)).length > 1 && (ia = va(ia));
                        break;
                    case yl:
                        (ia = va(ta)).length > 1 && (ia = na(ta));
                        break;
                    default:
                        Pe("track selection mode is not supported: " + ma)
                    }
                    return ia[0]
                }
                return xe = {
                    checkInitialMediaSettingsForType: function(ta, ma) {
                        var ia = ri(ta)
                          , na = ni(ta, ma)
                          , va = [];
                        ta !== ie.FRAGMENTED_TEXT ? (ia || Ea(ta, ia = ca.getSavedMediaSettings(ta)),
                        na && na.length !== 0 && (ia && na.forEach(function(Sa) {
                            Da(ia, Sa) && va.push(Sa)
                        }),
                        va.length === 0 ? oi(ua(na)) : va.length > 1 ? oi(ua(va)) : oi(va[0]))) : oi(na[0])
                    },
                    addTrack: function(ta) {
                        if (ta) {
                            var ma = ta.type;
                            if (Aa(ma)) {
                                var ia = ta.streamInfo.id;
                                ei[ia] || (ei[ia] = {
                                    audio: {
                                        list: [],
                                        storeLastSettings: !0,
                                        current: null
                                    },
                                    video: {
                                        list: [],
                                        storeLastSettings: !0,
                                        current: null
                                    },
                                    text: {
                                        list: [],
                                        storeLastSettings: !0,
                                        current: null
                                    },
                                    fragmentedText: {
                                        list: [],
                                        storeLastSettings: !0,
                                        current: null
                                    },
                                    image: {
                                        list: [],
                                        storeLastSettings: !0,
                                        current: null
                                    }
                                });
                                for (var na = ei[ia][ma].list, va = 0, Sa = na.length; va < Sa; ++va)
                                    if (wa(na[va], ta))
                                        return;
                                na.push(ta);
                                var Na = ri(ma);
                                Na && Da(Na, ta) && !Kt(ma, ta.streamInfo) && oi(ta)
                            }
                        }
                    },
                    getTracksFor: ni,
                    getCurrentTrackFor: Kt,
                    isCurrentTrack: function(ta) {
                        var ma = ta.type
                          , ia = ta.streamInfo.id;
                        return ei[ia] && ei[ia][ma] && wa(ei[ia][ma].current, ta)
                    },
                    setTrack: oi,
                    setInitialSettings: Ea,
                    getInitialSettings: ri,
                    setSwitchMode: function(ta, ma) {
                        pa.indexOf(ma) !== -1 ? ha[ta] = ma : Pe("track switch mode is not supported: " + ma)
                    },
                    getSwitchMode: function(ta) {
                        return ha[ta]
                    },
                    setSelectionModeForInitialTrack: function(ta) {
                        ti.indexOf(ta) !== -1 ? la = ta : Pe("track selection mode is not supported: " + ta)
                    },
                    getSelectionModeForInitialTrack: ya,
                    isMultiTrackSupportedByType: Aa,
                    isTracksEqual: wa,
                    setStartOffsetTimeForType: function(ta, ma) {
                        ta && ma > 0 && (ra[ta] = ma)
                    },
                    getStartOffsetTimeForType: function(ta) {
                        return ra[ta] || 0
                    },
                    setConfig: function(ta) {
                        ta && (ta.errHandler && ta.errHandler,
                        ta.domStorage && (ca = ta.domStorage))
                    },
                    reset: _a
                },
                _a(),
                xe
            }
            ll.__dashjs_factory_name = "MediaController";
            var Ql = $.a.getSingletonFactory(ll);
            Ql.TRACK_SWITCH_MODE_NEVER_REPLACE = rl,
            Ql.TRACK_SWITCH_MODE_ALWAYS_REPLACE = Xa,
            Ql.TRACK_SELECTION_MODE_HIGHEST_BITRATE = Cs,
            Ql.TRACK_SELECTION_MODE_WIDEST_RANGE = yl,
            Ql.DEFAULT_INIT_TRACK_SELECTION_MODE = hl,
            $.a.updateSingletonFactory(ll.__dashjs_factory_name, Ql);
            var Hl = Ql
              , bu = function() {
                function xe(qt) {
                    if (function(ca, pa) {
                        if (!(ca instanceof pa))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, xe),
                    this.offset = qt._offset,
                    this.type = qt.type,
                    this.size = qt.size,
                    this.boxes = [],
                    qt.boxes)
                        for (var Pe = 0; Pe < qt.boxes.length; Pe++)
                            this.boxes.push(new xe(qt.boxes[Pe]));
                    switch (this.isComplete = !0,
                    qt.type) {
                    case "sidx":
                        if (this.timescale = qt.timescale,
                        this.earliest_presentation_time = qt.earliest_presentation_time,
                        this.first_offset = qt.first_offset,
                        this.references = qt.references,
                        qt.references) {
                            this.references = [];
                            for (var Qe = 0; Qe < qt.references.length; Qe++) {
                                var ei = {
                                    reference_type: qt.references[Qe].reference_type,
                                    referenced_size: qt.references[Qe].referenced_size,
                                    subsegment_duration: qt.references[Qe].subsegment_duration
                                };
                                this.references.push(ei)
                            }
                        }
                        break;
                    case "emsg":
                        this.id = qt.id,
                        this.value = qt.value,
                        this.timescale = qt.timescale,
                        this.scheme_id_uri = qt.scheme_id_uri,
                        this.presentation_time_delta = qt.presentation_time_delta,
                        this.event_duration = qt.event_duration,
                        this.message_data = qt.message_data;
                        break;
                    case "mdhd":
                        this.timescale = qt.timescale;
                        break;
                    case "mfhd":
                        this.sequence_number = qt.sequence_number;
                        break;
                    case "subs":
                        this.entry_count = qt.entry_count,
                        this.entries = qt.entries;
                        break;
                    case "tfhd":
                        this.base_data_offset = qt.base_data_offset,
                        this.sample_description_index = qt.sample_description_index,
                        this.default_sample_duration = qt.default_sample_duration,
                        this.default_sample_size = qt.default_sample_size,
                        this.default_sample_flags = qt.default_sample_flags,
                        this.flags = qt.flags;
                        break;
                    case "tfdt":
                        this.version = qt.version,
                        this.baseMediaDecodeTime = qt.baseMediaDecodeTime,
                        this.flags = qt.flags;
                        break;
                    case "trun":
                        if (this.sample_count = qt.sample_count,
                        this.first_sample_flags = qt.first_sample_flags,
                        this.data_offset = qt.data_offset,
                        this.flags = qt.flags,
                        this.samples = qt.samples,
                        qt.samples) {
                            this.samples = [];
                            for (var sa = 0, la = qt.samples.length; sa < la; sa++) {
                                var ha = {
                                    sample_size: qt.samples[sa].sample_size,
                                    sample_duration: qt.samples[sa].sample_duration,
                                    sample_composition_time_offset: qt.samples[sa].sample_composition_time_offset
                                };
                                this.samples.push(ha)
                            }
                        }
                        break;
                    case "elst":
                        this.boxes = qt.entries;
                        break;
                    case "mvhd":
                        this.timescale = qt.timescale
                    }
                }
                return xe.prototype.getChildBox = function(qt) {
                    for (var Pe = 0; Pe < this.boxes.length; Pe++)
                        if (this.boxes[Pe].type === qt)
                            return this.boxes[Pe]
                }
                ,
                xe.prototype.getChildBoxes = function(qt) {
                    for (var Pe = [], Qe = 0; Qe < this.boxes.length; Qe++)
                        this.boxes[Qe].type === qt && Pe.push(this.boxes[Qe]);
                    return Pe
                }
                ,
                xe
            }();
            function cu() {
                var xe = void 0;
                function qt(Qe) {
                    var ei = [];
                    if (!Qe || !xe || typeof xe.fetchAll != "function")
                        return ei;
                    for (var sa = xe.fetchAll(Qe), la = void 0, ha = 0, ca = sa.length; ha < ca; ha++)
                        (la = Pe(sa[ha])) && ei.push(la);
                    return ei
                }
                function Pe(Qe) {
                    if (!Qe)
                        return null;
                    var ei = new bu(Qe);
                    return Qe.hasOwnProperty("_incomplete") && (ei.isComplete = !Qe._incomplete),
                    ei
                }
                return {
                    getBox: function(Qe) {
                        return Qe && xe && xe.boxes && xe.boxes.length !== 0 && typeof xe.fetch == "function" ? Pe(xe.fetch(Qe)) : null
                    },
                    getBoxes: qt,
                    setData: function(Qe) {
                        xe = Qe
                    },
                    getLastBox: function() {
                        if (!xe || !xe.boxes || !xe.boxes.length)
                            return null;
                        var Qe = qt(xe.boxes[xe.boxes.length - 1].type);
                        return Qe.length > 0 ? Qe[Qe.length - 1] : null
                    }
                }
            }
            cu.__dashjs_factory_name = "IsoFile";
            var ou = $.a.getClassFactory(cu)
              , tl = ve(1)
              , Rl = ve.n(tl)
              , Al = function xe(qt, Pe, Qe) {
                (function(ei, sa) {
                    if (!(ei instanceof sa))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.lastCompletedOffset = qt,
                this.found = Pe,
                this.size = Qe
            };
            function Pl() {
                var xe = this.context;
                function qt(Qe, ei) {
                    return Qe[ei + 3] >>> 0 | Qe[ei + 2] << 8 >>> 0 | Qe[ei + 1] << 16 >>> 0 | Qe[ei] << 24 >>> 0
                }
                function Pe(Qe, ei) {
                    return String.fromCharCode(Qe[ei++]) + String.fromCharCode(Qe[ei++]) + String.fromCharCode(Qe[ei++]) + String.fromCharCode(Qe[ei])
                }
                return {
                    parse: function(Qe) {
                        if (!Qe)
                            return null;
                        Qe.fileStart === void 0 && (Qe.fileStart = 0);
                        var ei = Rl.a.parseBuffer(Qe)
                          , sa = ou(xe).create();
                        return sa.setData(ei),
                        sa
                    },
                    findLastTopIsoBoxCompleted: function(Qe, ei, sa) {
                        if (sa === void 0 && (sa = 0),
                        !ei || sa + 8 >= ei.byteLength)
                            return new Al(0,!1);
                        for (var la = ei instanceof ArrayBuffer ? new Uint8Array(ei) : ei, ha = void 0, ca = 0; sa < la.byteLength; ) {
                            var pa = qt(la, sa)
                              , ti = Pe(la, sa + 4);
                            if (pa === 0)
                                break;
                            sa + pa <= la.byteLength && (Qe.indexOf(ti) >= 0 ? ha = new Al(sa,!0,pa) : ca = sa + pa),
                            sa += pa
                        }
                        return ha || new Al(ca,!1)
                    }
                }
            }
            Pl.__dashjs_factory_name = "BoxParser";
            var Jl = $.a.getSingletonFactory(Pl);
            function Vl() {
                var xe = {};
                return {
                    save: function(qt) {
                        var Pe = qt.streamId
                          , Qe = qt.representationId;
                        xe[Pe] = xe[Pe] || {},
                        xe[Pe][Qe] = qt
                    },
                    extract: function(qt, Pe) {
                        return xe && xe[qt] && xe[qt][Pe] ? xe[qt][Pe] : null
                    },
                    reset: function() {
                        xe = {}
                    }
                }
            }
            Vl.__dashjs_factory_name = "InitCache";
            var gu = $.a.getSingletonFactory(Vl)
              , yu = "AudioTrackController"
              , Gu = [1, 3, 7];
            function Lu(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = xe.bufferController
                  , Qe = xe.mediaPlayerModel
                  , ei = Re(qt).getInstance()
                  , sa = 1
                  , la = void 0
                  , ha = void 0
                  , ca = void 0;
                function pa(Kt) {
                    Kt.chunk.mediaInfo.type === ie.AUDIO && ni(Kt.chunk.bytes)
                }
                function ti(Kt) {
                    ha && Kt.sender.getType() === ie.AUDIO && (ha = !1,
                    ei.trigger(bt.SWITCH_AUDIO_TRACK_RENDERED, {
                        id: Qe.getAudioTrackId(),
                        index: Kt.index,
                        startTime: Kt.startTime
                    }))
                }
                function ra() {
                    return Qe.getAudioTrackId() !== sa
                }
                function ni(Kt) {
                    for (var oi = Rl.a.parseBuffer(Kt).fetchAll("tkhd"), Ea = [], ri = 0; ri < oi.length; ri++) {
                        var ya = oi[ri]
                          , Aa = {
                            id: ya.track_ID,
                            enabled: !1,
                            flags: ya.flags
                        };
                        Gu.includes(ya.flags) && (sa = ya.track_ID,
                        Aa.enabled = !0),
                        Ea.push(Aa)
                    }
                    ca("【AudioTrackController】parse tkhd success, default tracks is " + sa),
                    Qe.setAudioTrackIds(Ea)
                }
                return la = {
                    AudioTrackControllerType: function() {
                        return yu
                    },
                    shouldSwitchTrack: ra,
                    canUseNativeFomular: function() {
                        var Kt = Pe.getBuffer()
                          , oi = Kt.getBuffer();
                        return Kt && oi && oi.audioTracks && !1
                    },
                    switchByAudioTracks: function() {
                        var Kt = Pe.getBuffer().getBuffer().audioTracks
                          , oi = Object.values(Kt).find(function(Aa) {
                            return Aa.enabled = !0
                        })
                          , Ea = Qe.getAudioTrackId()
                          , ri = Kt.getTrackById(Ea)
                          , ya = !0;
                        oi && (oi.enabled = !1),
                        Kt.addEventListener("change", function() {
                            ya && ri && (ri.enabled = !0),
                            ya = !1
                        })
                    },
                    switchByModifyTrackId: function(Kt) {
                        if (Kt && ra()) {
                            var oi = Kt.bytes
                              , Ea = Rl.a.parseBuffer(oi).fetchAll("tfhd");
                            if (Ea && Ea.length > 1) {
                                var ri = Qe.getAudioTrackId()
                                  , ya = Ea.find(function(wa) {
                                    return wa.track_ID === sa
                                })
                                  , Aa = Ea.find(function(wa) {
                                    return wa.track_ID === ri
                                });
                                ya && Aa && (ya._raw.setUint32(12, ri),
                                Aa._raw.setUint32(12, sa),
                                Kt.trackSwitchInfo = {
                                    id: ri
                                })
                            }
                        }
                    },
                    setDefaultTrackId: ni,
                    revertDefaultTrack: function(Kt) {
                        if (Kt && Kt.trackSwitchInfo) {
                            var oi = Kt.bytes
                              , Ea = Kt.trackSwitchInfo.id
                              , ri = Rl.a.parseBuffer(oi).fetchAll("tfhd");
                            if (ri && ri.length > 1) {
                                var ya = ri.find(function(wa) {
                                    return wa.track_ID === sa
                                })
                                  , Aa = ri.find(function(wa) {
                                    return wa.track_ID === Ea
                                });
                                ya && Aa && (ya._raw.setUint32(12, Ea),
                                Aa._raw.setUint32(12, sa),
                                Kt.trackSwitchInfo = null)
                            }
                        }
                    },
                    setSwitchingState: function(Kt) {
                        ha = Kt
                    },
                    initialize: function() {
                        ei.on(bt.BYTES_APPENDED_END_FRAGMENT, ti, this),
                        ei.on(bt.INIT_FRAGMENT_LOADED, pa, this)
                    },
                    reset: function() {
                        ha = !1,
                        ei.off(bt.BYTES_APPENDED_END_FRAGMENT, ti, this),
                        ei.off(bt.INIT_FRAGMENT_LOADED, pa, this)
                    }
                },
                ca = aa(qt).getInstance().log.bind(la),
                ha = !1,
                la
            }
            Lu.__dashjs_factory_name = "AudioTrackController";
            var Fu = $.a.getClassFactory(Lu)
              , Dl = "bufferLoaded"
              , Wl = "bufferStalled"
              , au = .5
              , Su = .01
              , lu = "BufferController";
            function Eu(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = xe.metricsModel
                  , ei = xe.mediaPlayerModel
                  , sa = xe.errHandler
                  , la = xe.streamController
                  , ha = xe.mediaController
                  , ca = xe.adapter
                  , pa = xe.abrController
                  , ti = xe.playbackController
                  , ra = xe.type
                  , ni = xe.streamProcessor
                  , Kt = void 0
                  , oi = void 0
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = void 0
                  , wa = void 0
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0
                  , Na = void 0
                  , Oa = void 0
                  , Ia = void 0
                  , Ra = void 0
                  , ka = void 0
                  , Va = void 0
                  , Ha = void 0
                  , xa = void 0
                  , sl = void 0
                  , gl = void 0
                  , Ya = void 0
                  , il = void 0
                  , Ol = void 0
                  , _l = void 0;
                function Ul(oa) {
                    var La = oa.time;
                    if (ua && ua.getBuffer() && _l.length) {
                        var Ja = ua.getBuffer().buffered;
                        if (Ja && Ja.length >= 1 && Ja.end(Ja.length - 1) - La <= .5) {
                            var ks = _l.shift();
                            ks && (il.switchByModifyTrackId(ks),
                            El(ks))
                        }
                    }
                }
                function Yl() {
                    if (il.setSwitchingState(!0),
                    ia) {
                        var oa = ti.getTime();
                        ia.end - oa > 2 && (!il.shouldSwitchTrack() && ia.trackSwitchInfo ? il.revertDefaultTrack(ia) : (ia.trackSwitchInfo && il.revertDefaultTrack(ia),
                        il.switchByModifyTrackId(ia)),
                        El(ia, !0))
                    }
                }
                function ql() {
                    var oa = ti.getTime()
                      , La = ru();
                    La.length === 0 && ua.getAllBufferRanges().length > 0 && (La = [{
                        start: ua.getAllBufferRanges().start(0)
                    }]),
                    La.length <= 0 || (La[La.length - 1].end = oa - 1,
                    La.forEach(function(Ja) {
                        Ja.force = !0
                    }),
                    hu(La))
                }
                function Ml(oa) {
                    if (!Na || !oa || !ni)
                        return null;
                    if (wa)
                        try {
                            typeof (ua = za(qt).create(wa, oa, $l.bind(this))).getBuffer().initialize == "function" && ua.getBuffer().initialize(ra, ni),
                            Pe.trigger(bt.BUFFER_CREATED, {
                                mediaType: oa.type
                            })
                        } catch (La) {
                            oi("Caught error on create SourceBuffer: " + La),
                            sa.mediaSourceError("Error creating " + ra + " source buffer.")
                        }
                    else
                        ua = Pa(qt).create($l.bind(this));
                    ni.getRepresentationInfoForQuality(Ea) && xu(ni.getRepresentationInfoForQuality(Ea).MSETimeOffset)
                }
                function ul(oa) {
                    oa.fragmentModel === ni.getFragmentModel() && (oi("Init fragment finished loading saving to", ra + "'s init cache"),
                    oi("Append Init fragment", ra, " with representationId:", oa.chunk.representationId, " and quality:", oa.chunk.quality),
                    ua ? ua.setAppendWindowEnd(ei.getCachedDurationOffset("duration")) : Ya = function() {
                        var La = ei.getCachedDurationOffset("duration");
                        ua.setAppendWindowEnd(La)
                    }
                    ,
                    El(oa.chunk))
                }
                function al(oa) {
                    if (oa.fragmentModel === ni.getFragmentModel()) {
                        var La = oa.chunk
                          , Ja = La.bytes
                          , ks = La.quality
                          , Il = ni.getRepresentationInfoForQuality(ks)
                          , Fl = ca.getEventsFor(Il.mediaInfo, ni)
                          , jl = ca.getEventsFor(Il, ni)
                          , du = ei.getEnableMultipleAudioTracks();
                        if (Fl && Fl.length > 0 || jl && jl.length > 0) {
                            var pu = function(mu, $u, ju, rd) {
                                for (var id = Math.max(!$u || isNaN($u.startTime) ? 0 : $u.startTime, 0), od = [], Hu = [], eu = ju.concat(rd), Du = 0, ed = eu.length; Du < ed; Du++)
                                    od[eu[Du].schemeIdUri] = eu[Du];
                                for (var Nu = Jl(qt).getInstance().parse(mu).getBoxes("emsg"), td = 0, Od = Nu.length; td < Od; td++) {
                                    var Md = ca.getEvent(Nu[td], od, id);
                                    Md && Hu.push(Md)
                                }
                                return Hu
                            }(Ja, ni.getFragmentModel().getRequests({
                                state: ga.FRAGMENT_MODEL_EXECUTED,
                                quality: ks,
                                index: La.index
                            })[0], Fl, jl);
                            ni.getEventController().addInbandEvents(pu)
                        }
                        if (Va) {
                            Ha = La;
                            var Tu = ua && ua.getAllBufferRanges();
                            Tu && Tu.length > 0 && ti.getTimeToStreamEnd() > au && (oi("Clearing buffer because track changed - " + (Tu.end(Tu.length - 1) + .5)),
                            hu([{
                                start: 0,
                                end: Tu.end(Tu.length - 1) + .5,
                                force: !0
                            }]))
                        } else
                            ra === ie.AUDIO && La.mediaInfo.type === ie.AUDIO && du ? function(mu) {
                                var $u;
                                if ($u = ti.getTime(),
                                mu.index === 0 || mu.start <= $u && $u <= mu.end)
                                    oi("【Multi Audio】append multi audio chunk: " + mu.index + "-" + mu.start + "-" + mu.end),
                                    il.switchByModifyTrackId(mu),
                                    El(mu);
                                else {
                                    var ju = {
                                        sender: Kt,
                                        index: mu.index
                                    }
                                      , rd = _l.findIndex(function(id) {
                                        return id.index === mu.index
                                    });
                                    if (rd !== -1)
                                        return oi("【Multi Audio】multi audio identical chunk emerged, replacing it: " + mu.index),
                                        void (_l[rd] = mu);
                                    _l.push(mu),
                                    mu.fromMulti = !0,
                                    Pe.trigger(bt.MULTI_AUDIO_TRACK_APPEND, ju)
                                }
                            }(La) : El(La)
                    }
                }
                function El(oa, La) {
                    !va || La ? (va = !0,
                    ia = oa,
                    oa.startOffsetTime = ha.getStartOffsetTimeForType(oa.mediaInfo.type),
                    ua ? ua.append(oa) : xa.push(oa),
                    oa.mediaInfo.type === ie.VIDEO && Pe.trigger(bt.VIDEO_CHUNK_RECEIVED, {
                        chunk: oa
                    })) : ka.push(oa)
                }
                function Tl(oa) {
                    if (oa.mediaType === ra && (Ya && (Ya(),
                    Ya = null),
                    xa.length))
                        for (var La = Date.now(), Ja = oa.mediaType, ks = pa.getInitializeDate(), Il = 0; Il < xa.length; Il++) {
                            var Fl = xa[Il];
                            Fl && Fl.mediaInfo.type === Ja && ua && ua.append && (xa[Il] = null,
                            sl && (xu(sl),
                            sl = 0),
                            ua.append(Fl),
                            Pe.trigger(bt.DELAY_TO_APPEND_TO_BUFFER, {
                                mediaType: Ja,
                                appendTime: La - ks,
                                createdTime: Date.now() - ks,
                                isPreload: !!ei.getPreloadData()
                            }))
                        }
                }
                function $l(oa) {
                    if (oa.error) {
                        if (oa.error.code === 22 && (Aa = .8 * iu(),
                        oi("Quota exceeded for type: " + ra + ", Critical Buffer: " + Aa),
                        Aa > 0)) {
                            var La = Math.max(.2 * Aa, 1)
                              , Ja = Aa - La;
                            ei.setBufferToKeep(parseFloat(La).toFixed(5)),
                            ei.setBufferAheadToKeep(parseFloat(Ja).toFixed(5))
                        }
                        oa.error.code !== 22 && zl() || (oi("Clearing playback buffer to overcome quota exceed situation for type: " + ra),
                        Pe.trigger(bt.QUOTA_EXCEEDED, {
                            sender: Kt,
                            criticalBufferLevel: Aa,
                            mediaType: ra
                        }),
                        nu(),
                        va = !1)
                    } else {
                        (ia = oa.chunk) && !isNaN(ia.index) && (_a = Math.max(ia.index, _a),
                        bl());
                        var ks = ua.getAllBufferRanges();
                        if (ia.segmentType === vl.MEDIA_SEGMENT_TYPE)
                            ol();
                        else if (Va) {
                            var Il = ti.getTime();
                            oi("[BufferController][", ra, "] appendToBuffer seek target should be " + Il),
                            ni.getScheduleController().setSeekTarget(Il),
                            ca.setIndexHandlerTime(ni, Il)
                        }
                        var Fl = {
                            sender: Kt,
                            quality: ia.quality,
                            startTime: ia.start,
                            index: ia.index,
                            fromMulti: ia.fromMulti,
                            bufferedRanges: ks
                        };
                        ia && !ia.endFragment ? Pe.trigger(bt.BYTES_APPENDED, Fl) : ia && Pe.trigger(bt.BYTES_APPENDED_END_FRAGMENT, Fl),
                        ka.length === 0 ? va = !1 : El(ka.shift(), !0)
                    }
                }
                function Qa(oa) {
                    Ea !== oa.newQuality && ra === oa.mediaType && ni.getStreamInfo().id === oa.streamInfo.id && (xu(ni.getRepresentationInfoForQuality(oa.newQuality).MSETimeOffset),
                    Ea = oa.newQuality)
                }
                function Sl() {
                    if (ri && (Ia = !0,
                    ri = !1,
                    Da = Number.POSITIVE_INFINITY),
                    ka = [],
                    va = !1,
                    ra !== ie.FRAGMENTED_TEXT) {
                        var oa = ua.getAllBufferRanges()
                          , La = ei.getEnableMultipleAudioTracks()
                          , Ja = !0;
                        if (oa && oa.length > 0)
                            for (var ks = ti.getTime(), Il = 0, Fl = oa.length; Il < Fl; Il++)
                                ks >= oa.start(Il) && ks <= oa.end(Il) - 1 && (Ja = !1);
                        Ja ? (ra === ie.AUDIO && La && function(jl) {
                            if (_l.length > 0) {
                                var du = _l.findIndex(function(mu) {
                                    return mu.start <= jl && mu.end > jl
                                });
                                if (du !== -1) {
                                    var pu = _l[du]
                                      , Tu = _l.slice(du + 1);
                                    _l = Tu,
                                    pu && (oi("【Multi Audio】find multi audio chunk in buffer list after seeking: " + pu.index),
                                    il.switchByModifyTrackId(pu),
                                    El(pu))
                                } else
                                    _l.length = 0
                            }
                        }(ti.getTime()),
                        ni.getFragmentModel().clearExecutedRequestBySeeking(),
                        nu()) : ol()
                    } else
                        ol();
                    Oa = void 0
                }
                function nu() {
                    var oa = ru();
                    oa && oa.length !== 0 || ol(),
                    hu(oa)
                }
                function ru() {
                    var oa = []
                      , La = ua.getAllBufferRanges();
                    if (!La || La.length === 0)
                        return oa;
                    var Ja = ti.getTime()
                      , ks = La.end(La.length - 1) + .5
                      , Il = ni.getFragmentModel().getRequests({
                        state: ga.FRAGMENT_MODEL_EXECUTED,
                        time: Ja,
                        threshold: Su
                    })[0];
                    if (Il) {
                        var Fl = {
                            start: 0,
                            end: Il.startTime - au
                        }
                          , jl = ni.getFragmentModel().getRequests({
                            state: ga.FRAGMENT_MODEL_EXECUTED,
                            time: Il.startTime - Il.duration / 2,
                            threshold: Su
                        })[0];
                        jl && jl.startTime != Il.startTime && (Fl.end = jl.startTime),
                        Fl.start < Fl.end && Fl.end > La.start(0) && oa.push(Fl);
                        var du = {
                            start: Il.startTime + Il.duration + au,
                            end: ks
                        }
                          , pu = ni.getFragmentModel().getRequests({
                            state: ga.FRAGMENT_MODEL_EXECUTED,
                            time: Il.startTime + Il.duration + au,
                            threshold: Su
                        })[0];
                        pu && pu.startTime !== Il.startTime && (du.start = pu.startTime + pu.duration + au),
                        du.start < du.end && du.start < ks && oa.push(du)
                    } else
                        oi("getAllRangesWithSafetyFactor for", ra, "- No request found in current time position, removing full buffer 0 -", ks),
                        oa.push({
                            start: 0,
                            end: ks
                        });
                    return oa
                }
                function ol() {
                    Va || (xs(),
                    fl())
                }
                function cl() {
                    Cl()
                }
                function Kl() {
                    Cl()
                }
                function Ma(oa, La) {
                    var Ja = ua && ua.getAllBufferRanges()
                      , ks = 0
                      , Il = 0
                      , Fl = null
                      , jl = null
                      , du = 0
                      , pu = void 0
                      , Tu = void 0
                      , mu = La || .15;
                    if (Ja != null) {
                        for (Tu = 0,
                        pu = Ja.length; Tu < pu; Tu++)
                            if (ks = Ja.start(Tu),
                            Il = Ja.end(Tu),
                            Fl === null)
                                du = Math.abs(ks - oa),
                                (oa >= ks && oa < Il || du <= mu) && (Fl = ks,
                                jl = Il);
                            else {
                                if (!((du = ks - jl) <= mu))
                                    break;
                                jl = Il
                            }
                        if (Fl !== null)
                            return {
                                start: Fl,
                                end: jl
                            }
                    }
                    return null
                }
                function xs() {
                    var oa, La, Ja;
                    ti && (oa = function() {
                        var ks = ti.getTime();
                        if (Oa) {
                            var Il = ua.getAllBufferRanges();
                            Il && Il.length && (ks = Math.max(Il.start(0), Oa))
                        }
                        return ks
                    }() || 0,
                    ya = (Ja = Ma(oa, La)) === null ? 0 : Ja.end - oa,
                    Pe.trigger(bt.BUFFER_LEVEL_UPDATED, {
                        sender: Kt,
                        bufferLevel: ya
                    }),
                    Cl())
                }
                function fl() {
                    ni && la && ni.getStreamInfo().id === la.getActiveStreamInfo().id && (Qe.addBufferState(ra, ma, ni.getScheduleController().getBufferTarget()),
                    Qe.addBufferLevel(ra, new Date, 1e3 * ya))
                }
                function bl() {
                    _a >= Da - 1 && !ri && ua.discharge === void 0 && (ri = !0,
                    oi("[BufferController][" + ra + "] checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),
                    Pe.trigger(bt.BUFFERING_COMPLETED, {
                        sender: Kt,
                        streamInfo: ni.getStreamInfo()
                    }))
                }
                function Cl() {
                    ra !== "audio" && ra !== "video" || (Ia && !ri && ti && ti.getTimeToStreamEnd() - ya < au && (Ia = !1,
                    ri = !0,
                    oi("[BufferController][" + ra + "] checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),
                    Pe.trigger(bt.BUFFERING_COMPLETED, {
                        sender: Kt,
                        streamInfo: ni.getStreamInfo()
                    })),
                    ya < au && !ri ? xl(Wl) : (ri || ya >= ei.getStableBufferTime()) && xl(Dl))
                }
                function xl(oa) {
                    ma === oa || oa === Wl && ti.getTime() === 0 || (ma = oa,
                    fl(),
                    Pe.trigger(bt.BUFFER_LEVEL_STATE_CHANGED, {
                        sender: Kt,
                        state: oa,
                        mediaType: ra,
                        streamInfo: ni.getStreamInfo()
                    }),
                    Pe.trigger(oa === Dl ? bt.BUFFER_LOADED : bt.BUFFER_EMPTY, {
                        mediaType: ra
                    }),
                    oi(oa === Dl ? "Got enough buffer to start for " + ra : "Waiting for more buffer before starting playback for " + ra))
                }
                function Zl() {
                    ua && ra !== ie.FRAGMENTED_TEXT && (ri || hu(function() {
                        var oa = []
                          , La = ua.getAllBufferRanges();
                        if (!La || La.length === 0)
                            return oa;
                        var Ja = ti.getTime()
                          , ks = {
                            start: Math.max(0, Ja - ei.getBufferToKeep()),
                            end: Ja + ei.getBufferAheadToKeep()
                        }
                          , Il = ni.getFragmentModel().getRequests({
                            state: ga.FRAGMENT_MODEL_EXECUTED,
                            time: Ja,
                            threshold: Su
                        })[0];
                        if (Il)
                            ks.start = Math.min(Il.startTime, ks.start),
                            ks.end = Math.max(Il.startTime + Il.duration, ks.end);
                        else if (Ja === 0 && ti.getIsDynamic())
                            return [];
                        if (La.start(0) <= ks.start) {
                            for (var Fl = {
                                start: 0,
                                end: ks.start
                            }, jl = 0; jl < La.length && La.end(jl) <= ks.start; jl++)
                                Fl.end = La.end(jl);
                            Fl.start < Fl.end && oa.push(Fl)
                        }
                        if (La.end(La.length - 1) >= ks.end) {
                            var du = {
                                start: ks.end,
                                end: La.end(La.length - 1) + Su
                            };
                            du.start < du.end && oa.push(du)
                        }
                        return oa
                    }()))
                }
                function hu(oa) {
                    oa && ua && oa.length !== 0 && (Ra.push.apply(Ra, oa),
                    Sa || Au())
                }
                function Au() {
                    if (Ra.length === 0 || !ua)
                        return oi("Nothing to prune, halt pruning"),
                        Ra = [],
                        void (Sa = !1);
                    var oa = ua.getBuffer();
                    if (!oa || !oa.buffered || oa.buffered.length === 0)
                        return oi("SourceBuffer is empty (or does not exist), halt pruning"),
                        Ra = [],
                        void (Sa = !1);
                    var La = Ra.shift();
                    oi("Removing", ra, "buffer from:", La.start, "to", La.end),
                    Sa = !0;
                    var Ja = ti.getTime();
                    Ja < La.end && (ri = !1,
                    _a = 0,
                    Va || (ni.getScheduleController().setSeekTarget(Ja),
                    ca.setIndexHandlerTime(ni, Ja)));
                    var ks = la.getDuration() - 1;
                    ks && La.start === 0 && La.end >= ks && (La.force = !0),
                    ua.remove(La.start, La.end, La.force)
                }
                function wu(oa) {
                    ua === oa.buffer && (oi("[BufferController][", ra, "] onRemoved buffer from:", oa.from, "to", oa.to),
                    Ra.length === 0 && (Sa = !1),
                    oa.unintended && (oi("[BufferController][", ra, "] detected unintended removal from:", oa.from, "to", oa.to, "setting index handler time to", oa.from),
                    ca.setIndexHandlerTime(ni, oa.from)),
                    Sa ? Au() : (Va ? (Va = !1,
                    Ha && El(Ha)) : (oi("onRemoved : call updateBufferLevel"),
                    xs()),
                    Pe.trigger(bt.BUFFER_CLEARED, {
                        sender: Kt,
                        from: oa.from,
                        to: oa.to,
                        unintended: oa.unintended,
                        hasEnoughSpaceToAppend: zl()
                    })))
                }
                function xu(oa) {
                    oa !== 0 && (ua && ua.updateTimestampOffset ? ua.updateTimestampOffset(oa) : sl = oa)
                }
                function Uu(oa) {
                    if (oa.sender.getStreamProcessor() === ni && !oa.error) {
                        var La = 0;
                        try {
                            La = oa.currentRepresentation.segmentAvailabilityRange.start
                        } catch (Ja) {}
                        xu(La)
                    }
                }
                function Vu(oa) {
                    oa.fragmentModel === ni.getFragmentModel() && (Da = oa.request.index,
                    bl())
                }
                function Wu(oa) {
                    var La = ua && ua.getAllBufferRanges();
                    La && oa.newMediaInfo.type === ra && oa.newMediaInfo.streamInfo.id === ni.getStreamInfo().id && (oi("[BufferController][" + ra + "] track change asked"),
                    ha.getSwitchMode(ra) === Hl.TRACK_SWITCH_MODE_ALWAYS_REPLACE && La && La.length > 0 && ti.getTimeToStreamEnd() > au && (ri = !1,
                    Da = Number.POSITIVE_INFINITY))
                }
                function Os() {
                    ++na * (ei.getWallclockTimeUpdateInterval() / 1e3) >= ei.getBufferPruningInterval() && (na = 0,
                    Zl())
                }
                function qa() {
                    Cl()
                }
                function dl() {
                    if (ei.getAppendingSourceState()) {
                        ri = !1,
                        Da = Number.POSITIVE_INFINITY,
                        Na.reset();
                        var oa = ei.getCachedDurationOffset("offset");
                        ca.setIndexHandlerTime(ni, oa),
                        ni.resetPreloadData(),
                        ni.getFragmentModel().resetInitialSettings()
                    }
                }
                function Bl(oa, La) {
                    wa = oa,
                    ua && La && typeof ua.discharge == "function" && (ta = ua,
                    Ml(La))
                }
                function iu() {
                    var oa, La = ua.getAllBufferRanges(), Ja = 0, ks = void 0;
                    if (!La)
                        return Ja;
                    for (ks = 0,
                    oa = La.length; ks < oa; ks++)
                        Ja += La.end(ks) - La.start(ks);
                    return Ja
                }
                function zl() {
                    return iu() < Aa
                }
                function su(oa) {
                    Aa = Number.POSITIVE_INFINITY,
                    ma = void 0,
                    Ea = Ba.QUALITY_DEFAULT,
                    Da = Number.POSITIVE_INFINITY,
                    _a = 0,
                    ia = null,
                    ri = !1,
                    va = !1,
                    Sa = !1,
                    Ia = !1,
                    ya = 0,
                    na = 0,
                    Ra = [],
                    xa = [],
                    ua && (oa || ua.abort(),
                    ua.reset(),
                    ua = null),
                    Va = !1,
                    _l = []
                }
                return Kt = {
                    getBufferControllerType: function() {
                        return lu
                    },
                    initialize: function(oa) {
                        Bl(oa),
                        Ea = pa.getQualityFor(ra, ni.getStreamInfo()),
                        Pe.on(bt.DATA_UPDATE_COMPLETED, Uu, this),
                        Pe.on(bt.INIT_FRAGMENT_LOADED, ul, this),
                        Pe.on(bt.MEDIA_FRAGMENT_LOADED, al, this),
                        Pe.on(bt.QUALITY_CHANGE_REQUESTED, Qa, this),
                        Pe.on(bt.STREAM_COMPLETED, Vu, this),
                        Pe.on(bt.PLAYBACK_PLAYING, Kl, this),
                        Pe.on(bt.PLAYBACK_PROGRESS, ol, this),
                        Pe.on(bt.PLAYBACK_TIME_UPDATED, ol, this),
                        Pe.on(bt.PLAYBACK_RATE_CHANGED, qa, this),
                        Pe.on(bt.PLAYBACK_SEEKING, Sl, this),
                        Pe.on(bt.PLAYBACK_STALLED, cl, this),
                        Pe.on(bt.WALLCLOCK_TIME_UPDATED, Os, this),
                        Pe.on(bt.CURRENT_TRACK_CHANGED, Wu, this, Re.EVENT_PRIORITY_HIGH),
                        Pe.on(bt.SOURCEBUFFER_REMOVE_COMPLETED, wu, this),
                        Pe.on(bt.BUFFER_CREATED, Tl, this),
                        Pe.on(bt.APPENDING_NEXT_SOURCE, dl, this),
                        ra === ie.AUDIO && ei.getEnableMultipleAudioTracks() && (Pe.on(bt.SWITCH_AUDIO_TRACK_REQUEST, Yl, this),
                        Pe.on(bt.SWITCH_AUDIO_TRACK_RENDERED, ql, this),
                        Pe.on(bt.PLAYBACK_TIME_UPDATED, Ul, this))
                    },
                    createBuffer: Ml,
                    dischargePreBuffer: function() {
                        if (ua && ta && typeof ta.discharge == "function") {
                            var oa = ta.getAllBufferRanges();
                            if (oa.length > 0) {
                                for (var La = "Beginning " + ra + "PreBuffer discharge, adding buffer for:", Ja = 0; Ja < oa.length; Ja++)
                                    La += " start: " + oa.start(Ja) + ", end: " + oa.end(Ja) + ";";
                                oi(La)
                            } else
                                oi("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");
                            for (var ks = ta.discharge(), Il = null, Fl = 0; Fl < ks.length; Fl++) {
                                var jl = ks[Fl]
                                  , du = Na.extract(jl.streamId, jl.representationId);
                                du && (Il !== du && (ua.append(du),
                                Il = du),
                                ua.append(jl))
                            }
                            ta.reset(),
                            ta = null
                        }
                    },
                    getType: function() {
                        return ra
                    },
                    getStreamProcessor: function() {
                        return ni
                    },
                    setSeekStartTime: function(oa) {
                        Oa = oa
                    },
                    getBuffer: function() {
                        return ua
                    },
                    getBufferLevel: function() {
                        return ya
                    },
                    getRangeAt: Ma,
                    setMediaSource: Bl,
                    getMediaSource: function() {
                        return wa
                    },
                    getIsBufferingCompleted: function() {
                        return ri
                    },
                    switchInitData: function(oa, La, Ja) {
                        var ks = Na.extract(oa, La);
                        Va = Ja === !0 && Ja,
                        gl = ei.getAppendingSourceState(),
                        ks && !gl ? (oi("Append Init fragment", ra, " with representationId:", ks.representationId, " and quality:", ks.quality),
                        El(ks)) : (gl && (gl = !1,
                        Va = !1),
                        Pe.trigger(bt.INIT_REQUESTED, {
                            sender: Kt
                        }))
                    },
                    getIsPruningInProgress: function() {
                        return Sa
                    },
                    reset: function(oa) {
                        Pe.off(bt.DATA_UPDATE_COMPLETED, Uu, this),
                        Pe.off(bt.QUALITY_CHANGE_REQUESTED, Qa, this),
                        Pe.off(bt.INIT_FRAGMENT_LOADED, ul, this),
                        Pe.off(bt.MEDIA_FRAGMENT_LOADED, al, this),
                        Pe.off(bt.STREAM_COMPLETED, Vu, this),
                        Pe.off(bt.CURRENT_TRACK_CHANGED, Wu, this),
                        Pe.off(bt.PLAYBACK_PLAYING, Kl, this),
                        Pe.off(bt.PLAYBACK_PROGRESS, ol, this),
                        Pe.off(bt.PLAYBACK_TIME_UPDATED, ol, this),
                        Pe.off(bt.PLAYBACK_RATE_CHANGED, qa, this),
                        Pe.off(bt.PLAYBACK_SEEKING, Sl, this),
                        Pe.off(bt.PLAYBACK_STALLED, cl, this),
                        Pe.off(bt.WALLCLOCK_TIME_UPDATED, Os, this),
                        Pe.off(bt.SOURCEBUFFER_REMOVE_COMPLETED, wu, this),
                        Pe.off(bt.BUFFER_CREATED, Tl, this),
                        Pe.off(bt.APPENDING_NEXT_SOURCE, dl, this),
                        ra === ie.AUDIO && ei.getEnableMultipleAudioTracks() && (Pe.off(bt.SWITCH_AUDIO_TRACK_REQUEST, Yl, this),
                        Pe.off(bt.SWITCH_AUDIO_TRACK_RENDERED, ql, this),
                        Pe.off(bt.PLAYBACK_TIME_UPDATED, Ul, this),
                        il && (il.reset(),
                        il = null)),
                        clearInterval(Ol),
                        Ol = -1,
                        su(oa)
                    },
                    getStoreBufferLevel: function() {
                        if (_l.length) {
                            var oa = ti.getTime();
                            return _l[_l.length - 1].end - oa
                        }
                        return 0
                    },
                    getMultiBufferRanges: function() {
                        for (var oa = ua.getAllBufferRanges(), La = [], Ja = 0; Ja < oa.length; Ja++)
                            La.push({
                                start: oa.start(Ja),
                                end: oa.end(Ja)
                            });
                        if (_l && _l.length > 0) {
                            var ks = La.length
                              , Il = _l[_l.length - 1].end;
                            La.length > 0 ? La[ks - 1].end = Il : La.push({
                                start: _l[0].start,
                                end: Il
                            })
                        }
                        return La
                    }
                },
                oi = aa(qt).getInstance().log.bind(Kt),
                Na = gu(qt).getInstance(),
                ka = [],
                xa = [],
                sl = 0,
                ra === ie.AUDIO && ei.getEnableMultipleAudioTracks() && (oi("【Multi Audio】enable multiple audio tracks and init audio track controller"),
                (il = Fu(qt).create({
                    bufferController: Kt,
                    mediaPlayerModel: ei,
                    playbackController: ti
                })).initialize(),
                Ol = setInterval(function() {
                    Ul({
                        time: ti.getTime()
                    })
                }, 50)),
                su(),
                Kt
            }
            Eu.__dashjs_factory_name = lu;
            var Ou = $.a.getClassFactory(Eu);
            Ou.BUFFER_LOADED = Dl,
            Ou.BUFFER_EMPTY = Wl,
            $.a.updateClassFactory(Eu.__dashjs_factory_name, Ou);
            var ku = Ou
              , Ku = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.t = null,
                this.xywh = null,
                this.track = null,
                this.id = null,
                this.s = null,
                this.r = null
            };
            function zu() {
                var xe = void 0;
                return {
                    initialize: function(qt) {
                        if (xe = new Ku,
                        !qt)
                            return null;
                        var Pe = qt.indexOf("#");
                        if (Pe !== -1)
                            for (var Qe = qt.substr(Pe + 1).split("&"), ei = 0, sa = Qe.length; ei < sa; ++ei) {
                                var la = Qe[ei]
                                  , ha = la.indexOf("=");
                                if (ha !== -1) {
                                    var ca = la.substring(0, ha);
                                    xe.hasOwnProperty(ca) && (xe[ca] = la.substr(ha + 1))
                                }
                            }
                    },
                    getURIFragmentData: function() {
                        return xe
                    }
                }
            }
            zu.__dashjs_factory_name = "URIFragmentModel";
            var _u = $.a.getSingletonFactory(zu);
            function Bu() {
                var xe, qt = this.context, Pe = aa(qt).getInstance().log, Qe = Re(qt).getInstance(), ei = void 0, sa = void 0, la = void 0, ha = void 0, ca = void 0, pa = void 0, ti = void 0, ra = void 0, ni = void 0, Kt = void 0, oi = void 0, Ea = void 0, ri = void 0, ya = void 0, Aa = void 0, wa = void 0, _a = void 0, Da = void 0;
                function ua(ol) {
                    !ya && ol.fromStreamInfo && Kt[ol.fromStreamInfo.id] !== void 0 && (delete Ea[ol.fromStreamInfo.id],
                    delete Kt[ol.fromStreamInfo.id])
                }
                function ta() {
                    var ol = Ha(!0)
                      , cl = ya ? ol - ri.start : 0;
                    return parseFloat((ol + (ri.duration - cl) - Na()).toFixed(5))
                }
                function ma() {
                    if (ri && ti && ti.getElement())
                        return ti.play();
                    wa = !0
                }
                function ia() {
                    return ri && ti ? ti.isPaused() : null
                }
                function na() {
                    ri && ti && ti.pause()
                }
                function va() {
                    return ri && ti ? ti.isSeeking() : null
                }
                function Sa(ol) {
                    ri && ti && (Qe.trigger(bt.PLAYBACK_SEEK_ASKED),
                    Pe("Requesting seek to time: " + ol),
                    ti.setCurrentTime(ol))
                }
                function Na() {
                    return ri && ti ? ti.getTime() : null
                }
                function Oa() {
                    return ri && ti ? ti.getPlaybackRate() : null
                }
                function Ia() {
                    return ri && ti ? ti.getEnded() : null
                }
                function Ra() {
                    return ya
                }
                function ka() {
                    ra = NaN,
                    wa = !1,
                    Kt = {},
                    oi = 0,
                    Da = 0,
                    Ea = {},
                    ti && (Qe.off(bt.DATA_UPDATE_COMPLETED, Ya, this),
                    Qe.off(bt.BUFFER_LEVEL_STATE_CHANGED, nu, this),
                    Qe.off(bt.BYTES_APPENDED_END_FRAGMENT, Sl, this),
                    Qe.off(bt.PERIOD_SWITCH_STARTED, ua, this),
                    sl(),
                    ti.removeEventListener("canplay", il),
                    ti.removeEventListener("play", Ol),
                    ti.removeEventListener("waiting", _l),
                    ti.removeEventListener("playing", Ul),
                    ti.removeEventListener("pause", Yl),
                    ti.removeEventListener("error", Qa),
                    ti.removeEventListener("seeking", ql),
                    ti.removeEventListener("seeked", Ml),
                    ti.removeEventListener("timeupdate", ul),
                    ti.removeEventListener("progress", al),
                    ti.removeEventListener("ratechange", El),
                    ti.removeEventListener("loadedmetadata", Tl),
                    ti.removeEventListener("ended", $l),
                    ti.removeEventListener("stalled", ru)),
                    ti = null,
                    ri = null,
                    ya = null,
                    ni = null
                }
                function Va() {
                    var ol = _u(qt).getInstance().getURIFragmentData()
                      , cl = void 0;
                    if (ol) {
                        cl = {};
                        var Kl = parseInt(ol.r, 10);
                        Kl >= 0 && ri && Kl < ri.manifestInfo.DVRWindowSize && ol.t === null && (ol.t = Math.floor(Date.now() / 1e3) - ri.manifestInfo.DVRWindowSize + Kl),
                        cl.fragS = parseInt(ol.s, 10),
                        cl.fragT = parseInt(ol.t, 10)
                    }
                    return cl
                }
                function Ha(ol, cl) {
                    var Kl = void 0
                      , Ma = NaN
                      , xs = Va();
                    if (Ma = xs ? ol ? ri.start : isNaN(xs.fragS) ? xs.fragT : xs.fragS : 0,
                    ya)
                        isNaN(Ma) || ((Kl = Ma - ri.manifestInfo.availableFrom.getTime() / 1e3) > ra || Kl < (isNaN(cl) ? NaN : cl - ri.manifestInfo.DVRWindowSize)) && (Kl = null),
                        Kl = Kl || ra;
                    else if (!isNaN(Ma) && Ma < Math.max(ri.manifestInfo.duration, ri.duration) && Ma >= 0)
                        Kl = Ma;
                    else {
                        var fl = Kt[ri.id];
                        Kl = fl !== void 0 ? Math.max(fl.audio !== void 0 ? fl.audio : 0, fl.video !== void 0 ? fl.video : 0, ri.start) : ri.start
                    }
                    return Kl
                }
                function xa() {
                    ni === null && (ni = setInterval(function() {
                        var ol;
                        Qe.trigger(bt.WALLCLOCK_TIME_UPDATED, {
                            isDynamic: ya,
                            time: new Date
                        }),
                        Ra() && ia() && (ol = Date.now(),
                        (!_a || ol > _a + 500) && (_a = ol,
                        ul()))
                    }, Aa.getWallclockTimeUpdateInterval()))
                }
                function sl() {
                    clearInterval(ni),
                    ni = null
                }
                function gl() {
                    if (!ia() && ya && ti.getReadyState() !== 0) {
                        var ol = Na()
                          , cl = function(Kl) {
                            var Ma = sa.getReadOnlyMetricsFor(ie.VIDEO) || sa.getReadOnlyMetricsFor(ie.AUDIO)
                              , xs = la.getCurrentDVRInfo(Ma)
                              , fl = xs ? xs.range : null
                              , bl = void 0;
                            if (!fl)
                                return NaN;
                            if (Kl > fl.end)
                                bl = Math.max(fl.end - 2 * ri.manifestInfo.minBufferTime, fl.start);
                            else {
                                if (!(Kl + .25 < fl.start))
                                    return Kl;
                                bl = fl.start
                            }
                            return bl
                        }(ol);
                        !isNaN(cl) && cl !== ol && Sa(cl)
                    }
                }
                function Ya(ol) {
                    if (!ol.error) {
                        var cl = pa.convertDataToRepresentationInfo(ol.currentRepresentation).mediaInfo.streamInfo;
                        ri.id === cl.id && (ri = cl,
                        gl())
                    }
                }
                function il() {
                    Qe.trigger(bt.CAN_PLAY)
                }
                function Ol() {
                    Pe("Native video element event: play"),
                    Aa.getStartPlaybackTime() || Aa.setStartPlaybackTime(new Date().getTime()),
                    gl(),
                    xa(),
                    Qe.trigger(bt.PLAYBACK_STARTED, {
                        startTime: Na()
                    })
                }
                function _l() {
                    Pe("Native video element event: waiting"),
                    Qe.trigger(bt.PLAYBACK_WAITING, {
                        playingTime: Na()
                    })
                }
                function Ul() {
                    Pe("Native video element event: playing"),
                    Qe.trigger(bt.PLAYBACK_PLAYING, {
                        playingTime: Na()
                    })
                }
                function Yl() {
                    Pe("Native video element event: pause"),
                    Qe.trigger(bt.PLAYBACK_PAUSED, {
                        ended: Ia()
                    })
                }
                function ql() {
                    var ol = Na();
                    Pe("Seeking to: " + ol),
                    xa(),
                    Aa && Aa.setLastStartSeekTime(new Date().getTime()),
                    Qe.trigger(bt.PLAYBACK_SEEKING, {
                        seekTime: ol
                    })
                }
                function Ml() {
                    Pe("Native video element event: seeked"),
                    Qe.trigger(bt.PLAYBACK_SEEKED)
                }
                function ul() {
                    var ol = Na();
                    Qe.trigger(bt.PLAYBACK_TIME_UPDATED, {
                        timeToEnd: ta(),
                        time: ol
                    })
                }
                function al() {
                    Qe.trigger(bt.PLAYBACK_PROGRESS)
                }
                function El() {
                    var ol = Oa();
                    Pe("Native video element event: ratechange: ", ol),
                    Qe.trigger(bt.PLAYBACK_RATE_CHANGED, {
                        playbackRate: ol
                    })
                }
                function Tl() {
                    Pe("Native video element event: loadedmetadata"),
                    Qe.trigger(bt.PLAYBACK_METADATA_LOADED),
                    xa()
                }
                function $l() {
                    Pe("Native video element event: ended"),
                    na(),
                    sl(),
                    Qe.trigger(bt.PLAYBACK_ENDED, {
                        isNativeEnded: !0
                    })
                }
                function Qa(ol) {
                    var cl = ol.target || ol.srcElement;
                    Qe.trigger(bt.PLAYBACK_ERROR, {
                        error: cl.error
                    })
                }
                function Sl(ol) {
                    var cl, Kl = void 0, Ma = ol.bufferedRanges;
                    if (Ma && Ma.length && (!Kt[ri.id] || Kt[ri.id].started !== !0)) {
                        var xs = ol.sender.getType();
                        Ea[ri.id] === void 0 && (Ea[ri.id] = []),
                        Ea[ri.id][xs] = Ma,
                        Kt[ri.id] === void 0 && (Kt[ri.id] = [],
                        Kt[ri.id].started = !1),
                        Kt[ri.id][xs] === void 0 && (Kt[ri.id][xs] = Math.max(Ma.start(0), ri.start));
                        var fl = ei.isVideoTrackPresent()
                          , bl = ei.isAudioTrackPresent();
                        if (cl = Ha(!1),
                        bl && fl) {
                            if (!isNaN(Kt[ri.id].audio) && !isNaN(Kt[ri.id].video) && (Kt[ri.id].audio < Kt[ri.id].video ? (Kl = Kt[ri.id].video > cl ? Kt[ri.id].video : cl,
                            Ma = Ea[ri.id].audio) : (Kl = Kt[ri.id].audio > cl ? Kt[ri.id].audio : cl,
                            Ma = Ea[ri.id].video),
                            function(xl, Zl) {
                                if (Zl && Zl.length > 0) {
                                    for (var hu = 0, Au = Zl.length; hu < Au; hu++)
                                        if (xl >= Zl.start(hu) && xl < Zl.end(hu))
                                            return !0
                                }
                                return !1
                            }(Kl, Ma))) {
                                var Cl = Na();
                                !va() && Kl !== 0 && Kl > Cl && (Sa(Kl + .2),
                                Pe("Playback controller seek hack", Kl + .2)),
                                Kt[ri.id].started = !0
                            }
                        } else
                            Kt[ri.id][xs] && (Kl = Kt[ri.id][xs] > cl ? Kt[ri.id][xs] : cl,
                            va() || Sa(Kl),
                            Kt[ri.id].started = !0)
                    }
                }
                function nu(ol) {
                    ol.streamInfo.id === ri.id && ti.setStallState(ol.mediaType, ol.state === ku.BUFFER_EMPTY)
                }
                function ru(ol) {
                    Pe("Native video element event: stalled", ol),
                    Qe.trigger(bt.PLAYBACK_STALLED, {
                        e: ol
                    })
                }
                return xe = {
                    initialize: function(ol) {
                        ri = ol,
                        ti.addEventListener("canplay", il),
                        ti.addEventListener("play", Ol),
                        ti.addEventListener("waiting", _l),
                        ti.addEventListener("playing", Ul),
                        ti.addEventListener("pause", Yl),
                        ti.addEventListener("error", Qa),
                        ti.addEventListener("seeking", ql),
                        ti.addEventListener("seeked", Ml),
                        ti.addEventListener("timeupdate", ul),
                        ti.addEventListener("progress", al),
                        ti.addEventListener("ratechange", El),
                        ti.addEventListener("loadedmetadata", Tl),
                        ti.addEventListener("ended", $l),
                        ti.addEventListener("stalled", ru),
                        ya = ri.manifestInfo.isDynamic,
                        ra = ri.start,
                        Qe.on(bt.DATA_UPDATE_COMPLETED, Ya, this),
                        Qe.on(bt.BYTES_APPENDED_END_FRAGMENT, Sl, this),
                        Qe.on(bt.BUFFER_LEVEL_STATE_CHANGED, nu, this),
                        Qe.on(bt.PERIOD_SWITCH_STARTED, ua, this),
                        wa && (wa = !1,
                        ma())
                    },
                    setConfig: function(ol) {
                        ol && (ol.streamController && (ei = ol.streamController),
                        ol.metricsModel && (sa = ol.metricsModel),
                        ol.dashMetrics && (la = ol.dashMetrics),
                        ol.manifestModel && (ha = ol.manifestModel),
                        ol.dashManifestModel && (ca = ol.dashManifestModel),
                        ol.mediaPlayerModel && (Aa = ol.mediaPlayerModel),
                        ol.adapter && (pa = ol.adapter),
                        ol.videoModel && (ti = ol.videoModel))
                    },
                    getStartTimeFromUriParameters: Va,
                    getStreamStartTime: Ha,
                    getTimeToStreamEnd: ta,
                    getTime: Na,
                    getPlaybackRate: Oa,
                    getPlayedRanges: function() {
                        return ri && ti ? ti.getPlayedRanges() : null
                    },
                    getEnded: Ia,
                    getIsDynamic: Ra,
                    getStreamController: function() {
                        return ei
                    },
                    setLiveStartTime: function(ol) {
                        ra = ol
                    },
                    getLiveStartTime: function() {
                        return ra
                    },
                    computeLiveDelay: function(ol, cl) {
                        var Kl = ca.getMpd(ha.getValue())
                          , Ma = void 0
                          , xs = void 0;
                        if (Ma = Aa.getUseSuggestedPresentationDelay() && Kl.hasOwnProperty(ie.SUGGESTED_PRESENTATION_DELAY) ? Kl.suggestedPresentationDelay : Aa.getLowLatencyEnabled() ? 0 : Aa.getLiveDelay() ? Aa.getLiveDelay() : isNaN(ol) ? 2 * ri.manifestInfo.minBufferTime : ol * Aa.getLiveDelayFragmentCount(),
                        Kl.availabilityStartTime && (Da = Kl.availabilityStartTime.getTime()),
                        cl > 0) {
                            var fl = Math.max(cl - 10, cl / 2);
                            xs = Math.min(Ma, fl)
                        } else
                            xs = Ma;
                        return oi = xs,
                        xs
                    },
                    getLiveDelay: function() {
                        return oi
                    },
                    getCurrentLiveLatency: function() {
                        if (!ya || isNaN(Da))
                            return NaN;
                        var ol = Na();
                        return isNaN(ol) || ol === 0 ? 0 : (Math.round(new Date().getTime() - (1e3 * ol + Da)) / 1e3).toFixed(3)
                    },
                    play: ma,
                    isPaused: ia,
                    pause: na,
                    isSeeking: va,
                    seek: Sa,
                    getDuration: function() {
                        return ti.getElement().duration
                    },
                    reset: ka
                },
                ka(),
                xe
            }
            Bu.__dashjs_factory_name = "PlaybackController";
            var Mu = $.a.getSingletonFactory(Bu);
            function ud(xe) {
                var qt = (xe = xe || {}).timelineConverter
                  , Pe = xe.streamProcessor;
                return {
                    getLiveEdge: function() {
                        (function() {
                            if (!(qt && qt.hasOwnProperty("getExpectedLiveEdge") && Pe && Pe.hasOwnProperty("getCurrentRepresentationInfo")))
                                throw new Error("Missing config parameter(s)")
                        }
                        )();
                        var Qe = Pe.getCurrentRepresentationInfo()
                          , ei = Qe.DVRWindow.end;
                        return Qe.useCalculatedLiveEdgeTime && (ei = qt.getExpectedLiveEdge(),
                        qt.setClientTimeOffset(ei - Qe.DVRWindow.end)),
                        ei
                    },
                    reset: function() {
                        qt = null,
                        Pe = null
                    }
                }
            }
            ud.__dashjs_factory_name = "LiveEdgeFinder";
            var Ed = $.a.getClassFactory(ud);
            function Qu(xe, qt) {
                if (!(xe instanceof qt))
                    throw new TypeError("Cannot call a class as a function")
            }
            var Zu = function xe() {
                Qu(this, xe),
                this.start = null,
                this.mstart = null,
                this.starttype = null,
                this.trace = []
            };
            Zu.INITIAL_PLAYOUT_START_REASON = "initial_playout",
            Zu.SEEK_START_REASON = "seek",
            Zu.RESUME_FROM_PAUSE_START_REASON = "resume",
            Zu.METRICS_COLLECTION_START_REASON = "metrics_collection_start";
            var Pu = function xe() {
                Qu(this, xe),
                this.representationid = null,
                this.subreplevel = null,
                this.start = null,
                this.mstart = null,
                this.duration = null,
                this.playbackspeed = null,
                this.stopreason = null
            };
            function _d(xe) {
                xe = xe || {};
                var qt = !1
                  , Pe = this.context
                  , Qe = Re(Pe).getInstance()
                  , ei = xe.dashMetrics
                  , sa = xe.metricsModel
                  , la = xe.mediaPlayerModel
                  , ha = xe.abrController;
                function ca(ra, ni, Kt) {
                    var oi = NaN
                      , Ea = ra.getCurrentRepresentationInfo();
                    if (ni !== ie.FRAGMENTED_TEXT)
                        if (ni === ie.AUDIO && Kt) {
                            var ri = ei.getCurrentBufferLevel(sa.getReadOnlyMetricsFor(ie.VIDEO));
                            oi = isNaN(Ea.fragmentDuration) ? ri : Math.max(ri, Ea.fragmentDuration),
                            qt && (oi = Math.min(oi, la.getStableBufferTime()))
                        } else {
                            var ya = Ea.mediaInfo.streamInfo;
                            ha.isPlayingAtTopQuality(ya) && !qt ? oi = ya.manifestInfo.duration >= la.getLongFormContentDurationThreshold() ? la.getBufferTimeAtTopQualityLongForm() : la.getBufferTimeAtTopQuality() : oi = la.getStableBufferTime()
                        }
                    return oi
                }
                function pa() {
                    qt = !0
                }
                var ti = {
                    execute: function(ra, ni, Kt, oi) {
                        return (oi && oi + ei.getCurrentBufferLevel(sa.getReadOnlyMetricsFor(ni)) || ei.getCurrentBufferLevel(sa.getReadOnlyMetricsFor(ni))) < ca(ra, ni, Kt)
                    },
                    getBufferTarget: ca
                };
                return function() {
                    Qe.on(bt.QUOTA_EXCEEDED, pa, this)
                }(),
                ti
            }
            Pu.REPRESENTATION_SWITCH_STOP_REASON = "representation_switch",
            Pu.REBUFFERING_REASON = "rebuffering",
            Pu.USER_REQUEST_STOP_REASON = "user_request",
            Pu.END_OF_PERIOD_STOP_REASON = "end_of_period",
            Pu.END_OF_CONTENT_STOP_REASON = "end_of_content",
            Pu.METRICS_COLLECTION_STOP_REASON = "metrics_collection_end",
            Pu.FAILURE_STOP_REASON = "failure",
            _d.__dashjs_factory_name = "BufferLevelRule";
            var Ld = $.a.getClassFactory(_d);
            function tc(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = xe.adapter;
                return {
                    execute: function(ei, sa) {
                        var la = ei.getCurrentRepresentationInfo()
                          , ha = la.mediaInfo.type
                          , ca = ei.getScheduleController()
                          , pa = ca.getSeekTarget()
                          , ti = !isNaN(pa)
                          , ra = ei.getBufferController()
                          , ni = ti ? pa : Qe.getIndexHandlerTime(ei);
                        if (isNaN(ni))
                            return null;
                        if (ti && ca.setSeekTarget(NaN),
                        ra) {
                            var Kt = ra.getRangeAt(ni);
                            Kt === null || ti || (Pe("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for", ha, ".", ni, "was changed to", Kt.end),
                            ni = Kt.end)
                        }
                        var oi = void 0;
                        if (sa)
                            ni = sa.startTime + sa.duration / 2,
                            oi = Qe.getFragmentRequestForTime(ei, la, ni, {
                                timeThreshold: 0,
                                ignoreIsFinished: !0
                            });
                        else {
                            for (oi = Qe.getFragmentRequestForTime(ei, la, ni, {
                                keepIdx: !ti
                            }); oi && oi.action !== ii.ACTION_COMPLETE && ei.getFragmentModel().isFragmentLoaded(oi); )
                                oi = Qe.getNextFragmentRequest(ei, la);
                            oi && (isNaN(oi.startTime + oi.duration) || Qe.setIndexHandlerTime(ei, oi.startTime + oi.duration),
                            oi.delayLoadingTime = new Date().getTime() + ca.getTimeToLoadDelay(),
                            ca.setTimeToLoadDelay(0))
                        }
                        return oi
                    }
                }
            }
            tc.__dashjs_factory_name = "NextFragmentRequestRule";
            var Ef = $.a.getClassFactory(tc);
            function ic(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = xe.metricsModel
                  , ei = xe.adapter
                  , sa = xe.dashMetrics
                  , la = xe.dashManifestModel
                  , ha = xe.timelineConverter
                  , ca = xe.mediaPlayerModel
                  , pa = xe.abrController
                  , ti = xe.playbackController
                  , ra = xe.streamController
                  , ni = xe.type
                  , Kt = xe.streamProcessor
                  , oi = xe.mediaController
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = void 0
                  , wa = void 0
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0
                  , Na = void 0
                  , Oa = void 0
                  , Ia = void 0
                  , Ra = void 0
                  , ka = void 0
                  , Va = void 0
                  , Ha = void 0
                  , xa = void 0
                  , sl = void 0
                  , gl = void 0
                  , Ya = {
                    video: -1,
                    audio: -1
                };
                function il() {
                    Aa && !Kt.isBufferingCompleted() ? (ri("[ScheduleController][", ni, "] start"),
                    Vu(),
                    _a = !1,
                    wa && (wa = !1),
                    Ml(!1),
                    Yl(0)) : ri("[ScheduleController][", ni, "] start denied")
                }
                function Ol() {
                    _a || (ri("[ScheduleController][", ni, "] stop"),
                    _a = !0,
                    clearTimeout(na))
                }
                function _l(qa, dl) {
                    Ra[dl] = Ra[dl] || {};
                    var Bl = pa.getTopQualityIndexFor(qa, dl);
                    return Ra[dl][qa] != Bl && (ri("Top quality " + qa + " index has changed from " + Ra[dl][qa] + " to " + Bl),
                    Ra[dl][qa] = Bl,
                    !0)
                }
                function Ul() {
                    var qa = Kt.getBufferController();
                    if (_a || ma || ti.isPaused() && !Oa)
                        ri("[ScheduleController][", ni, "] - schedule stop!");
                    else if (qa.getIsBufferingCompleted())
                        ri("Schedule stop because buffering is completed!");
                    else {
                        (function() {
                            var iu = 1.5 * (Aa.fragmentDuration || 5)
                              , zl = ya.getRequests({
                                state: ga.FRAGMENT_MODEL_EXECUTED,
                                time: ti.getTime() + iu,
                                threshold: 0
                            })[0];
                            if (zl && Va.indexOf(zl) === -1 && !la.getIsTextTrack(ni)) {
                                var su = ca.getFastSwitchEnabled()
                                  , oa = Kt.getBufferLevel()
                                  , La = pa.getAbandonmentStateFor(ni);
                                zl.mediaType && pa.setCurrentSegmentInfoFor(zl.mediaType, {
                                    index: zl.index,
                                    startTime: zl.startTime,
                                    duration: zl.duration,
                                    url: zl.url
                                });
                                var Ja = !oi.isCurrentTrack(zl.mediaInfo) && oi.getSwitchMode(zl.mediaInfo.type) === Hl.TRACK_SWITCH_MODE_NEVER_REPLACE
                                  , ks = zl.quality !== Aa.quality;
                                su && (Ja || ks) && oa >= iu && La !== Ba.ABANDON_LOAD ? (El(zl),
                                ri("Reloading outdated fragment at index: ", zl.index)) : zl.quality > Aa.quality && (ri("The buffer has better quality it in then what we would request so set append point to end of buffer!!"),
                                wu(ti.getTime() + Kt.getBufferLevel()))
                            }
                        }
                        )();
                        var dl = Va.length > 0
                          , Bl = Kt.getStreamInfo();
                        xa || isNaN(ka) || Ha || dl || _l(Aa.mediaInfo.type, Bl.id) || Sa.execute(Kt, ni, ra.isVideoTrackPresent(), qa.getStoreBufferLevel()) ? (Ml(!0),
                        dl || Ha || pa.checkPlaybackQuality(ni),
                        function() {
                            Pe.trigger(bt.GET_NEXT_FRAGMENT, {
                                mediaType: ni,
                                currentTime: Kt.getPlaybackController().getTime(),
                                bufferLevel: Kt.getBufferLevel(),
                                bufferResetInProgress: xa,
                                lastInitQuality: isNaN(ka),
                                switchTrack: Ha,
                                isReplacement: dl,
                                hasTopQualityChanged: _l(Aa.mediaInfo.type, Bl.id),
                                bufferLevelRule: Sa.execute(Kt, ni, ra.isVideoTrackPresent(), qa.getStoreBufferLevel()),
                                final: xa || isNaN(ka) || Ha || dl || _l(Aa.mediaInfo.type, Bl.id) || Sa.execute(Kt, ni, ra.isVideoTrackPresent(), qa.getStoreBufferLevel())
                            });
                            var iu = Kt.getFragmentController();
                            if (Aa.quality !== ka)
                                ri("ScheduleController - " + ni + " - quality has changed, get init request for representationid = " + Aa.id),
                                ka = Aa.quality,
                                Kt.switchInitData(Aa.id);
                            else if (Ha)
                                ri("ScheduleController - " + ni + " - switch track has been asked, get init request for " + ni + " with representationid = " + Aa.id),
                                xa = oi.getSwitchMode(ni) === Hl.TRACK_SWITCH_MODE_ALWAYS_REPLACE,
                                Kt.switchInitData(Aa.id, xa),
                                ka = Aa.quality,
                                Ha = !1;
                            else {
                                var zl = Va.shift();
                                if (iu.isInitializationRequest(zl))
                                    Kt.switchInitData(zl.representationId);
                                else {
                                    var su = void 0;
                                    Kt.getBufferController().getIsPruningInProgress() || !(su = Na.execute(Kt, zl)) && Bl.manifestInfo && Bl.manifestInfo.isDynamic && ri("getNextFragment - " + ni + " - Playing at the bleeding live edge and frag is not available yet"),
                                    su ? (ri("ScheduleController - " + ni + " - getNextFragment - request is " + su.url),
                                    ni === "video" && pa.getAutoSwitchBitrateFor(ni) && Object.keys(Ya).forEach(function(oa) {
                                        Ya[oa] !== -1 && (su.isSwitchingQn = !0)
                                    }),
                                    ya.executeRequest(su)) : (Ml(!1),
                                    Yl(500))
                                }
                            }
                        }()) : Yl(500)
                    }
                }
                function Yl(qa) {
                    clearTimeout(na),
                    na = setTimeout(Ul, qa)
                }
                function ql(qa) {
                    qa.sender && qa.sender.getStreamProcessor() === Kt && ul(Aa.quality)
                }
                function Ml(qa) {
                    ma !== qa ? ma = qa : ri("[ScheduleController][", ni, "] isFragmentProcessingInProgress is already equal to", qa)
                }
                function ul(qa) {
                    var dl = ei.getInitRequest(Kt, qa);
                    dl && (dl.mediaType && pa.setCurrentSegmentInfoFor(dl.mediaType, {
                        index: dl.index,
                        startTime: dl.startTime,
                        duration: dl.duration,
                        url: dl.url
                    }),
                    Ml(!0),
                    ya.executeRequest(dl))
                }
                function al() {
                    Ha = !0
                }
                function El(qa) {
                    Va.push(qa)
                }
                function Tl(qa) {
                    if (ni === qa.mediaType && Kt.getStreamInfo().id === qa.streamInfo.id) {
                        if ((Aa = Kt.getRepresentationInfoForQuality(qa.newQuality)) == null)
                            throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");
                        Ya[ni] = qa.newQuality,
                        Uu(new Date, Pu.REPRESENTATION_SWITCH_STOP_REASON),
                        Vu(),
                        ti.isPaused() && (gl = {
                            type: ni,
                            oldQuality: qa.oldQuality
                        })
                    }
                }
                function $l(qa) {
                    if (ti && ya) {
                        var dl = ya.getRequests({
                            state: ga.FRAGMENT_MODEL_EXECUTED,
                            time: ti.getTime(),
                            threshold: 0
                        })[0];
                        dl && ti.getTime() >= dl.startTime && ((!Ia.mediaInfo || dl.mediaInfo.type === Ia.mediaInfo.type && dl.mediaInfo.id !== Ia.mediaInfo.id) && qa && Pe.trigger(bt.TRACK_CHANGE_RENDERED, {
                            mediaType: ni,
                            oldMediaInfo: Ia.mediaInfo,
                            newMediaInfo: dl.mediaInfo
                        }),
                        dl.quality === Ia.quality && dl.adaptationIndex === Ia.adaptationIndex || !qa || Ya[ni] === dl.quality && (Pe.trigger(bt.QUALITY_CHANGE_RENDERED, {
                            mediaType: ni,
                            oldQuality: Ia.quality,
                            newQuality: dl.quality
                        }),
                        Ya[ni] = -1,
                        gl = null),
                        Ia = {
                            mediaInfo: dl.mediaInfo,
                            quality: dl.quality,
                            adaptationIndex: dl.adaptationIndex
                        })
                    }
                }
                function Qa(qa) {
                    qa.error || qa.sender.getStreamProcessor() !== Kt || (Aa = ei.convertDataToRepresentationInfo(qa.currentRepresentation),
                    ca.getAppendingSourceState() && al())
                }
                function Sl(qa) {
                    qa.error || Kt.getStreamInfo().id !== qa.streamInfo.id || (Aa = Kt.getCurrentRepresentationInfo(),
                    wa && (ti.getIsDynamic() ? (ha.setTimeSyncCompleted(!0),
                    function() {
                        var dl = Kt.getLiveEdgeFinder();
                        if (dl) {
                            var Bl = dl.getLiveEdge()
                              , iu = Aa.mediaInfo.streamInfo.manifestInfo.DVRWindowSize / 2
                              , zl = Bl - ti.computeLiveDelay(Aa.fragmentDuration, iu)
                              , su = ei.getFragmentRequestForTime(Kt, Aa, zl, {
                                ignoreIsFinished: !0
                            });
                            if (ca.getLowLatencyEnabled()) {
                                var oa = su.duration < ca.getLiveDelay() ? su.startTime : su.startTime + su.duration - ca.getLiveDelay();
                                ti.setLiveStartTime(oa)
                            } else
                                ti.setLiveStartTime(su.startTime);
                            (va = ti.getStreamStartTime(!1, Bl)) > Aa.mediaInfo.streamInfo.start + Aa.mediaInfo.streamInfo.duration && ti.seek(va);
                            var La = sa.getCurrentManifestUpdate(Qe.getMetricsFor(ie.STREAM));
                            Qe.updateManifestUpdateInfo(La, {
                                currentTime: va,
                                presentationStartTime: Bl,
                                latency: Bl - va,
                                clientTimeOffset: ha.getClientTimeOffset()
                            })
                        }
                    }()) : (va = ti.getStreamStartTime(!1),
                    Kt.getBufferController().setSeekStartTime(va))),
                    _a && il())
                }
                function nu(qa) {
                    qa.fragmentModel === ya && (Ol(),
                    Ml(!1),
                    ri("[ScheduleController] Stream is complete"),
                    ca.getAppendingSourceState() && il())
                }
                function ru(qa) {
                    qa.sender === ya && (ri("[ScheduleController][", ni, "] - onFragmentLoadingCompleted"),
                    la.getIsTextTrack(ni) && Ml(!1),
                    qa.error && qa.request.serviceLocation && !_a && Ml(!1),
                    xa && (sl = qa.request),
                    ti.isPaused() && gl && qa.request.quality === Ya[ni] && (Pe.trigger(bt.QUALITY_CHANGE_RENDERED, {
                        mediaType: ni,
                        oldQuality: Ia.quality || gl.oldQuality,
                        newQuality: qa.request.quality
                    }),
                    Ya[ni] = -1,
                    gl = null))
                }
                function ol() {
                    $l(!0)
                }
                function cl(qa) {
                    qa.sender.getStreamProcessor() !== Kt || qa.fromMulti || (xa && !isNaN(qa.startTime) && (xa = !1,
                    ya.addExecutedRequest(sl)),
                    Ml(!1),
                    Yl(0))
                }
                function Kl(qa) {
                    qa.streamProcessor === Kt && (ri("[ScheduleController][onFragmentLoadingAbandoned] for " + ni + ", request: " + qa.request.url + " has been aborted"),
                    ti.isSeeking() || Ha || (ri("[ScheduleController][onFragmentLoadingAbandoned] for " + ni + ", request: " + qa.request.url + " has to be downloaded again, origin is not seeking process or switch track call"),
                    El(qa.request)),
                    Ml(!1),
                    Yl(0))
                }
                function Ma(qa) {
                    qa.sender.getStreamProcessor() === Kt && Ol()
                }
                function xs(qa) {
                    qa.sender.getStreamProcessor() === Kt && (qa.unintended ? Kt.getFragmentModel().removeExecutedRequestsAfterTime(qa.from, Kt.getStreamInfo().duration) : ni === ie.AUDIO && ca.getEnableMultipleAudioTracks() ? Kt.getFragmentModel().syncExecutedRequestsWithMultipleLevels(Kt.getBufferController().getMultiBufferRanges(), Kt.getStreamInfo().duration) : Kt.getFragmentModel().syncExecutedRequestsWithBufferedRange(Kt.getBufferController().getBuffer().getAllBufferRanges(), Kt.getStreamInfo().duration),
                    qa.hasEnoughSpaceToAppend && _a && il())
                }
                function fl(qa) {
                    qa.sender.getStreamProcessor() !== Kt || qa.state !== ku.BUFFER_EMPTY || ti.isSeeking() || (ri("[ScheduleController][", ni, "] - Buffer is empty! Stalling!"),
                    Uu(new Date, Pu.REBUFFERING_REASON))
                }
                function bl(qa) {
                    qa.sender.getStreamProcessor() === Kt && (Ol(),
                    Ml(!1))
                }
                function Cl() {
                    ya.abortRequests(),
                    Ol()
                }
                function xl(qa) {
                    qa.sender.getStreamProcessor() === Kt && ul(qa.index)
                }
                function Zl() {
                    !_a && Oa || il()
                }
                function hu(qa) {
                    va = qa.seekTime,
                    xu(0),
                    _a && il();
                    var dl = sa.getCurrentManifestUpdate(Qe.getMetricsFor(ie.STREAM))
                      , Bl = Aa.DVRWindow && ti ? Aa.DVRWindow.end - ti.getTime() : NaN;
                    Qe.updateManifestUpdateInfo(dl, {
                        latency: Bl
                    }),
                    ma ? (ri("[ScheduleController][onPlaybackSeeking] for " + ni + ", call fragmentModel.abortRequests in order to seek quicker"),
                    ya.abortRequests(),
                    Ya[ni] >= 0 && (ei.setIndexHandlerTime(Kt, va),
                    Kt.switchInitData(Aa.id)),
                    Ml(!1),
                    Yl(500)) : Yl(0)
                }
                function Au(qa) {
                    ua && (ua.playbackspeed = qa.playbackRate.toString())
                }
                function wu(qa) {
                    va = qa
                }
                function xu(qa) {
                    ia = qa
                }
                function Uu(qa, dl) {
                    if (Da && ta === !1) {
                        var Bl = ua.start
                          , iu = qa.getTime() - Bl.getTime();
                        ua.duration = iu,
                        ua.stopreason = dl,
                        Da.trace.push(ua),
                        ta = !0
                    }
                }
                function Vu() {
                    Da && ta === !0 && Aa && (ta = !1,
                    (ua = new Pu).representationid = Aa.id,
                    ua.start = new Date,
                    ua.mstart = 1e3 * ti.getTime(),
                    ua.playbackspeed = ti.getPlaybackRate().toString())
                }
                function Wu() {
                    ka = NaN
                }
                function Os() {
                    ma = !1,
                    ia = 0,
                    va = NaN,
                    Da = null,
                    ua = null,
                    ta = !0,
                    wa = !0,
                    ka = NaN,
                    Ia = {
                        mediaInfo: void 0,
                        quality: NaN,
                        adaptationIndex: NaN
                    },
                    Ra = {},
                    Va = [],
                    _a = !0,
                    Ha = !1,
                    xa = !1,
                    sl = null
                }
                return Ea = {
                    initialize: function() {
                        ya = Kt.getFragmentModel(),
                        Oa = ca.getScheduleWhilePaused(),
                        Sa = Ld(qt).create({
                            abrController: pa,
                            dashMetrics: sa,
                            metricsModel: Qe,
                            mediaPlayerModel: ca
                        }),
                        Na = Ef(qt).create({
                            adapter: ei
                        }),
                        la.getIsTextTrack(ni) && Pe.on(bt.TIMED_TEXT_REQUESTED, xl, this),
                        Pe.on(bt.QUALITY_CHANGE_REQUESTED, Tl, this),
                        Pe.on(bt.DATA_UPDATE_STARTED, Ma, this),
                        Pe.on(bt.DATA_UPDATE_COMPLETED, Qa, this),
                        Pe.on(bt.FRAGMENT_LOADING_COMPLETED, ru, this),
                        Pe.on(bt.STREAM_COMPLETED, nu, this),
                        Pe.on(bt.STREAM_INITIALIZED, Sl, this),
                        Pe.on(bt.BUFFER_LEVEL_STATE_CHANGED, fl, this),
                        Pe.on(bt.BUFFER_CLEARED, xs, this),
                        Pe.on(bt.BYTES_APPENDED_END_FRAGMENT, cl, this),
                        Pe.on(bt.INIT_REQUESTED, ql, this),
                        Pe.on(bt.QUOTA_EXCEEDED, bl, this),
                        Pe.on(bt.PLAYBACK_SEEKING, hu, this),
                        Pe.on(bt.PLAYBACK_STARTED, Zl, this),
                        Pe.on(bt.PLAYBACK_RATE_CHANGED, Au, this),
                        Pe.on(bt.PLAYBACK_TIME_UPDATED, ol, this),
                        Pe.on(bt.URL_RESOLUTION_FAILED, Cl, this),
                        Pe.on(bt.FRAGMENT_LOADING_ABANDONED, Kl, this),
                        Pe.on(bt.MANIFEST_UPDATED, Wu, this),
                        ni === ie.AUDIO && ca.getEnableMultipleAudioTracks() && Pe.on(bt.MULTI_AUDIO_TRACK_APPEND, cl, this)
                    },
                    getType: function() {
                        return ni
                    },
                    getSeekTarget: function() {
                        return va
                    },
                    setSeekTarget: wu,
                    setTimeToLoadDelay: xu,
                    getTimeToLoadDelay: function() {
                        return ia
                    },
                    replaceRequest: El,
                    switchTrackAsked: al,
                    isStarted: function() {
                        return _a === !1
                    },
                    start: il,
                    stop: Ol,
                    reset: function() {
                        Pe.off(bt.DATA_UPDATE_STARTED, Ma, this),
                        Pe.off(bt.DATA_UPDATE_COMPLETED, Qa, this),
                        Pe.off(bt.BUFFER_LEVEL_STATE_CHANGED, fl, this),
                        Pe.off(bt.QUALITY_CHANGE_REQUESTED, Tl, this),
                        Pe.off(bt.FRAGMENT_LOADING_COMPLETED, ru, this),
                        Pe.off(bt.STREAM_COMPLETED, nu, this),
                        Pe.off(bt.STREAM_INITIALIZED, Sl, this),
                        Pe.off(bt.QUOTA_EXCEEDED, bl, this),
                        Pe.off(bt.BYTES_APPENDED_END_FRAGMENT, cl, this),
                        Pe.off(bt.BUFFER_CLEARED, xs, this),
                        Pe.off(bt.INIT_REQUESTED, ql, this),
                        Pe.off(bt.PLAYBACK_RATE_CHANGED, Au, this),
                        Pe.off(bt.PLAYBACK_SEEKING, hu, this),
                        Pe.off(bt.PLAYBACK_STARTED, Zl, this),
                        Pe.off(bt.PLAYBACK_TIME_UPDATED, ol, this),
                        Pe.off(bt.URL_RESOLUTION_FAILED, Cl, this),
                        Pe.off(bt.FRAGMENT_LOADING_ABANDONED, Kl, this),
                        Pe.off(bt.MANIFEST_UPDATED, Wu, this),
                        la.getIsTextTrack(ni) && Pe.off(bt.TIMED_TEXT_REQUESTED, xl, this),
                        Ol(),
                        $l(!1),
                        Os()
                    },
                    setPlayList: function(qa) {
                        Da = qa
                    },
                    getBufferTarget: function() {
                        return Sa.getBufferTarget(Kt, ni, ra.isVideoTrackPresent())
                    },
                    finalisePlayList: function(qa, dl) {
                        Uu(qa, dl),
                        Da = null
                    }
                },
                ri = aa(qt).getInstance().log.bind(Ea),
                Os(),
                Ea
            }
            ic.__dashjs_factory_name = "ScheduleController";
            var _f = $.a.getClassFactory(ic)
              , Ga = new (function() {
                function xe() {
                    (function(qt, Pe) {
                        if (!(qt instanceof Pe))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this.init()
                }
                return xe.prototype.init = function() {
                    this.BASE_URL = "BaseURL",
                    this.SEGMENT_BASE = "SegmentBase",
                    this.SEGMENT_TEMPLATE = "SegmentTemplate",
                    this.SEGMENT_LIST = "SegmentList",
                    this.SEGMENT_URL = "SegmentURL",
                    this.SEGMENT_TIMELINE = "SegmentTimeline",
                    this.SEGMENT_PROFILES = "segmentProfiles",
                    this.ADAPTATION_SET = "AdaptationSet",
                    this.REPRESENTATION = "Representation",
                    this.REPRESENTATION_INDEX = "RepresentationIndex",
                    this.SUB_REPRESENTATION = "SubRepresentation",
                    this.INITIALIZATION = "Initialization",
                    this.INITIALIZATION_MINUS = "initialization",
                    this.MPD = "MPD",
                    this.PERIOD = "Period",
                    this.ASSET_IDENTIFIER = "AssetIdentifier",
                    this.EVENT_STREAM = "EventStream",
                    this.ID = "id",
                    this.PROFILES = "profiles",
                    this.SERVICE_LOCATION = "serviceLocation",
                    this.RANGE = "range",
                    this.INDEX = "index",
                    this.MEDIA = "media",
                    this.BYTE_RANGE = "byteRange",
                    this.INDEX_RANGE = "indexRange",
                    this.MEDIA_RANGE = "mediaRange",
                    this.VALUE = "value",
                    this.CONTENT_TYPE = "contentType",
                    this.MIME_TYPE = "mimeType",
                    this.BITSTREAM_SWITCHING = "BitstreamSwitching",
                    this.BITSTREAM_SWITCHING_MINUS = "bitstreamSwitching",
                    this.CODECS = "codecs",
                    this.DEPENDENCY_ID = "dependencyId",
                    this.MEDIA_STREAM_STRUCTURE_ID = "mediaStreamStructureId",
                    this.METRICS = "Metrics",
                    this.METRICS_MINUS = "metrics",
                    this.REPORTING = "Reporting",
                    this.WIDTH = "width",
                    this.HEIGHT = "height",
                    this.SAR = "sar",
                    this.FRAMERATE = "frameRate",
                    this.AUDIO_SAMPLING_RATE = "audioSamplingRate",
                    this.MAXIMUM_SAP_PERIOD = "maximumSAPPeriod",
                    this.START_WITH_SAP = "startWithSAP",
                    this.MAX_PLAYOUT_RATE = "maxPlayoutRate",
                    this.CODING_DEPENDENCY = "codingDependency",
                    this.SCAN_TYPE = "scanType",
                    this.FRAME_PACKING = "FramePacking",
                    this.AUDIO_CHANNEL_CONFIGURATION = "AudioChannelConfiguration",
                    this.CONTENT_PROTECTION = "ContentProtection",
                    this.ESSENTIAL_PROPERTY = "EssentialProperty",
                    this.SUPPLEMENTAL_PROPERTY = "SupplementalProperty",
                    this.INBAND_EVENT_STREAM = "InbandEventStream",
                    this.ACCESSIBILITY = "Accessibility",
                    this.ROLE = "Role",
                    this.RATING = "Rating",
                    this.CONTENT_COMPONENT = "ContentComponent",
                    this.SUBSET = "Subset",
                    this.LANG = "lang",
                    this.VIEWPOINT = "Viewpoint",
                    this.ROLE_ASARRAY = "Role_asArray",
                    this.ACCESSIBILITY_ASARRAY = "Accessibility_asArray",
                    this.AUDIOCHANNELCONFIGURATION_ASARRAY = "AudioChannelConfiguration_asArray",
                    this.CONTENTPROTECTION_ASARRAY = "ContentProtection_asArray",
                    this.MAIN = "main",
                    this.DYNAMIC = "dynamic",
                    this.INTERACTIVE = "interactive",
                    this.MEDIA_PRESENTATION_DURATION = "mediaPresentationDuration",
                    this.MINIMUM_UPDATE_PERIOD = "minimumUpdatePeriod",
                    this.CODEC_PRIVATE_DATA = "codecPrivateData",
                    this.BANDWITH = "bandwidth",
                    this.SOURCE_URL = "sourceURL",
                    this.TIMESCALE = "timescale",
                    this.DURATION = "duration",
                    this.START_NUMBER = "startNumber",
                    this.PRESENTATION_TIME_OFFSET = "presentationTimeOffset",
                    this.AVAILABILITY_START_TIME = "availabilityStartTime",
                    this.AVAILABILITY_END_TIME = "availabilityEndTime",
                    this.TIMESHIFT_BUFFER_DEPTH = "timeShiftBufferDepth",
                    this.MAX_SEGMENT_DURATION = "maxSegmentDuration",
                    this.PRESENTATION_TIME = "presentationTime",
                    this.MIN_BUFFER_TIME = "minBufferTime",
                    this.MAX_SUBSEGMENT_DURATION = "maxSubsegmentDuration",
                    this.START = "start",
                    this.AVAILABILITY_TIME_OFFSET = "availabilityTimeOffset",
                    this.AVAILABILITY_TIME_COMPLETE = "availabilityTimeComplete",
                    this.CENC_DEFAULT_KID = "cenc:default_KID",
                    this.DVB_PRIORITY = "dvb:priority",
                    this.DVB_WEIGHT = "dvb:weight"
                }
                ,
                xe
            }())
              , md = function() {
                function xe() {
                    (function(qt, Pe) {
                        if (!(qt instanceof Pe))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this.id = null,
                    this.index = -1,
                    this.adaptation = null,
                    this.segmentInfoType = null,
                    this.initialization = null,
                    this.codecs = null,
                    this.codecPrivateData = null,
                    this.segmentDuration = NaN,
                    this.timescale = 1,
                    this.startNumber = 1,
                    this.indexRange = null,
                    this.range = null,
                    this.presentationTimeOffset = 0,
                    this.MSETimeOffset = NaN,
                    this.segmentAvailabilityRange = null,
                    this.availableSegmentsNumber = 0,
                    this.bandwidth = NaN,
                    this.width = NaN,
                    this.height = NaN,
                    this.scanType = null,
                    this.maxPlayoutRate = NaN,
                    this.availabilityTimeOffset = 0,
                    this.availabilityTimeComplete = !0
                }
                return xe.hasInitialization = function(qt) {
                    return qt.initialization !== null || qt.range !== null
                }
                ,
                xe.hasSegments = function(qt) {
                    return qt.segmentInfoType !== Ga.BASE_URL && qt.segmentInfoType !== Ga.SEGMENT_BASE && !qt.indexRange
                }
                ,
                xe
            }();
            function nc() {
                var xe = this.context
                  , qt = Re(xe).getInstance()
                  , Pe = void 0
                  , Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0
                  , ra = void 0
                  , ni = void 0
                  , Kt = void 0
                  , oi = void 0
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = [];
                function wa() {
                    return sa
                }
                function _a() {
                    return ha
                }
                function Da() {
                    Qe = null,
                    ei = -1,
                    sa = !0,
                    la = [],
                    ca = null,
                    ti = null,
                    ra = null,
                    ni = null,
                    Kt = null,
                    oi = null,
                    Ea = null
                }
                function ua() {
                    var Ra = new Date
                      , ka = _a()
                      , Va = 1e3 * ti.getTime();
                    ra.addRepresentationSwitch(ka.adaptation.type, Ra, Va, ka.id)
                }
                function ta() {
                    var Ra = ri.getStreamInfo()
                      , ka = Ra ? Ra.manifestInfo : null
                      , Va = ka ? ka.isDynamic : null
                      , Ha = Kt.calcSegmentAvailabilityRange(ha, Va);
                    ra.addDVRInfo(ri.getType(), ti.getTime(), ka, Ha)
                }
                function ma(Ra) {
                    return la[Ra]
                }
                function ia(Ra) {
                    return la.indexOf(Ra)
                }
                function na(Ra) {
                    var ka = Ra;
                    sa = !1,
                    qt.trigger(bt.AST_IN_FUTURE, {
                        delay: ka
                    }),
                    setTimeout(function() {
                        if (!wa()) {
                            sa = !0,
                            qt.trigger(bt.DATA_UPDATE_STARTED, {
                                sender: Pe
                            }),
                            la.forEach(function(Ha) {
                                Ha.segmentAvailabilityRange = null
                            });
                            for (var Va = 0; Va < la.length; Va++)
                                pa.updateRepresentation(la[Va], !0)
                        }
                    }, ka)
                }
                function va(Ra) {
                    if (Ra.sender.getStreamProcessor() === ri && wa()) {
                        var ka = Ra.representation
                          , Va = ra.getMetricsFor(ie.STREAM)
                          , Ha = _a().adaptation.type
                          , xa = ra.getMetricsFor(_a().adaptation.type)
                          , sl = Ea.getCurrentManifestUpdate(Va)
                          , gl = !1
                          , Ya = 0
                          , il = void 0
                          , Ol = void 0;
                        if (ka.adaptation.period.mpd.manifest.type === Ga.DYNAMIC && !ka.adaptation.period.mpd.manifest.ignorePostponeTimePeriod) {
                            var _l = ka.segmentAvailabilityRange.end - ka.segmentAvailabilityRange.start;
                            Ya = 1e3 * (ti.computeLiveDelay(ha.segmentDuration, ri.getStreamInfo().manifestInfo.DVRWindowSize) - _l)
                        }
                        if (Ya > 0)
                            return ta(),
                            na(Ya),
                            Ol = new ba(1,"Segments update failed",null),
                            void qt.trigger(bt.DATA_UPDATE_COMPLETED, {
                                sender: this,
                                data: Qe,
                                currentRepresentation: ha,
                                error: Ol
                            });
                        if (sl) {
                            for (var Ul = 0; Ul < sl.representationInfo.length; Ul++)
                                if ((il = sl.representationInfo[Ul]).index === ka.index && il.mediaType === ri.getType()) {
                                    gl = !0;
                                    break
                                }
                            gl || ra.addManifestUpdateRepresentationInfo(sl, ka.id, ka.index, ka.adaptation.period.index, ri.getType(), ka.presentationTimeOffset, ka.startNumber, ka.segmentInfoType)
                        }
                        (function(Yl) {
                            var ql = ca.getQualityFor(Yl)
                              , Ml = ri.getStreamInfo()
                              , ul = ca.getTopQualityIndexFor(Yl, Ml.id)
                              , al = ca.getMinAllowedIndexFor(Yl);
                            al !== void 0 && ql < al && (ql = al),
                            ql > ul && (ql = ul);
                            for (var El = ql; El < 1; El++) {
                                var Tl = la[El].segmentInfoType;
                                if (la[El].segmentAvailabilityRange === null || !md.hasInitialization(la[El]) || (Tl === Ga.SEGMENT_BASE || Tl === Ga.BASE_URL) && !la[El].segments)
                                    return !1
                            }
                            return !0
                        }
                        )(Ha) && (sa = !1,
                        ca.setPlaybackQuality(ri.getType(), ri.getStreamInfo(), ia(ha)),
                        ra.updateManifestUpdateInfo(sl, {
                            latency: ha.segmentAvailabilityRange.end - ti.getTime()
                        }),
                        Ea.getCurrentRepresentationSwitch(xa) || ua(),
                        qt.trigger(bt.DATA_UPDATE_COMPLETED, {
                            sender: this,
                            data: Qe,
                            currentRepresentation: ha
                        }))
                    }
                }
                function Sa(Ra) {
                    Ra.isDynamic && function(ka) {
                        for (var Va = void 0, Ha = 0, xa = la.length; Ha < xa; Ha++)
                            (Va = la[Ha]).segmentAvailabilityRange = Kt.calcSegmentAvailabilityRange(Va, ka)
                    }(Ra.isDynamic)
                }
                function Na(Ra) {
                    Ra.sender.getStreamProcessor() === ri && (ya.getValue().doNotUpdateDVRWindowOnBufferUpdated || ta())
                }
                function Oa(Ra) {
                    if (Ra.mediaType === ri.getType() && ri.getStreamInfo().id === Ra.streamInfo.id && Ra.oldQuality !== Ra.newQuality) {
                        var ka = Ra.newQuality;
                        Aa[ka] || (Aa[ka] = !0,
                        pa.updateRepresentation(la[ka], !0)),
                        ha = ma(Ra.newQuality);
                        var Va = ca.getThroughputHistory().getAverageThroughput(Ra.mediaType);
                        isNaN(Va) || ni.setSavedBitrateSettings(Ra.mediaType, Va),
                        ua()
                    }
                }
                function Ia(Ra) {
                    if (Ra.newDuration) {
                        var ka = _a();
                        ka && ka.adaptation.period && (ka.adaptation.period.duration = Ra.newDuration)
                    }
                }
                return Pe = {
                    initialize: function() {
                        pa = ri.getIndexHandler()
                    },
                    setConfig: function(Ra) {
                        Ra.abrController && (ca = Ra.abrController),
                        Ra.domStorage && (ni = Ra.domStorage),
                        Ra.metricsModel && (ra = Ra.metricsModel),
                        Ra.dashMetrics && (Ea = Ra.dashMetrics),
                        Ra.dashManifestModel && (oi = Ra.dashManifestModel),
                        Ra.playbackController && (ti = Ra.playbackController),
                        Ra.timelineConverter && (Kt = Ra.timelineConverter),
                        Ra.manifestModel && (ya = Ra.manifestModel),
                        Ra.streamProcessor && (ri = Ra.streamProcessor)
                    },
                    getData: function() {
                        return Qe
                    },
                    getDataIndex: function() {
                        return ei
                    },
                    isUpdating: wa,
                    updateData: function(Ra, ka, Va) {
                        var Ha = ri.getStreamInfo()
                          , xa = ca.getTopQualityIndexFor(Va, Ha.id)
                          , sl = ca.getMinAllowedIndexFor(Va)
                          , gl = void 0;
                        if (sa = !0,
                        qt.trigger(bt.DATA_UPDATE_STARTED, {
                            sender: this
                        }),
                        la = function(Ya) {
                            return ei = oi.getIndexForAdaptation(Qe, Ya.period.mpd.manifest, Ya.period.index),
                            oi.getRepresentationsForAdaptation(Ya)
                        }(ka),
                        Qe !== null && Qe.id == Ra.id || Va === ie.FRAGMENTED_TEXT || ca.getThroughputHistory().getAverageThroughput(Va) || ca.getInitialBitrateFor(Va, Ha),
                        gl = ca.getQualityFor(Va),
                        sl !== void 0 && gl < sl && (gl = sl),
                        gl > xa && (gl = xa),
                        ha = ma(gl),
                        Qe = Ra,
                        Va !== ie.VIDEO && Va !== ie.AUDIO && Va !== ie.FRAGMENTED_TEXT)
                            return sa = !1,
                            void qt.trigger(bt.DATA_UPDATE_COMPLETED, {
                                sender: this,
                                data: Qe,
                                currentRepresentation: ha
                            });
                        (Aa = [])[gl] = !0,
                        pa.updateRepresentation(la[gl], !0)
                    },
                    getStreamProcessor: function() {
                        return ri
                    },
                    getCurrentRepresentation: _a,
                    getRepresentationForQuality: ma,
                    getQualityForRepresentationId: function(Ra) {
                        return ia(la.find(function(ka) {
                            return ka.id === Ra
                        }))
                    },
                    reset: function() {
                        qt.off(bt.QUALITY_CHANGE_REQUESTED, Oa, Pe),
                        qt.off(bt.REPRESENTATION_UPDATED, va, Pe),
                        qt.off(bt.WALLCLOCK_TIME_UPDATED, Sa, Pe),
                        qt.off(bt.BUFFER_LEVEL_UPDATED, Na, Pe),
                        qt.off(bt.MANIFEST_VALIDITY_CHANGED, Ia, Pe),
                        Da(),
                        Aa = []
                    }
                },
                Da(),
                qt.on(bt.QUALITY_CHANGE_REQUESTED, Oa, Pe),
                qt.on(bt.REPRESENTATION_UPDATED, va, Pe),
                qt.on(bt.WALLCLOCK_TIME_UPDATED, Sa, Pe),
                qt.on(bt.BUFFER_LEVEL_UPDATED, Na, Pe),
                qt.on(bt.MANIFEST_VALIDITY_CHANGED, Ia, Pe),
                Pe
            }
            nc.__dashjs_factory_name = "RepresentationController";
            var Tf = $.a.getClassFactory(nc);
            function rc() {
                var xe = void 0
                  , qt = /^[a-z][a-z0-9+\-.]*:/i
                  , Pe = /^https?:\/\//i
                  , Qe = /^https:\/\//i
                  , ei = /^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i
                  , sa = function(Kt, oi) {
                    try {
                        return new window.URL(Kt,oi).toString()
                    } catch (Ea) {
                        return Kt
                    }
                }
                  , la = function(Kt, oi) {
                    var Ea = ha;
                    if (!oi || !ti(Kt))
                        return Kt;
                    ra(Kt) && (Ea = ca),
                    ni(Kt) && (Ea = pa);
                    var ri = Ea(oi)
                      , ya = ri.charAt(ri.length - 1) !== "/" && Kt.charAt(0) !== "/" ? "/" : "";
                    return [ri, Kt].join(ya)
                };
                function ha(Kt) {
                    var oi = Kt.indexOf("/")
                      , Ea = Kt.lastIndexOf("/");
                    return oi !== -1 ? Ea === oi + 1 ? Kt : (Kt.indexOf("?") !== -1 && (Kt = Kt.substring(0, Kt.indexOf("?"))),
                    Kt.substring(0, Ea + 1)) : ""
                }
                function ca(Kt) {
                    var oi = Kt.match(ei);
                    return oi ? oi[1] : ""
                }
                function pa(Kt) {
                    var oi = Kt.match(qt);
                    return oi ? oi[0] : ""
                }
                function ti(Kt) {
                    return !qt.test(Kt)
                }
                function ra(Kt) {
                    return ti(Kt) && Kt.charAt(0) === "/"
                }
                function ni(Kt) {
                    return Kt.indexOf("//") === 0
                }
                return function() {
                    try {
                        new window.URL("x","http://y"),
                        xe = sa
                    } catch (Kt) {} finally {
                        xe = xe || la
                    }
                }(),
                {
                    parseBaseUrl: ha,
                    parseOrigin: ca,
                    parseScheme: pa,
                    isRelative: ti,
                    isPathAbsolute: ra,
                    isSchemeRelative: ni,
                    isHTTPURL: function(Kt) {
                        return Pe.test(Kt)
                    },
                    isHTTPS: function(Kt) {
                        return Qe.test(Kt)
                    },
                    resolve: function(Kt, oi) {
                        return xe(Kt, oi)
                    }
                }
            }
            rc.__dashjs_factory_name = "URLUtils";
            var dd = $.a.getSingletonFactory(rc)
              , kd = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.indexRange = null,
                this.index = null,
                this.mediaRange = null,
                this.media = null,
                this.duration = NaN,
                this.replacementTime = null,
                this.replacementNumber = NaN,
                this.mediaStartTime = NaN,
                this.presentationStartTime = NaN,
                this.availabilityStartTime = NaN,
                this.availabilityEndTime = NaN,
                this.availabilityIdx = NaN,
                this.wallStartTime = NaN,
                this.representation = null
            };
            function Td(xe, qt) {
                for (; xe.length < qt; )
                    xe = "0" + xe;
                return xe
            }
            function oc(xe, qt) {
                return xe.representation.startNumber + qt
            }
            function cd(xe, qt, Pe) {
                var Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = qt.length
                  , ti = 2;
                if (!xe)
                    return xe;
                for (; ; ) {
                    if ((Qe = xe.indexOf("$" + qt)) < 0 || (ei = xe.indexOf("$", Qe + pa)) < 0)
                        return xe;
                    if ((sa = xe.indexOf("%0", Qe + pa)) > Qe && sa < ei)
                        switch (la = xe.charAt(ei - 1),
                        ha = parseInt(xe.substring(sa + ti, ei - 1), 10),
                        la) {
                        case "d":
                        case "i":
                        case "u":
                            ca = Td(Pe.toString(), ha);
                            break;
                        case "x":
                            ca = Td(Pe.toString(16), ha);
                            break;
                        case "X":
                            ca = Td(Pe.toString(16), ha).toUpperCase();
                            break;
                        case "o":
                            ca = Td(Pe.toString(8), ha);
                            break;
                        default:
                            return xe
                        }
                    else
                        ca = Pe;
                    xe = xe.substring(0, Qe) + ca + xe.substring(ei + 1)
                }
            }
            function ac(xe, qt, Pe, Qe) {
                var ei, sa, la = void 0, ha = void 0;
                return ha = Pe.segmentDuration,
                isNaN(ha) && (ha = Pe.adaptation.period.duration),
                ei = parseFloat((Pe.adaptation.period.start + Qe * ha).toFixed(5)),
                sa = parseFloat((ei + ha).toFixed(5)),
                (la = new kd).representation = Pe,
                la.duration = ha,
                la.presentationStartTime = ei,
                la.mediaStartTime = xe.calcMediaTimeFromPresentationTime(la.presentationStartTime, Pe),
                la.availabilityStartTime = xe.calcAvailabilityStartTimeFromPresentationTime(la.presentationStartTime, Pe.adaptation.period.mpd, qt),
                la.availabilityEndTime = xe.calcAvailabilityEndTimeFromPresentationTime(sa, Pe.adaptation.period.mpd, qt),
                la.wallStartTime = xe.calcWallTimeForSegment(la, qt),
                la.replacementNumber = oc(la, Qe),
                la.availabilityIdx = Qe,
                la
            }
            function sc(xe, qt, Pe, Qe, ei, sa, la, ha, ca, pa) {
                var ti, ra, ni = Qe / sa, Kt = Math.min(ei / sa, Pe.adaptation.period.mpd.maxSegmentDuration), oi = void 0;
                return ra = (ti = xe.calcPresentationTimeFromMediaTime(ni, Pe)) + Kt,
                (oi = new kd).representation = Pe,
                oi.duration = Kt,
                oi.mediaStartTime = ni,
                oi.presentationStartTime = ti,
                oi.availabilityStartTime = Pe.adaptation.period.mpd.manifest.loadedTime,
                oi.availabilityEndTime = xe.calcAvailabilityEndTimeFromPresentationTime(ra, Pe.adaptation.period.mpd, qt),
                oi.wallStartTime = xe.calcWallTimeForSegment(oi, qt),
                oi.replacementTime = pa || Qe,
                oi.replacementNumber = oc(oi, ca),
                la = cd(la, "Number", oi.replacementNumber),
                la = cd(la, "Time", oi.replacementTime),
                oi.media = la,
                oi.mediaRange = ha,
                oi.availabilityIdx = ca,
                oi
            }
            function gd(xe, qt) {
                if (!qt || !qt.segments)
                    return null;
                var Pe = qt.segments.length
                  , Qe = void 0
                  , ei = void 0;
                if (xe < Pe && (Qe = qt.segments[xe]) && Qe.availabilityIdx === xe)
                    return Qe;
                for (ei = 0; ei < Pe; ei++)
                    if ((Qe = qt.segments[ei]) && Qe.availabilityIdx === xe)
                        return Qe;
                return null
            }
            function lc(xe, qt, Pe, Qe, ei, sa) {
                var la = Pe.segmentDuration
                  , ha = Pe.adaptation.period.mpd.manifest.minBufferTime
                  , ca = Pe.segmentAvailabilityRange
                  , pa = {
                    start: xe.calcPeriodRelativeTimeFromMpdRelativeTime(Pe, ca.start),
                    end: xe.calcPeriodRelativeTimeFromMpdRelativeTime(Pe, ca.end)
                }
                  , ti = Pe.segments
                  , ra = 2 * la
                  , ni = sa || Math.max(2 * ha, 10 * la)
                  , Kt = NaN
                  , oi = null
                  , Ea = void 0;
                return pa.start = Math.max(pa.start, 0),
                qt && !xe.isTimeSyncCompleted() ? {
                    start: Ea = Math.floor(pa.start / la),
                    end: Math.floor(pa.end / la)
                } : (Kt = ti && ti.length > 0 ? (oi = gd(ei, Pe)) ? xe.calcPeriodRelativeTimeFromMpdRelativeTime(Pe, oi.presentationStartTime) : ei > 0 ? ei * la : xe.calcPeriodRelativeTimeFromMpdRelativeTime(Pe, Qe) : ei > 0 ? ei * la : qt ? pa.end : pa.start,
                {
                    start: Ea = Math.floor(Math.max(Kt - ra, pa.start) / la),
                    end: Math.floor(Math.min(Ea + ni / la, pa.end / la))
                })
            }
            function uc(xe, qt) {
                var Pe = (xe = xe || {}).timelineConverter;
                return {
                    getSegments: function(Qe, ei, sa, la) {
                        if (function() {
                            if (!(Pe && Pe.hasOwnProperty("calcMediaTimeFromPresentationTime") && Pe.hasOwnProperty("calcSegmentAvailabilityRange") && Pe.hasOwnProperty("calcMediaTimeFromPresentationTime")))
                                throw new Error("Missing config parameter(s)")
                        }(),
                        !Qe)
                            throw new Error("no representation");
                        ei === void 0 && (ei = null);
                        var ha = Qe.adaptation.period.mpd.manifest.Period_asArray[Qe.adaptation.period.index].AdaptationSet_asArray[Qe.adaptation.index].Representation_asArray[Qe.index].SegmentTemplate || Qe.adaptation.period.mpd.manifest.Period_asArray[Qe.adaptation.period.index].AdaptationSet_asArray[Qe.adaptation.index].Representation_asArray[Qe.index].SegmentList
                          , ca = ha.SegmentTimeline
                          , pa = ha.SegmentURL_asArray
                          , ti = Qe.availableSegmentsNumber > 0
                          , ra = void 0;
                        ra = la || (sa > -1 || ei !== null ? 10 : 1 / 0);
                        var ni, Kt, oi, Ea = 0, ri = 0, ya = -1, Aa = [], wa = null, _a = void 0, Da = void 0, ua = void 0, ta = void 0, ma = void 0, ia = void 0, na = void 0, va = void 0, Sa = function(Oa, Ia) {
                            var Ra = ha.media
                              , ka = Oa.mediaRange;
                            return pa && (Ra = pa[Ia].media || "",
                            ka = pa[Ia].mediaRange),
                            sc(Pe, qt, Qe, Ea, Oa.d, va, Ra, ka, ya, Oa.tManifest)
                        };
                        for (va = Qe.timescale,
                        ni = ca.S_asArray,
                        oi = sa,
                        ei !== null && (wa = Pe.calcMediaTimeFromPresentationTime(ei, Qe)),
                        Da = 0,
                        Kt = ni.length; Da < Kt; Da++) {
                            if (ta = 0,
                            (_a = ni[Da]).hasOwnProperty("r") && (ta = _a.r),
                            _a.hasOwnProperty("t") && (ri = (Ea = _a.t) / va),
                            ta < 0) {
                                if ((ia = ni[Da + 1]) && ia.hasOwnProperty("t"))
                                    ma = ia.t / va;
                                else {
                                    var Na = Qe.segmentAvailabilityRange ? Qe.segmentAvailabilityRange.end : Pe.calcSegmentAvailabilityRange(Qe, qt).end;
                                    ma = Pe.calcMediaTimeFromPresentationTime(Na, Qe),
                                    Qe.segmentDuration = _a.d / va
                                }
                                ta = Math.ceil((ma - ri) / (_a.d / va)) - 1
                            }
                            if (na) {
                                if (ti)
                                    break;
                                ya += ta + 1
                            } else
                                for (ua = 0; ua <= ta; ua++)
                                    if (ya++,
                                    Aa.length > ra) {
                                        if (na = !0,
                                        ti)
                                            break
                                    } else
                                        wa !== null ? ri >= wa - _a.d / va * 1.5 && Aa.push(Sa(_a, ya)) : ya >= oi && Aa.push(Sa(_a, ya)),
                                        ri = (Ea += _a.d) / va
                        }
                        return ti || (Qe.availableSegmentsNumber = ya + 1),
                        Aa
                    }
                }
            }
            uc.__dashjs_factory_name = "TimelineSegmentsGetter";
            var Af = $.a.getClassFactory(uc);
            function dc(xe, qt) {
                var Pe = xe.timelineConverter;
                return {
                    getSegments: function(Qe, ei, sa, la) {
                        var ha, ca, pa, ti = Qe.adaptation.period.mpd.manifest.Period_asArray[Qe.adaptation.period.index].AdaptationSet_asArray[Qe.adaptation.index].Representation_asArray[Qe.index].SegmentTemplate, ra = Qe.segmentDuration, ni = Qe.segmentAvailabilityRange, Kt = [], oi = null, Ea = null, ri = void 0, ya = void 0;
                        for (pa = Qe.startNumber,
                        ha = (ri = isNaN(ra) && !qt ? {
                            start: pa,
                            end: pa
                        } : lc(Pe, qt, Qe, ei, sa, la)).start,
                        ca = ri.end,
                        ya = ha; ya <= ca; ya++)
                            (Ea = ac(Pe, qt, Qe, ya)).replacementTime = (pa + ya - 1) * Qe.segmentDuration,
                            oi = cd(oi = ti.media, "Number", Ea.replacementNumber),
                            oi = cd(oi, "Time", Ea.replacementTime),
                            Ea.media = oi,
                            Kt.push(Ea),
                            Ea = null;
                        return isNaN(ra) ? Qe.availableSegmentsNumber = 1 : Qe.availableSegmentsNumber = Math.ceil((ni.end - ni.start) / ra),
                        Kt
                    }
                }
            }
            dc.__dashjs_factory_name = "TemplateSegmentsGetter";
            var Sf = $.a.getClassFactory(dc);
            function cc(xe, qt) {
                var Pe = (xe = xe || {}).timelineConverter;
                return {
                    getSegments: function(Qe, ei, sa, la) {
                        var ha, ca, pa, ti, ra = Qe.adaptation.period.mpd.manifest.Period_asArray[Qe.adaptation.period.index].AdaptationSet_asArray[Qe.adaptation.index].Representation_asArray[Qe.index].SegmentList, ni = ra.SegmentURL_asArray.length, Kt = [], oi = void 0, Ea = void 0, ri = void 0;
                        for (ti = Qe.startNumber,
                        ha = lc(Pe, qt, Qe, ei, sa, la),
                        ca = Math.max(ha.start, 0),
                        pa = Math.min(ha.end, ra.SegmentURL_asArray.length - 1),
                        oi = ca; oi <= pa; oi++)
                            ri = ra.SegmentURL_asArray[oi],
                            (Ea = ac(Pe, qt, Qe, oi)).replacementTime = (ti + oi - 1) * Qe.segmentDuration,
                            Ea.media = ri.media ? ri.media : "",
                            Ea.mediaRange = ri.mediaRange,
                            Ea.index = ri.index,
                            Ea.indexRange = ri.indexRange,
                            Kt.push(Ea),
                            Ea = null;
                        return Qe.availableSegmentsNumber = ni,
                        Kt
                    }
                }
            }
            cc.__dashjs_factory_name = "ListSegmentsGetter";
            var If = $.a.getClassFactory(cc);
            function fc(xe, qt) {
                var Pe, Qe = this.context, ei = void 0, sa = void 0, la = void 0;
                return Pe = {
                    getSegments: function(ha, ca, pa, ti, ra) {
                        var ni = void 0
                          , Kt = ha.segmentInfoType;
                        Kt !== Ga.SEGMENT_BASE && Kt !== Ga.BASE_URL && function(oi, Ea) {
                            var ri = oi.segments
                              , ya = !1
                              , Aa = void 0
                              , wa = void 0;
                            return ri && ri.length !== 0 ? (wa = ri[0].availabilityIdx,
                            Aa = ri[ri.length - 1].availabilityIdx,
                            ya = Ea < wa || Ea > Aa) : ya = !0,
                            ya
                        }(ha, pa) ? (Kt === Ga.SEGMENT_TIMELINE ? ni = ei.getSegments(ha, ca, pa, ra) : Kt === Ga.SEGMENT_TEMPLATE ? ni = sa.getSegments(ha, ca, pa, ra) : Kt === Ga.SEGMENT_LIST && (ni = la.getSegments(ha, ca, pa, ra)),
                        ti && ti(ha, ni)) : ni = ha.segments
                    }
                },
                ei = Af(Qe).create(xe, qt),
                sa = Sf(Qe).create(xe, qt),
                la = If(Qe).create(xe, qt),
                Pe
            }
            fc.__dashjs_factory_name = "SegmentsGetter";
            var Df = $.a.getClassFactory(fc);
            function hc() {
                return {
                    modifyRequestURL: function(xe) {
                        return xe
                    },
                    modifyRequestHeader: function(xe) {
                        return xe
                    }
                }
            }
            hc.__dashjs_factory_name = "RequestModifier";
            var Pd = $.a.getSingletonFactory(hc);
            function pc(xe) {
                var qt = (xe = xe || {}).requestModifier;
                return {
                    load: function(Pe) {
                        var Qe = new Date
                          , ei = Pe.request
                          , sa = new XMLHttpRequest;
                        sa.open(Pe.method, Pe.url, !0),
                        ei.responseType && (sa.responseType = ei.responseType),
                        ei.range && sa.setRequestHeader("Range", "bytes=" + ei.range),
                        ei.requestStartDate || (ei.requestStartDate = Qe),
                        qt && (sa = qt.modifyRequestHeader(sa)),
                        sa.withCredentials = Pe.withCredentials,
                        Pe.request.loadInfo = {
                            rType: "XHR",
                            cdn: 0,
                            protocol: "TCP"
                        },
                        sa.onload = Pe.onload,
                        sa.onloadend = Pe.onend,
                        sa.onerror = Pe.onerror,
                        sa.timeout = Pe.timeout,
                        sa.ontimeout = Pe.ontimeout,
                        sa.onprogress = Pe.progress,
                        sa.onabort = Pe.onabort,
                        sa.onNcFail = Pe.onNcFail,
                        sa.onreadystatechange = function() {
                            if (sa.readyState === 2)
                                Pe.onHeadersReceived();
                            else if (sa.readyState === 4)
                                try {
                                    var la = sa.getAllResponseHeaders && sa.getAllResponseHeaders();
                                    la && la.indexOf("quic") > -1 && Pe.request && Pe.request.loadInfo && (Pe.request.loadInfo.protocol = "QUIC")
                                } catch (ha) {}
                        }
                        ,
                        sa.send(),
                        Pe.response = sa
                    },
                    abort: function(Pe) {
                        Pe && Pe.response && Pe.response.abort()
                    },
                    getP2pType: function() {
                        return ""
                    }
                }
            }
            pc.__dashjs_factory_name = "XHRLoader";
            var bf = $.a.getClassFactory(pc);
            function mc(xe) {
                var qt = void 0
                  , Pe = {
                    cdn: 0,
                    p2p: 0
                }
                  , Qe = void 0
                  , ei = (xe = xe || {}).p2pType
                  , sa = !1
                  , la = aa(this.context).getInstance().log
                  , ha = "[P2PLoader]";
                return {
                    load: function(ca) {
                        Qe = ca;
                        var pa = ca.request;
                        qt || (qt = new xe.supplier(ca.url,xe.video,pa.mediaType),
                        la(ha, "[" + ei + "] new sdk loader [" + pa.mediaType + "]")),
                        qt.onDataArrival = function(Kt) {
                            var oi = qt && qt.loadInfo();
                            oi && (pa.p2pLoadInfo || (pa.p2pLoadInfo = {
                                cdn: 0,
                                p2p: 0
                            }),
                            pa.p2pLoadInfo.url = oi.url),
                            ca.progress && ca.progress(null, Kt, oi && {
                                cdn: oi.cdn - Pe.cdn,
                                p2p: oi.p2p - Pe.p2p,
                                rType: "PCDN"
                            }),
                            Pe = oi || Pe
                        }
                        ,
                        qt.onError = function(Kt, oi) {
                            la(ha, "[" + ei + "] error, status:" + Kt + ", msg:" + oi + ", type:" + pa.mediaType),
                            ca.response = {
                                status: Kt,
                                statusText: oi
                            },
                            sa = !1,
                            ca.onerror(),
                            ca.onend()
                        }
                        ,
                        qt.onComplete = function() {
                            la(ha, "[" + ei + "] onComplete, type:" + Qe.request.mediaType),
                            sa = !1,
                            ca.onload(),
                            ca.onend()
                        }
                        ;
                        var ti = void 0;
                        if (pa.range) {
                            var ra = pa.range.split("-");
                            ti = {
                                from: parseInt(ra[0]),
                                to: parseInt(ra[1] || "-1")
                            }
                        } else
                            ti = {
                                from: 0,
                                to: -1
                            };
                        la(ha, "[" + ei + "] load " + pa.mediaType + " url:" + ca.url + ", range: " + ti.from + "-" + ti.to),
                        qt.load(ti, ca.withCredentials);
                        var ni = qt.loadInfo();
                        ni && (pa.p2pLoadInfo || (pa.p2pLoadInfo = {
                            cdn: 0,
                            p2p: 0
                        }),
                        pa.p2pLoadInfo.url = ni.url),
                        sa = !0
                    },
                    abort: function() {
                        sa = !1,
                        qt && (qt.abort(),
                        qt.onDataArrival = void 0,
                        qt.onError = void 0,
                        qt.onComplete = void 0),
                        Qe.onabort(),
                        Qe.onend(),
                        la(ha, "[" + ei + "] abort sdk [" + Qe.request.mediaType + "]")
                    },
                    destroySdk: function() {
                        var ca = function() {
                            sa = !1,
                            qt && (qt.destroy(),
                            qt = void 0,
                            la(ha, "[" + ei + "] destroy sdk [" + Qe.request.mediaType + "]")),
                            Pe = {
                                cdn: 0,
                                p2p: 0
                            }
                        };
                        sa ? (qt.onError = function(pa, ti) {
                            la(ha, "[" + ei + "] error, status:" + pa + ", msg:" + ti + ", type:" + Qe.request.mediaType),
                            Qe.response = {
                                status: pa,
                                statusText: ti
                            },
                            Qe.onerror(),
                            Qe.onend(),
                            ca()
                        }
                        ,
                        qt.onComplete = function() {
                            la(ha, "[" + ei + "] detroy sdk onComplete, type:" + Qe.request.mediaType),
                            Qe.onload(),
                            Qe.onend(),
                            ca()
                        }
                        ) : ca()
                    },
                    getUrl: function() {
                        return Qe.url || ""
                    },
                    getP2pType: function() {
                        return ei
                    }
                }
            }
            mc.__dashjs_factory_name = "P2PLoader";
            var wf = $.a.getClassFactory(mc);
            function gc(xe) {
                var qt, Pe = void 0, Qe = void 0;
                qt = (xe = xe || {}).hid;
                var ei = !1;
                if (window.localStorage && localStorage.getItem)
                    try {
                        var sa = JSON.parse(localStorage.getItem("bp_nc_config"));
                        sa && sa.showLog === 1 && (ei = !0)
                    } catch (ha) {}
                aa(this.context).getInstance().log;
                function la() {
                    var ha = "bpNC";
                    return qt && (ha += "_" + qt),
                    window[ha]
                }
                return {
                    load: function(ha) {
                        Pe = ha;
                        var ca = ha.request
                          , pa = la();
                        pa && (Qe = pa.getToken(),
                        pa.getData({
                            url: ca.url,
                            range: ca.range,
                            token: Qe,
                            bitrate: ca.bitrate || 0,
                            latency: ca.latency || 5e3
                        }).then(function(ti) {
                            if (ei) {
                                var ra = 0
                                  , ni = "";
                                ti && ti.responseData && (ti.responseData.getDataTime && (ra = Math.round(8 * ti.responseData.gotDataByte / 1e3 / (ti.responseData.getDataTime / 1e3))),
                                ti.responseData.path && (ni = ti.responseData.path),
                                ti.peers = ti.responseData.usePeerSids && ti.responseData.usePeerSids.length || 0),
                                console.log("--> " + ni + " nc success, speed is", ra, "Kbps, res:", ti)
                            }
                            ha.progress && ha.progress(null, ti.responseData.data, {
                                nc: ti.responseData.data.byteLength,
                                cdn: 0,
                                rType: "NC",
                                url: ca.url
                            }),
                            ha.onNCInfo && ha.onNCInfo(ti),
                            ha.onload && ha.onload(),
                            ha.onend && ha.onend()
                        }, function(ti) {
                            if (ei) {
                                var ra = 0
                                  , ni = "";
                                ti && ti.responseData && (ti.responseData.getDataTime && (ra = Math.round(8 * ti.responseData.gotDataByte / 1e3 / (ti.responseData.getDataTime / 1e3))),
                                ti.responseData.path && (ni = ti.responseData.path),
                                ti.peers = ti.responseData.usePeerSids && ti.responseData.usePeerSids.length || 0),
                                console.log("--> " + ni + " nc fail, speed is", ra, "Kbps, res:", ti)
                            }
                            if (ha.onNCFail && ti.responseData) {
                                var Kt = ti.responseData.data ? ti.responseData.data.byteLength : 0
                                  , oi = ti.responseData.gotDataByte ? ti.responseData.gotDataByte : 0;
                                ha.onNCFail({
                                    ncFail: Kt,
                                    nc: oi,
                                    ncGotFail: oi,
                                    cdn: 0,
                                    rType: "NC",
                                    url: ca.url
                                })
                            }
                            ha.onNCInfo && ha.onNCInfo(ti),
                            ha.onerror && ha.onerror()
                        }))
                    },
                    abort: function(ha) {
                        var ca = la();
                        ca && Qe && ca.abortGetData(Qe),
                        Pe && (Pe.onNCInfo && Pe.onNCInfo({
                            code: 4999,
                            qn: parseInt(ha.representationId, 10) || 0,
                            responseData: {}
                        }),
                        Pe && Pe.onabort && Pe.onabort(),
                        Pe && Pe.onend && Pe.onend())
                    },
                    getP2pType: function() {
                        return ""
                    }
                }
            }
            gc.__dashjs_factory_name = "NCLoader";
            var Rf = $.a.getClassFactory(gc);
            function yc(xe) {
                var qt = (xe = xe || {}).requestModifier;
                function Pe(Qe, ei) {
                    Qe.reader.read().then(ei).catch(function() {})
                }
                return {
                    load: function(Qe) {
                        var ei = new Date
                          , sa = Qe.request
                          , la = new Headers;
                        sa.range && la.append("Range", "bytes=" + sa.range),
                        sa.requestStartDate || (sa.requestStartDate = ei),
                        qt && qt.modifyRequestHeader({
                            setRequestHeader: function(pa, ti) {
                                la.append(pa, ti)
                            }
                        });
                        var ha = void 0;
                        typeof window.AbortController == "function" && (ha = new AbortController,
                        Qe.abortController = ha);
                        var ca = {
                            method: Qe.method,
                            headers: la,
                            credentials: Qe.withCredentials ? "include" : void 0,
                            signal: ha ? ha.signal : void 0
                        };
                        fetch(Qe.url, ca).then(function(pa) {
                            Qe.response || (Qe.response = {}),
                            Qe.response.status = pa.status,
                            Qe.response.statusText = pa.statusText,
                            Qe.response.responseURL = pa.url,
                            pa.ok || Qe.onerror();
                            var ti = ""
                              , ra = !0
                              , ni = !1
                              , Kt = void 0;
                            try {
                                for (var oi, Ea = pa.headers.keys()[Symbol.iterator](); !(ra = (oi = Ea.next()).done); ra = !0) {
                                    var ri = oi.value;
                                    ti += ri + ": " + pa.headers.get(ri) + `
`
                                }
                            } catch (ua) {
                                ni = !0,
                                Kt = ua
                            } finally {
                                try {
                                    !ra && Ea.return && Ea.return()
                                } finally {
                                    if (ni)
                                        throw Kt
                                }
                            }
                            if (Qe.response.responseHeaders = ti,
                            Qe.onHeadersReceived(),
                            !pa.body)
                                return pa.arrayBuffer().then(function(ua) {
                                    Qe.response.response = ua;
                                    var ta = {
                                        loaded: ua.byteLength,
                                        total: ua.byteLength
                                    };
                                    Qe.progress(ta),
                                    Qe.onload(),
                                    Qe.onend()
                                });
                            var ya = parseInt(pa.headers.get("Content-Length"), 10)
                              , Aa = 0
                              , wa = !1
                              , _a = new Uint8Array
                              , Da = 0;
                            Qe.reader = pa.body.getReader(),
                            Pe(Qe, function ua(ta) {
                                var ma = ta.value;
                                if (ta.done)
                                    return _a && (Qe.progress({
                                        loaded: Aa,
                                        total: isNaN(ya) ? Aa : ya,
                                        lengthComputable: !0
                                    }),
                                    Qe.response.response = _a.buffer),
                                    Qe.onload(),
                                    void Qe.onend();
                                if (ma && ma.length > 0) {
                                    _a = function(Sa, Na) {
                                        if (Sa.length === 0)
                                            return Na;
                                        var Oa = new Uint8Array(Sa.length + Na.length);
                                        return Oa.set(Sa),
                                        Oa.set(Na, Sa.length),
                                        Oa
                                    }(_a, ma),
                                    Aa += ma.length;
                                    var ia = Jl().getInstance().findLastTopIsoBoxCompleted(["moov", "mdat"], _a, Da);
                                    if (ia.found) {
                                        var na = ia.lastCompletedOffset + ia.size
                                          , va = void 0;
                                        na === _a.length ? (va = _a,
                                        _a = new Uint8Array) : (va = new Uint8Array(_a.subarray(0, na)),
                                        _a = _a.subarray(na)),
                                        Qe.progress({
                                            data: va.buffer,
                                            lengthComputable: !1,
                                            noTrace: !0
                                        }),
                                        Da = 0
                                    } else
                                        Da = ia.lastCompletedOffset,
                                        wa || (Qe.progress({
                                            lengthComputable: !1,
                                            noTrace: !0
                                        }),
                                        wa = !0)
                                }
                                Pe(Qe, ua)
                            })
                        }).catch(function(pa) {
                            Qe.onerror && Qe.onerror(pa)
                        })
                    },
                    abort: function(Qe) {
                        if (Qe.abortController)
                            Qe.abortController.abort();
                        else if (Qe.reader)
                            try {
                                Qe.reader.cancel()
                            } catch (ei) {}
                    }
                }
            }
            yc.__dashjs_factory_name = "FetchLoader";
            var Nf = $.a.getClassFactory(yc);
            function xd() {
                var xe = this.context
                  , qt = Re(xe).getInstance();
                return {
                    capabilityError: function(Pe) {
                        qt.trigger(bt.ERROR, {
                            error: "capability",
                            event: Pe
                        })
                    },
                    downloadError: function(Pe, Qe, ei, sa, la) {
                        qt.trigger(bt.ERROR, {
                            error: "download",
                            event: {
                                id: Pe,
                                url: Qe,
                                request: ei
                            },
                            code: sa,
                            httpCode: la
                        })
                    },
                    manifestError: function(Pe, Qe, ei, sa, la, ha) {
                        qt.trigger(bt.ERROR, {
                            error: "manifestError",
                            event: {
                                message: Pe,
                                id: Qe,
                                manifest: ei,
                                event: sa
                            },
                            code: la,
                            httpCode: ha
                        })
                    },
                    timedTextError: function(Pe, Qe, ei) {
                        qt.trigger(bt.ERROR, {
                            error: "cc",
                            event: {
                                message: Pe,
                                id: Qe,
                                cc: ei
                            }
                        })
                    },
                    mediaSourceError: function(Pe, Qe) {
                        qt.trigger(bt.ERROR, {
                            error: "mediasource",
                            event: Pe,
                            code: Qe
                        })
                    },
                    mediaKeySessionError: function(Pe) {
                        qt.trigger(bt.ERROR, {
                            error: "key_session",
                            event: Pe
                        })
                    },
                    mediaKeyMessageError: function(Pe) {
                        qt.trigger(bt.ERROR, {
                            error: "key_message",
                            event: Pe
                        })
                    },
                    mssError: function(Pe) {
                        qt.trigger(bt.ERROR, {
                            error: "mssError",
                            event: Pe
                        })
                    }
                }
            }
            xd.__dashjs_factory_name = "ErrorHandler";
            var Xu = $.a.getSingletonFactory(xd);
            Xu.CAPABILITY_ERROR_MEDIASOURCE = "mediasource",
            Xu.CAPABILITY_ERROR_MEDIAKEYS = "mediakeys",
            Xu.DOWNLOAD_ERROR_ID_MANIFEST = "manifest",
            Xu.DOWNLOAD_ERROR_ID_SIDX = "SIDX",
            Xu.DOWNLOAD_ERROR_ID_CONTENT = "content",
            Xu.DOWNLOAD_ERROR_ID_INITIALIZATION = "initialization",
            Xu.DOWNLOAD_ERROR_ID_XLINK = "xlink",
            Xu.DOWNLOAD_ERROR_ID_PCDN_SDK = "pcdnsdk",
            Xu.MANIFEST_ERROR_ID_CODEC = "codec",
            Xu.MANIFEST_ERROR_ID_PARSE = "parse",
            Xu.MANIFEST_ERROR_ID_NOSTREAMS = "nostreams",
            Xu.TIMED_TEXT_ERROR_ID_PARSE = "parse",
            $.a.updateSingletonFactory(xd.__dashjs_factory_name, Xu);
            var sd = Xu;
            function vc() {
                return {
                    arraybuffer2string: function(xe) {
                        return String.fromCharCode.apply(null, new Uint8Array(xe))
                    },
                    base642ab: function(xe) {
                        xe = window.atob(xe);
                        for (var qt = new ArrayBuffer(xe.length), Pe = new Uint8Array(qt), Qe = 0, ei = xe.length; Qe < ei; Qe++)
                            Pe[Qe] = xe.charCodeAt(Qe);
                        return qt
                    },
                    concat: function(xe, qt) {
                        var Pe = new Uint8Array(xe)
                          , Qe = new Uint8Array(qt)
                          , ei = new Uint8Array(Pe.length + Qe.length);
                        return ei.set(Pe),
                        ei.set(Qe, Pe.length),
                        ei.buffer
                    }
                }
            }
            vc.__dashjs_factory_name = "ArrayBufferHandler";
            var Cf = $.a.getSingletonFactory(vc);
            function Ec(xe) {
                xe = xe || {};
                var qt = void 0
                  , Pe = aa(this.context).getInstance().log
                  , Qe = "[ExternalMediaSourceLoader]"
                  , ei = xe.loader;
                return {
                    load: function(sa) {
                        qt = sa;
                        var la, ha = sa.request;
                        if (ei && typeof ei == "function") {
                            var ca = (la = ha.url).match(/[^/]+.m4s/gi) && la.match(/[^/]+.m4s/gi)[0];
                            Pe(Qe + " start to get " + ca + ", range is " + ha.range),
                            sa.request.loadInfo = {
                                rType: "exld",
                                url: ha.url
                            },
                            ei({
                                filename: ca,
                                range: ha.range,
                                url: ha.url
                            }).then(function(pa) {
                                return function(ti, ra) {
                                    ti.code === 0 ? (ra.progress && ra.progress(null, ti.data, null),
                                    ra.onload && ra.onload(),
                                    ra.onend && ra.onend()) : (Pe(Qe + " Get data error, err code is " + ti.code),
                                    this.onError("Get data error " + ti.code, ra))
                                }(pa, sa)
                            }).catch(function(pa) {
                                return function(ti, ra) {
                                    Pe(Qe + " Get data error, err is " + ti),
                                    ra.onerror && ra.onerror()
                                }(pa, sa)
                            })
                        }
                    },
                    abort: function() {
                        qt && qt.onabort && qt.onabort(),
                        qt && qt.onend && qt.onend()
                    }
                }
            }
            Ec.__dashjs_factory_name = "ExternalMediaSourceLoader";
            var Of = $.a.getClassFactory(Ec);
            function ld(xe, qt, Pe) {
                return qt in xe ? Object.defineProperty(xe, qt, {
                    value: Pe,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : xe[qt] = Pe,
                xe
            }
            var ad = {
                video: null,
                audio: null
            };
            function _c(xe) {
                xe = xe || {};
                var qt, Pe = this.context, Qe = Re(Pe).getInstance(), ei = xe.errHandler, sa = xe.videoModel, la = xe.metricsModel, ha = xe.mediaPlayerModel, ca = xe.requestModifier, pa = xe.useFetch || !1, ti = (xe.dashMetrics,
                aa(Pe).getInstance().log), ra = void 0, ni = void 0, Kt = void 0, oi = void 0, Ea = 1e3, ri = void 0, ya = {}, Aa = Cf(Pe).getInstance(), wa = [], _a = 0, Da = void 0, ua = void 0, ta = void 0, ma = void 0, ia = xe.preloadData;
                function na(xa, sl) {
                    var gl = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0
                      , Ya = xa.request
                      , il = ""
                      , Ol = 0
                      , _l = 0
                      , Ul = 0;
                    if (Ya.range) {
                        var Yl = Ya.range.split("-");
                        if (Ol = parseInt(Yl[0]),
                        _l = parseInt(Yl[1]),
                        Ya.mediaType && Ya.representationId && ia && ia[Ya.mediaType + "id"] === Ya.representationId + "" && ia[Ya.mediaType]) {
                            if (_l < ia[Ya.mediaType].byteLength)
                                return _l + 1 === ia[Ya.mediaType].byteLength && (Ya.preloadEnd = 1),
                                void xa.success(ia[Ya.mediaType].slice(Ol, _l + 1));
                            Ol < ia[Ya.mediaType].byteLength && (il = ia[Ya.mediaType].slice(Ol, _l + 1),
                            Ya.range = ia[Ya.mediaType].byteLength + "-" + _l,
                            Ya.preloadEnd = 1)
                        }
                    }
                    var ql = Ya.NCInfo;
                    if (ql && ql.responseData && ql.responseData.availableData && ql.responseData.availableData.length > 0) {
                        var Ml = ql.responseData.missingData;
                        if (Ml && Ml.length === 1) {
                            var ul = Ml[0].start
                              , al = Ml[0].end;
                            ul > 0 && al > 0 && ul >= Ol && al <= _l && (Ya.completeNCMissingRange = !0,
                            Ya.originRange = Ya.range,
                            Ya.range = ul + "-" + al)
                        }
                    }
                    Ya.mediaType === "video" && parseInt(Ya.representationId, 10) >= 80 || (Ya.completeNCMissingRange = !1,
                    Ya.originRange && (Ya.range = Ya.originRange)),
                    Ya.firstByteDate = null;
                    var El = []
                      , Tl = Ya.representationId
                      , $l = 2e3
                      , Qa = !0
                      , Sl = !0
                      , nu = new Date
                      , ru = nu
                      , ol = 0
                      , cl = void 0
                      , Kl = ya[Tl] || 0
                      , Ma = !1
                      , xs = 1
                      , fl = 0
                      , bl = void 0;
                    if (Ya.urls && Ya.urls.length > 1 && Kl && (Ya.url = Ya.urls[Kl],
                    xa.url = Ya.urls[Kl]),
                    !ca || !la || !ei)
                        throw new Error("config object is not correct or missing");
                    var Cl = ca.modifyRequestURL(Ya.url)
                      , xl = !(!xa.params || typeof xa.params.canUseNC != "boolean") && xa.params.canUseNC
                      , Zl = Ya.bufferLevel || 0
                      , hu = 2
                      , Au = Ra(Ya);
                    if (Au > 1048576) {
                        var wu = parseInt(Au / 1024 / 1024, 10)
                          , xu = 1.5
                          , Uu = Math.min(10, hu + wu * xu);
                        Zl = Math.max(0, Zl - Uu)
                    } else
                        Zl = Math.max(0, Zl - hu);
                    var Vu = Na({
                        canUseNC: xl,
                        rangeStart: Ol,
                        mediaUrl: Cl,
                        bufferLevel: Zl,
                        bitrate: Au,
                        originBufferLevel: Ya && Ya.bufferLevel || 0,
                        isSwitchingQn: !(!Ya || !Ya.isSwitchingQn)
                    })
                      , Wu = function(eu) {
                        Sl = !1;
                        var Du = new Date;
                        Ya.requestStartDate = nu,
                        Ya.requestEndDate = Du,
                        Ya.firstByteDate = Ya.firstByteDate || Du,
                        Oa(Ya),
                        Ya.checkExistenceOnly || la.addHttpRequest(Ya.mediaType, null, Ya.type, Ya.url, cl.response ? cl.response.responseURL : null, Ya.serviceLocation || null, Ya.range || null, Ya.requestStartDate, Ya.firstByteDate, Ya.requestEndDate, cl.response ? cl.response.status : null, Ya.duration, cl.response && cl.response.getAllResponseHeaders ? cl.response.getAllResponseHeaders() : cl.response ? cl.response.responseHeaders : null, eu ? El : null)
                    }
                      , Os = function() {
                        if (clearTimeout(fl),
                        ni.indexOf(cl) !== -1) {
                            ni.splice(ni.indexOf(cl), 1),
                            bl = !1;
                            var eu = cl && cl.response && cl.response.status;
                            if (Sl)
                                if (Wu(!1),
                                xa.params && (xa.params.canUseNC = !1),
                                sl > 0) {
                                    var Du = 0
                                      , ed = 0;
                                    Date.now() - nu < 50 && (ed = !Ya.index || Ya.index <= 2 || performance && performance.now && performance.now() < 1e4 ? (gl + 1) * Ea / 100 : (gl + 1) * Ea,
                                    Ul = i.CONNECT_FRAGMENT_ERROR_OFFLINE),
                                    (eu >= 400 && eu < 500 || eu >= 600) && (ed = 0,
                                    Du = 0),
                                    Vu && (ed = 0,
                                    Du = 0),
                                    _a = setTimeout(function() {
                                        Vu || (gl++,
                                        ha.setRetryTimes(gl));
                                        var Nu = cl.request
                                          , td = cl.request && cl.request && cl.request.NCInfo;
                                        Nu.retryTimes = gl,
                                        Qe.trigger(bt.REQUEST_RETRYED, ld({
                                            retryTimes: gl,
                                            representationId: Tl,
                                            status: cl.response && cl.response.status,
                                            url: Nu.url,
                                            mediaType: Nu.mediaType,
                                            range: Nu.range,
                                            rType: Vu ? "NC" : "XHR",
                                            code: (Vu ? td && td.code : cl.response && cl.response.status) || Ul,
                                            index: Nu && Nu.index,
                                            id: Nu && Nu.representationId
                                        }, "url", Nu && Nu.url)),
                                        ha.getP2pPermission() && eu === 4203 && Sa(),
                                        xa.request.urls && xa.request.urls.length > 1 ? (ya[Tl] = gl % Nu.urls.length,
                                        Kl = ya[Tl],
                                        xa.request.url = Nu.urls[Kl],
                                        xa.url = Nu.urls[Kl],
                                        sl--,
                                        oi.push(setTimeout(function() {
                                            ti("[HTTPLoader] internalLoad failure retry"),
                                            na(xa, sl, gl)
                                        }, Du))) : (sl--,
                                        oi.push(setTimeout(function() {
                                            ti("[HTTPLoader] internalLoad failure retry"),
                                            na(xa, sl, gl)
                                        }, Du)))
                                    }, ed)
                                } else
                                    ei.downloadError(ri[Ya.type].type, Ya.url, Ya, ri[Ya.type].code, cl.response && cl.response.status),
                                    xa.error && xa.error(Ya, "error", cl.response && cl.response.statusText, cl.response && cl.response.status),
                                    xa.complete && xa.complete(Ya, cl.response && cl.response.statusText),
                                    va(Ya.mediaType)
                        }
                    }
                      , qa = $l + 1e3 * gl + 50
                      , dl = Ya.timeout + 3e3 * gl;
                    Vu && (qa = ka(Ya.bufferLevel),
                    Ya.bitrate = Au,
                    Ya.latency = qa,
                    dl = qa + 200),
                    fl = setTimeout(function() {
                        ha.getP2pPermission() && typeof bl.getP2pType == "function" && bl.getP2pType() && ha.addP2pSDKErrorCount(),
                        Ma = !0,
                        bl.abort(cl),
                        xa.connectTimeout && xa.connectTimeout(Ya, qa, Vu),
                        Os()
                    }, qa);
                    var Bl = new Uint8Array
                      , iu = function(eu, Du, ed) {
                        var Nu = new Date;
                        if (ed) {
                            for (var td in Ya.p2pLoadInfo || (Ya.p2pLoadInfo = {}),
                            ed)
                                ["p2p", "cdn", "nc"].indexOf(td) > -1 ? Ya.p2pLoadInfo[td] = (Ya.p2pLoadInfo[td] || 0) + ed[td] : Ya.p2pLoadInfo[td] = ed[td];
                            Ya.p2pLoadInfo.requestStartTime = nu
                        }
                        if (!eu) {
                            if (eu = {
                                lengthComputable: !1,
                                total: 0,
                                loaded: 0
                            },
                            Du && (Bl = Aa.concat(Bl, Du),
                            eu.loaded = Bl.byteLength),
                            Ya.range) {
                                var Od = Ya.range.split("-")
                                  , Md = parseInt(Od[0])
                                  , vf = parseInt(Od[1]);
                                vf && (eu.total = vf - Md + 1)
                            }
                            eu.loaded && eu.total && (eu.lengthComputable = !0)
                        }
                        Qa && (Qa = !1,
                        (xs = Nu - nu) < $l && clearTimeout(fl),
                        (!eu.lengthComputable || eu.lengthComputable && eu.total !== eu.loaded) && (Ya.firstByteDate = Nu)),
                        eu.lengthComputable && (Ya.bytesLoaded = eu.loaded,
                        Ya.bytesTotal = eu.total),
                        eu.noTrace || (El.push({
                            s: ru,
                            d: Nu.getTime() - ru.getTime(),
                            b: [eu.loaded ? eu.loaded - ol : 0]
                        }),
                        ru = Nu,
                        ol = eu.loaded),
                        xa.progress && eu.loaded && xa.progress(eu.loaded)
                    }
                      , zl = function(eu) {
                        if (eu)
                            for (var Du in Ya.p2pLoadInfo || (Ya.p2pLoadInfo = {}),
                            eu)
                                ["p2p", "cdn", "nc", "ncFail", "ncGotFail"].indexOf(Du) > -1 ? Ya.p2pLoadInfo[Du] = (Ya.p2pLoadInfo[Du] || 0) + eu[Du] : Ya.p2pLoadInfo[Du] = eu[Du]
                    }
                      , su = function(eu) {
                        eu.qn = parseInt(Ya.representationId, 10) || 0,
                        Ya.NCInfo = eu
                    }
                      , oa = function() {
                        if (cl.response) {
                            if (cl.response.status >= 200 && cl.response.status <= 299) {
                                var eu = cl.response.response;
                                il && (eu = Aa.concat(il, cl.response.response),
                                Ya.range = Ol + "-" + _l),
                                Wu(!0),
                                xa.success && (ha.setRetryTimes(0),
                                xa.success(eu, cl.response.statusText, cl.response.responseURL)),
                                xa.complete && xa.complete(Ya, cl.response.statusText)
                            }
                        } else {
                            var Du = Bl;
                            il && (Du = Aa.concat(il, Bl),
                            Ya.range = Ol + "-" + _l),
                            Wu(!0),
                            xa.success && (ha.setRetryTimes(0),
                            xa.success(Du, "", Cl)),
                            xa.complete && xa.complete(Ya, "")
                        }
                    }
                      , La = function() {
                        ha.setRetryTimes(0),
                        clearTimeout(fl),
                        clearTimeout(_a),
                        xa.abort && !Ma && xa.abort(Ya)
                    }
                      , Ja = function() {
                        xa.timeout && xa.timeout(Ya, xs, dl),
                        Os()
                    }
                      , ks = function() {
                        Ya.headersReceivedDate = new Date,
                        xa.headersReceived && xa.headersReceived(cl.response && cl.response.getAllResponseHeaders && cl.response.getAllResponseHeaders())
                    }
                      , Il = Ha();
                    if (Il && typeof Il == "function")
                        bl = Of(Pe).create({
                            requestModifier: ca,
                            loader: Il
                        });
                    else if (Vu)
                        bl = Rf(Pe).create({
                            requestModifier: ca,
                            hid: Da
                        }),
                        Qe.trigger(bt.CDN_LOAD_INFO, {
                            NCInfo: {
                                code: 9999,
                                qn: parseInt(Ya.representationId, 10) || 0,
                                range: Ya.range,
                                responseData: {}
                            }
                        });
                    else if (pa && window.fetch && Ya.responseType === "arraybuffer")
                        bl = Nf(Pe).create({
                            requestModifier: ca
                        });
                    else {
                        var Fl = function(eu, Du) {
                            var ed = eu.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/) && eu.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/)[1]
                              , Nu = Du.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/) && Du.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/)[1];
                            return ed && Nu && ed === Nu
                        }
                          , jl = window.__DASH_P2P_TYPE__
                          , du = {
                            yf: window.YFDashIO,
                            xl: window.xyvp && window.xyvp.Loader,
                            ks: window.KSLoader,
                            pear: window.PearDownloader,
                            bili: window.DIYSdk
                        }
                          , pu = void 0
                          , Tu = void 0
                          , mu = void 0;
                        if (jl && ha.getP2pPermission()) {
                            var $u = jl.match(/([a-z]+)-([a-z0-9]+)/);
                            $u && (pu = du[$u[1]],
                            mu = $u[2] === "cg2",
                            Tu = $u[2] === "eg"),
                            pu || delete window.__DASH_P2P_TYPE__
                        }
                        if (Tu && pu && Ya.index >= 0)
                            ad[Ya.mediaType] && ad[Ya.mediaType].getP2pType() && Fl(ad[Ya.mediaType].getUrl(), Cl) ? bl = ad[Ya.mediaType] : (va(Ya.mediaType),
                            bl = wf(Pe).create({
                                video: sa.getElement(),
                                p2pType: jl,
                                supplier: pu
                            }),
                            ad[Ya.mediaType] = bl);
                        else if (mu && pu && Ya.mediaType === "video") {
                            var ju = Cl;
                            ju !== ta && (ta = ju,
                            ua && ua.destroy(),
                            ua = new pu(Cl,sa.getElement(),"watch"))
                        }
                        bl || (va(Ya.mediaType),
                        bl = bf(Pe).create({
                            requestModifier: ca
                        }))
                    }
                    var rd = Ya.checkExistenceOnly ? vl.HEAD : vl.GET
                      , id = ha.getXHRWithCredentialsForType(Ya.type);
                    cl = {
                        url: Cl,
                        method: rd,
                        withCredentials: id,
                        timeout: dl,
                        request: Ya,
                        onload: oa,
                        onend: Os,
                        onerror: Os,
                        ontimeout: Ja,
                        progress: iu,
                        onabort: La,
                        onHeadersReceived: ks,
                        onNCFail: zl,
                        onNCInfo: su,
                        loader: bl
                    };
                    var od = new Date().getTime();
                    if (isNaN(Ya.delayLoadingTime) || od >= Ya.delayLoadingTime)
                        ni.push(cl),
                        bl.load(cl);
                    else {
                        var Hu = {
                            httpRequest: cl
                        };
                        Kt.push(Hu),
                        Hu.delayTimeout = setTimeout(function() {
                            if (Kt.indexOf(Hu) !== -1) {
                                Kt.splice(Kt.indexOf(Hu), 1);
                                try {
                                    nu = new Date,
                                    ru = nu,
                                    ni.push(Hu.httpRequest),
                                    bl.load(Hu.httpRequest)
                                } catch (eu) {
                                    Hu.httpRequest.onerror()
                                }
                            }
                        }, Ya.delayLoadingTime - od)
                    }
                }
                function va(xa) {
                    ad[xa] && ad[xa].destroySdk && (ad[xa].destroySdk(),
                    ad[xa] = null)
                }
                function Sa() {
                    Qe.trigger(bt.PCDN_LOADED_ERROR, {
                        code: i.DOWNLOAD_PCDN_DISABLED,
                        from: 1
                    }),
                    ha.setP2pPermission(!1)
                }
                function Na(xa) {
                    var sl = xa.canUseNC
                      , gl = xa.rangeStart
                      , Ya = xa.mediaUrl
                      , il = xa.bufferLevel
                      , Ol = xa.bitrate
                      , _l = xa.originBufferLevel
                      , Ul = xa.isSwitchingQn;
                    if (isNaN(gl) || gl < 0 || !Ya || Ul)
                        return !1;
                    var Yl = function() {
                        var Sl = "bpNC";
                        return Da && (Sl += "_" + Da),
                        window[Sl]
                    }();
                    if (!sl || !Yl || typeof Yl.allowDPGetDataByNC != "function")
                        return !1;
                    var ql = ("" + Ya).split("?")[0].split("/")
                      , Ml = ql[ql.length - 1].split(".")[0].split("-").pop();
                    if (!Ml)
                        return !1;
                    var ul = parseInt(Ml, 10);
                    if (isNaN(ul))
                        return !1;
                    var al = NaN
                      , El = !1;
                    if (sa && sa.getElement()) {
                        var Tl = sa.getElement()
                          , $l = Tl.currentTime
                          , Qa = 0;
                        Tl.buffered && Tl.buffered.length && (Qa = Tl.buffered.end(0)),
                        al = Qa - $l,
                        El = Tl && Tl.seeking
                    }
                    return !isNaN(al) && !!il && (ti("Is Use NCLoader, " + Yl.allowDPGetDataByNC({
                        rangeStart: gl,
                        qn: ul,
                        bufferRemaining: al,
                        bufferLevel: il,
                        isSeeking: El,
                        bitrate: Ol,
                        originBufferLevel: _l
                    }) + "," + JSON.stringify({
                        rangeStart: gl,
                        qn: ul,
                        bufferRemaining: al,
                        bufferLevel: il,
                        isSeeking: El,
                        bitrate: Ol,
                        originBufferLevel: _l
                    })),
                    Yl.allowDPGetDataByNC({
                        rangeStart: gl,
                        qn: ul,
                        bufferRemaining: al,
                        bufferLevel: il,
                        isSeeking: El,
                        bitrate: Ol,
                        originBufferLevel: _l
                    }))
                }
                function Oa(xa) {
                    if (xa.p2pLoadInfo && xa.loadInfo) {
                        var sl = function(Ya) {
                            for (var il in Ya)
                                ["url", "rType"].indexOf(Ya) > -1 || (gl[il] = (gl[il] || 0) + (Ya[il] || 0))
                        }
                          , gl = {};
                        sl(xa.p2pLoadInfo),
                        sl(xa.loadInfo),
                        gl.rType = "XHR",
                        gl.url = xa.loadInfo.url || xa.p2pLoadInfo.url || "",
                        xa.loadInfo = gl
                    } else
                        xa.loadInfo = xa.p2pLoadInfo || xa.loadInfo || {};
                    xa.loadInfo.rType === "XHR" && (xa.loadInfo.cdn = xa.bytesTotal || xa.bytesLoaded || 0,
                    xa.loadInfo.url = xa.url)
                }
                function Ia(xa) {
                    xa && xa.hid && (Da = xa.hid)
                }
                function Ra(xa) {
                    var sl = 0;
                    try {
                        var gl = xa && xa.mediaInfo && xa.mediaInfo.bitrateList
                          , Ya = xa && xa.representationId;
                        if (Ya && gl && gl.length) {
                            var il = gl.filter(function(Ol) {
                                return Ol.id === Ya
                            });
                            il && il.length && (sl = il[0].bandwidth)
                        }
                    } catch (Ol) {}
                    return sl
                }
                function ka(xa, sl) {
                    var gl = 5e3
                      , Ya = 1e4
                      , il = 5e3;
                    return xa < 15 ? il = gl : xa < 20 ? il = 1e3 * parseInt(xa - 10, 10) : xa > 20 && (il = Ya),
                    il = Math.min(il, Ya),
                    il = Math.max(il, gl),
                    ti("NCLoader latency, bufferLevel: " + xa + ", latencyTimeout: " + il),
                    il
                }
                function Va(xa) {
                    xa && xa.loader && !ma && (ma = xa.loader,
                    Qe.off(bt.BIND_MEDIA_SOURCE_LOADER, Va, ra))
                }
                function Ha() {
                    var xa = ma || ha.getExternalMediaLoader();
                    return ti("[getMediaSourceLoader] use media source loader is ", !!xa),
                    xa
                }
                return ia && (ia.video && typeof ia.video == "string" && (ia.video = Aa.base642ab(ia.video)),
                ia.audio && typeof ia.audio == "string" && (ia.audio = Aa.base642ab(ia.audio))),
                ra = {
                    load: function(xa) {
                        xa.request && na(xa, ha.getRetryAttemptsForType(xa.request.type), 0)
                    },
                    abort: function() {
                        ua && (ua.destroy(),
                        ua = void 0,
                        ta = void 0),
                        ma && (ma = null),
                        clearTimeout(_a),
                        wa.forEach(function(xa) {
                            return clearTimeout(xa)
                        }),
                        oi.forEach(function(xa) {
                            return clearTimeout(xa)
                        }),
                        oi = [],
                        Kt.forEach(function(xa) {
                            return clearTimeout(xa.delayTimeout)
                        }),
                        Kt = [],
                        ni.forEach(function(xa) {
                            xa && xa.request && isNaN(xa.request.index) || (xa.onloadend = xa.onerror = xa.onprogress = void 0,
                            xa.loader.abort(xa),
                            xa.onabort())
                        }),
                        ni = [],
                        Qe.off(bt.INIT_HID, Ia, ra),
                        Qe.off(bt.BIND_MEDIA_SOURCE_LOADER, Va, ra)
                    },
                    setPreloadData: function(xa) {
                        (ia = xa) && (ia.video && typeof ia.video == "string" && (ia.video = Aa.base642ab(ia.video)),
                        ia.audio && typeof ia.audio == "string" && (ia.audio = Aa.base642ab(ia.audio)))
                    }
                },
                Qe.on(bt.INIT_HID, Ia, ra),
                Qe.on(bt.BIND_MEDIA_SOURCE_LOADER, Va, ra),
                ni = [],
                Kt = [],
                oi = [],
                ld(qt = {}, vl.MPD_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_MANIFEST,
                    code: i.DOWNLOAD_MPD_ERROR
                }),
                ld(qt, vl.XLINK_EXPANSION_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_XLINK,
                    code: i.DOWNLOAD_XINK_ERROR
                }),
                ld(qt, vl.INIT_SEGMENT_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_INITIALIZATION,
                    code: i.DOWNLOAD_INIT_SEGMENT_ERROR
                }),
                ld(qt, vl.MEDIA_SEGMENT_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_CONTENT,
                    code: i.DOWNLOAD_MEDIA_SEGMENT_ERROR
                }),
                ld(qt, vl.INDEX_SEGMENT_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_CONTENT,
                    code: i.DOWNLOAD_INDEX_SEGMENT_ERROR
                }),
                ld(qt, vl.BITSTREAM_SWITCHING_SEGMENT_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_CONTENT,
                    code: i.DOWNLOAD_SWITCHING_SEGMENT_ERROR
                }),
                ld(qt, vl.OTHER_TYPE, {
                    type: sd.DOWNLOAD_ERROR_ID_CONTENT,
                    code: i.DOWNLOAD_OTHER_ERROR
                }),
                ri = qt,
                ra
            }
            _c.__dashjs_factory_name = "HTTPLoader";
            var Ad = $.a.getClassFactory(_c);
            function Tc() {
                var xe = this.context
                  , qt = aa(xe).getInstance().log
                  , Pe = Re(xe).getInstance()
                  , Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0;
                function ra() {
                    if (!ti || !ti.hasOwnProperty("resolve"))
                        throw new Error("setConfig function has to be called previously")
                }
                function ni(oi) {
                    if (oi.url) {
                        var Ea = new ii;
                        return Ea.type = oi.init ? vl.INIT_SEGMENT_TYPE : vl.MEDIA_SEGMENT_TYPE,
                        Ea.url = oi.url,
                        Ea.urls = oi.urls,
                        Ea.range = oi.range.start + "-" + oi.range.end,
                        Ea.representationId = oi.representationId,
                        Ea.mediaType = oi.mediaType,
                        Ea
                    }
                }
                function Kt(oi, Ea, ri) {
                    oi ? Pe.trigger(bt.SEGMENTS_LOADED, {
                        segments: oi,
                        representation: Ea,
                        mediaType: ri
                    }) : Pe.trigger(bt.SEGMENTS_LOADED, {
                        segments: null,
                        representation: Ea,
                        mediaType: ri,
                        error: new ba(null,"error loading segments",null)
                    })
                }
                return {
                    setConfig: function(oi) {
                        oi.baseURLController && (ti = oi.baseURLController),
                        oi.metricsModel && (ha = oi.metricsModel),
                        oi.mediaPlayerModel && (ca = oi.mediaPlayerModel),
                        oi.errHandler && (Qe = oi.errHandler),
                        oi.videoModel && (ei = oi.videoModel)
                    },
                    initialize: function() {
                        sa = Jl(xe).getInstance(),
                        la = Pd(xe).getInstance(),
                        pa = Ad(xe).create({
                            errHandler: Qe,
                            videoModel: ei,
                            metricsModel: ha,
                            mediaPlayerModel: ca,
                            requestModifier: la,
                            preloadData: ca.getPreloadData()
                        })
                    },
                    loadInitialization: function oi(Ea, ri) {
                        ra();
                        var ya = null
                          , Aa = null
                          , wa = ti.resolve(Ea.path)
                          , _a = ri || {
                            init: !0,
                            url: wa ? wa.url : void 0,
                            range: {
                                start: 0,
                                end: 1500
                            },
                            searching: !1,
                            bytesLoaded: 0,
                            bytesToLoad: 1500
                        };
                        qt("Start searching for initialization.");
                        var Da = ni(_a);
                        pa.load({
                            request: Da,
                            success: function(ua) {
                                _a.bytesLoaded = _a.range.end,
                                Aa = sa.parse(ua),
                                (ya = function(ta) {
                                    var ma = ta.getBox("ftyp")
                                      , ia = ta.getBox("moov")
                                      , na = null
                                      , va = void 0
                                      , Sa = void 0;
                                    return qt("Searching for initialization."),
                                    ia && ia.isComplete && (va = ma ? ma.offset : ia.offset,
                                    Sa = ia.offset + ia.size - 1,
                                    qt("Found the initialization.  Range: " + (na = va + "-" + Sa))),
                                    na
                                }(Aa)) ? (Ea.range = ya,
                                Pe.trigger(bt.INITIALIZATION_LOADED, {
                                    representation: Ea
                                })) : (_a.range.end = _a.bytesLoaded + _a.bytesToLoad,
                                oi(Ea, _a))
                            },
                            error: function() {
                                Pe.trigger(bt.INITIALIZATION_LOADED, {
                                    representation: Ea
                                })
                            }
                        }),
                        qt("Perform init search: " + _a.url)
                    },
                    loadSegments: function oi(Ea, ri, ya, Aa, wa) {
                        if (ra(),
                        ya && (ya.start === void 0 || ya.end === void 0)) {
                            var _a = ya ? ya.toString().split("-") : null;
                            ya = _a ? {
                                start: parseFloat(_a[0]),
                                end: parseFloat(_a[1])
                            } : null
                        }
                        ya.start = 0,
                        wa = wa || Kt;
                        var Da = null
                          , ua = null
                          , ta = !!ya
                          , ma = ti.resolve(Ea.path)
                          , ia = {
                            init: !1,
                            url: ma ? ma.url : void 0,
                            urls: ma.urls,
                            range: ta ? ya : {
                                start: 0,
                                end: 1500
                            },
                            searching: !ta,
                            bytesLoaded: Aa ? Aa.bytesLoaded : 0,
                            bytesToLoad: 1500,
                            representationId: Ea.id,
                            mediaType: Ea.adaptation.type
                        }
                          , na = ni(ia)
                          , va = function() {
                            wa(null, Ea, ri)
                        };
                        pa.load({
                            request: na,
                            success: function(Sa) {
                                if (ia.bytesLoaded = ia.range.end - ia.range.start,
                                Da = sa.parse(Sa),
                                (ua = Da.getBox("sidx")) && ua.isComplete) {
                                    var Na = ua.references
                                      , Oa = void 0
                                      , Ia = void 0;
                                    if (Na != null && Na.length > 0 && (Oa = Na[0].reference_type === 1),
                                    Oa) {
                                        qt("Initiate multiple SIDX load."),
                                        ia.range.end = ia.range.start + ua.size;
                                        var Ra = void 0
                                          , ka = void 0
                                          , Va = void 0
                                          , Ha = void 0
                                          , xa = []
                                          , sl = 0
                                          , gl = (ua.offset || ia.range.start) + ua.size
                                          , Ya = function(Ul) {
                                            Ul ? (xa = xa.concat(Ul),
                                            ++sl >= ka && wa(xa, Ea, ri)) : wa(null, Ea, ri)
                                        };
                                        for (Ra = 0,
                                        ka = Na.length; Ra < ka; Ra++)
                                            Va = gl,
                                            Ha = gl + Na[Ra].referenced_size - 1,
                                            gl += Na[Ra].referenced_size,
                                            oi(Ea, null, {
                                                start: Va,
                                                end: Ha
                                            }, ia, Ya)
                                    } else {
                                        qt("Parsing segments from SIDX."),
                                        Ia = function(Ul, Yl) {
                                            for (var ql = Ul.references, Ml = ql.length, ul = Ul.timescale, al = Ul.earliest_presentation_time, El = Yl.range.start + Ul.offset + Ul.first_offset + Ul.size, Tl = [], $l = void 0, Qa = void 0, Sl = void 0, nu = void 0, ru = 0; ru < Ml; ru++)
                                                Sl = ql[ru].subsegment_duration,
                                                nu = ql[ru].referenced_size,
                                                ($l = new kd).duration = Sl,
                                                $l.startTime = al,
                                                $l.timescale = ul,
                                                Qa = El + nu - 1,
                                                $l.mediaRange = El + "-" + Qa,
                                                Tl.push($l),
                                                al += Sl,
                                                El += nu;
                                            return Tl
                                        }(ua, ia);
                                        try {
                                            var il = Ia[Ia.length - 1]
                                              , Ol = (il.duration + il.startTime) / il.timescale;
                                            Ea.adaptation.period.min ? Ea.adaptation.period.min = Math.min(Ea.adaptation.period.min, Ol) : Ea.adaptation.period.min = Ol;
                                            var _l = ca.getCachedDurationOffset("offset");
                                            Ea.adaptation.period.duration = parseFloat((_l + Ea.adaptation.period.min).toFixed(5)),
                                            qt("Set real min period duration " + Ea.adaptation.period.duration + " ( " + _l + " )")
                                        } catch (Ul) {
                                            qt("Set real period error " + ri)
                                        }
                                        wa(Ia, Ea, ri)
                                    }
                                } else
                                    va(),
                                    Qe.mediaSourceError("Error parsing " + ri + " response.", i.MEDIA_DECODE_ERROR)
                            },
                            error: va
                        }),
                        qt("Perform SIDX load: " + ia.url)
                    },
                    resetPreloadData: function() {
                        pa && pa.setPreloadData(ca.getPreloadData())
                    },
                    reset: function() {
                        pa.abort(),
                        pa = null,
                        Qe = null,
                        sa = null,
                        la = null
                    }
                }
            }
            Tc.__dashjs_factory_name = "SegmentBaseLoader";
            var Mf = $.a.getSingletonFactory(Tc);
            function Fd(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = dd(qt).getInstance()
                  , ei = void 0
                  , sa = xe.timelineConverter
                  , la = xe.dashMetrics
                  , ha = xe.metricsModel
                  , ca = xe.mediaPlayerModel
                  , pa = xe.errHandler
                  , ti = xe.baseURLController
                  , ra = void 0
                  , ni = void 0
                  , Kt = void 0
                  , oi = void 0
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = void 0
                  , wa = void 0;
                function _a() {
                    Kt = -1,
                    Ea = 0,
                    ri = NaN,
                    oi = null,
                    ya = null,
                    Aa = null
                }
                function Da(Ia, Ra, ka) {
                    var Va = ti.resolve(ka.path)
                      , Ha = void 0
                      , xa = void 0
                      , sl = void 0;
                    return Va && Ra !== Va.url && Qe.isRelative(Ra) ? (Ha = Va.url,
                    xa = Va.urls || [],
                    sl = Va.serviceLocation,
                    Ra && (Ha = Qe.resolve(Ra, Ha))) : xa = [Ha = Ra],
                    !Qe.isRelative(Ha) && (Ia.url = Ha,
                    Ia.urls = xa,
                    Ia.serviceLocation = sl,
                    !0)
                }
                function ua(Ia) {
                    var Ra = !1
                      , ka = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null;
                    if (ka || Kt !== Ia.availableSegmentsNumber) {
                        var Va = gd(Kt, Ia);
                        if (Va) {
                            var Ha = parseFloat((Va.presentationStartTime - Ia.adaptation.period.start).toFixed(5))
                              , xa = ca.getCachedDurationOffset("duration")
                              , sl = xa ? Math.min(Ia.adaptation.period.duration, xa) : Ia.adaptation.period.duration;
                            sl = Ia.adaptation.period.duration,
                            ni(Ia.segmentInfoType + ": " + Ha + " / " + sl),
                            Ra = (Ia.segmentInfoType !== Ga.SEGMENT_TIMELINE || !ka) && Ha >= sl
                        } else
                            ni("isMediaFinished - no segment found")
                    } else
                        Ra = !0;
                    return Ra
                }
                function ta(Ia) {
                    Aa.getSegments(Ia, oi, Kt, ma)
                }
                function ma(Ia, Ra) {
                    var ka = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null;
                    if (Ia.segments = Ra,
                    Ra && Ra.length > 0 && (ri = isNaN(ri) ? Ra[0].presentationStartTime : Math.min(Ra[0].presentationStartTime, ri),
                    ka && isNaN(sa.getExpectedLiveEdge()))) {
                        var Va = Ra[Ra.length - 1].presentationStartTime
                          , Ha = ha.getMetricsFor(ie.STREAM);
                        sa.setExpectedLiveEdge(Va),
                        ha.updateManifestUpdateInfo(la.getCurrentManifestUpdate(Ha), {
                            presentationStartTime: Va
                        })
                    }
                }
                function ia(Ia) {
                    if (!Ia)
                        throw new Error("no representation");
                    Ia.segments = null,
                    ta(Ia)
                }
                function na(Ia, Ra, ka) {
                    var Va = Ra.segments
                      , Ha = Va ? Va.length : null
                      , xa = -1
                      , sl = void 0
                      , gl = void 0
                      , Ya = void 0
                      , il = void 0
                      , Ol = void 0;
                    if (Va && Ha > 0) {
                        for (ka = ka == null ? ca.getSegmentOverlapToleranceTime() : ka,
                        Ol = 0; Ol < Ha; Ol++)
                            if (Ya = (gl = Va[Ol]).presentationStartTime,
                            il = gl.duration,
                            Ia + (sl = ka == null ? il / 2 : ka) >= Ya && Ia - sl < Ya + il) {
                                xa = gl.availabilityIdx;
                                break
                            }
                        Ia === 0 && Va[0].presentationStartTime > 0 && (xa = 0)
                    }
                    return xa
                }
                function va(Ia) {
                    if (Ia == null)
                        return null;
                    var Ra = new ii
                      , ka = Ia.representation
                      , Va = ka.adaptation.period.mpd.manifest.Period_asArray[ka.adaptation.period.index].AdaptationSet_asArray[ka.adaptation.index].Representation_asArray[ka.index].bandwidth
                      , Ha = Ia.media
                      , xa = ya ? ya.getType() : null;
                    return Ha = cd(Ha, "Number", Ia.replacementNumber),
                    Ha = cd(Ha, "Time", Ia.replacementTime),
                    Ha = function(sl) {
                        return sl && sl.split("$$").join("$")
                    }(Ha = function(sl, gl) {
                        if (!gl || !sl || sl.indexOf("$RepresentationID$") === -1)
                            return sl;
                        var Ya = gl.toString();
                        return sl.split("$RepresentationID$").join(Ya)
                    }(Ha = cd(Ha, "Bandwidth", Va), ka.id)),
                    Ra.mediaType = xa,
                    Ra.type = vl.MEDIA_SEGMENT_TYPE,
                    Ra.range = Ia.mediaRange,
                    Ra.startTime = Ia.presentationStartTime,
                    Ra.duration = Ia.duration,
                    Ra.timescale = ka.timescale,
                    Ra.availabilityStartTime = Ia.availabilityStartTime,
                    Ra.availabilityEndTime = Ia.availabilityEndTime,
                    Ra.wallStartTime = Ia.wallStartTime,
                    Ra.quality = ka.index,
                    Ra.index = Ia.availabilityIdx,
                    Ra.mediaInfo = ya.getMediaInfo(),
                    Ra.adaptationIndex = ka.adaptation.index,
                    Ra.representationId = ka.id,
                    Da(Ra, Ha, ka) ? Ra : void 0
                }
                function Sa(Ia, Ra, ka) {
                    var Va = void 0
                      , Ha = ya ? ya.getType() : null
                      , xa = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null
                      , sl = Kt
                      , gl = !!ka && ka.keepIdx
                      , Ya = ka ? ka.timeThreshold : null
                      , il = !(!ka || !ka.ignoreIsFinished);
                    return Ia ? (oi !== Ra && (oi = Ra,
                    ni("Getting the request for " + Ha + " time : " + Ra)),
                    ta(Ia),
                    (Kt = na(Ra, Ia, Ya)) < 0 && (ta(Ia),
                    Kt = na(Ra, Ia, Ya)),
                    Kt > 0 && ni("Index for " + Ha + " time " + Ra + " is " + Kt),
                    !il && ua(Ia) ? ((Va = new ii).action = ii.ACTION_COMPLETE,
                    Va.index = Kt,
                    Va.mediaType = Ha,
                    Va.mediaInfo = ya.getMediaInfo(),
                    ni("Signal complete in getSegmentRequestForTime -", Ha)) : Va = va(gd(Kt, Ia)),
                    gl && sl >= 0 && (Kt = Ia.segmentInfoType === Ga.SEGMENT_TIMELINE && xa ? Kt : sl),
                    Va) : null
                }
                function Na(Ia) {
                    var Ra = Ia.representation;
                    Ra.segments && Pe.trigger(bt.REPRESENTATION_UPDATED, {
                        sender: this,
                        representation: Ra
                    })
                }
                function Oa(Ia) {
                    var Ra = ya ? ya.getType() : null
                      , ka = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null;
                    if (!Ia.error && Ra === Ia.mediaType) {
                        var Va, Ha = Ia.segments, xa = Ia.representation, sl = [], gl = 0, Ya = void 0, il = void 0, Ol = void 0, _l = 0;
                        for (ca.getAppendingSourceState() && (wa = ca.getCachedDurationOffset("offset"),
                        _l = Ha[0].startTime,
                        Kt = 0),
                        Ya = 0,
                        Va = Ha.length; Ya < Va; Ya++)
                            il = Ha[Ya],
                            Ol = sc(sa, ka, xa, il.startTime + wa * il.timescale - _l, il.duration, il.timescale, il.media, il.mediaRange, gl),
                            sl.push(Ol),
                            Ol = null,
                            gl++;
                        xa.segmentAvailabilityRange = {
                            start: sl[0].presentationStartTime,
                            end: sl[Va - 1].presentationStartTime
                        },
                        xa.availableSegmentsNumber = Va,
                        ma(xa, sl),
                        md.hasInitialization(xa) && Pe.trigger(bt.REPRESENTATION_UPDATED, {
                            sender: this,
                            representation: xa
                        })
                    }
                }
                return ra = {
                    initialize: function(Ia) {
                        var Ra = (ya = Ia) ? ya.getStreamInfo().manifestInfo.isDynamic : null;
                        ei.initialize(),
                        Aa = Df(qt).create(xe, Ra)
                    },
                    getStreamProcessor: function() {
                        return ya
                    },
                    getInitRequest: function(Ia) {
                        var Ra = ya ? ya.getType() : null;
                        return Ia ? function(ka, Va) {
                            var Ha = new ii
                              , xa = ka.adaptation.period
                              , sl = xa.start
                              , gl = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null;
                            if (Ha.mediaType = Va,
                            Ha.type = vl.INIT_SEGMENT_TYPE,
                            Ha.range = ka.range,
                            Ha.availabilityStartTime = sa.calcAvailabilityStartTimeFromPresentationTime(sl, xa.mpd, gl),
                            Ha.availabilityEndTime = sa.calcAvailabilityEndTimeFromPresentationTime(sl + xa.duration, xa.mpd, gl),
                            Ha.quality = ka.index,
                            Ha.mediaInfo = ya ? ya.getMediaInfo() : null,
                            Ha.representationId = ka.id,
                            Da(Ha, ka.initialization, ka))
                                return Ha
                        }(Ia, Ra) : null
                    },
                    getSegmentRequestForTime: Sa,
                    getNextSegmentRequest: function(Ia) {
                        var Ra = void 0
                          , ka = void 0
                          , Va = ya ? ya.getType() : null
                          , Ha = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null;
                        return Ia && Kt !== -1 ? (oi = null,
                        Kt++,
                        ni("Getting the next request at index: " + Kt + ", type: " + Va),
                        !gd(Kt, Ia) && Ha ? (ni("No segment found at index: " + Kt + ". Wait for next loop"),
                        ta(Ia),
                        Kt--,
                        null) : (ua(Ia) ? ((Ra = new ii).action = ii.ACTION_COMPLETE,
                        Ra.index = Kt,
                        Ra.mediaType = Va,
                        Ra.mediaInfo = ya.getMediaInfo(),
                        ni("Signal complete -", Va)) : (ta(Ia),
                        Ra = va(ka = gd(Kt, Ia)),
                        !ka && Ha && Kt--),
                        Ra)) : null
                    },
                    generateSegmentRequestForTime: function(Ia, Ra) {
                        var ka = (Ia.segmentAvailabilityRange.end - Ia.segmentAvailabilityRange.start) / 2;
                        return Ia.segments = null,
                        Ia.segmentAvailabilityRange = {
                            start: Ra - ka,
                            end: Ra + ka
                        },
                        Sa(Ia, Ra, {
                            keepIdx: !1,
                            ignoreIsFinished: !0
                        })
                    },
                    updateRepresentation: function(Ia, Ra) {
                        var ka = md.hasInitialization(Ia)
                          , Va = md.hasSegments(Ia)
                          , Ha = ya ? ya.getType() : null
                          , xa = ya ? ya.getStreamInfo().manifestInfo.isDynamic : null
                          , sl = void 0;
                        if (Ia.segmentDuration || Ia.segments || ia(Ia),
                        Ia.segmentAvailabilityRange = sa.calcSegmentAvailabilityRange(Ia, xa),
                        Ia.segmentAvailabilityRange.end < Ia.segmentAvailabilityRange.start && !Ia.useCalculatedLiveEdgeTime)
                            return sl = new ba(1,"no segments are available yet",{
                                availabilityDelay: Ia.segmentAvailabilityRange.start - Ia.segmentAvailabilityRange.end
                            }),
                            void Pe.trigger(bt.REPRESENTATION_UPDATED, {
                                sender: this,
                                representation: Ia,
                                error: sl
                            });
                        Ra || (Kt = -1),
                        Ia.segmentDuration && ia(Ia),
                        ka || ei.loadInitialization(Ia),
                        Va || ei.loadSegments(Ia, Ha, Ia.indexRange),
                        ka && Va && Pe.trigger(bt.REPRESENTATION_UPDATED, {
                            sender: this,
                            representation: Ia
                        })
                    },
                    updateSegmentList: ia,
                    setCurrentTime: function(Ia) {
                        ca.getCachedDurationOffset("duration") && (Ia = Math.min(ca.getCachedDurationOffset("duration"), Ia)),
                        Ea = Ia
                    },
                    getCurrentTime: function() {
                        return Ea
                    },
                    getEarliestTime: function() {
                        return ri
                    },
                    resetPreloadData: function() {
                        ei && ei.resetPreloadData()
                    },
                    reset: function() {
                        _a(),
                        Pe.off(bt.INITIALIZATION_LOADED, Na, ra),
                        Pe.off(bt.SEGMENTS_LOADED, Oa, ra)
                    }
                },
                ni = aa(qt).getInstance().log.bind(ra),
                _a(),
                (ei = Mf(qt).getInstance()).setConfig({
                    baseURLController: ti,
                    metricsModel: ha,
                    mediaPlayerModel: ca,
                    videoModel: xe.videoModel,
                    errHandler: pa
                }),
                wa = 0,
                Pe.on(bt.INITIALIZATION_LOADED, Na, ra),
                Pe.on(bt.SEGMENTS_LOADED, Oa, ra),
                ra
            }
            Fd.__dashjs_factory_name = "DashHandler";
            var Bd = $.a.getClassFactory(Fd);
            Bd.SEGMENTS_UNAVAILABLE_ERROR_CODE = 1,
            $.a.updateClassFactory(Fd.__dashjs_factory_name, Bd);
            var Lf = Bd;
            function Ac(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = void 0
                  , Qe = xe.type
                  , ei = xe.errHandler
                  , sa = xe.mimeType
                  , la = xe.timelineConverter
                  , ha = xe.adapter
                  , ca = xe.manifestModel
                  , pa = xe.mediaPlayerModel
                  , ti = xe.stream
                  , ra = xe.abrController
                  , ni = xe.playbackController
                  , Kt = xe.streamController
                  , oi = xe.mediaController
                  , Ea = xe.domStorage
                  , ri = xe.metricsModel
                  , ya = xe.dashMetrics
                  , Aa = xe.dashManifestModel
                  , wa = aa(qt).getInstance()
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0
                  , Na = void 0;
                function Oa() {
                    Na = []
                }
                function Ia() {
                    ta = [],
                    ua = null,
                    Oa()
                }
                function Ra() {
                    return ti ? ti.getStreamInfo() : null
                }
                function ka() {
                    return ua
                }
                return _a = {
                    initialize: function(Va) {
                        (Pe = Lf(qt).create({
                            mimeType: sa,
                            timelineConverter: la,
                            dashMetrics: ya,
                            metricsModel: ri,
                            mediaPlayerModel: pa,
                            baseURLController: xe.baseURLController,
                            videoModel: xe.videoModel,
                            errHandler: ei
                        })).initialize(_a),
                        ra.registerStreamType(Qe, _a),
                        (Sa = ti.getFragmentController().getModel(Qe)).setStreamProcessor(_a),
                        ma = function(Ha) {
                            var xa = null;
                            return Ha !== ie.VIDEO && Ha !== ie.AUDIO || (xa = ku(qt).create({
                                type: Ha,
                                metricsModel: ri,
                                mediaPlayerModel: pa,
                                manifestModel: ca,
                                errHandler: ei,
                                streamController: Kt,
                                mediaController: oi,
                                adapter: ha,
                                abrController: ra,
                                playbackController: ni,
                                streamProcessor: _a
                            })),
                            xa
                        }(Qe),
                        ia = _f(qt).create({
                            type: Qe,
                            metricsModel: ri,
                            adapter: ha,
                            dashMetrics: ya,
                            dashManifestModel: Aa,
                            timelineConverter: la,
                            mediaPlayerModel: pa,
                            abrController: ra,
                            playbackController: ni,
                            streamController: Kt,
                            streamProcessor: _a,
                            mediaController: oi
                        }),
                        (va = Tf(qt).create()).setConfig({
                            abrController: ra,
                            domStorage: Ea,
                            metricsModel: ri,
                            dashMetrics: ya,
                            dashManifestModel: Aa,
                            manifestModel: ca,
                            playbackController: ni,
                            timelineConverter: la,
                            streamProcessor: _a
                        }),
                        ma.initialize(Va),
                        ia.initialize(),
                        va.initialize()
                    },
                    isUpdating: function() {
                        return !!va && va.isUpdating()
                    },
                    getType: function() {
                        return Qe
                    },
                    getBufferController: function() {
                        return ma
                    },
                    getFragmentModel: function() {
                        return Sa
                    },
                    getScheduleController: function() {
                        return ia
                    },
                    getLiveEdgeFinder: function() {
                        return na
                    },
                    getEventController: function() {
                        return ti ? ti.getEventController() : null
                    },
                    getFragmentController: function() {
                        return ti ? ti.getFragmentController() : null
                    },
                    getRepresentationController: function() {
                        return va
                    },
                    getIndexHandler: function() {
                        return Pe
                    },
                    getCurrentRepresentationInfo: function() {
                        return ha.getCurrentRepresentationInfo(va)
                    },
                    getRepresentationInfoForQuality: function(Va) {
                        return ha.getRepresentationInfoForQuality(va, Va)
                    },
                    getBufferLevel: function() {
                        return ma.getBufferLevel()
                    },
                    switchInitData: function(Va, Ha) {
                        ma && ma.switchInitData(Ra().id, Va, Ha)
                    },
                    isBufferingCompleted: function() {
                        return !!ma && ma.getIsBufferingCompleted()
                    },
                    createBuffer: function() {
                        return ma.getBuffer() || ma.createBuffer(ua)
                    },
                    getStreamInfo: Ra,
                    updateMediaInfo: function(Va) {
                        if (!(Va === ua || Va && ua && Va.type !== ua.type)) {
                            var Ha = (ua = Va).bitrateList.map(function(xa) {
                                return {
                                    id: xa.id,
                                    bandwidth: xa.bandwidth
                                }
                            });
                            Da("[mediaInfo] type: " + ua.type + ", bitrateList: " + JSON.stringify(Ha))
                        }
                        ta.indexOf(Va) === -1 && ta.push(Va),
                        ha.updateData(this)
                    },
                    switchTrackAsked: function() {
                        ia.switchTrackAsked()
                    },
                    getMediaInfoArr: function() {
                        return ta
                    },
                    getMediaInfo: ka,
                    getMediaSource: function() {
                        return ma.getMediaSource()
                    },
                    setMediaSource: function(Va) {
                        ma.setMediaSource(Va, ka())
                    },
                    dischargePreBuffer: function() {
                        ma.dischargePreBuffer()
                    },
                    getBuffer: function() {
                        return ma.getBuffer()
                    },
                    setBuffer: function(Va) {
                        ma.setBuffer(Va)
                    },
                    registerExternalController: function(Va) {
                        Na.push(Va)
                    },
                    unregisterExternalController: function(Va) {
                        var Ha = Na.indexOf(Va);
                        Ha !== -1 && Na.splice(Ha, 1)
                    },
                    getExternalControllers: function() {
                        return Na
                    },
                    unregisterAllExternalController: Oa,
                    getPlaybackController: function() {
                        return ni
                    },
                    resetPreloadData: function() {
                        Sa.resetPreloadData(),
                        Pe.resetPreloadData()
                    },
                    reset: function(Va) {
                        Pe.reset(),
                        ma && (ma.reset(Va),
                        ma = null),
                        ia && (ia.reset(),
                        ia = null),
                        va && (va.reset(),
                        va = null),
                        ra && ra.unRegisterStreamType(Qe),
                        Na.forEach(function(Ha) {
                            Ha.reset()
                        }),
                        Ia(),
                        Qe = null,
                        ti = null,
                        na && (na.reset(),
                        na = null)
                    }
                },
                ni && ni.getIsDynamic() && (na = Ed(qt).create({
                    timelineConverter: la,
                    streamProcessor: _a
                })),
                Da = wa.log.bind(_a),
                Ia(),
                _a
            }
            Ac.__dashjs_factory_name = "StreamProcessor";
            var kf = $.a.getClassFactory(Ac);
            function Sc() {
                var xe, qt = "urn:mpeg:dash:event:2012", Pe = this.context, Qe = aa(Pe).getInstance().log, ei = Re(Pe).getInstance(), sa = void 0, la = void 0, ha = void 0, ca = void 0, pa = void 0, ti = void 0, ra = void 0, ni = void 0, Kt = void 0, oi = void 0;
                function Ea() {
                    oi = !1,
                    sa = {},
                    la = {},
                    ha = {},
                    ca = null,
                    ti = (pa = 100) / 1e3
                }
                function ri() {
                    if (!ra || !ni || !Kt)
                        throw new Error("setConfig function has to be called previously")
                }
                function ya() {
                    ca !== null && oi && (clearInterval(ca),
                    ca = null,
                    oi = !1)
                }
                function Aa(Da) {
                    if (Da.eventStream.value == 1) {
                        var ua = Da.eventStream.timescale || 1
                          , ta = Da.presentationTime / ua
                          , ma = void 0;
                        ma = Da.presentationTime == 4294967295 ? NaN : (Da.presentationTime + Da.duration) / ua,
                        Qe("Manifest validity changed: Valid until: " + ta + "; remaining duration: " + ma),
                        ei.trigger(bt.MANIFEST_VALIDITY_CHANGED, {
                            id: Da.id,
                            validUntil: ta,
                            newDuration: ma,
                            newManifestValidAfter: NaN
                        })
                    }
                }
                function wa() {
                    _a(la),
                    _a(sa),
                    function() {
                        if (ha)
                            for (var Da = Kt.getTime(), ua = Object.keys(ha), ta = 0; ta < ua.length; ta++) {
                                var ma = ua[ta]
                                  , ia = ha[ma];
                                ia !== null && (ia.duration + ia.presentationTime) / ia.eventStream.timescale < Da && (Qe("Remove Event " + ma + " at time " + Da),
                                ia = null,
                                delete ha[ma])
                            }
                    }()
                }
                function _a(Da) {
                    var ua, ta = Kt.getTime();
                    if (Da)
                        for (var ma = Object.keys(Da), ia = 0; ia < ma.length; ia++) {
                            var na = ma[ia]
                              , va = Da[na];
                            va !== void 0 && ((ua = va.presentationTime / va.eventStream.timescale) === 0 || ua <= ta && ua + ti > ta) && (Qe("Start Event " + na + " at " + ta),
                            va.duration > 0 && (ha[na] = va),
                            va.eventStream.schemeIdUri == qt && va.eventStream.value == 1 ? va.duration === 0 && va.presentationTimeDelta === 0 || (ri(),
                            ni.refreshManifest()) : ei.trigger(va.eventStream.schemeIdUri, {
                                event: va
                            }),
                            delete Da[na])
                        }
                }
                return xe = {
                    addInlineEvents: function(Da) {
                        if (ri(),
                        sa = {},
                        Da)
                            for (var ua = 0; ua < Da.length; ua++) {
                                var ta = Da[ua];
                                sa[ta.id] = ta,
                                Qe("Add inline event with id " + ta.id)
                            }
                        Qe("Added " + Da.length + " inline events")
                    },
                    addInbandEvents: function(Da) {
                        ri();
                        for (var ua = 0; ua < Da.length; ua++) {
                            var ta = Da[ua];
                            ta.id in la ? Qe("Repeated event with id " + ta.id) : (ta.eventStream.schemeIdUri === qt && la[ta.id] === void 0 && Aa(ta),
                            la[ta.id] = ta,
                            Qe("Add inband event with id " + ta.id))
                        }
                    },
                    stop: ya,
                    start: function() {
                        ri(),
                        Qe("Start Event Controller"),
                        oi || isNaN(pa) || (oi = !0,
                        ca = setInterval(wa, pa))
                    },
                    setConfig: function(Da) {
                        Da && (Da.manifestModel && (ra = Da.manifestModel),
                        Da.manifestUpdater && (ni = Da.manifestUpdater),
                        Da.playbackController && (Kt = Da.playbackController))
                    },
                    reset: function() {
                        ya(),
                        Ea()
                    }
                },
                Ea(),
                xe
            }
            Sc.__dashjs_factory_name = "EventController";
            var Pf = $.a.getClassFactory(Sc)
              , xf = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.streamId = null,
                this.mediaInfo = null,
                this.segmentType = null,
                this.quality = NaN,
                this.index = NaN,
                this.bytes = null,
                this.start = NaN,
                this.end = NaN,
                this.duration = NaN,
                this.representationId = null,
                this.endFragment = null
            }
              , Ff = function(xe) {
                function qt(Pe) {
                    (function(ei, sa) {
                        if (!(ei instanceof sa))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, qt);
                    var Qe = function(ei, sa) {
                        if (!ei)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !sa || typeof sa != "object" && typeof sa != "function" ? ei : sa
                    }(this, xe.call(this));
                    return Qe.url = Pe || null,
                    Qe.checkForExistenceOnly = !0,
                    Qe
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(ii);
            function Ic() {
                return {
                    verify: function(xe) {
                        if (!xe)
                            return {
                                verified: !1
                            };
                        var qt = Rl.a.parseBuffer(xe)
                          , Pe = qt.fetchAll("moof")
                          , Qe = qt.fetchAll("mdat")
                          , ei = qt.fetchAll("trun")
                          , sa = xe.byteLength
                          , la = ""
                          , ha = Pe.length > 0 && Pe.length === Qe.length && ei.length >= Pe.length
                          , ca = !0
                          , pa = 0
                          , ti = !0;
                        if (ha) {
                            for (var ra = 0, ni = Pe.length; ra < ni; ra++) {
                                var Kt = Pe[ra]
                                  , oi = Qe[ra]
                                  , Ea = Kt._parent
                                  , ri = Ea && Ea.boxes || null;
                                Array.isArray(ri) ? ri.forEach(function(ya) {
                                    pa += ya.size
                                }) : pa += Kt.size + oi.size,
                                oi.size !== oi._raw.byteLength && (ti = !1,
                                la += "The index " + ra + " mdat box size error, decoded: " + oi.size + ", actually: " + oi._raw.byteLength + ". ")
                            }
                            sa !== pa && (ca = !1,
                            ti && (la = "Size error, decoded: " + pa + ", actually: " + sa))
                        } else
                            la = "Missing moof box and mdat box.";
                        return {
                            size: sa,
                            moofBoxesCount: Pe.length,
                            isSizeCorrect: ca,
                            areAllBoxesInPairs: ha,
                            areAllMdatBoxesSizeCorrect: ti,
                            verified: ca && ha && ti,
                            msg: la
                        }
                    }
                }
            }
            Ic.__dashjs_factory_name = "VerifySegment";
            var Bf = $.a.getSingletonFactory(Ic)
              , Dc = "request timeout";
            function Ud(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = Bf(qt).getInstance()
                  , ei = aa(qt).getInstance().log
                  , sa = void 0
                  , la = void 0
                  , ha = void 0;
                return sa = {
                    checkForExistence: function(ca) {
                        var pa = function(ra) {
                            Pe.trigger(bt.CHECK_FOR_EXISTENCE_COMPLETED, {
                                request: ca,
                                exists: ra
                            })
                        };
                        if (ca) {
                            var ti = new Ff(ca.url);
                            la.load({
                                request: ti,
                                success: function() {
                                    pa(!0)
                                },
                                error: function() {
                                    pa(!1)
                                }
                            })
                        } else
                            pa(!1)
                    },
                    load: function ca(pa, ti) {
                        ti ? ti.hasOwnProperty("canUseNC") || (ti.canUseNC = !0) : ti = {
                            canUseNC: !0
                        };
                        var ra = function(ni, Kt) {
                            if (!Kt && (Pe.trigger(bt.LOADING_COMPLETED, {
                                request: pa,
                                response: ni || null,
                                error: Kt || null,
                                sender: sa
                            }),
                            pa.preloadEnd)) {
                                xe.mediaPlayerModel.setPreloadData(null);
                                var oi = xe.abrController.getDefaultQualityFor(pa.mediaType, !1);
                                xe.abrController.setPlaybackQuality(pa.mediaType, xe.streamController.getActiveStreamInfo(), oi)
                            }
                        };
                        pa ? (pa.retry === void 0 && (pa.retry = 1),
                        la.load({
                            request: pa,
                            progress: function(ni) {
                                Pe.trigger(bt.LOADING_PROGRESS, {
                                    request: pa
                                }),
                                ni && Pe.trigger(bt.LOADING_DATA_PROGRESS, {
                                    request: pa,
                                    response: ni || null,
                                    error: null,
                                    sender: sa
                                })
                            },
                            success: function(ni) {
                                try {
                                    if (pa.completeNCMissingRange) {
                                        ei("CompleteNCMissingRange, " + pa.range + " -> " + pa.originRange),
                                        pa.completeNCMissingRange = !1,
                                        pa.NCInfo.responseData.missingData = [];
                                        var Kt = pa.range.split("-")
                                          , oi = pa.originRange.split("-")
                                          , Ea = parseInt(Kt[0])
                                          , ri = parseInt(Kt[1])
                                          , ya = parseInt(oi[0])
                                          , Aa = parseInt(oi[1])
                                          , wa = pa.NCInfo.responseData.availableData;
                                        wa.push({
                                            start: Ea,
                                            end: ri,
                                            data: ni
                                        }),
                                        wa.sort(function(na, va) {
                                            return na.start - va.start
                                        });
                                        for (var _a = new Uint8Array(Aa - ya + 1), Da = 0; Da < wa.length; Da++)
                                            _a.set(new Uint8Array(wa[Da].data), wa[Da].start - wa[0].start);
                                        ni = _a.buffer,
                                        pa.range = pa.originRange
                                    }
                                    var ua = void 0;
                                    if (pa.range) {
                                        var ta = pa.range && pa.range.split("-");
                                        ua = ta[1] - ta[0] + 1
                                    }
                                    var ma = {
                                        mediaType: pa.mediaType,
                                        id: pa.representationId,
                                        index: pa.index,
                                        range: pa.range,
                                        received: ni && ni.byteLength || 0,
                                        url: pa.url,
                                        startTime: pa.startTime,
                                        duration: pa.duration,
                                        p2pLoadInfo: pa.p2pLoadInfo,
                                        rType: ti && ti.canUseNC ? "NC" : "XHR",
                                        retryTimes: pa.retryTimes
                                    };
                                    ni && ni.byteLength > 3e7 && (ma.code = i.DOWNLOAD_FRAGMENT_ERROR_RANGE,
                                    Pe.trigger(bt.FRAGMENT_LOADED_ERROR, ma));
                                    var ia = function(na, va) {
                                        try {
                                            if (na && va) {
                                                if (isNaN(na.index) || na.type !== "MediaSegment")
                                                    return {
                                                        verified: !0
                                                    };
                                                var Sa = Qe.verify(va);
                                                return Sa.mediaType = na.mediaType,
                                                Sa.quality = na.quality,
                                                Sa.index = na.index,
                                                Sa.id = na.representationId,
                                                Sa && !Sa.verified && (ei("VERIFY_SEGMENT_WARNING: " + JSON.stringify(Sa)),
                                                Pe.trigger(bt.VERIFY_SEGMENT_WARNING, Sa)),
                                                Sa
                                            }
                                        } catch (Na) {
                                            throw new Error(Na)
                                        }
                                    }(pa, ni);
                                    ni && (ni.byteLength === ua || !ua) && ia && ia.verified ? (pa.retry === 1 || (ma.code = i.DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS,
                                    Pe.trigger(bt.FRAGMENT_LOADED_ERROR, ma)),
                                    ra(ni)) : (ma && ma.hasOwnProperty("type") && delete ma.type,
                                    ia.verified || (ni.byteLength === ua ? ma.verifiedType = 1 : ma.verifiedType = 2),
                                    pa.retry && pa.retry > 0 ? (ma.code = i.DOWNLOAD_FRAGMENT_ERROR,
                                    Pe.trigger(bt.FRAGMENT_LOADED_ERROR, ma),
                                    pa.retry--,
                                    ca(pa, {
                                        canUseNC: !1
                                    })) : (ma.code = i.DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE,
                                    Pe.trigger(bt.FRAGMENT_LOADED_ERROR, ma)))
                                } catch (na) {
                                    console.error("FragmentLoader Load Error: ", na)
                                }
                            },
                            timeout: function(ni, Kt, oi) {
                                var Ea = {
                                    mediaType: ni.mediaType,
                                    id: ni.representationId,
                                    index: ni.index,
                                    range: ni.range,
                                    received: ni.bytesLoaded,
                                    url: ni.url,
                                    startTime: ni.startTime,
                                    duration: ni.duration,
                                    total: ni.bytesTotal,
                                    latency: Kt,
                                    timeout: oi,
                                    p2pLoadInfo: ni.p2pLoadInfo,
                                    rType: ti && ti.canUseNC ? "NC" : "XHR",
                                    retryTimes: ni.retryTimes
                                };
                                Ea.code = i.DOWNLOAD_FRAGMENT_ERROR_TIMEOUT,
                                Pe.trigger(bt.FRAGMENT_LOADED_ERROR, Ea),
                                ra(void 0, new ba(1,Dc))
                            },
                            error: function(ni, Kt, oi) {
                                ra(void 0, new ba(1,oi,Kt))
                            },
                            abort: function(ni) {
                                ni && Pe.trigger(bt.LOADING_ABANDONED, {
                                    request: ni,
                                    mediaType: ni.mediaType,
                                    sender: sa
                                })
                            },
                            connectTimeout: function(ni, Kt, oi) {
                                if (ni) {
                                    var Ea = {
                                        mediaType: ni.mediaType,
                                        id: ni.representationId,
                                        index: ni.index,
                                        range: ni.range,
                                        received: ni.bytesLoaded || 0,
                                        url: ni.url,
                                        startTime: ni.startTime,
                                        duration: ni.duration,
                                        total: ni.bytesTotal,
                                        timeout: Kt,
                                        p2pLoadInfo: ni.p2pLoadInfo,
                                        rType: oi ? "NC" : "XHR",
                                        retryTimes: ni.retryTimes
                                    };
                                    Ea.code = i.CONNECT_FRAGMENT_ERROR_TIMEOUT,
                                    oi && (Ea.code = i.CONNECT_NC_FRAGMENT_ERROR_TIMEOUT),
                                    Pe.trigger(bt.FRAGMENT_LOADED_ERROR, Ea),
                                    ra(void 0, new ba(1,Dc))
                                }
                            },
                            headersReceived: function(ni) {
                                Pe.trigger(bt.FRAGMENT_LOADING_HEADER_RECEIVED, {
                                    request: pa,
                                    headers: ni
                                })
                            },
                            params: ti
                        })) : ra(void 0, new ba(2,"request is null"))
                    },
                    abort: function() {
                        la && la.abort()
                    },
                    reset: function() {
                        la && (la.abort(),
                        la = null)
                    },
                    resetPreloadData: function() {
                        ha = xe.mediaPlayerModel.getPreloadData(),
                        la.setPreloadData(ha)
                    }
                },
                ha = xe.mediaPlayerModel.getPreloadData(),
                la = Ad(qt).create({
                    errHandler: xe.errHandler,
                    videoModel: xe.videoModel,
                    metricsModel: xe.metricsModel,
                    mediaPlayerModel: xe.mediaPlayerModel,
                    requestModifier: xe.requestModifier,
                    useFetch: xe.mediaPlayerModel.getLowLatencyEnabled(),
                    dashMetrics: xe.dashMetrics,
                    preloadData: ha
                }),
                sa
            }
            Ud.__dashjs_factory_name = "FragmentLoader";
            var Sd = $.a.getClassFactory(Ud);
            Sd.FRAGMENT_LOADER_ERROR_LOADING_FAILURE = 1,
            Sd.FRAGMENT_LOADER_ERROR_NULL_REQUEST = 2,
            $.a.updateClassFactory(Ud.__dashjs_factory_name, Sd);
            var Uf = Sd;
            function bc(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = Re(qt).getInstance()
                  , ei = xe.errHandler
                  , sa = xe.mediaPlayerModel
                  , la = xe.metricsModel
                  , ha = xe.abrController
                  , ca = xe.streamController
                  , pa = xe.videoModel
                  , ti = void 0
                  , ra = void 0;
                function ni(Ea) {
                    return Ea && Ea.type && Ea.type === vl.INIT_SEGMENT_TYPE
                }
                function Kt() {
                    for (var Ea in ra)
                        ra[Ea].reset();
                    ra = {}
                }
                function oi(Ea) {
                    if (ra[Ea.request.mediaType] === Ea.sender) {
                        var ri = Ea.request
                          , ya = Ea.response
                          , Aa = ni(ri)
                          , wa = ri.mediaInfo.streamInfo;
                        if (Ea.error && (Ea.request.mediaType !== ie.AUDIO && Ea.request.mediaType !== ie.VIDEO && Ea.request.mediaType !== ie.FRAGMENTED_TEXT || Qe.trigger(bt.SERVICE_LOCATION_BLACKLIST_ADD, {
                            entry: Ea.request.serviceLocation
                        })),
                        ya && wa) {
                            var _a = function(Da, ua, ta, ma) {
                                var ia = new xf;
                                return ia.streamId = ta,
                                ia.mediaInfo = ua.mediaInfo,
                                ia.segmentType = ua.type,
                                ia.start = ua.startTime,
                                ia.duration = ua.duration,
                                ia.end = ia.start + ia.duration,
                                ia.bytes = Da,
                                ia.index = ua.index,
                                ia.quality = ua.quality,
                                ia.representationId = ua.representationId,
                                ia.endFragment = ma,
                                ia
                            }(ya, ri, wa.id, Ea.type !== bt.FRAGMENT_LOADING_PROGRESS);
                            Qe.trigger(Aa ? bt.INIT_FRAGMENT_LOADED : bt.MEDIA_FRAGMENT_LOADED, {
                                chunk: _a,
                                fragmentModel: Ea.sender
                            })
                        } else
                            Pe("No " + ri.mediaType + " bytes to push or stream is inactive.")
                    }
                }
                return ti = {
                    getModel: function(Ea) {
                        var ri = ra[Ea];
                        return ri || (ri = ga(qt).create({
                            metricsModel: la,
                            fragmentLoader: Uf(qt).create({
                                metricsModel: la,
                                videoModel: pa,
                                mediaPlayerModel: sa,
                                errHandler: ei,
                                requestModifier: Pd(qt).getInstance(),
                                dashMetrics: xe.dashMetrics,
                                abrController: ha,
                                streamController: ca
                            })
                        }),
                        ra[Ea] = ri),
                        ri
                    },
                    isInitializationRequest: ni,
                    reset: function() {
                        Qe.off(bt.FRAGMENT_LOADING_COMPLETED, oi, this),
                        Kt()
                    }
                },
                Kt(),
                Qe.on(bt.FRAGMENT_LOADING_COMPLETED, oi, ti),
                ti
            }
            bc.__dashjs_factory_name = "FragmentController";
            var Vf = $.a.getClassFactory(bc);
            function wc(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = aa(qt).getInstance().log
                  , Qe = Re(qt).getInstance()
                  , ei = xe.manifestModel
                  , sa = xe.dashManifestModel
                  , la = xe.mediaPlayerModel
                  , ha = xe.manifestUpdater
                  , ca = xe.adapter
                  , pa = xe.capabilities
                  , ti = xe.errHandler
                  , ra = xe.timelineConverter
                  , ni = xe.metricsModel
                  , Kt = xe.abrController
                  , oi = xe.playbackController
                  , Ea = xe.mediaController
                  , ri = xe.videoModel
                  , ya = xe.streamController
                  , Aa = void 0
                  , wa = void 0
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0;
                function Na() {
                    for (var ul = wa ? wa.length : 0, al = 0; al < ul; al++)
                        wa[al].getFragmentModel().removeExecutedRequestsBeforeTime(ka() + Ra()),
                        wa[al].reset();
                    wa = [],
                    _a = !1,
                    Da = !1,
                    Qe.off(bt.CURRENT_TRACK_CHANGED, gl, Aa)
                }
                function Oa() {
                    Na(),
                    ua = null,
                    ta = {},
                    ma = !1
                }
                function Ia() {
                    oi && oi.pause(),
                    na && (na.reset(),
                    na = null),
                    va && (va.reset(),
                    va = null),
                    Oa(),
                    Pe = null,
                    Qe.off(bt.DATA_UPDATE_COMPLETED, Yl, Aa),
                    Qe.off(bt.BUFFERING_COMPLETED, Ul, Aa),
                    Qe.off(bt.KEY_ERROR, Ha, Aa),
                    Qe.off(bt.SERVER_CERTIFICATE_UPDATED, Ha, Aa),
                    Qe.off(bt.LICENSE_REQUEST_COMPLETE, Ha, Aa),
                    Qe.off(bt.KEY_SYSTEM_SELECTED, Ha, Aa),
                    Qe.off(bt.KEY_SESSION_CREATED, Ha, Aa),
                    Qe.off(bt.KEY_STATUSES_CHANGED, Ha, Aa)
                }
                function Ra() {
                    return ua ? ua.duration : NaN
                }
                function ka() {
                    return ua ? ua.start : NaN
                }
                function Va() {
                    if (!(Kt && Kt.hasOwnProperty("getBitrateList") && ca && ca.hasOwnProperty("getAllMediaInfoForType") && ca.hasOwnProperty("getEventsFor")))
                        throw new Error("Missing config parameter(s)")
                }
                function Ha(ul) {
                    ul.error && (ti.mediaKeySessionError(ul.error),
                    Pe(ul.error),
                    Ia())
                }
                function xa(ul) {
                    return ul.type === ie.TEXT ? ul.mimeType : ul.type
                }
                function sl(ul) {
                    var al, El = ul.type, Tl = void 0;
                    if (El === ie.MUXED && ul)
                        return Pe(Tl = "Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),
                        ti.manifestError(Tl, "multiplexedrep", ei.getValue()),
                        !1;
                    if (El === ie.TEXT || El === ie.FRAGMENTED_TEXT || El === ie.EMBEDDED_TEXT || El === ie.IMAGE)
                        return !0;
                    if (al = ul.codec,
                    Pe(El + " codec: " + al),
                    ul.contentProtection && !pa.supportsEncryptedMedia())
                        ti.capabilityError("encryptedmedia");
                    else if (!pa.supportsCodec(al))
                        return Pe(Tl = El + "Codec (" + al + ") is not supported."),
                        !1;
                    return !0
                }
                function gl(ul) {
                    if (ul.newMediaInfo.streamInfo.id === ua.id) {
                        var al = ql(ul.oldMediaInfo);
                        if (al) {
                            var El = oi.getTime();
                            Pe("Stream -  Process track changed at current time " + El);
                            var Tl = ul.newMediaInfo
                              , $l = ei.getValue();
                            Pe("Stream -  Update stream controller"),
                            $l.refreshManifestOnSwitchTrack ? (Pe("Stream -  Refreshing manifest for switch track"),
                            Sa = ul,
                            ha.refreshManifest()) : (al.updateMediaInfo(Tl),
                            Tl.type !== ie.FRAGMENTED_TEXT && (Kt.updateTopQualityIndex(Tl),
                            al.switchTrackAsked(),
                            al.getFragmentModel().abortRequests()))
                        }
                    }
                }
                function Ya(ul, al) {
                    var El = ca.getAllMediaInfoForType(ua, ul)
                      , Tl = null;
                    if (El && El.length !== 0) {
                        for (var $l = 0, Qa = El.length; $l < Qa; $l++)
                            if (Tl = El[$l],
                            ul !== ie.EMBEDDED_TEXT) {
                                if (!sl(Tl))
                                    continue;
                                Ea.addTrack(Tl)
                            }
                        ul !== ie.EMBEDDED_TEXT && Ea.getTracksFor(ul, ua).length !== 0 && (Ea.checkInitialMediaSettingsForType(ul, ua),
                        function(Sl, nu, ru, ol) {
                            var cl = kf(qt).create({
                                type: xa(Sl),
                                mimeType: Sl.mimeType,
                                timelineConverter: ra,
                                adapter: ca,
                                manifestModel: ei,
                                dashManifestModel: sa,
                                mediaPlayerModel: la,
                                metricsModel: ni,
                                dashMetrics: xe.dashMetrics,
                                baseURLController: xe.baseURLController,
                                stream: Aa,
                                abrController: Kt,
                                domStorage: xe.domStorage,
                                playbackController: oi,
                                mediaController: Ea,
                                streamController: ya,
                                videoModel: ri,
                                errHandler: ti
                            });
                            if (cl.initialize(ru),
                            Kt.updateTopQualityIndex(Sl),
                            ol ? (cl.setBuffer(ol.buffer),
                            cl.getIndexHandler().setCurrentTime(ol.currentTime),
                            wa[ol.replaceIdx] = cl) : wa.push(cl),
                            !ol || !ol.ignoreMediaInfo)
                                if (Sl.type === ie.TEXT || Sl.type === ie.FRAGMENTED_TEXT) {
                                    for (var Kl = void 0, Ma = 0; Ma < nu.length; Ma++)
                                        nu[Ma].index === Sl.index && (Kl = Ma),
                                        cl.updateMediaInfo(nu[Ma]);
                                    Sl.type === ie.FRAGMENTED_TEXT && cl.updateMediaInfo(nu[Kl])
                                } else
                                    cl.updateMediaInfo(Sl)
                        }(Ea.getCurrentTrackFor(ul, ua), El, al))
                    } else
                        Pe("No " + ul + " data.")
                }
                function il(ul) {
                    var al = sa.getAdaptationForType(ei.getValue(), ua.index, ul, ua);
                    if (!al || !Array.isArray(al.Representation_asArray))
                        return null;
                    al.Representation_asArray = al.Representation_asArray.filter(function(El, Tl) {
                        if (Tl === 0)
                            return !0;
                        var $l = sa.getCodec(al, Tl, !0);
                        return !!pa.supportsCodec($l) || (Pe("[Stream] codec not supported: " + $l),
                        !1)
                    })
                }
                function Ol() {
                    for (var ul = wa.length, al = ta.audio || ta.video ? new Error(1,"Data update failed",null) : null, El = 0; El < ul; El++)
                        if (wa[El].isUpdating() || ma)
                            return;
                    if (Da) {
                        if (ia)
                            for (var Tl = 0; Tl < ul && wa[Tl]; Tl++)
                                wa[Tl].getType() !== ie.AUDIO && wa[Tl].getType() !== ie.VIDEO && wa[Tl].getType() !== ie.FRAGMENTED_TEXT || ia.initializeForMedia(wa[Tl].getMediaInfo());
                        Qe.trigger(bt.STREAM_INITIALIZED, {
                            streamInfo: ua,
                            error: al
                        })
                    }
                }
                function _l() {
                    for (var ul = 0, al = wa.length; ul < al; ul++)
                        wa[ul].createBuffer()
                }
                function Ul(ul) {
                    if (ul.streamInfo === ua) {
                        var al = Ml()
                          , El = al.length;
                        if (El !== 0) {
                            for (var Tl = 0; Tl < El; Tl++)
                                if (!al[Tl].isBufferingCompleted() && (al[Tl].getType() === ie.AUDIO || al[Tl].getType() === ie.VIDEO))
                                    return void Pe("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor " + al[Tl].getType() + " is not buffering completed");
                            Pe("[Stream] onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),
                            Qe.trigger(bt.STREAM_BUFFERING_COMPLETED, {
                                streamInfo: ua
                            })
                        } else
                            Pe("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")
                    }
                }
                function Yl(ul) {
                    var al = ul.sender.getStreamProcessor();
                    al.getStreamInfo() === ua && (ta[al.getType()] = ul.error,
                    Ol())
                }
                function ql(ul) {
                    return !!ul && Ml().filter(function(al) {
                        return al.getType() === ul.type
                    })[0]
                }
                function Ml() {
                    for (var ul = wa.length, al = [], El = void 0, Tl = void 0, $l = 0; $l < ul; $l++)
                        (El = (Tl = wa[$l]).getType()) !== ie.AUDIO && El !== ie.VIDEO && El !== ie.FRAGMENTED_TEXT || al.push(Tl);
                    return al
                }
                return Aa = {
                    initialize: function(ul, al) {
                        ua = ul,
                        (ia = al) && (Qe.on(bt.KEY_ERROR, Ha, Aa),
                        Qe.on(bt.SERVER_CERTIFICATE_UPDATED, Ha, Aa),
                        Qe.on(bt.LICENSE_REQUEST_COMPLETE, Ha, Aa),
                        Qe.on(bt.KEY_SYSTEM_SELECTED, Ha, Aa),
                        Qe.on(bt.KEY_SESSION_CREATED, Ha, Aa),
                        Qe.on(bt.KEY_STATUSES_CHANGED, Ha, Aa))
                    },
                    activate: function(ul) {
                        _a || (Qe.on(bt.CURRENT_TRACK_CHANGED, gl, Aa),
                        function(al) {
                            Va();
                            var El = void 0
                              , Tl = ri.getElement();
                            if (va || ((va = Pf(qt).create()).setConfig({
                                manifestModel: ei,
                                manifestUpdater: ha,
                                playbackController: oi
                            }),
                            El = ca.getEventsFor(ua),
                            va.addInlineEvents(El)),
                            ma = !0,
                            il(ie.VIDEO),
                            il(ie.AUDIO),
                            (Tl === null || Tl && (Tl.nodeName === "VIDEO" || Tl.nodeName === "BWP-VIDEO")) && Ya(ie.VIDEO, al),
                            Ya(ie.AUDIO, al),
                            al.readyState !== "open" ? (al.addEventListener("sourceopen", _l, !1),
                            al.addEventListener("webkitsourceopen", _l, !1)) : _l(),
                            Da = !0,
                            ma = !1,
                            wa.length === 0) {
                                var $l = "No streams to play.";
                                ti.manifestError($l, "nostreams", ei.getValue()),
                                Pe($l)
                            } else
                                Ol()
                        }(ul),
                        _a = !0)
                    },
                    deactivate: Na,
                    getDuration: Ra,
                    getStartTime: ka,
                    getId: function() {
                        return ua ? ua.id : NaN
                    },
                    getStreamInfo: function() {
                        return ua
                    },
                    getFragmentController: function() {
                        return na
                    },
                    getEventController: function() {
                        return va
                    },
                    getBitrateListFor: function(ul) {
                        Va();
                        var al = function(El) {
                            for (var Tl = wa.length, $l = null, Qa = 0; Qa < Tl; Qa++)
                                if (($l = wa[Qa]).getType() === El)
                                    return $l.getMediaInfo();
                            return null
                        }(ul);
                        return Kt.getBitrateList(al)
                    },
                    startEventController: function() {
                        va && va.start()
                    },
                    stopEventController: function() {
                        va && va.stop()
                    },
                    updateData: function(ul) {
                        if (Pe("Manifest updated... updating data system wide."),
                        _a = !1,
                        ma = !0,
                        ua = ul,
                        va) {
                            var al = ca.getEventsFor(ua);
                            va.addInlineEvents(al)
                        }
                        il(ie.VIDEO),
                        il(ie.AUDIO);
                        for (var El = 0, Tl = wa.length; El < Tl; El++) {
                            var $l = wa[El]
                              , Qa = ca.getMediaInfoForType(ua, $l.getType());
                            Kt.updateTopQualityIndex(Qa),
                            $l.updateMediaInfo(Qa)
                        }
                        if (Sa && Sa.newMediaInfo.type !== "fragmentedText") {
                            var Sl = ql(Sa.oldMediaInfo);
                            if (!Sl)
                                return;
                            Sl.switchTrackAsked(),
                            Sa = void 0
                        }
                        ma = !1,
                        Ol()
                    },
                    reset: Ia,
                    getProcessors: Ml,
                    setMediaSource: function(ul) {
                        for (var al = 0; al < wa.length; )
                            sl(wa[al].getMediaInfo()) ? (wa[al].setMediaSource(ul),
                            al++) : (wa[al].reset(),
                            wa.splice(al, 1));
                        for (var El = 0; El < wa.length; El++)
                            wa[El].dischargePreBuffer();
                        if (wa.length === 0) {
                            var Tl = "No streams to play.";
                            ti.manifestError(Tl, "nostreams", ei.getValue()),
                            Pe(Tl)
                        }
                    }
                },
                Oa(),
                na = Vf(qt).create({
                    mediaPlayerModel: la,
                    videoModel: ri,
                    metricsModel: ni,
                    errHandler: ti,
                    dashMetrics: xe.dashMetrics,
                    abrController: Kt,
                    streamController: ya
                }),
                Qe.on(bt.BUFFERING_COMPLETED, Ul, Aa),
                Qe.on(bt.DATA_UPDATE_COMPLETED, Yl, Aa),
                Aa
            }
            wc.__dashjs_factory_name = "Stream";
            var Gf = $.a.getClassFactory(wc);
            function Rc() {
                var xe = this.context
                  , qt = aa(xe).getInstance().log
                  , Pe = Re(xe).getInstance()
                  , Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0
                  , ra = void 0;
                function ni() {
                    Qe = NaN,
                    la = !1,
                    sa = !0,
                    Kt()
                }
                function Kt() {
                    ei !== null && (clearInterval(ei),
                    ei = null)
                }
                function oi(ua) {
                    Kt(),
                    isNaN(ua) && !isNaN(Qe) && (ua = 1e3 * Qe),
                    isNaN(ua) || (qt("Refresh manifest in " + ua + " milliseconds."),
                    ei = setTimeout(ya, ua))
                }
                function Ea() {
                    la = !0;
                    var ua = ca.getValue()
                      , ta = ua.url
                      , ma = pa.getLocation(ua);
                    ma && (ta = ma),
                    ha.load(ta)
                }
                function ri(ua) {
                    if (ti.getAppendingSourceState()) {
                        var ta = ti.getCachedDurationOffset("offset");
                        ua.mediaPresentationDuration += ta,
                        ua.Period.duration += ta,
                        ua.Period_asArray.duration += ta
                    }
                    ca.setValue(ua);
                    var ma = new Date
                      , ia = (ma.getTime() - ua.loadedTime.getTime()) / 1e3;
                    1e3 * (Qe = pa.getManifestUpdatePeriod(ua, ia)) > 2147483647 && (Qe = 2147483647e-3),
                    Pe.trigger(bt.MANIFEST_UPDATED, {
                        manifest: ua
                    }),
                    qt("Manifest has been refreshed at " + ma + "[" + ma.getTime() / 1e3 + "] "),
                    sa || oi()
                }
                function ya() {
                    sa && !ti.getScheduleWhilePaused() || (la ? oi(ti.getManifestUpdateRetryInterval()) : Ea())
                }
                function Aa(ua) {
                    ua.error ? ra.manifestError(ua.error.message, ua.error.code, "", "", ua.error.errorCode, ua.error.httpCode) : ri(ua.manifest)
                }
                function wa() {
                    sa = !1,
                    oi()
                }
                function _a() {
                    sa = !0,
                    Kt()
                }
                function Da() {
                    la = !1
                }
                return {
                    initialize: function() {
                        ni(),
                        Pe.on(bt.STREAMS_COMPOSED, Da, this),
                        Pe.on(bt.PLAYBACK_STARTED, wa, this),
                        Pe.on(bt.PLAYBACK_PAUSED, _a, this),
                        Pe.on(bt.INTERNAL_MANIFEST_LOADED, Aa, this)
                    },
                    setManifest: function(ua) {
                        ri(ua)
                    },
                    refreshManifest: Ea,
                    setConfig: function(ua) {
                        ua && (ua.manifestModel && (ca = ua.manifestModel),
                        ua.dashManifestModel && (pa = ua.dashManifestModel),
                        ua.mediaPlayerModel && (ti = ua.mediaPlayerModel),
                        ua.manifestLoader && (ha = ua.manifestLoader),
                        ua.errHandler && (ra = ua.errHandler))
                    },
                    reset: function() {
                        Pe.off(bt.PLAYBACK_STARTED, wa, this),
                        Pe.off(bt.PLAYBACK_PAUSED, _a, this),
                        Pe.off(bt.STREAMS_COMPOSED, Da, this),
                        Pe.off(bt.INTERNAL_MANIFEST_LOADED, Aa, this),
                        ni()
                    }
                }
            }
            Rc.__dashjs_factory_name = "ManifestUpdater";
            var $f = $.a.getClassFactory(Rc);
            function Ju(xe, qt, Pe) {
                return qt in xe ? Object.defineProperty(xe, qt, {
                    value: Pe,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : xe[qt] = Pe,
                xe
            }
            var yd = 1e3;
            function Vd() {
                var xe, qt, Pe, Qe = void 0, ei = void 0, sa = void 0, la = void 0, ha = void 0, ca = void 0, pa = void 0, ti = void 0, ra = void 0, ni = void 0, Kt = void 0, oi = void 0, Ea = void 0, ri = void 0, ya = void 0, Aa = void 0, wa = void 0, _a = void 0, Da = void 0, ua = void 0, ta = void 0, ma = void 0, ia = void 0, na = void 0, va = void 0, Sa = void 0, Na = void 0, Oa = void 0, Ia = void 0, Ra = void 0, ka = void 0, Va = void 0, Ha = void 0, xa = void 0, sl = void 0, gl = void 0, Ya = void 0, il = void 0, Ol = void 0, _l = void 0, Ul = void 0, Yl = void 0, ql = void 0, Ml = void 0, ul = void 0, al = void 0, El = void 0;
                function Tl(Qa) {
                    var Sl = void 0;
                    for (Sl = 0; Sl < Sa.length; Sl++)
                        if (Sa[Sl].rulename === Qa)
                            return Sl;
                    return -1
                }
                function $l(Qa) {
                    Ya = Qa
                }
                return xe = {
                    setABRStrategy: function(Qa) {
                        ma = Qa
                    },
                    getABRStrategy: function() {
                        return ma
                    },
                    setUseDefaultABRRules: function(Qa) {
                        ia = Qa
                    },
                    getUseDefaultABRRules: function() {
                        return ia
                    },
                    getABRCustomRules: function() {
                        return Sa
                    },
                    addABRCustomRule: function(Qa, Sl, nu) {
                        var ru = Tl(Sl);
                        ru === -1 ? Sa.push({
                            type: Qa,
                            rulename: Sl,
                            rule: nu
                        }) : (Sa[ru].type = Qa,
                        Sa[ru].rule = nu)
                    },
                    removeABRCustomRule: function(Qa) {
                        var Sl = Tl(Qa);
                        Sl !== -1 && Sa.splice(Sl, 1)
                    },
                    removeAllABRCustomRule: function() {
                        Sa = []
                    },
                    setBandwidthSafetyFactor: function(Qa) {
                        wa = Qa
                    },
                    getBandwidthSafetyFactor: function() {
                        return wa
                    },
                    setAbandonLoadTimeout: function(Qa) {
                        _a = Qa
                    },
                    getAbandonLoadTimeout: function() {
                        return _a
                    },
                    setLastBitrateCachingInfo: function(Qa, Sl) {
                        ni.enabled = Qa,
                        Sl === void 0 || isNaN(Sl) || typeof Sl != "number" || (ni.ttl = Sl)
                    },
                    getLastBitrateCachingInfo: function() {
                        return ni
                    },
                    setLastMediaSettingsCachingInfo: function(Qa, Sl) {
                        Kt.enabled = Qa,
                        Sl === void 0 || isNaN(Sl) || typeof Sl != "number" || (Kt.ttl = Sl)
                    },
                    getLastMediaSettingsCachingInfo: function() {
                        return Kt
                    },
                    setStableBufferTime: function(Qa) {
                        oi = Qa
                    },
                    getStableBufferTime: function() {
                        return isNaN(oi) ? va ? 20 : 12 : oi
                    },
                    setBufferTimeAtTopQuality: function(Qa) {
                        Ea = Qa
                    },
                    getBufferTimeAtTopQuality: function() {
                        return Ea
                    },
                    setBufferTimeAtTopQualityLongForm: function(Qa) {
                        ri = Qa
                    },
                    getBufferTimeAtTopQualityLongForm: function() {
                        return ri
                    },
                    setLongFormContentDurationThreshold: function(Qa) {
                        ya = Qa
                    },
                    getLongFormContentDurationThreshold: function() {
                        return ya
                    },
                    setSegmentOverlapToleranceTime: function(Qa) {
                        Aa = Qa
                    },
                    getSegmentOverlapToleranceTime: function() {
                        return Aa
                    },
                    getCacheLoadThresholdForType: function(Qa) {
                        return Oa[Qa]
                    },
                    setCacheLoadThresholdForType: function(Qa, Sl) {
                        Oa[Qa] = Sl
                    },
                    setBufferToKeep: function(Qa) {
                        pa = Qa
                    },
                    getBufferToKeep: function() {
                        return pa
                    },
                    setBufferAheadToKeep: function(Qa) {
                        ti = Qa
                    },
                    getBufferAheadToKeep: function() {
                        return ti
                    },
                    setBufferPruningInterval: function(Qa) {
                        ra = Qa
                    },
                    getBufferPruningInterval: function() {
                        return ra
                    },
                    setFragmentRetryAttempts: function(Qa) {
                        Da[vl.MEDIA_SEGMENT_TYPE] = Qa
                    },
                    getFragmentRetryAttempts: function() {
                        return Da[vl.MEDIA_SEGMENT_TYPE]
                    },
                    setManifestRetryAttempts: function(Qa) {
                        Da[vl.MPD_TYPE] = Qa
                    },
                    getManifestRetryAttempts: function() {
                        return Da[vl.MPD_TYPE]
                    },
                    setRetryAttemptsForType: function(Qa, Sl) {
                        Da[Qa] = Sl
                    },
                    getRetryAttemptsForType: function(Qa) {
                        return Da[Qa]
                    },
                    setFragmentRetryInterval: function(Qa) {
                        ua[vl.MEDIA_SEGMENT_TYPE] = Qa
                    },
                    getFragmentRetryInterval: function() {
                        return ua[vl.MEDIA_SEGMENT_TYPE]
                    },
                    setManifestRetryInterval: function(Qa) {
                        ua[vl.MPD_TYPE] = Qa
                    },
                    getManifestRetryInterval: function() {
                        return ua[vl.MPD_TYPE]
                    },
                    setRetryIntervalForType: function(Qa, Sl) {
                        ua[Qa] = Sl
                    },
                    getRetryIntervalForType: function(Qa) {
                        return ua[Qa]
                    },
                    setWallclockTimeUpdateInterval: function(Qa) {
                        ta = Qa
                    },
                    getWallclockTimeUpdateInterval: function() {
                        return ta
                    },
                    setScheduleWhilePaused: function(Qa) {
                        ca = Qa
                    },
                    getScheduleWhilePaused: function() {
                        return ca
                    },
                    getUseSuggestedPresentationDelay: function() {
                        return ei
                    },
                    setUseSuggestedPresentationDelay: function(Qa) {
                        ei = Qa
                    },
                    setLiveDelayFragmentCount: function(Qa) {
                        la = Qa
                    },
                    getLiveDelayFragmentCount: function() {
                        return la
                    },
                    getLiveDelay: function() {
                        return ka ? ha || 3 : ha
                    },
                    setLiveDelay: function(Qa) {
                        ha = Qa
                    },
                    setUseManifestDateHeaderTimeSource: function(Qa) {
                        Qe = Qa
                    },
                    getUseManifestDateHeaderTimeSource: function() {
                        return Qe
                    },
                    setUTCTimingSources: function(Qa) {
                        sa = Qa
                    },
                    getUTCTimingSources: function() {
                        return sa
                    },
                    setXHRWithCredentialsForType: function Qa(Sl, nu) {
                        Sl ? na[Sl] = !!nu : Object.keys(na).forEach(function(ru) {
                            Qa(ru, nu)
                        })
                    },
                    getXHRWithCredentialsForType: function(Qa) {
                        var Sl = na[Qa];
                        return Sl === void 0 ? na.default : Sl
                    },
                    setFastSwitchEnabled: function(Qa) {
                        va = Qa
                    },
                    getFastSwitchEnabled: function() {
                        return va
                    },
                    setMovingAverageMethod: function(Qa) {
                        Na = Qa
                    },
                    getMovingAverageMethod: function() {
                        return Na
                    },
                    setJumpGaps: function(Qa) {
                        Ia = Qa
                    },
                    getJumpGaps: function() {
                        return Ia
                    },
                    setSmallGapLimit: function(Qa) {
                        Ra = Qa
                    },
                    getSmallGapLimit: function() {
                        return Ra
                    },
                    getLowLatencyEnabled: function() {
                        return ka
                    },
                    setLowLatencyEnabled: function(Qa) {
                        ka = Qa
                    },
                    getPreloadData: function() {
                        return Va
                    },
                    setPreloadData: function(Qa) {
                        Va = Qa
                    },
                    setManifestUpdateRetryInterval: function(Qa) {
                        Ha = Qa
                    },
                    getManifestUpdateRetryInterval: function() {
                        return Ha
                    },
                    setAppendingSourceState: function(Qa) {
                        Qa !== xa && (xa = Qa)
                    },
                    getAppendingSourceState: function() {
                        return xa
                    },
                    setCachedDurationOffset: function(Qa, Sl) {
                        Sl = parseFloat(Sl.toFixed(5)),
                        sl[Qa] = Sl
                    },
                    getCachedDurationOffset: function(Qa) {
                        return Qa ? sl[Qa] : sl
                    },
                    clearCachedDruationOffset: function() {
                        sl = {
                            offset: 0,
                            duration: 0
                        }
                    },
                    setEndOfStreamState: function(Qa) {
                        gl = Qa
                    },
                    getEndOfStreamState: function() {
                        return gl
                    },
                    setP2pPermission: $l,
                    getP2pPermission: function() {
                        return Ya
                    },
                    addP2pSDKErrorCount: function() {
                        (il += 1) > 12 && $l(!1)
                    },
                    getP2pSDKErrorCount: function() {
                        return il
                    },
                    addBufferingCount: function() {
                        Ol += 1
                    },
                    getBufferingCount: function() {
                        return Ol
                    },
                    setExternalMediaLoader: function(Qa) {
                        El = Qa
                    },
                    getExternalMediaLoader: function() {
                        return El
                    },
                    getFactorByBufferLevel: function(Qa) {
                        return .7
                    },
                    setLastStartSeekTime: function(Qa) {
                        _l = Qa
                    },
                    getLastStartSeekTime: function() {
                        return _l
                    },
                    getStartPlaybackTime: function() {
                        return Ul
                    },
                    setStartPlaybackTime: function(Qa) {
                        Ul = Qa
                    },
                    resetStartAndSeekTime: function() {
                        _l = 0,
                        Ul = 0
                    },
                    reset: function() {},
                    getAudioTrackId: function() {
                        return Yl
                    },
                    setAudioTrackId: function(Qa) {
                        Yl = Qa
                    },
                    getEnableMultipleAudioTracks: function() {
                        return ql
                    },
                    setEnableMultipleAudioTracks: function(Qa) {
                        ql = Qa
                    },
                    getAudioTrackIds: function() {
                        return Ml
                    },
                    setAudioTrackIds: function(Qa) {
                        Qa && Array.isArray(Qa) && (Ml = Qa)
                    },
                    setDeviationReset: function(Qa) {
                        ul = Qa
                    },
                    getDeviationReset: function(Qa) {
                        return ul
                    },
                    setRetryTimes: function(Qa) {
                        al = Qa
                    },
                    getRetryTimes: function() {
                        return al
                    }
                },
                sa = [],
                ei = !1,
                Qe = !0,
                ca = !0,
                ma = ie.ABR_STRATEGY_DYNAMIC,
                ia = !0,
                va = !1,
                ni = {
                    enabled: !0,
                    ttl: 36e4
                },
                Kt = {
                    enabled: !0,
                    ttl: 36e4
                },
                la = 4,
                ha = void 0,
                pa = 20,
                ti = 80,
                ra = 10,
                oi = NaN,
                Ea = 30,
                ri = 60,
                ya = 600,
                Aa = .2,
                wa = .6,
                _a = 1e4,
                ta = 50,
                Ia = !1,
                Ra = .8,
                Ha = 100,
                na = {
                    default: !1
                },
                Sa = [],
                Na = ie.MOVING_AVERAGE_SLIDING_WINDOW,
                ka = !1,
                xa = !1,
                ul = !1,
                sl = {
                    time: 0,
                    duration: 0,
                    offset: 0
                },
                Ju(qt = {}, vl.MPD_TYPE, 3),
                Ju(qt, vl.XLINK_EXPANSION_TYPE, 1),
                Ju(qt, vl.MEDIA_SEGMENT_TYPE, 3),
                Ju(qt, vl.INIT_SEGMENT_TYPE, 3),
                Ju(qt, vl.BITSTREAM_SWITCHING_SEGMENT_TYPE, 3),
                Ju(qt, vl.INDEX_SEGMENT_TYPE, 3),
                Ju(qt, vl.OTHER_TYPE, 3),
                Da = qt,
                Ju(Pe = {}, vl.MPD_TYPE, 500),
                Ju(Pe, vl.XLINK_EXPANSION_TYPE, 500),
                Ju(Pe, vl.MEDIA_SEGMENT_TYPE, yd),
                Ju(Pe, vl.INIT_SEGMENT_TYPE, yd),
                Ju(Pe, vl.BITSTREAM_SWITCHING_SEGMENT_TYPE, yd),
                Ju(Pe, vl.INDEX_SEGMENT_TYPE, yd),
                Ju(Pe, vl.OTHER_TYPE, yd),
                ua = Pe,
                (Oa = {})[ie.VIDEO] = 25,
                Oa[ie.AUDIO] = 5,
                gl = !0,
                Ya = !0,
                il = 0,
                Ol = 0,
                _l = 0,
                Ul = 0,
                El = null,
                Yl = 1,
                ql = !1,
                Ml = [],
                al = 0,
                xe
            }
            Vd.__dashjs_factory_name = "MediaPlayerModel";
            var Gd = $.a.getSingletonFactory(Vd);
            Gd.DEFAULT_UTC_TIMING_SOURCE = {
                scheme: "urn:mpeg:dash:utc:http-xsdate:2014",
                value: "http://time.akamai.com/?iso"
            },
            $.a.updateSingletonFactory(Vd.__dashjs_factory_name, Gd);
            var Id = Gd
              , vd = new (function(xe) {
                function qt() {
                    (function(Qe, ei) {
                        if (!(Qe instanceof ei))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, qt);
                    var Pe = function(Qe, ei) {
                        if (!Qe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !ei || typeof ei != "object" && typeof ei != "function" ? Qe : ei
                    }(this, xe.call(this));
                    return Pe.AST_IN_FUTURE = "astInFuture",
                    Pe.BUFFER_EMPTY = "bufferStalled",
                    Pe.BUFFER_LOADED = "bufferLoaded",
                    Pe.BUFFER_LEVEL_STATE_CHANGED = "bufferStateChanged",
                    Pe.ERROR = "error",
                    Pe.FRAGMENT_LOADING_COMPLETED = "fragmentLoadingCompleted",
                    Pe.FRAGMENT_LOADING_HEADER_RECEIVED = "fragmentLoadingHeaderReceived",
                    Pe.FRAGMENT_LOADING_PROGRESS = "fragmentLoadingProgress",
                    Pe.FRAGMENT_LOADING_STARTED = "fragmentLoadingStarted",
                    Pe.FRAGMENT_P2P_LOAD_INFO = "fragmentP2pLoadInfo",
                    Pe.CDN_LOAD_INFO = "cdnLoadInfo",
                    Pe.FRAGMENT_LOADING_ABANDONED = "fragmentLoadingAbandoned",
                    Pe.FRAGMENT_LOADED_ERROR = "fragmentLoadedError",
                    Pe.PCDN_LOADED_ERROR = "pcdnLoadedError",
                    Pe.LOG = "log",
                    Pe.MANIFEST_LOADED = "manifestLoaded",
                    Pe.METRICS_CHANGED = "metricsChanged",
                    Pe.METRIC_CHANGED = "metricChanged",
                    Pe.METRIC_ADDED = "metricAdded",
                    Pe.METRIC_UPDATED = "metricUpdated",
                    Pe.PERIOD_SWITCH_COMPLETED = "periodSwitchCompleted",
                    Pe.PERIOD_SWITCH_STARTED = "periodSwitchStarted",
                    Pe.QUALITY_CHANGE_REQUESTED = "qualityChangeRequested",
                    Pe.QUALITY_CHANGE_DOWNLOADED = "qualityChangeDownloaded",
                    Pe.QUALITY_CHANGE_RENDERED = "qualityChangeRendered",
                    Pe.TRACK_CHANGE_RENDERED = "trackChangeRendered",
                    Pe.SOURCE_INITIALIZED = "sourceInitialized",
                    Pe.STREAM_INITIALIZED = "streamInitialized",
                    Pe.STREAM_TEARDOWN_COMPLETE = "streamTeardownComplete",
                    Pe.TEXT_TRACKS_ADDED = "allTextTracksAdded",
                    Pe.TEXT_TRACK_ADDED = "textTrackAdded",
                    Pe.TTML_PARSED = "ttmlParsed",
                    Pe.TTML_TO_PARSE = "ttmlToParse",
                    Pe.CAN_PLAY = "canPlay",
                    Pe.PLAYBACK_ENDED = "playbackEnded",
                    Pe.PLAYBACK_ERROR = "playbackError",
                    Pe.PLAYBACK_NOT_ALLOWED = "playbackNotAllowed",
                    Pe.PLAYBACK_METADATA_LOADED = "playbackMetaDataLoaded",
                    Pe.PLAYBACK_PAUSED = "playbackPaused",
                    Pe.PLAYBACK_PLAYING = "playbackPlaying",
                    Pe.PLAYBACK_PROGRESS = "playbackProgress",
                    Pe.PLAYBACK_RATE_CHANGED = "playbackRateChanged",
                    Pe.PLAYBACK_SEEKED = "playbackSeeked",
                    Pe.PLAYBACK_SEEKING = "playbackSeeking",
                    Pe.PLAYBACK_SEEK_ASKED = "playbackSeekAsked",
                    Pe.PLAYBACK_STALLED = "playbackStalled",
                    Pe.PLAYBACK_STARTED = "playbackStarted",
                    Pe.PLAYBACK_TIME_UPDATED = "playbackTimeUpdated",
                    Pe.PLAYBACK_WAITING = "playbackWaiting",
                    Pe.MANIFEST_VALIDITY_CHANGED = "manifestValidityChanged",
                    Pe.DELAY_TO_APPEND_TO_BUFFER = "delayToAppendBuffer",
                    Pe.GET_NEXT_FRAGMENT = "getNextFragment",
                    Pe.APPENDING_NEXT_SOURCE = "appendingNextSource",
                    Pe.APPENDED_NEXT_SOURCE = "appendedNextSource",
                    Pe.APPENDED_NEXT_SOURCE_DURATION_CHANGED = "appendedNextSourceDurationChanged",
                    Pe.START_OFFSET_TIME_WARNING = "startOffsetTimeWarning",
                    Pe
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(Ye.a));
            function $d() {
                var xe = this.context
                  , qt = aa(xe).getInstance().log
                  , Pe = Re(xe).getInstance()
                  , Qe = dd(xe).getInstance()
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0;
                function ra(ta) {
                    sa = ta
                }
                function ni(ta) {}
                function Kt(ta) {
                    ei = ta
                }
                function oi(ta) {
                    var ma = Date.parse(ta);
                    return isNaN(ma) && (ma = function(ia) {
                        var na = void 0
                          , va = void 0
                          , Sa = /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ia);
                        return na = Date.UTC(parseInt(Sa[1], 10), parseInt(Sa[2], 10) - 1, parseInt(Sa[3], 10), parseInt(Sa[4], 10), parseInt(Sa[5], 10), Sa[6] && (parseInt(Sa[6], 10) || 0), Sa[7] && 1e3 * parseFloat(Sa[7]) || 0),
                        Sa[9] && Sa[10] && (va = 60 * parseInt(Sa[9], 10) + parseInt(Sa[10], 10),
                        na += (Sa[8] === "+" ? -1 : 1) * va * 60 * 1e3),
                        new Date(na).getTime()
                    }(ta)),
                    ma
                }
                function Ea(ta) {
                    return Date.parse(ta)
                }
                function ri(ta) {
                    return Date.parse(ta)
                }
                function ya(ta, ma, ia) {
                    ia()
                }
                function Aa(ta, ma, ia) {
                    var na = oi(ta);
                    isNaN(na) ? ia() : ma(na)
                }
                function wa(ta, ma, ia, na, va) {
                    var Sa, Na, Oa = !1, Ia = new XMLHttpRequest, Ra = va ? vl.HEAD : vl.GET, ka = ma.match(/\S+/g);
                    if (ma = ka.shift(),
                    Sa = function() {
                        Oa || (Oa = !0,
                        ka.length ? wa(ta, ka.join(" "), ia, na, va) : na())
                    }
                    ,
                    Na = function() {
                        var Ha = void 0
                          , xa = void 0;
                        Ia.status === 200 && (Ha = va ? Ia.getResponseHeader("Date") : Ia.response,
                        xa = ta(Ha),
                        isNaN(xa) || (ia(xa),
                        Oa = !0))
                    }
                    ,
                    Qe.isRelative(ma)) {
                        var Va = ti.resolve();
                        Va && (ma = Qe.resolve(ma, Va.url))
                    }
                    Ia.open(Ra, ma),
                    Ia.timeout = 5e3,
                    Ia.onload = Na,
                    Ia.onloadend = Sa,
                    Ia.send()
                }
                function _a(ta, ma, ia) {
                    wa(ri, ta, ma, ia, !0)
                }
                function Da(ta, ma, ia) {
                    ra(!1),
                    Pe.trigger(bt.TIME_SYNCHRONIZATION_COMPLETED, {
                        time: ma,
                        offset: ia,
                        error: ta ? new ba(1) : null
                    })
                }
                function ua(ta, ma) {
                    var ia = ma || 0
                      , na = ta[ia]
                      , va = function(Sa, Na) {
                        var Oa, Ia, Ra, ka = !Sa || !Na;
                        ka && la ? (Oa = ca.getReadOnlyMetricsFor(ie.STREAM),
                        Ia = pa.getLatestMPDRequestHeaderValueByID(Oa, "Date"),
                        Ra = Ia !== null ? new Date(Ia).getTime() : Number.NaN,
                        isNaN(Ra) ? Da(!0) : (Kt(Ra - new Date().getTime()),
                        Da(!1, Ra / 1e3, ei))) : Da(ka, Sa, Na)
                    };
                    ra(!0),
                    na ? ha.hasOwnProperty(na.schemeIdUri) ? ha[na.schemeIdUri](na.value, function(Sa) {
                        var Na = new Date().getTime()
                          , Oa = Sa - Na;
                        Kt(Oa),
                        qt("Local time:      " + new Date(Na)),
                        qt("Server time:     " + new Date(Sa)),
                        qt("Difference (ms): " + Oa),
                        va(Sa, Oa)
                    }, function() {
                        ua(ta, ia + 1)
                    }) : ua(ta, ia + 1) : (Kt(0),
                    va())
                }
                return {
                    initialize: function(ta, ma) {
                        la = ma,
                        ei = 0,
                        sa = !1,
                        ha = {
                            "urn:mpeg:dash:utc:http-head:2014": _a,
                            "urn:mpeg:dash:utc:http-xsdate:2014": wa.bind(null, oi),
                            "urn:mpeg:dash:utc:http-iso:2014": wa.bind(null, Ea),
                            "urn:mpeg:dash:utc:direct:2014": Aa,
                            "urn:mpeg:dash:utc:http-head:2012": _a,
                            "urn:mpeg:dash:utc:http-xsdate:2012": wa.bind(null, oi),
                            "urn:mpeg:dash:utc:http-iso:2012": wa.bind(null, Ea),
                            "urn:mpeg:dash:utc:direct:2012": Aa,
                            "urn:mpeg:dash:utc:http-ntp:2014": ya,
                            "urn:mpeg:dash:utc:ntp:2014": ya,
                            "urn:mpeg:dash:utc:sntp:2014": ya
                        },
                        sa || (ua(ta),
                        void 0)
                    },
                    getOffsetToDeviceTimeMs: function() {
                        return ei
                    },
                    setConfig: function(ta) {
                        ta && (ta.metricsModel && (ca = ta.metricsModel),
                        ta.dashMetrics && (pa = ta.dashMetrics),
                        ta.baseURLController && (ti = ta.baseURLController))
                    },
                    reset: function() {
                        ra(!1)
                    }
                }
            }
            $d.__dashjs_factory_name = "TimeSyncController";
            var Dd = $.a.getSingletonFactory($d);
            Dd.TIME_SYNC_FAILED_ERROR_CODE = 1,
            Dd.HTTP_TIMEOUT_MS = 5e3,
            $.a.updateSingletonFactory($d.__dashjs_factory_name, Dd);
            var jf = Dd
              , Hf = ve(13)
              , Yf = ve.n(Hf);
            function Nc() {
                return {
                    areEqual: function(xe, qt) {
                        return Yf()(xe, qt)
                    }
                }
            }
            Nc.__dashjs_factory_name = "ObjectUtils";
            var Cc = $.a.getSingletonFactory(Nc)
              , bd = NaN
              , Oc = function xe(qt, Pe) {
                (function(Qe, ei) {
                    if (!(Qe instanceof ei))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.data = {
                    baseUrls: qt || null,
                    selectedIdx: Pe || bd
                },
                this.children = []
            };
            function Mc() {
                var xe, qt = void 0, Pe = void 0, Qe = this.context, ei = Cc(Qe).getInstance();
                function sa(ca, pa, ti) {
                    var ra = Pe.getBaseURLsFromElement(ti);
                    ca[pa] ? ei.areEqual(ra, ca[pa].data.baseUrls) || (ca[pa].data.baseUrls = ra,
                    ca[pa].data.selectedIdx = bd) : ca[pa] = new Oc(ra)
                }
                function la(ca, pa) {
                    var ti = pa || qt;
                    ca(ti.data),
                    ti.children && ti.children.forEach(function(ra) {
                        return la(ca, ra)
                    })
                }
                function ha() {
                    qt = new Oc
                }
                return xe = {
                    reset: ha,
                    update: function(ca) {
                        (function(pa) {
                            var ti = Pe.getBaseURLsFromElement(pa);
                            ei.areEqual(ti, qt.data.baseUrls) || (qt.data.baseUrls = ti,
                            qt.data.selectedIdx = bd),
                            pa.Period_asArray && pa.Period_asArray.forEach(function(ra, ni) {
                                sa(qt.children, ni, ra),
                                ra.AdaptationSet_asArray && ra.AdaptationSet_asArray.forEach(function(Kt, oi) {
                                    sa(qt.children[ni].children, oi, Kt),
                                    Kt.Representation_asArray && Kt.Representation_asArray.sort(Pe.getRepresentationSortFunction()).forEach(function(Ea, ri) {
                                        sa(qt.children[ni].children[oi].children, ri, Ea)
                                    })
                                })
                            })
                        }
                        )(ca)
                    },
                    getForPath: function(ca) {
                        var pa = qt
                          , ti = [pa.data];
                        return ca && ca.forEach(function(ra) {
                            (pa = pa.children[ra]) && ti.push(pa.data)
                        }),
                        ti.filter(function(ra) {
                            return ra.baseUrls.length
                        })
                    },
                    invalidateSelectedIndexes: function(ca) {
                        la(function(pa) {
                            isNaN(pa.selectedIdx) || ca === pa.baseUrls[pa.selectedIdx].serviceLocation && (pa.selectedIdx = bd)
                        })
                    },
                    setConfig: function(ca) {
                        ca.dashManifestModel && (Pe = ca.dashManifestModel)
                    }
                },
                ha(),
                xe
            }
            Mc.__dashjs_factory_name = "BaseURLTreeModel";
            var qf = $.a.getClassFactory(Mc);
            function Lc(xe) {
                return {
                    select: function(qt) {
                        return qt && function(Qe) {
                            var ei = 0
                              , sa = []
                              , la = 0
                              , ha = void 0
                              , ca = void 0;
                            if ((ca = Qe.sort(function(pa, ti) {
                                var ra = pa.dvb_priority - ti.dvb_priority;
                                return isNaN(ra) ? 0 : ra
                            }).filter(function(pa, ti, ra) {
                                return !ti || ra[0].dvb_priority && pa.dvb_priority && ra[0].dvb_priority === pa.dvb_priority
                            })).length)
                                return ca.length > 1 && (ca.forEach(function(pa) {
                                    ei += pa.dvb_weight,
                                    sa.push(ei)
                                }),
                                ha = Math.floor(Math.random() * (ei - 1)),
                                sa.every(function(pa, ti) {
                                    return la = ti,
                                    !(ha < pa)
                                })),
                                ca[la]
                        }((Pe = [],
                        qt.filter(function() {
                            return !0
                        }).filter(function(Qe) {
                            return !Pe.length || !Qe.dvb_priority || Pe.indexOf(Qe.dvb_priority) === -1
                        })));
                        var Pe
                    }
                }
            }
            Lc.__dashjs_factory_name = "DVBSelector";
            var zf = $.a.getClassFactory(Lc);
            function kc(xe) {
                return {
                    select: function(qt) {
                        var Pe = 0
                          , Qe = void 0;
                        return qt && qt.some(function(ei, sa) {
                            return Pe = sa,
                            !0
                        }) && (Qe = qt[Pe]),
                        Qe
                    }
                }
            }
            kc.__dashjs_factory_name = "BasicSelector";
            var Qf = $.a.getClassFactory(kc)
              , Pc = "Failed to resolve a valid URL";
            function jd() {
                var xe, qt = this.context, Pe = Re(qt).getInstance(), Qe = void 0, ei = void 0, sa = void 0, la = void 0;
                function ha() {}
                return xe = {
                    chooseSelectorFromManifest: function(ca) {
                        (function() {
                            if (!Qe || !Qe.hasOwnProperty("getIsDVB"))
                                throw new Error("Missing config parameter(s)")
                        }
                        )(),
                        la = Qe.getIsDVB(ca) ? sa : ei
                    },
                    select: function(ca) {
                        var pa = ca.baseUrls
                          , ti = ca.selectedIdx;
                        if (!isNaN(ti))
                            return pa[ti];
                        var ra = la.select(pa);
                        if (ra)
                            return ca.selectedIdx = pa.indexOf(ra),
                            ra;
                        Pe.trigger(bt.URL_RESOLUTION_FAILED, {
                            error: new Error(1,Pc)
                        })
                    },
                    reset: ha,
                    setConfig: function(ca) {
                        ca.selector && (la = ca.selector),
                        ca.dashManifestModel && (Qe = ca.dashManifestModel)
                    }
                },
                ei = Qf(qt).create({}),
                sa = zf(qt).create({}),
                la = ei,
                xe
            }
            jd.__dashjs_factory_name = "BaseURLSelector";
            var wd = $.a.getClassFactory(jd);
            wd.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE = 1,
            wd.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE = Pc,
            $.a.updateClassFactory(jd.__dashjs_factory_name, wd);
            var Wf = wd
              , Hd = function xe(qt, Pe, Qe, ei) {
                (function(sa, la) {
                    if (!(sa instanceof la))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.url = qt || "",
                this.serviceLocation = Pe || qt || "",
                this.dvb_priority = Qe || 1,
                this.dvb_weight = ei || 1,
                this.availabilityTimeOffset = 0,
                this.availabilityTimeComplete = !0
            };
            Hd.DEFAULT_DVB_PRIORITY = 1,
            Hd.DEFAULT_DVB_WEIGHT = 1;
            var Yd = Hd;
            function xc() {
                var xe = void 0
                  , qt = void 0
                  , Pe = this.context
                  , Qe = Re(Pe).getInstance()
                  , ei = dd(Pe).getInstance()
                  , sa = void 0
                  , la = void 0;
                function ha(ca) {
                    sa.invalidateSelectedIndexes(ca.entry)
                }
                return xe = {
                    reset: function() {
                        sa.reset(),
                        la.reset()
                    },
                    initialize: function(ca) {
                        var pa;
                        sa.setConfig({
                            dashManifestModel: qt
                        }),
                        la.setConfig({
                            dashManifestModel: qt
                        }),
                        pa = ca,
                        sa.update(pa),
                        la.chooseSelectorFromManifest(pa)
                    },
                    resolve: function(ca) {
                        var pa = sa.getForPath(ca).reduce(function(ti, ra) {
                            var ni = la.select(ra);
                            return ni ? (ei.isRelative(ni.url) ? ti.url = ei.resolve(ni.url, ti.url) : (ti.url = ni.url,
                            ti.serviceLocation = ni.serviceLocation),
                            ti.urls = ni.urls,
                            ti.availabilityTimeOffset = ni.availabilityTimeOffset,
                            ti.availabilityTimeComplete = ni.availabilityTimeComplete,
                            ti) : new Yd
                        }, new Yd);
                        if (!ei.isRelative(pa.url))
                            return pa
                    },
                    setConfig: function(ca) {
                        ca.baseURLTreeModel && (sa = ca.baseURLTreeModel),
                        ca.baseURLSelector && (la = ca.baseURLSelector),
                        ca.dashManifestModel && (qt = ca.dashManifestModel)
                    }
                },
                sa = qf(Pe).create(),
                la = Wf(Pe).create(),
                Qe.on(bt.SERVICE_LOCATION_BLACKLIST_CHANGED, ha, xe),
                xe
            }
            xc.__dashjs_factory_name = "BaseURLController";
            var Kf = $.a.getSingletonFactory(xc);
            function Fc() {
                return {
                    createMediaSource: function() {
                        var xe = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0;
                        if (xe && window.BwpElement && xe instanceof window.BwpElement && window.BwpMediaSource)
                            return new BwpMediaSource;
                        var qt = "WebKitMediaSource"in window
                          , Pe = "MediaSource"in window;
                        return Pe ? new MediaSource : qt ? new WebKitMediaSource : null
                    },
                    attachMediaSource: function(xe, qt) {
                        var Pe = void 0;
                        return Pe = window.BwpMediaSource && xe instanceof window.BwpMediaSource && xe.createObjectURL ? xe.createObjectURL() : window.URL.createObjectURL(xe),
                        qt.setSource(Pe),
                        Pe
                    },
                    detachMediaSource: function(xe) {
                        xe.setSource(null)
                    },
                    setDuration: function xe(qt, Pe) {
                        return qt.duration != Pe && function(Qe, ei) {
                            var sa = void 0
                              , la = 50
                              , ha = function() {
                                for (var ra = !1, ni = 0; ni < Qe.length; ni++)
                                    Qe[ni].updating && (ra = !0);
                                return ra
                            };
                            if (!Qe.length || !ha())
                                return void ei();
                            var ca = function() {
                                ha() || (clearInterval(sa),
                                ei())
                            }
                              , pa = function ra() {
                                this.removeEventListener("updateend", ra, !1),
                                this.removeEventListener("abort", ra, !1),
                                this.removeEventListener("error", ra, !1),
                                ha() || ei()
                            };
                            if (typeof Qe[0].addEventListener == "function")
                                try {
                                    for (var ti = 0; ti < Qe.length; ti++)
                                        Qe[ti].updating && (Qe[ti].addEventListener("updateend", pa, !1),
                                        Qe[ti].addEventListener("abort", pa, !1),
                                        Qe[ti].addEventListener("error", pa, !1))
                                } catch (ra) {
                                    sa = setInterval(ca, la)
                                }
                            else
                                sa = setInterval(ca, la)
                        }(qt.sourceBuffers, function() {
                            if (qt.readyState === "open")
                                qt.duration = Pe;
                            else
                                var Qe = setTimeout(function() {
                                    clearTimeout(Qe),
                                    xe(qt, Pe)
                                }, 50)
                        }),
                        qt.duration
                    },
                    setSeekable: function(xe, qt, Pe) {
                        xe && typeof xe.setLiveSeekableRange == "function" && typeof xe.clearLiveSeekableRange == "function" && xe.readyState === "open" && qt >= 0 && qt < Pe && (xe.clearLiveSeekableRange(),
                        xe.setLiveSeekableRange(qt, Pe))
                    },
                    signalEndOfStream: function(xe) {
                        var qt = xe.sourceBuffers
                          , Pe = qt.length;
                        if (xe.readyState === "open") {
                            for (var Qe = 0; Qe < Pe; Qe++)
                                if (qt[Qe].updating || qt[Qe].buffered.length === 0)
                                    return;
                            xe.endOfStream()
                        }
                    }
                }
            }
            Fc.__dashjs_factory_name = "MediaSourceController";
            var Zf = $.a.getSingletonFactory(Fc);
            function Bc() {
                var xe = this.context
                  , qt = aa(xe).getInstance().log
                  , Pe = Re(xe).getInstance()
                  , Qe = void 0
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = void 0
                  , ra = void 0
                  , ni = void 0
                  , Kt = void 0
                  , oi = void 0
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = void 0
                  , wa = void 0
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0
                  , Na = void 0
                  , Oa = void 0
                  , Ia = void 0
                  , Ra = void 0
                  , ka = void 0
                  , Va = void 0
                  , Ha = void 0
                  , xa = void 0
                  , sl = void 0
                  , gl = void 0
                  , Ya = void 0
                  , il = void 0
                  , Ol = void 0
                  , _l = void 0
                  , Ul = void 0;
                function Yl() {
                    if (fl()) {
                        var Os = Ia.getPlaybackQuality();
                        if (Os && ti.addDroppedFrames(ie.VIDEO, Os),
                        !ka.getJumpGaps() || !ta || ta.getProcessors().length === 0 || Ra.isSeeking() || Va || va || Sa || Na)
                            return;
                        (function() {
                            var qa = .5
                              , dl = 1
                              , Bl = Ra.getTime()
                              , iu = Ia.getEnded()
                              , zl = Ia.getVideoBufferRanges()
                              , su = !1
                              , oa = void 0;
                            if (!(zl.length <= 0 || iu) && zl.length !== 1) {
                                for (var La = 0; La < zl.length; La++)
                                    if (Bl >= zl[La].start && Bl <= zl[La].end) {
                                        oa = La,
                                        su = !0;
                                        break
                                    }
                                if (su) {
                                    var Ja = zl.slice(oa);
                                    if (Ja[0].end - Bl < qa) {
                                        if (Ja.length === 1)
                                            return;
                                        for (var ks = 1; ks < Ja.length; ks++)
                                            if (Ja[ks].end - Ja[ks].start >= dl)
                                                return qt("Gap has been prdiected,seek from ", Bl, " to ", Ja[ks].start),
                                                Ra.seek(Ja[ks].start),
                                                void Pe.trigger(bt.PREDICT_SEEK, {
                                                    currentTime: Bl,
                                                    bufferRanges: zl,
                                                    destination: Ja[ks].start
                                                });
                                        Ra.seek(Ja[Ja.length - 1].start)
                                    }
                                }
                            }
                        }
                        )()
                    }
                }
                function ql() {
                    if (!(!ka.getJumpGaps() || !ta || ta.getProcessors().length === 0 || Ra.isSeeking() || Va || va || Sa || Na) && ++Ol >= 2) {
                        var Os = Ra.getTime();
                        Ul === Os ? function(qa) {
                            for (var dl = ta.getProcessors(), Bl = ka.getSmallGapLimit(), iu = void 0, zl = 0; zl < dl.length; zl++) {
                                var su = dl[zl].getBuffer()
                                  , oa = su && su.getAllBufferRanges && su.getAllBufferRanges()
                                  , La = void 0;
                                if (oa && !(oa.length <= 1)) {
                                    for (var Ja = 0; Ja < oa.length; Ja++)
                                        if (qa < oa.start(Ja)) {
                                            La = oa.start(Ja);
                                            break
                                        }
                                    La > 0 && La - qa > 0 && (iu === void 0 || La > iu) && (iu = La)
                                }
                            }
                            var ks = Ra.getTimeToStreamEnd();
                            if (iu === void 0 && !isNaN(ks) && ks < Bl && (iu = qa + ks),
                            iu > 0)
                                if (!isNaN(ks) && iu >= qa + ks) {
                                    qt("Jumping media gap (discontinuity) at time ", qa, ". Jumping to end of the stream");
                                    var Il = Ia.getVideoBufferRanges();
                                    if (Il && Il.length) {
                                        var Fl = Il[Il.length - 1].end;
                                        !Fl || _l || Ia.getEnded() || (_l = !0,
                                        Ra.seek(Fl + 1),
                                        qt("Stuck in ending. Jumping to end of the stream."))
                                    }
                                } else
                                    qt("Jumping media gap (discontinuity) at time ", qa, ". Jumping to time position", iu),
                                    Ra.seek(iu)
                        }(Os) : Ul = Os,
                        Ol = 0
                    }
                }
                function Ml(Os) {
                    var qa = Qa(Os.seekTime);
                    il && (El(),
                    Ya = !1),
                    qa && qa !== ta ? (Cl(Pu.END_OF_PERIOD_STOP_REASON),
                    nu(ta, qa, Os.seekTime)) : Cl(Pu.USER_REQUEST_STOP_REASON),
                    xl(Zu.SEEK_START_REASON)
                }
                function ul() {
                    qt("[StreamController][onPlaybackStarted]"),
                    Ha ? (Ha = !1,
                    xl(Zu.INITIAL_PLAYOUT_START_REASON)) : Va && (Va = !1,
                    xl(Zu.RESUME_FROM_PAUSE_START_REASON),
                    Tl())
                }
                function al(Os) {
                    qt("[StreamController][onPlaybackPaused]"),
                    Os.ended || (Va = !0,
                    Cl(Pu.USER_REQUEST_STOP_REASON),
                    Tl())
                }
                function El() {
                    qt("[StreamController][toggleEndPeriodTimer] stop end period timer."),
                    clearTimeout(il),
                    il = void 0
                }
                function Tl() {
                    if (Ya)
                        if (il)
                            El();
                        else {
                            var Os = Ra.getTimeToStreamEnd()
                              , qa = Os > 0 ? 1e3 * Os : 0;
                            qt("[StreamController][toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in " + qa + " milliseconds"),
                            il = setTimeout(function() {
                                Pe.trigger(bt.PLAYBACK_ENDED)
                            }, qa)
                        }
                }
                function $l() {
                    var Os = hu().isLast
                      , qa = ka.getEndOfStreamState();
                    Oa && Os ? (qt("[StreamController][onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),
                    qa && ni.signalEndOfStream(Oa)) : Oa && il === void 0 && (qt("[StreamController][onStreamBufferingCompleted] end of period detected"),
                    Ya = !0,
                    Va === !1 && Tl())
                }
                function Qa(Os) {
                    var qa = 0
                      , dl = null
                      , Bl = ua.length;
                    Bl > 0 && (qa += ua[0].getStartTime());
                    for (var iu = 0; iu < Bl; iu++)
                        if (dl = ua[iu],
                        Os < (qa = parseFloat((qa + dl.getDuration()).toFixed(5))))
                            return dl;
                    return null
                }
                function Sl(Os) {
                    var qa = function() {
                        if (ta) {
                            var iu = ta.getStreamInfo().start
                              , zl = ta.getStreamInfo().duration;
                            return ua.filter(function(su) {
                                return su.getStreamInfo().start === parseFloat((iu + zl).toFixed(5))
                            })[0]
                        }
                    }();
                    qa ? (gl = void 0,
                    sl = void 0,
                    nu(ta, qa, NaN)) : qt("StreamController no next stream found"),
                    Cl(qa ? Pu.END_OF_PERIOD_STOP_REASON : Pu.END_OF_CONTENT_STOP_REASON),
                    il = void 0,
                    Ya = !1;
                    try {
                        if (ka.getEndOfStreamState()) {
                            var dl = Wu("video")
                              , Bl = Wu("audio");
                            isNaN(dl) && isNaN(Bl) || (Ra.seek(Ra.getTime() - .3),
                            ni.signalEndOfStream(Oa))
                        }
                    } catch (iu) {
                        console.error("Hack PLAYBACK_END trigger native ended event error", iu)
                    }
                }
                function nu(Os, qa, dl) {
                    !va && qa && Os !== qa && (va = !0,
                    Pe.trigger(bt.PERIOD_SWITCH_STARTED, {
                        fromStreamInfo: Os ? Os.getStreamInfo() : null,
                        toStreamInfo: qa.getStreamInfo()
                    }),
                    Os && (Os.stopEventController(),
                    Os.deactivate()),
                    ta = qa,
                    Ra.initialize(ta.getStreamInfo()),
                    Ia.getElement() ? ru(dl, Os, !1) : function(Bl) {
                        ol(Bl)
                    }(dl))
                }
                function ru(Os, qa, dl) {
                    var Bl = void 0;
                    function iu() {
                        Oa && (qt("MediaSource is open!"),
                        window.URL.revokeObjectURL(Bl),
                        Oa.removeEventListener("sourceopen", iu),
                        Oa.removeEventListener("webkitsourceopen", iu),
                        cl(),
                        qa || Pe.trigger(bt.SOURCE_INITIALIZED),
                        dl && ta.setMediaSource(Oa))
                    }
                    Oa ? ni.detachMediaSource(Ia) : Oa = ni.createMediaSource(Ia.getElement()),
                    ol(Os),
                    Oa.addEventListener("sourceopen", iu, !1),
                    Oa.addEventListener("webkitsourceopen", iu, !1),
                    Bl = ni.attachMediaSource(Oa, Ia),
                    qt("MediaSource attached to element.  Waiting on open...")
                }
                function ol(Os) {
                    if (ta.activate(Oa),
                    gl = bl(ie.AUDIO),
                    sl = bl(ie.VIDEO),
                    !Ha)
                        if (isNaN(Os)) {
                            var qa = Ra.getStreamStartTime(!0);
                            ta.getProcessors().forEach(function(dl) {
                                pa.setIndexHandlerTime(dl, qa)
                            })
                        } else
                            Ra.seek(Os);
                    ta.startEventController(),
                    !na && Ha || Ra.play(),
                    va = !1,
                    Pe.trigger(bt.PERIOD_SWITCH_COMPLETED, {
                        toStreamInfo: ta.getStreamInfo()
                    })
                }
                function cl(Os) {
                    var qa = Os || ta.getStreamInfo().manifestInfo.duration
                      , dl = ni.setDuration(Oa, qa);
                    qt("Duration successfully set to: " + dl)
                }
                function Kl(Os) {
                    for (var qa = 0, dl = ua.length; qa < dl; qa++)
                        if (ua[qa].getId() === Os.id)
                            return ua[qa];
                    return null
                }
                function Ma() {
                    var Os = ha.getValue();
                    ma && (Pe.trigger(bt.PROTECTION_CREATED, {
                        controller: ma,
                        manifest: Os
                    }),
                    ma.setMediaElement(Ia.getElement()),
                    ia && ma.setProtectionData(ia)),
                    function() {
                        try {
                            var qa = pa.getStreamsInfo();
                            if (qa.length === 0)
                                throw new Error("There are no streams");
                            var dl = ra.getCurrentManifestUpdate(ti.getMetricsFor(ie.STREAM));
                            ti.updateManifestUpdateInfo(dl, {
                                currentTime: Ra.getTime(),
                                buffered: Ia.getBufferRange(),
                                presentationStartTime: qa[0].start,
                                clientTimeOffset: Da.getClientTimeOffset()
                            });
                            for (var Bl = 0, iu = qa.length; Bl < iu; Bl++) {
                                var zl = qa[Bl]
                                  , su = Kl(zl);
                                su ? su.updateData(zl) : (su = Gf(xe).create({
                                    manifestModel: ha,
                                    dashManifestModel: ca,
                                    mediaPlayerModel: ka,
                                    metricsModel: ti,
                                    dashMetrics: ra,
                                    manifestUpdater: sa,
                                    adapter: pa,
                                    timelineConverter: Da,
                                    capabilities: ei,
                                    errHandler: _a,
                                    baseURLController: oi,
                                    domStorage: Ea,
                                    abrController: ri,
                                    playbackController: Ra,
                                    mediaController: ya,
                                    videoModel: Ia,
                                    streamController: Qe
                                }),
                                ua.push(su),
                                su.initialize(zl, ma)),
                                ti.addManifestUpdateStreamInfo(dl, zl.id, zl.index, zl.start, zl.duration)
                            }
                            if (!ta) {
                                var oa = Ra.getStartTimeFromUriParameters()
                                  , La = null;
                                oa && (La = Qa(isNaN(oa.fragS) ? oa.fragT : oa.fragS)),
                                nu(null, La !== null ? La : ua[0], NaN)
                            }
                            Pe.trigger(bt.STREAMS_COMPOSED)
                        } catch (Ja) {
                            _a.manifestError(Ja.message, "nostreamscomposed", ha.getValue()),
                            Na = !0,
                            Uu()
                        }
                    }()
                }
                function xs(Os) {
                    if (Os.error)
                        Na = !0,
                        Uu();
                    else {
                        var qa = Os.manifest;
                        ka.getAppendingSourceState() && cl(qa.mediaPresentationDuration),
                        pa.updatePeriods(qa);
                        var dl = pa.getStreamsInfo(void 0, 1)[0]
                          , Bl = pa.getMediaInfoForType(dl, ie.VIDEO) || pa.getMediaInfoForType(dl, ie.AUDIO)
                          , iu = void 0;
                        Bl && (iu = ca.getUseCalculatedLiveEdgeTimeForAdaptation(pa.getDataForMedia(Bl))) && (qt("SegmentTimeline detected using calculated Live Edge Time"),
                        ka.setUseManifestDateHeaderTimeSource(!1));
                        var zl = ca.getUTCTimingSources(Os.manifest)
                          , su = !ca.getIsDynamic(qa) || iu ? zl : zl.concat(ka.getUTCTimingSources())
                          , oa = wa.isHTTPS(Os.manifest.url);
                        su.forEach(function(La) {
                            La.value.replace(/.*?:\/\//g, "") === Id.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g, "") && (La.value = La.value.replace(oa ? new RegExp(/^(http:)?\/\//i) : new RegExp(/^(https:)?\/\//i), oa ? "https://" : "http://"),
                            qt("Matching default timing source protocol to manifest protocol: ", La.value))
                        }),
                        oi.initialize(qa),
                        Kt.setConfig({
                            metricsModel: ti,
                            dashMetrics: ra,
                            baseURLController: oi
                        }),
                        Kt.initialize(su, ka.getUseManifestDateHeaderTimeSource())
                    }
                }
                function fl() {
                    return sl
                }
                function bl(Os) {
                    var qa = !1;
                    return ta && ta.getProcessors().forEach(function(dl) {
                        dl.getMediaInfo().type === Os && (qa = !0)
                    }),
                    qa
                }
                function Cl(Os, qa) {
                    qa = qa || new Date,
                    xa && (ta && ta.getProcessors().forEach(function(dl) {
                        var Bl = dl.getScheduleController();
                        Bl && Bl.finalisePlayList(qa, Os)
                    }),
                    ti.addPlayList(xa),
                    xa = null)
                }
                function xl(Os) {
                    (xa = new Zu).start = new Date,
                    xa.mstart = 1e3 * Ra.getTime(),
                    xa.starttype = Os,
                    ta && ta.getProcessors().forEach(function(qa) {
                        var dl = qa.getScheduleController();
                        dl && dl.setPlayList(xa)
                    })
                }
                function Zl(Os) {
                    if (Os.error) {
                        var qa = ""
                          , dl = i.MEDIA_ERROR;
                        switch (this.MEDIA_DOWNLOAD_ERROR = 5001,
                        Os.error.code) {
                        case 1:
                            qa = "MEDIA_ERR_ABORTED",
                            dl = i.MEDIA_ABORTED_ERROR;
                            break;
                        case 2:
                            qa = "MEDIA_ERR_NETWORK",
                            dl = i.MEDIA_NETWORK_ERROR;
                            break;
                        case 3:
                            qa = "MEDIA_ERR_DECODE",
                            dl = i.MEDIA_DECODE_ERROR;
                            break;
                        case 4:
                            qa = "MEDIA_ERR_SRC_NOT_SUPPORTED",
                            dl = i.MEDIA_SUPPORTED_ERROR;
                            break;
                        case 5:
                            qa = "MEDIA_ERR_ENCRYPTED",
                            dl = i.MEDIA_ENCRYPTED_ERROR;
                            break;
                        default:
                            qa = "UNKNOWN",
                            dl = i.MEDIA_UNKNOWN_ERROR
                        }
                        Os.errorCode = dl,
                        Sa = !0,
                        Os.error.message && (qa += " (" + Os.error.message + ")"),
                        Os.error.msExtendedCode && (qa += " (0x" + (Os.error.msExtendedCode >>> 0).toString(16).toUpperCase() + ")"),
                        qt("Video Element Error: " + qa),
                        Os.error && qt(Os.error),
                        _a.mediaSourceError(qa, dl),
                        Uu()
                    }
                }
                function hu() {
                    return ta ? ta.getStreamInfo() : null
                }
                function Au() {
                    if (!(la && la.hasOwnProperty("load") && Da && Da.hasOwnProperty("initialize") && Da.hasOwnProperty("reset") && Da.hasOwnProperty("getClientTimeOffset")))
                        throw new Error("setConfig function has to be called previously")
                }
                function wu(Os) {
                    isNaN(Os.newDuration) || cl(Os.newDuration)
                }
                function xu() {
                    ua = [],
                    ma = null,
                    va = !1,
                    ta = null,
                    Sa = !1,
                    Na = !1,
                    sl = void 0,
                    gl = void 0,
                    Ha = !0,
                    Va = !1,
                    na = !0,
                    xa = null,
                    il = void 0,
                    Ya = !1,
                    Ol = 0,
                    _l = !1
                }
                function Uu() {
                    Au(),
                    Kt.reset(),
                    Cl(Sa || Na ? Pu.FAILURE_STOP_REASON : Pu.USER_REQUEST_STOP_REASON);
                    for (var Os = 0, qa = ua ? ua.length : 0; Os < qa; Os++)
                        ua[Os].reset(Sa);
                    Pe.off(bt.PLAYBACK_TIME_UPDATED, Yl, this),
                    Pe.off(bt.BYTES_APPENDED_END_FRAGMENT, Yl, this),
                    Pe.off(bt.PLAYBACK_SEEKING, Ml, this),
                    Pe.off(bt.PLAYBACK_ERROR, Zl, this),
                    Pe.off(bt.PLAYBACK_STARTED, ul, this),
                    Pe.off(bt.PLAYBACK_PAUSED, al, this),
                    Pe.off(bt.PLAYBACK_ENDED, Sl, this),
                    Pe.off(bt.MANIFEST_UPDATED, xs, this),
                    Pe.off(bt.STREAM_BUFFERING_COMPLETED, $l, this),
                    Pe.off(vd.METRIC_ADDED, Vu, this),
                    Pe.off(bt.MANIFEST_VALIDITY_CHANGED, wu, this),
                    oi.reset(),
                    sa.reset(),
                    ti.clearAllCurrentMetrics(),
                    ha.setValue(null),
                    la.reset(),
                    Da.reset(),
                    Aa.reset(),
                    Oa && (ni.detachMediaSource(Ia),
                    Oa = null),
                    Ia = null,
                    ma && (ma.setMediaElement(null),
                    ma = null,
                    ia = null,
                    ha.getValue() && Pe.trigger(bt.PROTECTION_DESTROYED, {
                        data: ha.getValue().url
                    })),
                    Pe.trigger(bt.STREAM_TEARDOWN_COMPLETE),
                    xu()
                }
                function Vu(Os) {
                    Os.metric === ae.DVR_INFO && Os.mediaType === ie.AUDIO && ni.setSeekable(Oa, Os.value.range.start, Os.value.range.end)
                }
                function Wu(Os) {
                    if ([ie.VIDEO, ie.AUDIO, ie.FRAGMENTED_TEXT].indexOf(Os) !== -1) {
                        var qa = ra.getCurrentBufferLevel(ti.getReadOnlyMetricsFor(Os));
                        return qa || NaN
                    }
                    return qt("Warning  - getBufferLength requested for invalid type"),
                    NaN
                }
                return Qe = {
                    initialize: function(Os, qa) {
                        Au(),
                        na = Os,
                        ia = qa,
                        Da.initialize(),
                        (sa = $f(xe).create()).setConfig({
                            manifestModel: ha,
                            dashManifestModel: ca,
                            mediaPlayerModel: ka,
                            manifestLoader: la,
                            errHandler: _a
                        }),
                        sa.initialize(),
                        oi.setConfig({
                            dashManifestModel: ca
                        }),
                        Pe.on(bt.TIME_SYNCHRONIZATION_COMPLETED, Ma, this),
                        Pe.on(bt.PLAYBACK_SEEKING, Ml, this),
                        Pe.on(bt.PLAYBACK_TIME_UPDATED, Yl, this),
                        Pe.on(bt.BYTES_APPENDED_END_FRAGMENT, Yl, this),
                        Pe.on(bt.PLAYBACK_ENDED, Sl, this),
                        Pe.on(bt.PLAYBACK_ERROR, Zl, this),
                        Pe.on(bt.PLAYBACK_STARTED, ul, this),
                        Pe.on(bt.PLAYBACK_PAUSED, al, this),
                        Pe.on(bt.MANIFEST_UPDATED, xs, this),
                        Pe.on(bt.STREAM_BUFFERING_COMPLETED, $l, this),
                        Pe.on(bt.MANIFEST_VALIDITY_CHANGED, wu, this),
                        Pe.on(bt.WALLCLOCK_TIME_UPDATED, ql, this),
                        Pe.on(vd.METRIC_ADDED, Vu, this)
                    },
                    getActiveStreamInfo: hu,
                    isVideoTrackPresent: fl,
                    isAudioTrackPresent: function() {
                        return gl
                    },
                    switchToVideoElement: function(Os) {
                        Ra.initialize(ta.getStreamInfo()),
                        ru(Os, null, !0)
                    },
                    getStreamById: function(Os) {
                        return ua.filter(function(qa) {
                            return qa.getId() === Os
                        })[0]
                    },
                    getStreamForTime: Qa,
                    getDuration: function() {
                        if (ta)
                            return ta.getStreamInfo().duration
                    },
                    getTimeRelativeToStreamId: function(Os, qa) {
                        for (var dl = null, Bl = 0, iu = 0, zl = null, su = ua.length, oa = 0; oa < su; oa++) {
                            if (iu = (dl = ua[oa]).getStartTime(),
                            zl = dl.getDuration(),
                            Number.isFinite(iu) && (Bl = iu),
                            dl.getId() === qa)
                                return Os - Bl;
                            Number.isFinite(zl) && (Bl += zl)
                        }
                        return null
                    },
                    load: function(Os, qa, dl) {
                        Au(),
                        la.load(Os, qa, dl)
                    },
                    loadWithManifest: function(Os) {
                        (function() {
                            if (!sa || !sa.hasOwnProperty("setManifest"))
                                throw new Error("initialize function has to be called previously")
                        }
                        )(),
                        sa.setManifest(Os)
                    },
                    getActiveStreamProcessors: function() {
                        return ta ? ta.getProcessors() : []
                    },
                    setConfig: function(Os) {
                        Os && (Os.capabilities && (ei = Os.capabilities),
                        Os.manifestLoader && (la = Os.manifestLoader),
                        Os.manifestModel && (ha = Os.manifestModel),
                        Os.dashManifestModel && (ca = Os.dashManifestModel),
                        Os.mediaPlayerModel && (ka = Os.mediaPlayerModel),
                        Os.protectionController && (ma = Os.protectionController),
                        Os.adapter && (pa = Os.adapter),
                        Os.metricsModel && (ti = Os.metricsModel),
                        Os.dashMetrics && (ra = Os.dashMetrics),
                        Os.errHandler && (_a = Os.errHandler),
                        Os.timelineConverter && (Da = Os.timelineConverter),
                        Os.videoModel && (Ia = Os.videoModel),
                        Os.playbackController && (Ra = Os.playbackController),
                        Os.domStorage && (Ea = Os.domStorage),
                        Os.abrController && (ri = Os.abrController),
                        Os.mediaController && (ya = Os.mediaController))
                    },
                    setProtectionData: function(Os) {
                        ia = Os
                    },
                    setMediaDuration: cl,
                    setAppendWindowEnd: function(Os) {
                        if (Os)
                            for (var qa = ta.getProcessors(), dl = 0; dl < qa.length; dl++) {
                                var Bl = qa[dl].getBuffer();
                                Bl && Bl.setAppendWindowEnd(Os)
                            }
                    },
                    reset: Uu
                },
                Kt = jf(xe).getInstance(),
                oi = Kf(xe).getInstance(),
                ni = Zf(xe).getInstance(),
                Aa = gu(xe).getInstance(),
                wa = dd(xe).getInstance(),
                xu(),
                Qe
            }
            Bc.__dashjs_factory_name = "StreamController";
            var Xf = $.a.getSingletonFactory(Bc)
              , Uc = function(xe) {
                function qt(Pe, Qe) {
                    (function(sa, la) {
                        if (!(sa instanceof la))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, qt);
                    var ei = function(sa, la) {
                        if (!sa)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !la || typeof la != "object" && typeof la != "function" ? sa : la
                    }(this, xe.call(this));
                    return ei.url = Pe || null,
                    ei.type = Qe || null,
                    ei.mediaType = ie.STREAM,
                    ei.responseType = "",
                    ei
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(ii);
            function qd(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = Ad(qt).create({
                    errHandler: xe.errHandler,
                    videoModel: xe.videoModel,
                    metricsModel: xe.metricsModel,
                    mediaPlayerModel: xe.mediaPlayerModel,
                    requestModifier: xe.requestModifier
                });
                return {
                    load: function(ei, sa, la) {
                        var ha = function(pa, ti) {
                            sa.resolved = !0,
                            sa.resolvedContent = pa || null,
                            Pe.trigger(bt.XLINK_ELEMENT_LOADED, {
                                element: sa,
                                resolveObject: la,
                                error: pa || ti ? null : new ba(1,"Failed loading Xlink element: " + ei)
                            })
                        };
                        if (ei === "urn:mpeg:dash:resolve-to-zero:2013")
                            ha(null, !0);
                        else {
                            var ca = new Uc(ei,vl.XLINK_TYPE);
                            Qe.load({
                                request: ca,
                                success: function(pa) {
                                    ha(pa)
                                },
                                error: function() {
                                    ha(null)
                                }
                            })
                        }
                    },
                    reset: function() {
                        Qe && (Qe.abort(),
                        Qe = null)
                    }
                }
            }
            qd.__dashjs_factory_name = "XlinkLoader";
            var zd = $.a.getClassFactory(qd);
            zd.XLINK_LOADER_ERROR_LOADING_FAILURE = 1,
            $.a.updateClassFactory(qd.__dashjs_factory_name, zd);
            var Jf = zd
              , Vc = function(xe) {
                xe = xe || {},
                function() {
                    xe.escapeMode === void 0 && (xe.escapeMode = !0),
                    xe.attributePrefix === void 0 && (xe.attributePrefix = "_"),
                    xe.arrayAccessForm = xe.arrayAccessForm || "none",
                    xe.emptyNodeForm = xe.emptyNodeForm || "text",
                    xe.enableToStringFunc === void 0 && (xe.enableToStringFunc = !0),
                    xe.arrayAccessFormPaths = xe.arrayAccessFormPaths || [],
                    xe.skipEmptyTextNodesForObj === void 0 && (xe.skipEmptyTextNodesForObj = !0),
                    xe.stripWhitespaces === void 0 && (xe.stripWhitespaces = !0),
                    xe.datetimeAccessFormPaths = xe.datetimeAccessFormPaths || [],
                    xe.useDoubleQuotes === void 0 && (xe.useDoubleQuotes = !1),
                    xe.xmlElementsFilter = xe.xmlElementsFilter || [],
                    xe.jsonPropertiesFilter = xe.jsonPropertiesFilter || [],
                    xe.keepCData === void 0 && (xe.keepCData = !1),
                    xe.ignoreRoot === void 0 && (xe.ignoreRoot = !1)
                }();
                var qt = 1
                  , Pe = 3
                  , Qe = 4
                  , ei = 8
                  , sa = 9;
                function la(ta) {
                    var ma = ta.localName;
                    return ma == null && (ma = ta.baseName),
                    ma != null && ma != "" || (ma = ta.nodeName),
                    ma
                }
                function ha(ta) {
                    return typeof ta == "string" ? ta.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;") : ta
                }
                function ca(ta, ma, ia, na) {
                    for (var va = 0; va < ta.length; va++) {
                        var Sa = ta[va];
                        if (typeof Sa == "string") {
                            if (Sa == na)
                                break
                        } else if (Sa instanceof RegExp) {
                            if (Sa.test(na))
                                break
                        } else if (typeof Sa == "function" && Sa(ma, ia, na))
                            break
                    }
                    return va != ta.length
                }
                function pa(ta, ma, ia) {
                    switch (xe.arrayAccessForm) {
                    case "property":
                        ta[ma]instanceof Array ? ta[ma + "_asArray"] = ta[ma] : ta[ma + "_asArray"] = [ta[ma]]
                    }
                    !(ta[ma]instanceof Array) && xe.arrayAccessFormPaths.length > 0 && ca(xe.arrayAccessFormPaths, ta, ma, ia) && (ta[ma] = [ta[ma]])
                }
                function ti(ta) {
                    var ma = ta.split(/[-T:+Z]/g)
                      , ia = new Date(ma[0],ma[1] - 1,ma[2])
                      , na = ma[5].split(".");
                    if (ia.setHours(ma[3], ma[4], na[0]),
                    na.length > 1 && ia.setMilliseconds(na[1]),
                    ma[6] && ma[7]) {
                        var va = 60 * ma[6] + Number(ma[7]);
                        va = 0 + ((/\d\d-\d\d:\d\d$/.test(ta) ? "-" : "+") == "-" ? -1 * va : va),
                        ia.setMinutes(ia.getMinutes() - va - ia.getTimezoneOffset())
                    } else
                        ta.indexOf("Z", ta.length - 1) !== -1 && (ia = new Date(Date.UTC(ia.getFullYear(), ia.getMonth(), ia.getDate(), ia.getHours(), ia.getMinutes(), ia.getSeconds(), ia.getMilliseconds())));
                    return ia
                }
                function ra(ta, ma, ia, na) {
                    return !(ma == qt && xe.xmlElementsFilter.length > 0) || ca(xe.xmlElementsFilter, ta, ia, na)
                }
                function ni(ta, ma) {
                    if (ta.nodeType == sa) {
                        for (var ia = new Object, na = ta.childNodes, va = 0; va < na.length; va++)
                            (Na = na[va]).nodeType == qt && (xe.ignoreRoot ? ia = ni(Na) : (ia = {})[Oa = la(Na)] = ni(Na));
                        return ia
                    }
                    if (ta.nodeType == qt) {
                        (ia = new Object).__cnt = 0;
                        var Sa = [];
                        for (na = ta.childNodes,
                        va = 0; va < na.length; va++) {
                            var Na, Oa = la(Na = na[va]);
                            if (Na.nodeType != ei) {
                                var Ia = ma + "." + Oa;
                                if (ra(ia, Na.nodeType, Oa, Ia))
                                    if (ia.__cnt++,
                                    ia[Oa] == null) {
                                        var Ra = ni(Na, Ia);
                                        (Oa != "#text" || /[^\s]/.test(Ra)) && ((ka = {})[Oa] = Ra,
                                        Sa.push(ka)),
                                        ia[Oa] = Ra,
                                        pa(ia, Oa, Ia)
                                    } else {
                                        ia[Oa] != null && (ia[Oa]instanceof Array || (ia[Oa] = [ia[Oa]],
                                        pa(ia, Oa, Ia)));
                                        var ka;
                                        Ra = ni(Na, Ia),
                                        (Oa != "#text" || /[^\s]/.test(Ra)) && ((ka = {})[Oa] = Ra,
                                        Sa.push(ka)),
                                        ia[Oa][ia[Oa].length] = Ra
                                    }
                            }
                        }
                        ia.__children = Sa;
                        for (var Va = la(ta), Ha = 0; Ha < ta.attributes.length; Ha++) {
                            var xa = ta.attributes[Ha];
                            ia.__cnt++;
                            for (var sl = xa.value, gl = 0, Ya = xe.matchers.length; gl < Ya; gl++) {
                                var il = xe.matchers[gl];
                                il.test(xa, Va) && (sl = il.converter(xa.value))
                            }
                            ia[xe.attributePrefix + xa.name] = sl
                        }
                        var Ol = function(_l) {
                            return _l.prefix
                        }(ta);
                        return Ol != null && Ol != "" && (ia.__cnt++,
                        ia.__prefix = Ol),
                        ia["#text"] != null && (ia.__text = ia["#text"],
                        ia.__text instanceof Array && (ia.__text = ia.__text.join(`
`)),
                        xe.stripWhitespaces && (ia.__text = ia.__text.trim()),
                        delete ia["#text"],
                        xe.arrayAccessForm == "property" && delete ia["#text_asArray"],
                        ia.__text = function(_l, Ul, Yl) {
                            if (xe.datetimeAccessFormPaths.length > 0) {
                                var ql = Yl.split(".#")[0];
                                return ca(xe.datetimeAccessFormPaths, _l, Ul, ql) ? ti(_l) : _l
                            }
                            return _l
                        }(ia.__text, Oa, ma + "." + Oa)),
                        ia["#cdata-section"] != null && (ia.__cdata = ia["#cdata-section"],
                        delete ia["#cdata-section"],
                        xe.arrayAccessForm == "property" && delete ia["#cdata-section_asArray"]),
                        ia.__cnt == 0 && xe.emptyNodeForm == "text" ? ia = "" : ia.__cnt == 1 && ia.__text != null ? ia = ia.__text : ia.__cnt != 1 || ia.__cdata == null || xe.keepCData ? ia.__cnt > 1 && ia.__text != null && xe.skipEmptyTextNodesForObj && (xe.stripWhitespaces && ia.__text == "" || ia.__text.trim() == "") && delete ia.__text : ia = ia.__cdata,
                        delete ia.__cnt,
                        !xe.enableToStringFunc || ia.__text == null && ia.__cdata == null || (ia.toString = function() {
                            return (this.__text != null ? this.__text : "") + (this.__cdata != null ? this.__cdata : "")
                        }
                        ),
                        ia
                    }
                    if (ta.nodeType == Pe || ta.nodeType == Qe)
                        return ta.nodeValue
                }
                function Kt(ta, ma, ia, na) {
                    var va = "<" + (ta != null && ta.__prefix != null ? ta.__prefix + ":" : "") + ma;
                    if (ia != null)
                        for (var Sa = 0; Sa < ia.length; Sa++) {
                            var Na = ia[Sa]
                              , Oa = ta[Na];
                            xe.escapeMode && (Oa = ha(Oa)),
                            va += " " + Na.substr(xe.attributePrefix.length) + "=",
                            xe.useDoubleQuotes ? va += '"' + Oa + '"' : va += "'" + Oa + "'"
                        }
                    return va += na ? "/>" : ">"
                }
                function oi(ta, ma) {
                    return "</" + (ta.__prefix != null ? ta.__prefix + ":" : "") + ma + ">"
                }
                function Ea(ta, ma) {
                    return xe.arrayAccessForm == "property" && (ia = ma.toString(),
                    na = "_asArray",
                    ia.indexOf(na, ia.length - na.length) !== -1) || ma.toString().indexOf(xe.attributePrefix) == 0 || ma.toString().indexOf("__") == 0 || ta[ma]instanceof Function;
                    var ia, na
                }
                function ri(ta) {
                    var ma = 0;
                    if (ta instanceof Object)
                        for (var ia in ta)
                            Ea(ta, ia) || ma++;
                    return ma
                }
                function ya(ta, ma, ia) {
                    return xe.jsonPropertiesFilter.length == 0 || ia == "" || ca(xe.jsonPropertiesFilter, ta, ma, ia)
                }
                function Aa(ta) {
                    var ma = [];
                    if (ta instanceof Object)
                        for (var ia in ta)
                            ia.toString().indexOf("__") == -1 && ia.toString().indexOf(xe.attributePrefix) == 0 && ma.push(ia);
                    return ma
                }
                function wa(ta) {
                    var ma = "";
                    return ta instanceof Object ? ma += function(ia) {
                        var na = "";
                        return ia.__cdata != null && (na += "<![CDATA[" + ia.__cdata + "]]>"),
                        ia.__text != null && (xe.escapeMode ? na += ha(ia.__text) : na += ia.__text),
                        na
                    }(ta) : ta != null && (xe.escapeMode ? ma += ha(ta) : ma += ta),
                    ma
                }
                function _a(ta, ma) {
                    return ta === "" ? ma : ta + "." + ma
                }
                function Da(ta, ma, ia, na) {
                    var va = "";
                    if (ta.length == 0)
                        va += Kt(ta, ma, ia, !0);
                    else
                        for (var Sa = 0; Sa < ta.length; Sa++)
                            va += Kt(ta[Sa], ma, Aa(ta[Sa]), !1),
                            va += ua(ta[Sa], _a(na, ma)),
                            va += oi(ta[Sa], ma);
                    return va
                }
                function ua(ta, ma) {
                    var ia = "";
                    if (ri(ta) > 0) {
                        for (var na in ta)
                            if (!Ea(ta, na) && (ma == "" || ya(ta, na, _a(ma, na)))) {
                                var va = ta[na]
                                  , Sa = Aa(va);
                                va == null || va == null ? ia += Kt(va, na, Sa, !0) : va instanceof Object ? va instanceof Array ? ia += Da(va, na, Sa, ma) : va instanceof Date ? (ia += Kt(va, na, Sa, !1),
                                ia += va.toISOString(),
                                ia += oi(va, na)) : ri(va) > 0 || va.__text != null || va.__cdata != null ? (ia += Kt(va, na, Sa, !1),
                                ia += ua(va, _a(ma, na)),
                                ia += oi(va, na)) : ia += Kt(va, na, Sa, !0) : (ia += Kt(va, na, Sa, !1),
                                ia += wa(va),
                                ia += oi(va, na))
                            }
                    }
                    return ia += wa(ta)
                }
                this.parseXmlString = function(ta) {
                    var ma;
                    if (ta === void 0)
                        return null;
                    if (window.DOMParser) {
                        var ia = new window.DOMParser;
                        try {
                            (ma = ia.parseFromString(ta, "text/xml")).getElementsByTagNameNS("*", "parsererror").length > 0 && (ma = null)
                        } catch (na) {
                            ma = null
                        }
                    } else
                        ta.indexOf("<?") == 0 && (ta = ta.substr(ta.indexOf("?>") + 2)),
                        (ma = new ActiveXObject("Microsoft.XMLDOM")).async = "false",
                        ma.loadXML(ta);
                    return ma
                }
                ,
                this.asArray = function(ta) {
                    return ta === void 0 || ta == null ? [] : ta instanceof Array ? ta : [ta]
                }
                ,
                this.toXmlDateTime = function(ta) {
                    return ta instanceof Date ? ta.toISOString() : typeof ta == "number" ? new Date(ta).toISOString() : null
                }
                ,
                this.asDateTime = function(ta) {
                    return typeof ta == "string" ? ti(ta) : ta
                }
                ,
                this.xml2json = function(ta) {
                    return ni(ta)
                }
                ,
                this.xml_str2json = function(ta) {
                    var ma = this.parseXmlString(ta);
                    return ma != null ? this.xml2json(ma) : null
                }
                ,
                this.json2xml_str = function(ta) {
                    return ua(ta, "")
                }
                ,
                this.json2xml = function(ta) {
                    var ma = this.json2xml_str(ta);
                    return this.parseXmlString(ma)
                }
                ,
                this.getVersion = function() {
                    return "1.2.0"
                }
            }
              , fd = "onLoad"
              , Qd = "Period"
              , Wd = "AdaptationSet"
              , eh = "EventStream";
            function Gc(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = dd(qt).getInstance()
                  , ei = void 0
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0;
                function ti(Ea, ri, ya) {
                    var Aa = {}
                      , wa = void 0
                      , _a = void 0;
                    Aa.elements = Ea,
                    Aa.type = ri,
                    Aa.resolveType = ya,
                    Aa.elements.length === 0 && ni(Aa);
                    for (var Da = 0; Da < Aa.elements.length; Da++)
                        wa = Aa.elements[Da],
                        _a = Qe.isHTTPURL(wa.url) ? wa.url : wa.originalContent.BaseURL + wa.url,
                        pa.load(_a, wa, Aa)
                }
                function ra(Ea) {
                    var ri, ya = void 0, Aa = "";
                    if (ya = Ea.element,
                    ri = Ea.resolveObject,
                    ya.resolvedContent) {
                        var wa = 0;
                        ya.resolvedContent.indexOf("<?xml") === 0 && (wa = ya.resolvedContent.indexOf("?>") + 2),
                        Aa = ya.resolvedContent.substr(0, wa) + "<response>" + ya.resolvedContent.substr(wa) + "</response>",
                        ya.resolvedContent = ca.xml_str2json(Aa)
                    }
                    (function(_a) {
                        var Da = void 0;
                        for (Da = 0; Da < _a.elements.length; Da++)
                            if (_a.elements[Da].resolved === !1)
                                return !1;
                        return !0
                    }
                    )(ri) && ni(ri)
                }
                function ni(Ea) {
                    var ri = []
                      , ya = void 0
                      , Aa = void 0;
                    if (function(wa) {
                        var _a = []
                          , Da = void 0
                          , ua = void 0
                          , ta = void 0
                          , ma = void 0
                          , ia = void 0
                          , na = void 0;
                        for (ma = wa.elements.length - 1; ma >= 0; ma--) {
                            if (ua = (Da = wa.elements[ma]).type + "_asArray",
                            Da.resolvedContent) {
                                if (Da.resolvedContent)
                                    for (ia = 0; ia < Da.resolvedContent[ua].length; ia++)
                                        ta = Da.resolvedContent[ua][ia],
                                        _a.push(ta)
                            } else
                                delete Da.originalContent["xlink:actuate"],
                                delete Da.originalContent["xlink:href"],
                                _a.push(Da.originalContent);
                            for (Da.parentElement[ua].splice(Da.index, 1),
                            na = 0; na < _a.length; na++)
                                Da.parentElement[ua].splice(Da.index + na, 0, _a[na]);
                            _a = []
                        }
                        wa.elements.length > 0 && la.run(ha)
                    }(Ea),
                    Ea.resolveType === "onActuate" && Pe.trigger(bt.XLINK_READY, {
                        manifest: ha
                    }),
                    Ea.resolveType === fd)
                        switch (Ea.type) {
                        case Qd:
                            for (ya = 0; ya < ha.Period_asArray.length; ya++)
                                (Aa = ha.Period_asArray[ya]).hasOwnProperty("AdaptationSet_asArray") && (ri = ri.concat(Kt(Aa.AdaptationSet_asArray, Aa, Wd, fd))),
                                Aa.hasOwnProperty("EventStream_asArray") && (ri = ri.concat(Kt(Aa.EventStream_asArray, Aa, eh, fd)));
                            ti(ri, Wd, fd);
                            break;
                        case Wd:
                            Pe.trigger(bt.XLINK_READY, {
                                manifest: ha
                            })
                        }
                }
                function Kt(Ea, ri, ya, Aa) {
                    var wa = []
                      , _a = void 0
                      , Da = void 0
                      , ua = void 0;
                    for (Da = Ea.length - 1; Da >= 0; Da--)
                        (_a = Ea[Da]).hasOwnProperty("xlink:href") && _a["xlink:href"] === "urn:mpeg:dash:resolve-to-zero:2013" && Ea.splice(Da, 1);
                    for (Da = 0; Da < Ea.length; Da++)
                        (_a = Ea[Da]).hasOwnProperty("xlink:href") && _a.hasOwnProperty("xlink:actuate") && _a["xlink:actuate"] === Aa && (ua = oi(_a["xlink:href"], ri, ya, Da, Aa, _a),
                        wa.push(ua));
                    return wa
                }
                function oi(Ea, ri, ya, Aa, wa, _a) {
                    return {
                        url: Ea,
                        parentElement: ri,
                        type: ya,
                        index: Aa,
                        resolveType: wa,
                        originalContent: _a,
                        resolvedContent: null,
                        resolved: !1
                    }
                }
                return ei = {
                    resolveManifestOnLoad: function(Ea) {
                        ca = new Vc({
                            escapeMode: !1,
                            attributePrefix: "",
                            arrayAccessForm: "property",
                            emptyNodeForm: "object",
                            stripWhitespaces: !1,
                            enableToStringFunc: !1,
                            ignoreRoot: !0,
                            matchers: sa
                        }),
                        ti(Kt((ha = Ea).Period_asArray, ha, Qd, fd), Qd, fd)
                    },
                    setMatchers: function(Ea) {
                        Ea && (sa = Ea)
                    },
                    setIron: function(Ea) {
                        Ea && (la = Ea)
                    },
                    reset: function() {
                        Pe.off(bt.XLINK_ELEMENT_LOADED, ra, ei),
                        pa && (pa.reset(),
                        pa = null)
                    }
                },
                Pe.on(bt.XLINK_ELEMENT_LOADED, ra, ei),
                pa = Jf(qt).create({
                    errHandler: xe.errHandler,
                    videoModel: xe.videoModel,
                    metricsModel: xe.metricsModel,
                    mediaPlayerModel: xe.mediaPlayerModel,
                    requestModifier: xe.requestModifier
                }),
                ei
            }
            Gc.__dashjs_factory_name = "XlinkController";
            var th = $.a.getClassFactory(Gc)
              , Kd = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(xe) {
                return typeof xe
            }
            : function(xe) {
                return xe && typeof Symbol == "function" && xe.constructor === Symbol && xe !== Symbol.prototype ? "symbol" : typeof xe
            }
            ;
            function $c(xe) {
                function qt(ei, sa) {
                    for (var la in ei)
                        sa.hasOwnProperty(la) || (sa[la] = ei[la])
                }
                function Pe(ei, sa, la) {
                    for (var ha = 0, ca = ei.length; ha < ca; ++ha) {
                        var pa = ei[ha];
                        if (sa[pa.name])
                            if (la[pa.name]) {
                                if (pa.merge) {
                                    var ti = sa[pa.name]
                                      , ra = la[pa.name];
                                    (ti === void 0 ? "undefined" : Kd(ti)) === "object" && (ra === void 0 ? "undefined" : Kd(ra)) === "object" ? qt(ti, ra) : la[pa.name] = ti + ra
                                }
                            } else
                                la[pa.name] = sa[pa.name]
                    }
                }
                function Qe(ei, sa) {
                    for (var la = 0, ha = ei.children.length; la < ha; ++la) {
                        var ca = ei.children[la]
                          , pa = sa[ca.name + "_asArray"];
                        if (pa)
                            for (var ti = 0, ra = pa.length; ti < ra; ++ti) {
                                var ni = pa[ti];
                                Pe(ei.properties, sa, ni),
                                Qe(ca, ni)
                            }
                    }
                }
                return {
                    run: function(ei) {
                        if (ei === null || (ei === void 0 ? "undefined" : Kd(ei)) !== "object")
                            return ei;
                        if ("period"in xe)
                            for (var sa = xe.period, la = ei.Period_asArray, ha = 0, ca = la.length; ha < ca; ++ha) {
                                var pa = la[ha];
                                if (Qe(sa, pa),
                                "adaptationset"in xe) {
                                    var ti = pa.AdaptationSet_asArray;
                                    if (ti)
                                        for (var ra = xe.adaptationset, ni = 0, Kt = ti.length; ni < Kt; ++ni)
                                            Qe(ra, ti[ni])
                                }
                            }
                        return ei
                    }
                }
            }
            $c.__dashjs_factory_name = "ObjectIron";
            var jc = $.a.getClassFactory($c)
              , ih = function() {
                function xe(qt, Pe) {
                    for (var Qe = 0; Qe < Pe.length; Qe++) {
                        var ei = Pe[Qe];
                        ei.enumerable = ei.enumerable || !1,
                        ei.configurable = !0,
                        "value"in ei && (ei.writable = !0),
                        Object.defineProperty(qt, ei.key, ei)
                    }
                }
                return function(qt, Pe, Qe) {
                    return Pe && xe(qt.prototype, Pe),
                    Qe && xe(qt, Qe),
                    qt
                }
            }()
              , Rd = function() {
                function xe(qt, Pe) {
                    (function(Qe, ei) {
                        if (!(Qe instanceof ei))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this._test = qt,
                    this._converter = Pe
                }
                return ih(xe, [{
                    key: "test",
                    get: function() {
                        return this._test
                    }
                }, {
                    key: "converter",
                    get: function() {
                        return this._converter
                    }
                }]),
                xe
            }();
            function Iu(xe, qt, Pe) {
                return qt in xe ? Object.defineProperty(xe, qt, {
                    value: Pe,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : xe[qt] = Pe,
                xe
            }
            var nh = function(xe) {
                function qt() {
                    return function(Pe, Qe) {
                        if (!(Pe instanceof Qe))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, qt),
                    function(Pe, Qe) {
                        if (!Pe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !Qe || typeof Qe != "object" && typeof Qe != "function" ? Pe : Qe
                    }(this, xe.call(this, function(Pe, Qe) {
                        var ei, sa = (Iu(ei = {}, Ga.MPD, [Ga.ID, Ga.PROFILES]),
                        Iu(ei, Ga.PERIOD, [Ga.ID]),
                        Iu(ei, Ga.BASE_URL, [Ga.SERVICE_LOCATION, Ga.BYTE_RANGE]),
                        Iu(ei, Ga.SEGMENT_BASE, [Ga.INDEX_RANGE]),
                        Iu(ei, Ga.INITIALIZATION, [Ga.RANGE]),
                        Iu(ei, Ga.REPRESENTATION_INDEX, [Ga.RANGE]),
                        Iu(ei, Ga.SEGMENT_LIST, [Ga.INDEX_RANGE]),
                        Iu(ei, Ga.BITSTREAM_SWITCHING, [Ga.RANGE]),
                        Iu(ei, Ga.SEGMENT_URL, [Ga.MEDIA_RANGE, Ga.INDEX_RANGE]),
                        Iu(ei, Ga.SEGMENT_TEMPLATE, [Ga.INDEX_RANGE, Ga.MEDIA, Ga.INDEX, Ga.INITIALIZATION_MINUS, Ga.BITSTREAM_SWITCHING_MINUS]),
                        Iu(ei, Ga.ASSET_IDENTIFIER, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.EVENT_STREAM, [Ga.VALUE]),
                        Iu(ei, Ga.ADAPTATION_SET, [Ga.PROFILES, Ga.MIME_TYPE, Ga.SEGMENT_PROFILES, Ga.CODECS, Ga.CONTENT_TYPE]),
                        Iu(ei, Ga.FRAME_PACKING, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.AUDIO_CHANNEL_CONFIGURATION, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.CONTENT_PROTECTION, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.ESSENTIAL_PROPERTY, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.SUPPLEMENTAL_PROPERTY, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.INBAND_EVENT_STREAM, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.ACCESSIBILITY, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.ROLE, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.RATING, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.VIEWPOINT, [Ga.VALUE, Ga.ID]),
                        Iu(ei, Ga.CONTENT_COMPONENT, [Ga.CONTENT_TYPE]),
                        Iu(ei, Ga.REPRESENTATION, [Ga.ID, Ga.DEPENDENCY_ID, Ga.MEDIA_STREAM_STRUCTURE_ID]),
                        Iu(ei, Ga.SUBSET, [Ga.ID]),
                        Iu(ei, Ga.METRICS, [Ga.METRICS_MINUS]),
                        Iu(ei, Ga.REPORTING, [Ga.VALUE, Ga.ID]),
                        ei);
                        if (sa.hasOwnProperty(Qe)) {
                            var la = sa[Qe];
                            return la !== void 0 && la.indexOf(Pe.name) >= 0
                        }
                        return !1
                    }, function(Pe) {
                        return String(Pe)
                    }))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(Rd)
              , Hc = /^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/
              , rh = function(xe) {
                function qt() {
                    return function(Pe, Qe) {
                        if (!(Pe instanceof Qe))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, qt),
                    function(Pe, Qe) {
                        if (!Pe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !Qe || typeof Qe != "object" && typeof Qe != "function" ? Pe : Qe
                    }(this, xe.call(this, function(Pe) {
                        for (var Qe = [Ga.MIN_BUFFER_TIME, Ga.MEDIA_PRESENTATION_DURATION, Ga.MINIMUM_UPDATE_PERIOD, Ga.TIMESHIFT_BUFFER_DEPTH, Ga.MAX_SEGMENT_DURATION, Ga.MAX_SUBSEGMENT_DURATION, ie.SUGGESTED_PRESENTATION_DELAY, Ga.START, ie.START_TIME, Ga.DURATION], ei = Qe.length, sa = 0; sa < ei; sa++)
                            if (Pe.nodeName === Qe[sa])
                                return Hc.test(Pe.value);
                        return !1
                    }, function(Pe) {
                        var Qe = Hc.exec(Pe)
                          , ei = 31536e3 * parseFloat(Qe[2] || 0) + 2592e3 * parseFloat(Qe[4] || 0) + 86400 * parseFloat(Qe[6] || 0) + 3600 * parseFloat(Qe[8] || 0) + 60 * parseFloat(Qe[10] || 0) + parseFloat(Qe[12] || 0);
                        return Qe[1] !== void 0 && (ei = -ei),
                        ei
                    }))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(Rd)
              , Yc = /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/
              , oh = function(xe) {
                function qt() {
                    return function(Pe, Qe) {
                        if (!(Pe instanceof Qe))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, qt),
                    function(Pe, Qe) {
                        if (!Pe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !Qe || typeof Qe != "object" && typeof Qe != "function" ? Pe : Qe
                    }(this, xe.call(this, function(Pe) {
                        return Yc.test(Pe.value)
                    }, function(Pe) {
                        var Qe = Yc.exec(Pe)
                          , ei = void 0;
                        if (ei = Date.UTC(parseInt(Qe[1], 10), parseInt(Qe[2], 10) - 1, parseInt(Qe[3], 10), parseInt(Qe[4], 10), parseInt(Qe[5], 10), Qe[6] && parseInt(Qe[6], 10) || 0, Qe[7] && 1e3 * parseFloat(Qe[7]) || 0),
                        Qe[9] && Qe[10]) {
                            var sa = 60 * parseInt(Qe[9], 10) + parseInt(Qe[10], 10);
                            ei += (Qe[8] === "+" ? -1 : 1) * sa * 60 * 1e3
                        }
                        return new Date(ei)
                    }))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(Rd)
              , ah = /^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/
              , sh = function(xe) {
                function qt() {
                    return function(Pe, Qe) {
                        if (!(Pe instanceof Qe))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, qt),
                    function(Pe, Qe) {
                        if (!Pe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !Qe || typeof Qe != "object" && typeof Qe != "function" ? Pe : Qe
                    }(this, xe.call(this, function(Pe) {
                        return ah.test(Pe.value)
                    }, function(Pe) {
                        return parseFloat(Pe)
                    }))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(Rd)
              , lh = function() {
                function xe(qt, Pe) {
                    for (var Qe = 0; Qe < Pe.length; Qe++) {
                        var ei = Pe[Qe];
                        ei.enumerable = ei.enumerable || !1,
                        ei.configurable = !0,
                        "value"in ei && (ei.writable = !0),
                        Object.defineProperty(qt, ei.key, ei)
                    }
                }
                return function(qt, Pe, Qe) {
                    return Pe && xe(qt.prototype, Pe),
                    Qe && xe(qt, Qe),
                    qt
                }
            }()
              , uh = function() {
                function xe(qt) {
                    (function(Qe, ei) {
                        if (!(Qe instanceof ei))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe);
                    var Pe;
                    this._name = qt,
                    this._merge = (Pe = qt) && Pe.length && Pe.charAt(0) === Pe.charAt(0).toUpperCase()
                }
                return lh(xe, [{
                    key: "name",
                    get: function() {
                        return this._name
                    }
                }, {
                    key: "merge",
                    get: function() {
                        return this._merge
                    }
                }]),
                xe
            }()
              , dh = function() {
                function xe(qt, Pe) {
                    for (var Qe = 0; Qe < Pe.length; Qe++) {
                        var ei = Pe[Qe];
                        ei.enumerable = ei.enumerable || !1,
                        ei.configurable = !0,
                        "value"in ei && (ei.writable = !0),
                        Object.defineProperty(qt, ei.key, ei)
                    }
                }
                return function(qt, Pe, Qe) {
                    return Pe && xe(qt.prototype, Pe),
                    Qe && xe(qt, Qe),
                    qt
                }
            }()
              , hd = function() {
                function xe(qt, Pe, Qe) {
                    var ei = this;
                    (function(sa, la) {
                        if (!(sa instanceof la))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe),
                    this._name = qt || "",
                    this._properties = [],
                    this._children = Qe || [],
                    Array.isArray(Pe) && Pe.forEach(function(sa) {
                        ei._properties.push(new uh(sa))
                    })
                }
                return dh(xe, [{
                    key: "name",
                    get: function() {
                        return this._name
                    }
                }, {
                    key: "children",
                    get: function() {
                        return this._children
                    }
                }, {
                    key: "properties",
                    get: function() {
                        return this._properties
                    }
                }]),
                xe
            }()
              , qc = function(xe) {
                function qt() {
                    (function(Qe, ei) {
                        if (!(Qe instanceof ei))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, qt);
                    var Pe = [Ga.PROFILES, Ga.WIDTH, Ga.HEIGHT, Ga.SAR, Ga.FRAMERATE, Ga.AUDIO_SAMPLING_RATE, Ga.MIME_TYPE, Ga.SEGMENT_PROFILES, Ga.CODECS, Ga.MAXIMUM_SAP_PERIOD, Ga.START_WITH_SAP, Ga.MAX_PLAYOUT_RATE, Ga.CODING_DEPENDENCY, Ga.SCAN_TYPE, Ga.FRAME_PACKING, Ga.AUDIO_CHANNEL_CONFIGURATION, Ga.CONTENT_PROTECTION, Ga.ESSENTIAL_PROPERTY, Ga.SUPPLEMENTAL_PROPERTY, Ga.INBAND_EVENT_STREAM];
                    return function(Qe, ei) {
                        if (!Qe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !ei || typeof ei != "object" && typeof ei != "function" ? Qe : ei
                    }(this, xe.call(this, Ga.ADAPTATION_SET, Pe, [new hd(Ga.REPRESENTATION,Pe,[new hd(Ga.SUB_REPRESENTATION,Pe)])]))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(hd)
              , zc = function(xe) {
                function qt() {
                    (function(Qe, ei) {
                        if (!(Qe instanceof ei))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, qt);
                    var Pe = [Ga.SEGMENT_BASE, Ga.SEGMENT_TEMPLATE, Ga.SEGMENT_LIST];
                    return function(Qe, ei) {
                        if (!Qe)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !ei || typeof ei != "object" && typeof ei != "function" ? Qe : ei
                    }(this, xe.call(this, Ga.PERIOD, Pe, [new hd(Ga.ADAPTATION_SET,Pe,[new hd(Ga.REPRESENTATION,Pe)])]))
                }
                return function(Pe, Qe) {
                    if (typeof Qe != "function" && Qe !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof Qe);
                    Pe.prototype = Object.create(Qe && Qe.prototype, {
                        constructor: {
                            value: Pe,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Qe && (Object.setPrototypeOf ? Object.setPrototypeOf(Pe, Qe) : Pe.__proto__ = Qe)
                }(qt, xe),
                qt
            }(hd);
            function Qc() {
                var xe, qt = this.context, Pe = aa(qt).getInstance().log, Qe = void 0, ei = void 0, sa = void 0;
                return xe = {
                    parse: function(la) {
                        var ha, ca = window.performance.now();
                        if (!(ha = ei.xml_str2json(la)))
                            throw new Error("parsing the manifest failed");
                        var pa = window.performance.now();
                        sa.run(ha);
                        var ti = window.performance.now();
                        return Pe("Parsing complete: ( xml2json: " + (pa - ca).toPrecision(3) + "ms, objectiron: " + (ti - pa).toPrecision(3) + "ms, total: " + ((ti - ca) / 1e3).toPrecision(3) + "s)"),
                        ha
                    },
                    getMatchers: function() {
                        return Qe
                    },
                    getIron: function() {
                        return sa
                    }
                },
                Qe = [new rh, new oh, new sh, new nh],
                ei = new Vc({
                    escapeMode: !1,
                    attributePrefix: "",
                    arrayAccessForm: "property",
                    emptyNodeForm: "object",
                    stripWhitespaces: !1,
                    enableToStringFunc: !1,
                    ignoreRoot: !0,
                    matchers: Qe
                }),
                sa = jc(qt).create({
                    adaptationset: new qc,
                    period: new zc
                }),
                xe
            }
            Qc.__dashjs_factory_name = "DashParser";
            var ch = $.a.getClassFactory(Qc)
              , fh = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(xe) {
                return typeof xe
            }
            : function(xe) {
                return xe && typeof Symbol == "function" && xe.constructor === Symbol && xe !== Symbol.prototype ? "symbol" : typeof xe
            }
            ;
            function Wc() {
                var xe, qt = this.context, Pe = aa(qt).getInstance().log, Qe = void 0;
                function ei(sa, la) {
                    return la ? sa && sa.replace(/http:\/\//g, "https://") : sa
                }
                return xe = {
                    parse: function(sa, la) {
                        var ha = {}
                          , ca = window.performance.now()
                          , pa = function(ni) {
                            var Kt = ni && (ni.ContentProtection || ni.content_protection);
                            return Kt ? Kt.pssh ? {
                                schemeIdUri: Kt.schemeIdUri || Kt.scheme_id_uri,
                                value: Kt.value,
                                pssh: Kt.pssh
                            } : {
                                schemeIdUri: Kt.schemeIdUri || Kt.scheme_id_uri,
                                value: Kt.value
                            } : null
                        };
                        try {
                            sa = function ni(Kt) {
                                var oi = {};
                                if (Kt instanceof Object) {
                                    var Ea = function(ya) {
                                        var Aa = ya.replace(/[\x41-\x5A]/g, function(wa, _a) {
                                            var Da = String.fromCharCode(wa.charCodeAt(0) + 32);
                                            return _a ? "_" + Da : Da
                                        });
                                        Object.prototype.toString.call(Kt[ya]) === "[object Array]" ? (oi[Aa] = [],
                                        Kt[ya].forEach(function(wa) {
                                            oi[Aa].push(ni(wa))
                                        })) : Object.prototype.toString.call(Kt[ya]) === "[object Object]" ? oi[Aa] = ni(Kt[ya]) : oi[Aa] = Kt[ya]
                                    };
                                    for (var ri in Kt)
                                        Ea(ri)
                                } else
                                    oi = Kt;
                                return oi
                            }(sa)
                        } catch (ni) {
                            throw new Error("Convert bilibili mpd failed, " + ni)
                        }
                        if (ha.ProgramInformation = {
                            Title: ""
                        },
                        ha.loadedTime = new Date,
                        ha.mediaPresentationDuration = sa.duration,
                        ha.minBufferTime = sa.min_buffer_time,
                        ha.profiles = "urn:mpeg:dash:profile:isoff-on-demand:2011",
                        ha.xmlns = "urn:mpeg:dash:profile:isoff-on-demand:2011",
                        ha.type = "static",
                        ha.interactive = sa.type === "interactive",
                        ha.originalUrl = location.href,
                        ha.url = location.href,
                        ha.Period = {
                            duration: sa.duration,
                            AdaptationSet: []
                        },
                        sa.video && (ha.Period.AdaptationSet[0] = {},
                        ha.Period.AdaptationSet[0].Representation = sa.video.map(function(ni) {
                            var Kt = pa(ni)
                              , oi = {
                                __text: ei(ni.base_url, la)
                            };
                            return ni.backup_url && ni.backup_url.forEach(function(Ea, ri) {
                                oi["backupUrl" + (ri + 1)] = ei(Ea, la)
                            }),
                            Kt && !ha.Period.AdaptationSet[0].ContentProtection && (ha.Period.AdaptationSet[0].ContentProtection = Kt),
                            {
                                BaseURL: oi,
                                ContentProtection: Kt,
                                SegmentBase: {
                                    Initialization: {
                                        range: ni.segment_base.initialization
                                    },
                                    indexRange: ni.segment_base.index_range,
                                    indexRangeExact: "true"
                                },
                                bandwidth: ni.bandwidth,
                                codecs: ni.codecs,
                                frameRate: ni.frame_rate,
                                height: ni.height,
                                width: ni.width,
                                id: ni.id + "",
                                mimeType: ni.mime_type,
                                sar: ni.sar,
                                startWithSAP: ni.start_with_sap
                            }
                        })),
                        sa.audio && (ha.Period.AdaptationSet[1] = {},
                        ha.Period.AdaptationSet[1].Representation = sa.audio.map(function(ni) {
                            var Kt = pa(ni)
                              , oi = {
                                __text: ei(ni.base_url, la)
                            };
                            return ni.backup_url && ni.backup_url.forEach(function(Ea, ri) {
                                oi["backupUrl" + (ri + 1)] = ei(Ea, la)
                            }),
                            Kt && !ha.Period.AdaptationSet[1].ContentProtection && (ha.Period.AdaptationSet[1].ContentProtection = Kt),
                            {
                                BaseURL: oi,
                                ContentProtection: Kt,
                                SegmentBase: {
                                    Initialization: {
                                        range: ni.segment_base.initialization
                                    },
                                    indexRange: ni.segment_base.index_range,
                                    indexRangeExact: "true"
                                },
                                bandwidth: ni.bandwidth,
                                codecs: ni.codecs,
                                id: ni.id + "",
                                mimeType: ni.mime_type
                            }
                        })),
                        ha.ProgramInformation = {
                            Title: ""
                        },
                        function ni(Kt) {
                            var oi = Object.prototype.toString.call(Kt) !== "[object Array]";
                            for (var Ea in Kt)
                                fh(Kt[Ea]) === "object" && (ni(Kt[Ea]),
                                oi && (Kt[Ea + "_asArray"] = Object.prototype.toString.call(Kt[Ea]) === "[object Array]" ? Kt[Ea] : [Kt[Ea]]))
                        }(ha),
                        !ha)
                            throw new Error("parsing the manifest failed");
                        var ti = window.performance.now()
                          , ra = window.performance.now();
                        return Pe("Parsing complete: ( xml2json: " + (ti - ca).toPrecision(3) + "ms, objectiron: " + (ra - ti).toPrecision(3) + "ms, total: " + ((ra - ca) / 1e3).toPrecision(3) + "s)"),
                        ha
                    },
                    getMatchers: function() {
                        return null
                    },
                    getIron: function() {
                        return Qe
                    }
                },
                Qe = jc(qt).create({
                    adaptationset: new qc,
                    period: new zc
                }),
                xe
            }
            Wc.__dashjs_factory_name = "DashBilibiliParser";
            var hh = $.a.getClassFactory(Wc);
            function Zd(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = Re(qt).getInstance()
                  , Qe = dd(qt).getInstance()
                  , ei = aa(qt).getInstance().log
                  , sa = void 0
                  , la = void 0
                  , ha = void 0
                  , ca = void 0
                  , pa = void 0
                  , ti = xe.mssHandler
                  , ra = xe.errHandler;
                function ni(oi) {
                    Pe.trigger(bt.INTERNAL_MANIFEST_LOADED, {
                        manifest: oi.manifest
                    })
                }
                function Kt(oi, Ea, ri, ya) {
                    if (ha) {
                        var Aa = void 0
                          , wa = void 0
                          , _a = void 0;
                        if (window.location && window.location && window.location.protocol === "https:" && (pa = !0),
                        ya && ya !== oi ? (wa = Qe.parseBaseUrl(ya),
                        Aa = ya) : (Qe.isRelative(oi) && (oi = Qe.resolve(oi, window.location.href)),
                        wa = Qe.parseBaseUrl(oi)),
                        ca === null && (ca = function(Da) {
                            var ua = null;
                            return Da.video || Da.audio ? hh(qt).create() : Da.indexOf("SmoothStreamingMedia") > -1 ? (ti && (ua = ti.createMssParser(),
                            ti.registerEvents()),
                            ua) : Da.indexOf("MPD") > -1 ? ch(qt).create() : ua
                        }(Ea)),
                        ca !== null) {
                            ha.setMatchers(ca.getMatchers()),
                            ha.setIron(ca.getIron());
                            try {
                                _a = ca.parse(Ea, pa)
                            } catch (Da) {
                                return void Pe.trigger(bt.INTERNAL_MANIFEST_LOADED, {
                                    manifest: null,
                                    error: new ba(1,"Failed parsing manifest : " + (ya ? oi : "MPD String"),null,i.MANIFEST_RESOLVE_ERROR)
                                })
                            }
                            _a ? (_a.url = Aa || oi,
                            _a.originalUrl || (_a.originalUrl = _a.url),
                            _a.hasOwnProperty(ie.LOCATION) && (wa = Qe.parseBaseUrl(_a.Location_asArray[0]),
                            ei("BaseURI set by Location to: " + wa)),
                            _a.baseUri = function(Da, ua) {
                                return ua ? Da && Da.replace(/http:\/\//g, "https://") : Da
                            }(wa, pa),
                            _a.loadedTime = new Date,
                            ha.resolveManifestOnLoad(_a)) : Pe.trigger(bt.INTERNAL_MANIFEST_LOADED, {
                                manifest: null,
                                error: new ba(1,"parsing failed",null,i.MANIFEST_ERROR)
                            })
                        } else
                            Pe.trigger(bt.INTERNAL_MANIFEST_LOADED, {
                                manifest: null,
                                error: new ba(1,"Failed detecting manifest type or manifest type unsupported : " + (ya ? oi : "MPD String"),null,i.MANIFEST_TYPE_ERROR)
                            })
                    }
                }
                return sa = {
                    load: function(oi, Ea) {
                        if (pa = Ea,
                        !oi || typeof oi != "string" || oi.indexOf("http") !== 0 && oi.indexOf("/") !== 0)
                            Kt("", oi, "OK", "");
                        else {
                            var ri = new Uc(oi,vl.MPD_TYPE);
                            la.load({
                                request: ri,
                                success: function(ya, Aa, wa) {
                                    Kt(oi, ya, Aa, wa)
                                },
                                error: function(ya, Aa, wa, _a) {
                                    Pe.trigger(bt.INTERNAL_MANIFEST_LOADED, {
                                        manifest: null,
                                        error: new ba(2,"Failed loading manifest: " + oi + ", " + wa,null,i.MANIFEST_DOWNLOAD_ERROR,_a)
                                    })
                                }
                            })
                        }
                    },
                    reset: function() {
                        Pe.off(bt.XLINK_READY, ni, sa),
                        ha && (ha.reset(),
                        ha = null),
                        la && (la.abort(),
                        la = null),
                        ti && ti.reset()
                    }
                },
                Pe.on(bt.XLINK_READY, ni, sa),
                la = Ad(qt).create({
                    errHandler: ra,
                    videoModel: xe.videoModel,
                    metricsModel: xe.metricsModel,
                    mediaPlayerModel: xe.mediaPlayerModel,
                    requestModifier: xe.requestModifier
                }),
                ha = th(qt).create({
                    errHandler: ra,
                    videoModel: xe.videoModel,
                    metricsModel: xe.metricsModel,
                    mediaPlayerModel: xe.mediaPlayerModel,
                    requestModifier: xe.requestModifier
                }),
                ca = null,
                sa
            }
            Zd.__dashjs_factory_name = "ManifestLoader";
            var Nd = $.a.getClassFactory(Zd);
            Nd.MANIFEST_LOADER_ERROR_PARSING_FAILURE = 1,
            Nd.MANIFEST_LOADER_ERROR_LOADING_FAILURE = 2,
            $.a.updateClassFactory(Zd.__dashjs_factory_name, Nd);
            var ph = Nd;
            function Kc() {
                var xe, qt = void 0;
                return xe = {
                    supportsMediaSource: function() {
                        var Pe = "WebKitMediaSource"in window
                          , Qe = "MediaSource"in window;
                        return Pe || Qe
                    },
                    supportsEncryptedMedia: function() {
                        return qt
                    },
                    supportsCodec: function(Pe) {
                        return !(!("MediaSource"in window) || !MediaSource.isTypeSupported(Pe)) || !(!("WebKitMediaSource"in window) || !WebKitMediaSource.isTypeSupported(Pe)) || !!(window.__ENABLE_WASM_PLAYER__ && "BwpMediaSource"in window && BwpMediaSource.isTypeSupported(Pe))
                    },
                    setEncryptedMediaSupported: function(Pe) {
                        qt = Pe
                    }
                },
                qt = !1,
                xe
            }
            Kc.__dashjs_factory_name = "Capabilities";
            var Zc = $.a.getSingletonFactory(Kc);
            function Xc() {
                var xe = this.context
                  , qt = Re(xe).getInstance()
                  , Pe = void 0;
                return {
                    getValue: function() {
                        return Pe
                    },
                    setValue: function(Qe) {
                        Pe = Qe,
                        Qe && qt.trigger(bt.MANIFEST_LOADED, {
                            data: Qe
                        })
                    }
                }
            }
            Xc.__dashjs_factory_name = "ManifestModel";
            var mh = $.a.getSingletonFactory(Xc)
              , gh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.TcpList = [],
                this.HttpList = [],
                this.RepSwitchList = [],
                this.BufferLevel = [],
                this.BufferState = [],
                this.PlayList = [],
                this.DroppedFrames = [],
                this.SchedulingInfo = [],
                this.DVRInfo = [],
                this.ManifestUpdate = [],
                this.RequestsQueue = null,
                this.DVBErrors = []
            }
              , yh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.tcpid = null,
                this.dest = null,
                this.topen = null,
                this.tclose = null,
                this.tconnect = null
            }
              , vh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.t = null,
                this.mt = null,
                this.to = null,
                this.lto = null
            }
              , Eh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.t = null,
                this.level = null
            }
              , _h = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.target = null,
                this.state = ku.BUFFER_EMPTY
            }
              , Th = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.time = null,
                this.range = null,
                this.manifestInfo = null
            }
              , Ah = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.time = null,
                this.droppedFrames = null
            };
            function Xd(xe, qt) {
                if (!(xe instanceof qt))
                    throw new TypeError("Cannot call a class as a function")
            }
            var Sh = function xe() {
                Xd(this, xe),
                this.mediaType = null,
                this.type = null,
                this.requestTime = null,
                this.fetchTime = null,
                this.availabilityStartTime = null,
                this.presentationStartTime = 0,
                this.clientTimeOffset = 0,
                this.currentTime = null,
                this.buffered = null,
                this.latency = 0,
                this.streamInfo = [],
                this.representationInfo = []
            }
              , Ih = function xe() {
                Xd(this, xe),
                this.id = null,
                this.index = null,
                this.start = null,
                this.duration = null
            }
              , Dh = function xe() {
                Xd(this, xe),
                this.id = null,
                this.index = null,
                this.mediaType = null,
                this.streamIndex = null,
                this.presentationTimeOffset = null,
                this.startNumber = null,
                this.fragmentInfoType = null
            }
              , bh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.mediaType = null,
                this.t = null,
                this.type = null,
                this.startTime = null,
                this.availabilityStartTime = null,
                this.duration = null,
                this.quality = null,
                this.range = null,
                this.state = null
            }
              , wh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.loadingRequests = [],
                this.executedRequests = []
            };
            function Jc() {
                var xe, qt = this.context, Pe = Re(qt).getInstance(), Qe = void 0;
                function ei() {
                    Pe.trigger(bt.METRICS_CHANGED)
                }
                function sa(ra) {
                    Pe.trigger(bt.METRIC_CHANGED, {
                        mediaType: ra
                    }),
                    ei()
                }
                function la(ra, ni, Kt) {
                    Pe.trigger(bt.METRIC_UPDATED, {
                        mediaType: ra,
                        metric: ni,
                        value: Kt
                    }),
                    sa(ra)
                }
                function ha(ra, ni, Kt) {
                    Pe.trigger(bt.METRIC_ADDED, {
                        mediaType: ra,
                        metric: ni,
                        value: Kt
                    }),
                    sa(ra)
                }
                function ca(ra) {
                    var ni = void 0;
                    return Qe.hasOwnProperty(ra) ? ni = Qe[ra] : (ni = new gh,
                    Qe[ra] = ni),
                    ni
                }
                function pa(ra, ni, Kt) {
                    var oi = ca(ra);
                    oi[ni].push(Kt),
                    oi[ni].length > 1e3 && oi[ni].shift()
                }
                function ti(ra, ni, Kt) {
                    pa(ra, ni, Kt),
                    ha(ra, ni, Kt)
                }
                return xe = {
                    clearCurrentMetricsForType: function(ra) {
                        delete Qe[ra],
                        sa(ra)
                    },
                    clearAllCurrentMetrics: function() {
                        Qe = {},
                        ei()
                    },
                    getReadOnlyMetricsFor: function(ra) {
                        return Qe.hasOwnProperty(ra) ? Qe[ra] : null
                    },
                    getMetricsFor: ca,
                    addTcpConnection: function(ra, ni, Kt, oi, Ea, ri) {
                        var ya = new yh;
                        return ya.tcpid = ni,
                        ya.dest = Kt,
                        ya.topen = oi,
                        ya.tclose = Ea,
                        ya.tconnect = ri,
                        ti(ra, ae.TCP_CONNECTION, ya),
                        ya
                    },
                    addHttpRequest: function ra(ni, Kt, oi, Ea, ri, ya, Aa, wa, _a, Da, ua, ta, ma, ia) {
                        var na = new vl;
                        return ri && ri !== Ea && (ra(ni, null, oi, Ea, null, null, Aa, wa, null, null, null, ta, null, null),
                        na.actualurl = ri),
                        na.tcpid = Kt,
                        na.type = oi,
                        na.url = Ea,
                        na.range = Aa,
                        na.trequest = wa,
                        na.tresponse = _a,
                        na.responsecode = ua,
                        na._tfinish = Da,
                        na._stream = ni,
                        na._mediaduration = ta,
                        na._responseHeaders = ma,
                        na._serviceLocation = ya,
                        ia ? ia.forEach(function(va) {
                            (function(Sa, Na, Oa, Ia) {
                                var Ra = new kl;
                                Ra.s = Na,
                                Ra.d = Oa,
                                Ra.b = Ia,
                                Sa.trace.push(Ra),
                                Sa.interval || (Sa.interval = 0),
                                Sa.interval += Oa
                            }
                            )(na, va.s, va.d, va.b)
                        }) : (delete na.interval,
                        delete na.trace),
                        ti(ni, ae.HTTP_REQUEST, na),
                        na
                    },
                    addRepresentationSwitch: function(ra, ni, Kt, oi, Ea) {
                        var ri = new vh;
                        return ri.t = ni,
                        ri.mt = Kt,
                        ri.to = oi,
                        Ea ? ri.lto = Ea : delete ri.lto,
                        ti(ra, ae.TRACK_SWITCH, ri),
                        ri
                    },
                    addBufferLevel: function(ra, ni, Kt) {
                        var oi = new Eh;
                        return oi.t = ni,
                        oi.level = Kt,
                        ti(ra, ae.BUFFER_LEVEL, oi),
                        oi
                    },
                    addBufferState: function(ra, ni, Kt) {
                        var oi = new _h;
                        return oi.target = Kt,
                        oi.state = ni,
                        ti(ra, ae.BUFFER_STATE, oi),
                        oi
                    },
                    addDVRInfo: function(ra, ni, Kt, oi) {
                        var Ea = new Th;
                        return Ea.time = ni,
                        Ea.range = oi,
                        Ea.manifestInfo = Kt,
                        ti(ra, ae.DVR_INFO, Ea),
                        Ea
                    },
                    addDroppedFrames: function(ra, ni) {
                        var Kt = new Ah
                          , oi = ca(ra).DroppedFrames;
                        return Kt.time = ni.creationTime,
                        Kt.droppedFrames = ni.droppedVideoFrames,
                        oi.length > 0 && oi[oi.length - 1] == Kt ? oi[oi.length - 1] : (ti(ra, ae.DROPPED_FRAMES, Kt),
                        Kt)
                    },
                    addSchedulingInfo: function(ra, ni, Kt, oi, Ea, ri, ya, Aa, wa) {
                        var _a = new bh;
                        return _a.mediaType = ra,
                        _a.t = ni,
                        _a.type = Kt,
                        _a.startTime = oi,
                        _a.availabilityStartTime = Ea,
                        _a.duration = ri,
                        _a.quality = ya,
                        _a.range = Aa,
                        _a.state = wa,
                        ti(ra, ae.SCHEDULING_INFO, _a),
                        _a
                    },
                    addRequestsQueue: function(ra, ni, Kt) {
                        var oi = new wh;
                        oi.loadingRequests = ni,
                        oi.executedRequests = Kt,
                        ca(ra).RequestsQueue = oi,
                        ha(ra, ae.REQUESTS_QUEUE, oi)
                    },
                    addManifestUpdate: function(ra, ni, Kt, oi, Ea, ri, ya, Aa, wa, _a) {
                        var Da = new Sh;
                        return Da.mediaType = ra,
                        Da.type = ni,
                        Da.requestTime = Kt,
                        Da.fetchTime = oi,
                        Da.availabilityStartTime = Ea,
                        Da.presentationStartTime = ri,
                        Da.clientTimeOffset = ya,
                        Da.currentTime = Aa,
                        Da.buffered = wa,
                        Da.latency = _a,
                        pa(ie.STREAM, ae.MANIFEST_UPDATE, Da),
                        ha(ra, ae.MANIFEST_UPDATE, Da),
                        Da
                    },
                    updateManifestUpdateInfo: function(ra, ni) {
                        if (ra) {
                            for (var Kt in ni)
                                ra[Kt] = ni[Kt];
                            la(ra.mediaType, ae.MANIFEST_UPDATE, ra)
                        }
                    },
                    addManifestUpdateStreamInfo: function(ra, ni, Kt, oi, Ea) {
                        if (ra) {
                            var ri = new Ih;
                            return ri.id = ni,
                            ri.index = Kt,
                            ri.start = oi,
                            ri.duration = Ea,
                            ra.streamInfo.push(ri),
                            la(ra.mediaType, ae.MANIFEST_UPDATE_STREAM_INFO, ra),
                            ri
                        }
                        return null
                    },
                    addManifestUpdateRepresentationInfo: function(ra, ni, Kt, oi, Ea, ri, ya, Aa) {
                        if (ra) {
                            var wa = new Dh;
                            return wa.id = ni,
                            wa.index = Kt,
                            wa.streamIndex = oi,
                            wa.mediaType = Ea,
                            wa.startNumber = ya,
                            wa.fragmentInfoType = Aa,
                            wa.presentationTimeOffset = ri,
                            ra.representationInfo.push(wa),
                            la(ra.mediaType, ae.MANIFEST_UPDATE_TRACK_INFO, ra),
                            wa
                        }
                        return null
                    },
                    addPlayList: function(ra) {
                        var ni = ie.STREAM;
                        return ra.trace && Array.isArray(ra.trace) ? ra.trace.forEach(function(Kt) {
                            Kt.hasOwnProperty("subreplevel") && !Kt.subreplevel && delete Kt.subreplevel
                        }) : delete ra.trace,
                        ti(ni, ae.PLAY_LIST, ra),
                        ra
                    },
                    addDVBErrors: function(ra) {
                        return ti(ie.STREAM, ae.DVB_ERRORS, ra),
                        ra
                    },
                    setConfig: function(ra) {
                        ra && ra.adapter && ra.adapter
                    }
                },
                Qe = {},
                xe
            }
            Jc.__dashjs_factory_name = "MetricsModel";
            var Rh = $.a.getSingletonFactory(Jc);
            function ef() {
                var xe = void 0
                  , qt = void 0
                  , Pe = void 0
                  , Qe = void 0
                  , ei = this.context
                  , sa = aa(ei).getInstance().log
                  , la = Re(ei).getInstance()
                  , ha = [];
                function ca() {
                    xe && (xe.playbackRate = Qe || 1,
                    xe.removeEventListener("canplay", ca))
                }
                function pa() {
                    return ha.length > 0
                }
                function ti(Kt) {
                    var oi, Ea = ha.indexOf(Kt), ri = void 0;
                    Kt !== null && (Ea !== -1 && ha.splice(Ea, 1),
                    xe && pa() === !1 && xe.playbackRate === 0 && (oi = Qe || 1,
                    xe && (xe.readyState <= 2 && oi > 0 ? xe.addEventListener("canplay", ca) : xe.playbackRate = oi),
                    xe.paused || ((ri = document.createEvent("Event")).initEvent("playing", !0, !1),
                    xe.dispatchEvent(ri))))
                }
                function ra() {
                    if (xe && pa() && xe.playbackRate === 0) {
                        var Kt = document.createEvent("Event");
                        Kt.initEvent("waiting", !0, !1),
                        xe.dispatchEvent(Kt)
                    }
                }
                function ni() {
                    return xe ? xe.buffered : null
                }
                return {
                    initialize: function() {
                        la.on(bt.PLAYBACK_PLAYING, ra, this)
                    },
                    setCurrentTime: function(Kt) {
                        if (xe) {
                            if (xe.currentTime == Kt)
                                return;
                            try {
                                xe.currentTime = Kt
                            } catch (oi) {
                                xe.readyState === 0 && oi.code === oi.INVALID_STATE_ERR && setTimeout(function() {
                                    xe.currentTime = Kt
                                }, 400)
                            }
                        }
                    },
                    play: function() {
                        if (xe) {
                            xe.autoplay = !0;
                            var Kt = xe.play();
                            return Kt && typeof Promise < "u" && Kt instanceof Promise && Kt.catch(function(oi) {
                                oi.name === "NotAllowedError" && la.trigger(bt.PLAYBACK_NOT_ALLOWED),
                                sa("Caught pending play exception - continuing (" + oi + ")")
                            }),
                            Kt
                        }
                    },
                    isPaused: function() {
                        return xe ? xe.paused : null
                    },
                    pause: function() {
                        xe && (xe.pause(),
                        xe.autoplay = !1)
                    },
                    isSeeking: function() {
                        return xe ? xe.seeking : null
                    },
                    getTime: function() {
                        return xe ? xe.currentTime : null
                    },
                    getPlaybackRate: function() {
                        return xe ? xe.playbackRate : null
                    },
                    getPlayedRanges: function() {
                        return xe ? xe.played : null
                    },
                    getEnded: function() {
                        return xe ? xe.ended : null
                    },
                    setStallState: function(Kt, oi) {
                        (function(Ea, ri) {
                            ri ? function(ya) {
                                var Aa = void 0;
                                ya === null || xe.seeking || ha.indexOf(ya) !== -1 || (ha.push(ya),
                                xe && ha.length === 1 && ((Aa = document.createEvent("Event")).initEvent("waiting", !0, !1),
                                Qe = xe.playbackRate,
                                xe.dispatchEvent(Aa)))
                            }(Ea) : ti(Ea)
                        }
                        )(Kt, oi)
                    },
                    getElement: function() {
                        return xe
                    },
                    setElement: function(Kt) {
                        if (Kt != null && (!Kt || !Kt.nodeName || Kt.nodeName !== "VIDEO" && Kt.nodeName !== "AUDIO" && Kt.nodeName !== "BWP-VIDEO"))
                            throw "element is not video or audio DOM type!";
                        (xe = Kt) && (xe.preload = "auto")
                    },
                    setSource: function(Kt) {
                        xe && (Kt ? xe.src = Kt : (xe.removeAttribute("src"),
                        xe.load()))
                    },
                    getSource: function() {
                        return xe ? xe.src : null
                    },
                    getVideoContainer: function() {
                        return Pe
                    },
                    setVideoContainer: function(Kt) {
                        Pe = Kt
                    },
                    getTTMLRenderingDiv: function() {
                        return qt
                    },
                    setTTMLRenderingDiv: function(Kt) {
                        (qt = Kt).style.position = "absolute",
                        qt.style.display = "flex",
                        qt.style.overflow = "hidden",
                        qt.style.pointerEvents = "none",
                        qt.style.top = 0,
                        qt.style.left = 0
                    },
                    getPlaybackQuality: function() {
                        if (!xe)
                            return null;
                        var Kt = "webkitDroppedFrameCount"in xe && "webkitDecodedFrameCount"in xe
                          , oi = null;
                        return "getVideoPlaybackQuality"in xe ? oi = xe.getVideoPlaybackQuality() : Kt && (oi = {
                            droppedVideoFrames: xe.webkitDroppedFrameCount,
                            totalVideoFrames: xe.webkitDroppedFrameCount + xe.webkitDecodedFrameCount,
                            creationTime: new Date
                        }),
                        oi
                    },
                    addEventListener: function(Kt, oi) {
                        xe && xe.addEventListener(Kt, oi)
                    },
                    removeEventListener: function(Kt, oi) {
                        xe && xe.removeEventListener(Kt, oi)
                    },
                    getReadyState: function() {
                        return xe ? xe.readyState : NaN
                    },
                    getBufferRange: ni,
                    getClientWidth: function() {
                        return xe ? xe.clientWidth : NaN
                    },
                    getClientHeight: function() {
                        return xe ? xe.clientHeight : NaN
                    },
                    getTextTracks: function() {
                        return xe ? xe.textTracks : []
                    },
                    getTextTrack: function(Kt, oi, Ea, ri, ya) {
                        if (xe) {
                            for (var Aa = 0; Aa < xe.textTracks.length; Aa++)
                                if (xe.textTracks[Aa].kind === Kt && (!oi || xe.textTracks[Aa].label == oi) && xe.textTracks[Aa].language === Ea && xe.textTracks[Aa].isTTML === ri && xe.textTracks[Aa].isEmbedded === ya)
                                    return xe.textTracks[Aa]
                        }
                        return null
                    },
                    addTextTrack: function(Kt, oi, Ea) {
                        return xe ? xe.addTextTrack(Kt, oi, Ea) : null
                    },
                    appendChild: function(Kt) {
                        xe && (xe.appendChild(Kt),
                        Kt.isTTML !== void 0 && (xe.textTracks[xe.textTracks.length - 1].isTTML = Kt.isTTML,
                        xe.textTracks[xe.textTracks.length - 1].isEmbedded = Kt.isEmbedded))
                    },
                    removeChild: function(Kt) {
                        xe && xe.removeChild(Kt)
                    },
                    getVideoWidth: function() {
                        return xe ? xe.videoWidth : NaN
                    },
                    getVideoHeight: function() {
                        return xe ? xe.videoHeight : NaN
                    },
                    getVideoRelativeOffsetTop: function() {
                        return xe && xe.parentNode ? xe.getBoundingClientRect().top - xe.parentNode.getBoundingClientRect().top : NaN
                    },
                    getVideoRelativeOffsetLeft: function() {
                        return xe && xe.parentNode ? xe.getBoundingClientRect().left - xe.parentNode.getBoundingClientRect().left : NaN
                    },
                    setDataOffsetAttr: function(Kt) {
                        xe && xe.setAttribute("data-offset", Kt)
                    },
                    getDuration: function() {
                        return xe ? xe.duration : null
                    },
                    getVideoBufferRanges: function() {
                        var Kt = ni();
                        if (Kt) {
                            for (var oi = [], Ea = Kt.length, ri = 0; ri < Ea; ri++)
                                oi.push({
                                    start: Kt.start(ri),
                                    end: Kt.end(ri)
                                });
                            return oi
                        }
                        return []
                    },
                    reset: function() {
                        la.off(bt.PLAYBACK_PLAYING, ra, this)
                    }
                }
            }
            ef.__dashjs_factory_name = "VideoModel";
            var Nh = $.a.getSingletonFactory(ef)
              , Ch = [{
                oldKey: "dashjs_vbitrate",
                newKey: "dashjs_video_bitrate"
            }, {
                oldKey: "dashjs_abitrate",
                newKey: "dashjs_audio_bitrate"
            }, {
                oldKey: "dashjs_vsettings",
                newKey: "dashjs_video_settings"
            }, {
                oldKey: "dashjs_asettings",
                newKey: "dashjs_audio_settings"
            }]
              , tf = "dashjs_?_bitrate"
              , nf = "dashjs_?_settings"
              , pd = "localStorage"
              , rf = "LastBitrate"
              , of = "LastMediaSettings";
            function af(xe) {
                xe = xe || {};
                var qt, Pe = this.context, Qe = aa(Pe).getInstance().log, ei = xe.mediaPlayerModel, sa = void 0;
                function la(ti) {
                    if (sa !== void 0)
                        return sa;
                    sa = !1;
                    var ra = void 0;
                    try {
                        typeof window < "u" && (ra = window[ti])
                    } catch (ni) {
                        return Qe("Warning: DOMStorage access denied: " + ni.message),
                        sa
                    }
                    if (!ra || ti !== pd && ti !== "sessionStorage")
                        return sa;
                    try {
                        ra.setItem("1", "1"),
                        ra.removeItem("1"),
                        sa = !0
                    } catch (ni) {
                        Qe("Warning: DOMStorage is supported, but cannot be used: " + ni.message)
                    }
                    return sa
                }
                function ha() {
                    var ti = 6e5;
                    return Math.round(new Date().getTime() / ti) * ti
                }
                function ca(ti, ra) {
                    return la(ti) && ei["get" + ra + "CachingInfo"]().enabled
                }
                function pa() {
                    if (!ei || !ei.hasOwnProperty("getLastMediaSettingsCachingInfo"))
                        throw new Error("Missing config parameter(s)")
                }
                return qt = {
                    getSavedBitrateSettings: function(ti) {
                        var ra = NaN;
                        if (pa(),
                        ca(pd, rf)) {
                            var ni = tf.replace(/\?/, ti);
                            try {
                                var Kt = JSON.parse(localStorage.getItem(ni)) || {}
                                  , oi = new Date().getTime() - parseInt(Kt.timestamp, 10) >= ei.getLastMediaSettingsCachingInfo().ttl || !1
                                  , Ea = parseFloat(Kt.bitrate);
                                isNaN(Ea) || oi ? oi && localStorage.removeItem(ni) : (ra = Ea,
                                Qe("Last saved bitrate for " + ti + " was " + Ea))
                            } catch (ri) {
                                return null
                            }
                        }
                        return ra
                    },
                    setSavedBitrateSettings: function(ti, ra) {
                        if (ca(pd, rf) && ra) {
                            var ni = tf.replace(/\?/, ti);
                            try {
                                localStorage.setItem(ni, JSON.stringify({
                                    bitrate: ra.toFixed(3),
                                    timestamp: ha()
                                }))
                            } catch (Kt) {
                                Qe(Kt.message)
                            }
                        }
                    },
                    getSavedMediaSettings: function(ti) {
                        if (pa(),
                        !ca(pd, of))
                            return null;
                        var ra = null
                          , ni = nf.replace(/\?/, ti);
                        try {
                            var Kt = JSON.parse(localStorage.getItem(ni)) || {}
                              , oi = new Date().getTime() - parseInt(Kt.timestamp, 10) >= ei.getLastMediaSettingsCachingInfo().ttl || !1;
                            ra = Kt.settings,
                            oi && (localStorage.removeItem(ni),
                            ra = null)
                        } catch (Ea) {
                            return null
                        }
                        return ra
                    },
                    setSavedMediaSettings: function(ti, ra) {
                        if (ca(pd, of)) {
                            var ni = nf.replace(/\?/, ti);
                            try {
                                localStorage.setItem(ni, JSON.stringify({
                                    settings: ra,
                                    timestamp: ha()
                                }))
                            } catch (Kt) {
                                Qe(Kt.message)
                            }
                        }
                    }
                },
                la(pd) && Ch.forEach(function(ti) {
                    var ra = localStorage.getItem(ti.oldKey);
                    if (ra) {
                        localStorage.removeItem(ti.oldKey);
                        try {
                            localStorage.setItem(ti.newKey, ra)
                        } catch (ni) {
                            Qe(ni.message)
                        }
                    }
                }),
                qt
            }
            af.__dashjs_factory_name = "DOMStorage";
            var Oh = $.a.getSingletonFactory(af)
              , Mh = ve(5)
              , sf = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.id = null,
                this.quality = null,
                this.DVRWindow = null,
                this.fragmentDuration = null,
                this.mediaInfo = null,
                this.MSETimeOffset = null
            }
              , lf = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.id = null,
                this.index = null,
                this.type = null,
                this.streamInfo = null,
                this.representationCount = 0,
                this.lang = null,
                this.viewpoint = null,
                this.accessibility = null,
                this.audioChannelConfiguration = null,
                this.roles = null,
                this.codec = null,
                this.mimeType = null,
                this.contentProtection = null,
                this.isText = !1,
                this.KID = null,
                this.bitrateList = null
            }
              , uf = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.id = null,
                this.index = null,
                this.start = NaN,
                this.duration = NaN,
                this.manifestInfo = null,
                this.isLast = !0
            }
              , Lh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.DVRWindowSize = NaN,
                this.loadedTime = null,
                this.availableFrom = null,
                this.minBufferTime = NaN,
                this.duration = NaN,
                this.isDynamic = !1,
                this.maxFragmentDuration = null
            }
              , df = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.duration = NaN,
                this.presentationTime = NaN,
                this.id = NaN,
                this.messageData = "",
                this.eventStream = null,
                this.presentationTimeDelta = NaN
            }
              , kh = ve(14)
              , Ph = ve.n(kh);
            function cf() {
                var xe, qt = void 0, Pe = void 0, Qe = void 0;
                function ei(ri, ya) {
                    return ya && ri ? ya.getRepresentationForQuality(ri.quality) : null
                }
                function sa(ri) {
                    return ri && ri.streamInfo && ri.streamInfo.id !== void 0 && Qe[ri.streamInfo.id] ? Qe[ri.streamInfo.id][ri.index] : null
                }
                function la(ri, ya) {
                    for (var Aa = ya.length, wa = 0; wa < Aa; wa++) {
                        var _a = ya[wa];
                        if (ri.id === _a.id)
                            return _a
                    }
                    return null
                }
                function ha(ri) {
                    var ya = new sf
                      , Aa = ri.adaptation.period.mpd.manifest.Period_asArray[ri.adaptation.period.index].AdaptationSet_asArray[ri.adaptation.index]
                      , wa = qt.getRepresentationFor(ri.index, Aa);
                    return ya.id = ri.id,
                    ya.quality = ri.index,
                    ya.bandwidth = qt.getBandwidth(wa),
                    ya.DVRWindow = ri.segmentAvailabilityRange,
                    ya.fragmentDuration = ri.segmentDuration || (ri.segments && ri.segments.length > 0 ? ri.segments[0].duration : NaN),
                    ya.MSETimeOffset = ri.MSETimeOffset,
                    ya.useCalculatedLiveEdgeTime = ri.useCalculatedLiveEdgeTime,
                    ya.mediaInfo = ca(ri.adaptation),
                    ya
                }
                function ca(ri) {
                    var ya, Aa = new lf, wa = ri.period.mpd.manifest.Period_asArray[ri.period.index].AdaptationSet_asArray[ri.index];
                    return Aa.id = ri.id,
                    Aa.index = ri.index,
                    Aa.type = ri.type,
                    Aa.streamInfo = ti(ri.period),
                    Aa.representationCount = qt.getRepresentationCount(wa),
                    Aa.lang = qt.getLanguageForAdaptation(wa),
                    ya = qt.getViewpointForAdaptation(wa),
                    Aa.viewpoint = ya ? ya.value : void 0,
                    Aa.accessibility = qt.getAccessibilityForAdaptation(wa).map(function(_a) {
                        var Da = _a.value
                          , ua = Da;
                        return _a.schemeIdUri && _a.schemeIdUri.search("cea-608") >= 0 && Ph.a !== void 0 && (ua = Da ? "cea-608:" + Da : "cea-608",
                        Aa.embeddedCaptions = !0),
                        ua
                    }),
                    Aa.audioChannelConfiguration = qt.getAudioChannelConfigurationForAdaptation(wa).map(function(_a) {
                        return _a.value
                    }),
                    Aa.roles = qt.getRolesForAdaptation(wa).map(function(_a) {
                        return _a.value
                    }),
                    Aa.codec = qt.getCodec(wa),
                    Aa.mimeType = qt.getMimeType(wa),
                    Aa.contentProtection = qt.getContentProtectionData(wa),
                    Aa.bitrateList = qt.getBitrateListForAdaptation(wa),
                    Aa.contentProtection && Aa.contentProtection.forEach(function(_a) {
                        _a.KID = qt.getKID(_a)
                    }),
                    Aa.isText = qt.getIsTextTrack(Aa.mimeType),
                    Aa
                }
                function pa(ri, ya, Aa) {
                    ri.id = ya,
                    ri.index = 100 + parseInt(ya.substring(2, 3)),
                    ri.type = ie.EMBEDDED_TEXT,
                    ri.codec = "cea-608-in-SEI",
                    ri.isText = !0,
                    ri.isEmbedded = !0,
                    ri.lang = Aa,
                    ri.roles = ["caption"]
                }
                function ti(ri) {
                    var ya, Aa, wa = new uf;
                    return wa.id = ri.id,
                    wa.index = ri.index,
                    wa.start = ri.start,
                    wa.duration = ri.duration,
                    wa.manifestInfo = (ya = ri.mpd,
                    (Aa = new Lh).DVRWindowSize = ya.timeShiftBufferDepth,
                    Aa.loadedTime = ya.manifest.loadedTime,
                    Aa.availableFrom = ya.availabilityStartTime,
                    Aa.minBufferTime = ya.manifest.minBufferTime,
                    Aa.maxFragmentDuration = ya.maxSegmentDuration,
                    Aa.duration = qt.getDuration(ya.manifest),
                    Aa.isDynamic = qt.getIsDynamic(ya.manifest),
                    Aa),
                    wa.isLast = ri.mpd.manifest.Period_asArray.length === 1 || Math.abs(wa.start + wa.duration - wa.manifestInfo.duration) < 1,
                    wa
                }
                function ra() {
                    if (!qt || !qt.hasOwnProperty("getMpd") || !qt.hasOwnProperty("getRegularPeriods"))
                        throw new Error("setConfig function has to be called previously")
                }
                function ni(ri) {
                    if (!(ri && ri.hasOwnProperty("getRepresentationController") && ri.hasOwnProperty("getIndexHandler") && ri.hasOwnProperty("getMediaInfo") && ri.hasOwnProperty("getType") && ri.hasOwnProperty("getStreamInfo")))
                        throw new Error("streamProcessor parameter is missing or malformed!")
                }
                function Kt(ri) {
                    if (!ri || !ri.hasOwnProperty("getRepresentationForQuality") || !ri.hasOwnProperty("getCurrentRepresentation"))
                        throw new Error("representationController parameter is missing or malformed!")
                }
                function oi(ri) {
                    if (!(ri !== null && !isNaN(ri) && ri % 1 == 0))
                        throw new Error("quality argument is not an integer")
                }
                function Ea() {
                    Pe = [],
                    Qe = {}
                }
                return xe = {
                    convertDataToRepresentationInfo: ha,
                    getDataForMedia: sa,
                    getStreamsInfo: function(ri, ya) {
                        var Aa = []
                          , wa = Pe;
                        if (ri) {
                            ra();
                            var _a = qt.getMpd(ri);
                            wa = qt.getRegularPeriods(_a)
                        }
                        ya || (ya = wa.length);
                        for (var Da = 0; Da < ya; Da++)
                            Aa.push(ti(wa[Da]));
                        return Aa
                    },
                    getMediaInfoForType: function(ri, ya) {
                        if (Pe.length === 0)
                            return null;
                        var Aa = Pe[0].mpd.manifest
                          , wa = qt.getAdaptationForType(Aa, ri.index, ya, ri);
                        if (!wa)
                            return null;
                        var _a = la(ri, Pe)
                          , Da = _a.id
                          , ua = qt.getIndexForAdaptation(wa, Aa, ri.index);
                        return Qe[Da] = Qe[Da] || qt.getAdaptationsForPeriod(_a),
                        ca(Qe[Da][ua])
                    },
                    getAllMediaInfoForType: function(ri, ya, Aa) {
                        var wa, _a = Pe, Da = Aa, ua = [], ta = void 0, ma = void 0, ia = void 0, na = void 0, va = void 0;
                        if (Da) {
                            ra();
                            var Sa = qt.getMpd(Da);
                            _a = qt.getRegularPeriods(Sa)
                        } else {
                            if (!(Pe.length > 0))
                                return ua;
                            Da = Pe[0].mpd.manifest
                        }
                        var Na = la(ri, _a)
                          , Oa = Na.id
                          , Ia = qt.getAdaptationsForType(Da, ri.index, ya !== ie.EMBEDDED_TEXT ? ya : ie.VIDEO);
                        if (!Ia)
                            return ua;
                        for (Qe[Oa] = Qe[Oa] || qt.getAdaptationsForPeriod(Na),
                        na = 0,
                        wa = Ia.length; na < wa; na++)
                            if (ta = Ia[na],
                            ia = qt.getIndexForAdaptation(ta, Da, ri.index),
                            ma = ca(Qe[Oa][ia]),
                            ya === ie.EMBEDDED_TEXT) {
                                var Ra = ma.accessibility.length;
                                for (va = 0; va < Ra; va++)
                                    if (ma) {
                                        var ka = ma.accessibility[va];
                                        if (ka.indexOf("cea-608:") === 0) {
                                            var Va = ka.substring(8).split(";");
                                            if (Va[0].substring(0, 2) === "CC")
                                                for (va = 0; va < Va.length; va++)
                                                    ma || (ma = ca.call(this, Qe[Oa][ia])),
                                                    pa(ma, Va[va].substring(0, 3), Va[va].substring(4)),
                                                    ua.push(ma),
                                                    ma = null;
                                            else
                                                for (va = 0; va < Va.length; va++)
                                                    ma || (ma = ca.call(this, Qe[Oa][ia])),
                                                    pa(ma, "CC" + (va + 1), Va[va]),
                                                    ua.push(ma),
                                                    ma = null
                                        } else
                                            ka.indexOf("cea-608") === 0 && (pa(ma, ie.CC1, "eng"),
                                            ua.push(ma),
                                            ma = null)
                                    }
                            } else
                                ya === ie.IMAGE ? (ma.type = ie.IMAGE,
                                ua.push(ma),
                                ma = null) : ma && ua.push(ma);
                        return ua
                    },
                    getCurrentRepresentationInfo: function(ri) {
                        Kt(ri);
                        var ya = ri.getCurrentRepresentation();
                        return ya ? ha(ya) : null
                    },
                    getRepresentationInfoForQuality: function(ri, ya) {
                        Kt(ri),
                        oi(ya);
                        var Aa = ri.getRepresentationForQuality(ya);
                        return Aa ? ha(Aa) : null
                    },
                    updateData: function(ri) {
                        ni(ri);
                        var ya, Aa = la(ri.getStreamInfo(), Pe), wa = ri.getMediaInfo(), _a = sa(wa), Da = ri.getType(), ua = void 0;
                        ya = wa ? wa.id : null,
                        Pe.length > 0 && (ua = ya ? qt.getAdaptationForId(ya, Pe[0].mpd.manifest, Aa.index) : qt.getAdaptationForIndex(wa.index, Pe[0].mpd.manifest, Aa.index),
                        ri.getRepresentationController().updateData(ua, _a, Da))
                    },
                    getInitRequest: function(ri, ya) {
                        var Aa, wa = void 0, _a = void 0;
                        return ni(ri),
                        oi(ya),
                        wa = ri.getRepresentationController(),
                        _a = ri.getIndexHandler(),
                        Aa = wa ? wa.getRepresentationForQuality(ya) : null,
                        _a ? _a.getInitRequest(Aa) : null
                    },
                    getNextFragmentRequest: function(ri, ya) {
                        var Aa, wa = void 0;
                        return ni(ri),
                        Aa = ei(ya, ri.getRepresentationController()),
                        (wa = ri.getIndexHandler()) ? wa.getNextSegmentRequest(Aa) : null
                    },
                    getFragmentRequestForTime: function(ri, ya, Aa, wa) {
                        var _a, Da = void 0;
                        return ni(ri),
                        _a = ei(ya, ri.getRepresentationController()),
                        (Da = ri.getIndexHandler()) ? Da.getSegmentRequestForTime(_a, Aa, wa) : null
                    },
                    generateFragmentRequestForTime: function(ri, ya, Aa) {
                        var wa, _a = void 0;
                        return ni(ri),
                        wa = ei(ya, ri.getRepresentationController()),
                        (_a = ri.getIndexHandler()) ? _a.generateSegmentRequestForTime(wa, Aa) : null
                    },
                    getIndexHandlerTime: function(ri) {
                        ni(ri);
                        var ya = ri.getIndexHandler();
                        return ya ? ya.getCurrentTime() : NaN
                    },
                    setIndexHandlerTime: function(ri, ya) {
                        ni(ri);
                        var Aa = ri.getIndexHandler();
                        Aa && Aa.setCurrentTime(ya)
                    },
                    getEventsFor: function(ri, ya) {
                        var Aa = [];
                        if (Pe.length === 0)
                            return Aa;
                        var wa = Pe[0].mpd.manifest;
                        return ri instanceof uf ? Aa = qt.getEventsForPeriod(la(ri, Pe)) : ri instanceof lf ? Aa = qt.getEventStreamForAdaptationSet(wa, sa(ri)) : ri instanceof sf && (Aa = qt.getEventStreamForRepresentation(wa, ei(ri, ya.getRepresentationController()))),
                        Aa
                    },
                    getEvent: function(ri, ya, Aa) {
                        if (!ri || !ya)
                            return null;
                        var wa = new df
                          , _a = ri.scheme_id_uri
                          , Da = ri.value
                          , ua = ri.timescale
                          , ta = ri.presentation_time_delta
                          , ma = ri.event_duration
                          , ia = ri.id
                          , na = ri.message_data
                          , va = Aa * ua + ta;
                        return ya[_a] ? (wa.eventStream = ya[_a],
                        wa.eventStream.value = Da,
                        wa.eventStream.timescale = ua,
                        wa.duration = ma,
                        wa.id = ia,
                        wa.presentationTime = va,
                        wa.messageData = na,
                        wa.presentationTimeDelta = ta,
                        wa) : null
                    },
                    setConfig: function(ri) {
                        ri && ri.dashManifestModel && (qt = ri.dashManifestModel)
                    },
                    updatePeriods: function(ri) {
                        if (!ri)
                            return null;
                        ra();
                        var ya = qt.getMpd(ri);
                        Pe = qt.getRegularPeriods(ya),
                        Qe = {}
                    },
                    reset: Ea
                },
                Ea(),
                xe
            }
            cf.__dashjs_factory_name = "DashAdapter";
            var xh = $.a.getSingletonFactory(cf)
              , Fh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.period = null,
                this.index = -1,
                this.type = null
            }
              , ff = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.id = null,
                this.index = -1,
                this.duration = NaN,
                this.start = NaN,
                this.mpd = null
            };
            ff.DEFAULT_ID = "defaultId";
            var Cd = ff
              , Bh = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.manifest = null,
                this.suggestedPresentationDelay = 0,
                this.availabilityStartTime = null,
                this.availabilityEndTime = Number.POSITIVE_INFINITY,
                this.timeShiftBufferDepth = Number.POSITIVE_INFINITY,
                this.maxSegmentDuration = Number.POSITIVE_INFINITY,
                this.minimumUpdatePeriod = NaN,
                this.mediaPresentationDuration = NaN
            }
              , hf = function xe() {
                (function(qt, Pe) {
                    if (!(qt instanceof Pe))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, xe),
                this.adaptionSet = null,
                this.representation = null,
                this.period = null,
                this.timescale = 1,
                this.value = "",
                this.schemeIdUri = ""
            };
            function pf(xe) {
                xe = xe || {};
                var qt = this.context
                  , Pe = dd(qt).getInstance()
                  , Qe = xe.mediaController
                  , ei = xe.timelineConverter
                  , sa = xe.adapter
                  , la = Number.isInteger || function(na) {
                    return typeof na == "number" && isFinite(na) && Math.floor(na) === na
                }
                ;
                function ha(na, va) {
                    var Sa = void 0
                      , Na = void 0
                      , Oa = void 0
                      , Ia = void 0
                      , Ra = void 0
                      , ka = !1
                      , Va = !1;
                    if (!na)
                        throw new Error("adaptation is not defined");
                    if (!va)
                        throw new Error("type is not defined");
                    if (na.hasOwnProperty("ContentComponent_asArray") && na.ContentComponent_asArray,
                    Ia = va !== ie.TEXT ? new RegExp(va) : new RegExp("(vtt|ttml)"),
                    na.Representation_asArray && na.Representation_asArray.length && na.Representation_asArray.length > 0 && na.Representation_asArray[0].hasOwnProperty(Ga.CODECS) && ((Ra = na.Representation_asArray[0].codecs).search(ie.STPP) === 0 || Ra.search(ie.WVTT) === 0))
                        return va === ie.FRAGMENTED_TEXT;
                    if (na.hasOwnProperty(Ga.MIME_TYPE) && (ka = Ia.test(na.mimeType),
                    Va = !0),
                    !Va)
                        for (Sa = 0,
                        Na = na.Representation_asArray && na.Representation_asArray.length ? na.Representation_asArray.length : 0; !Va && Sa < Na; )
                            (Oa = na.Representation_asArray[Sa]).hasOwnProperty(Ga.MIME_TYPE) && (ka = Ia.test(Oa.mimeType),
                            Va = !0),
                            Sa++;
                    return ka
                }
                function ca(na) {
                    return ha(na, ie.AUDIO)
                }
                function pa(na) {
                    return ha(na, ie.VIDEO)
                }
                function ti(na) {
                    return ha(na, ie.FRAGMENTED_TEXT)
                }
                function ra(na) {
                    return ha(na, ie.MUXED)
                }
                function ni(na) {
                    return ha(na, ie.IMAGE)
                }
                function Kt(na) {
                    return na === "text/vtt" || na === "application/ttml+xml"
                }
                function oi(na) {
                    return na && na.hasOwnProperty(Ga.ROLE_ASARRAY) ? na.Role_asArray : []
                }
                function Ea(na) {
                    return oi(na).filter(function(va) {
                        return va.value === Ga.MAIN
                    })[0]
                }
                function ri() {
                    return function(na, va) {
                        return na.bandwidth - va.bandwidth
                    }
                }
                function ya(na) {
                    return na && na.Representation_asArray !== void 0 && na.Representation_asArray !== null && na.Representation_asArray.sort(function(va, Sa) {
                        return va.bandwidth - Sa.bandwidth
                    }),
                    na
                }
                function Aa(na, va, Sa) {
                    var Na, Oa = na && na.Period_asArray && la(va) && na.Period_asArray[va] ? na.Period_asArray[va].AdaptationSet_asArray : [], Ia = void 0, Ra = [];
                    for (Ia = 0,
                    Na = Oa.length; Ia < Na; Ia++)
                        ha(Oa[Ia], Sa) && Ra.push(ya(Oa[Ia]));
                    return Ra
                }
                function wa(na) {
                    var va = !1;
                    return na && na.hasOwnProperty("type") && (va = na.type === Ga.DYNAMIC),
                    va
                }
                function _a(na) {
                    return na && na.EssentialProperty_asArray && na.EssentialProperty_asArray.length ? na.EssentialProperty_asArray.map(function(va) {
                        return {
                            schemeIdUri: va.schemeIdUri,
                            value: va.value
                        }
                    }) : null
                }
                function Da(na) {
                    if (na && na.period && la(na.period.index)) {
                        var va = na.period.mpd.manifest.Period_asArray[na.period.index];
                        if (va && va.AdaptationSet_asArray && la(na.index))
                            return ya(va.AdaptationSet_asArray[na.index])
                    }
                }
                function ua(na) {
                    var va = na.S_asArray[na.S_asArray.length - 1];
                    return !va.hasOwnProperty("r") || va.r >= 0
                }
                function ta(na, va) {
                    if (!na)
                        throw new Error("Period cannot be null or undefined");
                    var Sa = Cd.DEFAULT_ID + "_" + va;
                    return na.hasOwnProperty(Ga.ID) && na.id.length > 0 && na.id !== "__proto__" && (Sa = na.id),
                    Sa
                }
                function ma(na, va) {
                    var Sa = []
                      , Na = void 0;
                    if (!na)
                        return Sa;
                    for (Na = 0; Na < na.length; Na++) {
                        var Oa = new hf;
                        if (Oa.timescale = 1,
                        Oa.representation = va,
                        !na[Na].hasOwnProperty(ie.SCHEME_ID_URI))
                            throw new Error("Invalid EventStream. SchemeIdUri has to be set");
                        Oa.schemeIdUri = na[Na].schemeIdUri,
                        na[Na].hasOwnProperty(Ga.TIMESCALE) && (Oa.timescale = na[Na].timescale),
                        na[Na].hasOwnProperty(Ga.VALUE) && (Oa.value = na[Na].value),
                        Sa.push(Oa)
                    }
                    return Sa
                }
                function ia(na) {
                    var va = []
                      , Sa = na.BaseURL_asArray || [na.baseUri]
                      , Na = !1;
                    return Sa.some(function(Oa) {
                        if (Oa) {
                            var Ia = new Yd
                              , Ra = Oa.__text || Oa;
                            Pe.isRelative(Ra) && (Na = !0,
                            na.baseUri && (Ra = Pe.resolve(Ra, na.baseUri))),
                            Ia.url = Ra;
                            for (var ka = [], Va = 1; Oa["backupUrl" + Va]; Va++)
                                ka.push(Oa["backupUrl" + Va]);
                            return Ia.urls = [Ia.url].concat(ka),
                            Oa.hasOwnProperty(Ga.SERVICE_LOCATION) && Oa.serviceLocation.length ? Ia.serviceLocation = Oa.serviceLocation : Ia.serviceLocation = Ra,
                            Oa.hasOwnProperty(Ga.DVB_PRIORITY) && (Ia.dvb_priority = Oa[Ga.DVB_PRIORITY]),
                            Oa.hasOwnProperty(Ga.DVB_WEIGHT) && (Ia.dvb_weight = Oa[Ga.DVB_WEIGHT]),
                            Oa.hasOwnProperty(Ga.AVAILABILITY_TIME_OFFSET) && (Ia.availabilityTimeOffset = Oa[Ga.AVAILABILITY_TIME_OFFSET]),
                            Oa.hasOwnProperty(Ga.AVAILABILITY_TIME_COMPLETE) && (Ia.availabilityTimeComplete = Oa[Ga.AVAILABILITY_TIME_COMPLETE] !== "false"),
                            va.push(Ia),
                            Na
                        }
                    }),
                    va
                }
                return {
                    getIsTypeOf: ha,
                    getIsAudio: ca,
                    getIsVideo: pa,
                    getIsText: function(na) {
                        return ha(na, ie.TEXT)
                    },
                    getIsMuxed: ra,
                    getIsTextTrack: Kt,
                    getIsFragmentedText: ti,
                    getIsImage: ni,
                    getIsMain: Ea,
                    getLanguageForAdaptation: function(na) {
                        var va = "";
                        return na && na.hasOwnProperty(Ga.LANG) && (va = na.lang.replace(/[^A-Za-z0-9-]/g, "")),
                        va
                    },
                    getViewpointForAdaptation: function(na) {
                        return na && na.hasOwnProperty(Ga.VIEWPOINT) ? na.Viewpoint : null
                    },
                    getRolesForAdaptation: oi,
                    getAccessibilityForAdaptation: function(na) {
                        return na && na.hasOwnProperty(Ga.ACCESSIBILITY_ASARRAY) ? na.Accessibility_asArray : []
                    },
                    getAudioChannelConfigurationForAdaptation: function(na) {
                        return na && na.hasOwnProperty(Ga.AUDIOCHANNELCONFIGURATION_ASARRAY) ? na.AudioChannelConfiguration_asArray : []
                    },
                    getAdaptationForIndex: function(na, va, Sa) {
                        var Na = va && va.Period_asArray && la(Sa) && va.Period_asArray[Sa] ? va.Period_asArray[Sa].AdaptationSet_asArray : null;
                        return Na && la(na) ? Na[na] : null
                    },
                    getIndexForAdaptation: function(na, va, Sa) {
                        var Na = va && va.Period_asArray && la(Sa) && va.Period_asArray[Sa] ? va.Period_asArray[Sa].AdaptationSet_asArray : []
                          , Oa = Na.length;
                        if (na) {
                            for (var Ia = 0; Ia < Oa; Ia++)
                                if (Cc(qt).getInstance().areEqual(Na[Ia], na))
                                    return Ia
                        }
                        return -1
                    },
                    getAdaptationForId: function(na, va, Sa) {
                        var Na, Oa = va && va.Period_asArray && la(Sa) && va.Period_asArray[Sa] ? va.Period_asArray[Sa].AdaptationSet_asArray : [], Ia = void 0;
                        for (Ia = 0,
                        Na = Oa.length; Ia < Na; Ia++)
                            if (Oa[Ia].hasOwnProperty(Ga.ID) && Oa[Ia].id === na)
                                return Oa[Ia];
                        return null
                    },
                    getAdaptationsForType: Aa,
                    getAdaptationForType: function(na, va, Sa, Na) {
                        var Oa = Aa(na, va, Sa);
                        if (!Oa || Oa.length === 0)
                            return null;
                        if (Oa.length > 1 && Na) {
                            var Ia = Qe.getCurrentTrackFor(Sa, Na)
                              , Ra = sa.getAllMediaInfoForType(Na, Sa);
                            if (Ia) {
                                for (var ka = 0, Va = Oa.length; ka < Va; ka++)
                                    if (Qe.isTracksEqual(Ia, Ra[ka]))
                                        return Oa[ka]
                            }
                            for (var Ha = 0, xa = Oa.length; Ha < xa; Ha++)
                                if (Ea(Oa[Ha]))
                                    return Oa[Ha]
                        }
                        return Oa[0]
                    },
                    getCodec: function(na, va, Sa) {
                        if (na && na.Representation_asArray && na.Representation_asArray.length > 0) {
                            var Na = la(va) && va >= 0 && va < na.Representation_asArray.length ? na.Representation_asArray[va] : na.Representation_asArray[0]
                              , Oa = Na.mimeType + ';codecs="' + Na.codecs + '"';
                            return Sa && Na.width !== void 0 && (Oa += ';width="' + Na.width + '";height="' + Na.height + '"'),
                            Oa
                        }
                        return null
                    },
                    getMimeType: function(na) {
                        return na && na.Representation_asArray && na.Representation_asArray.length > 0 ? na.Representation_asArray[0].mimeType : null
                    },
                    getKID: function(na) {
                        return na && na.hasOwnProperty(Ga.CENC_DEFAULT_KID) ? na[Ga.CENC_DEFAULT_KID] : null
                    },
                    getContentProtectionData: function(na) {
                        return na && na.hasOwnProperty(Ga.CONTENTPROTECTION_ASARRAY) && na.ContentProtection_asArray.length !== 0 ? na.ContentProtection_asArray : null
                    },
                    getIsDynamic: wa,
                    getIsDVB: function(na) {
                        return function(va, Sa) {
                            var Na = !1;
                            return va && va.profiles && va.profiles.length > 0 && (Na = va.profiles.indexOf(Sa) !== -1),
                            Na
                        }(na, "urn:dvb:dash:profile:dvb-dash:2014")
                    },
                    getDuration: function(na) {
                        return na && na.hasOwnProperty(Ga.MEDIA_PRESENTATION_DURATION) ? na.mediaPresentationDuration : Number.MAX_SAFE_INTEGER || Number.MAX_VALUE
                    },
                    getBandwidth: function(na) {
                        return na && na.bandwidth ? na.bandwidth : NaN
                    },
                    getManifestUpdatePeriod: function(na) {
                        var va = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0
                          , Sa = NaN;
                        return na && na.hasOwnProperty(Ga.MINIMUM_UPDATE_PERIOD) && (Sa = na.minimumUpdatePeriod),
                        isNaN(Sa) ? Sa : Math.max(Sa - va, 1)
                    },
                    getRepresentationCount: function(na) {
                        return na && na.Representation_asArray && na.Representation_asArray.length ? na.Representation_asArray.length : 0
                    },
                    getBitrateListForAdaptation: function(na) {
                        return na && na.Representation_asArray && na.Representation_asArray.length ? ya(na).Representation_asArray.map(function(va) {
                            return {
                                id: va.id || "",
                                bandwidth: va.bandwidth,
                                width: va.width || 0,
                                height: va.height || 0,
                                scanType: va.scanType || null
                            }
                        }) : null
                    },
                    getRepresentationFor: function(na, va) {
                        return va && va.Representation_asArray && va.Representation_asArray.length > 0 && la(na) ? va.Representation_asArray[na] : null
                    },
                    getRepresentationsForAdaptation: function(na) {
                        var va = []
                          , Sa = Da(na)
                          , Na = void 0
                          , Oa = void 0;
                        if (na && na.period && la(na.period.index)) {
                            var Ia = ia(na.period.mpd.manifest);
                            Ia && (Oa = Ia[0])
                        }
                        if (Sa && Sa.Representation_asArray)
                            for (var Ra = 0, ka = Sa.Representation_asArray.length; Ra < ka; ++Ra) {
                                var Va = Sa.Representation_asArray[Ra]
                                  , Ha = new md;
                                if (Ha.index = Ra,
                                Ha.adaptation = na,
                                Va.hasOwnProperty(Ga.ID) && (Ha.id = Va.id),
                                Va.hasOwnProperty(Ga.CODECS) && (Ha.codecs = Va.codecs),
                                Va.hasOwnProperty(Ga.CODEC_PRIVATE_DATA) && (Ha.codecPrivateData = Va.codecPrivateData),
                                Va.hasOwnProperty(Ga.BANDWITH) && (Ha.bandwidth = Va.bandwidth),
                                Va.hasOwnProperty(Ga.WIDTH) && (Ha.width = Va.width),
                                Va.hasOwnProperty(Ga.HEIGHT) && (Ha.height = Va.height),
                                Va.hasOwnProperty(Ga.SCAN_TYPE) && (Ha.scanType = Va.scanType),
                                Va.hasOwnProperty(Ga.MAX_PLAYOUT_RATE) && (Ha.maxPlayoutRate = Va.maxPlayoutRate),
                                Va.hasOwnProperty(Ga.SEGMENT_BASE) ? (Na = Va.SegmentBase,
                                Ha.segmentInfoType = Ga.SEGMENT_BASE) : Va.hasOwnProperty(Ga.SEGMENT_LIST) ? (Na = Va.SegmentList).hasOwnProperty(Ga.SEGMENT_TIMELINE) ? (Ha.segmentInfoType = Ga.SEGMENT_TIMELINE,
                                Ha.useCalculatedLiveEdgeTime = ua(Na.SegmentTimeline)) : (Ha.segmentInfoType = Ga.SEGMENT_LIST,
                                Ha.useCalculatedLiveEdgeTime = !0) : Va.hasOwnProperty(Ga.SEGMENT_TEMPLATE) ? ((Na = Va.SegmentTemplate).hasOwnProperty(Ga.SEGMENT_TIMELINE) ? (Ha.segmentInfoType = Ga.SEGMENT_TIMELINE,
                                Ha.useCalculatedLiveEdgeTime = ua(Na.SegmentTimeline)) : Ha.segmentInfoType = Ga.SEGMENT_TEMPLATE,
                                Na.hasOwnProperty(Ga.INITIALIZATION_MINUS) && (Ha.initialization = Na.initialization.split("$Bandwidth$").join(Va.bandwidth).split("$RepresentationID$").join(Va.id))) : Ha.segmentInfoType = Ga.BASE_URL,
                                Ha.essentialProperties = _a(Va),
                                Na) {
                                    if (Na.hasOwnProperty(Ga.INITIALIZATION)) {
                                        var xa = Na.Initialization;
                                        xa.hasOwnProperty(Ga.SOURCE_URL) ? Ha.initialization = xa.sourceURL : xa.hasOwnProperty(Ga.RANGE) && (Ha.range = xa.range)
                                    } else
                                        Va.hasOwnProperty(Ga.MIME_TYPE) && Kt(Va.mimeType) && (Ha.range = 0);
                                    Na.hasOwnProperty(Ga.TIMESCALE) && (Ha.timescale = Na.timescale),
                                    Na.hasOwnProperty(Ga.DURATION) && (Ha.segmentDuration = Na.duration / Ha.timescale),
                                    Na.hasOwnProperty(Ga.MEDIA) && (Ha.media = Na.media),
                                    Na.hasOwnProperty(Ga.START_NUMBER) && (Ha.startNumber = Na.startNumber),
                                    Na.hasOwnProperty(Ga.INDEX_RANGE) && (Ha.indexRange = Na.indexRange),
                                    Na.hasOwnProperty(Ga.PRESENTATION_TIME_OFFSET) && (Ha.presentationTimeOffset = Na.presentationTimeOffset / Ha.timescale),
                                    Na.hasOwnProperty(Ga.AVAILABILITY_TIME_OFFSET) ? Ha.availabilityTimeOffset = Na.availabilityTimeOffset : Oa && Oa.availabilityTimeOffset !== void 0 && (Ha.availabilityTimeOffset = Oa.availabilityTimeOffset),
                                    Na.hasOwnProperty(Ga.AVAILABILITY_TIME_COMPLETE) ? Ha.availabilityTimeComplete = Na.availabilityTimeComplete !== "false" : Oa && Oa.availabilityTimeComplete !== void 0 && (Ha.availabilityTimeComplete = Oa.availabilityTimeComplete)
                                }
                                Ha.MSETimeOffset = ei.calcMSETimeOffset(Ha),
                                Ha.path = [na.period.index, na.index, Ra],
                                va.push(Ha)
                            }
                        return va
                    },
                    getAdaptationsForPeriod: function(na) {
                        var va = na && la(na.index) ? na.mpd.manifest.Period_asArray[na.index] : null
                          , Sa = []
                          , Na = void 0
                          , Oa = void 0
                          , Ia = void 0;
                        if (va && va.AdaptationSet_asArray)
                            for (Ia = 0; Ia < va.AdaptationSet_asArray.length; Ia++)
                                Oa = va.AdaptationSet_asArray[Ia],
                                Na = new Fh,
                                Oa.hasOwnProperty(Ga.ID) && (Na.id = Oa.id),
                                Na.index = Ia,
                                Na.period = na,
                                ra(Oa) ? Na.type = ie.MUXED : ca(Oa) ? Na.type = ie.AUDIO : pa(Oa) ? Na.type = ie.VIDEO : ti(Oa) ? Na.type = ie.FRAGMENTED_TEXT : ni(Oa) ? Na.type = ie.IMAGE : Na.type = ie.TEXT,
                                Sa.push(Na);
                        return Sa
                    },
                    getRegularPeriods: function(na) {
                        var va, Sa = !!na && wa(na.manifest), Na = [], Oa = null, Ia = null, Ra = null, ka = null, Va = void 0;
                        for (Va = 0,
                        va = na && na.manifest && na.manifest.Period_asArray ? na.manifest.Period_asArray.length : 0; Va < va; Va++)
                            (Ia = na.manifest.Period_asArray[Va]).hasOwnProperty(Ga.START) ? (ka = new Cd).start = Ia.start : Oa !== null && Ia.hasOwnProperty(Ga.DURATION) && Ra !== null ? ((ka = new Cd).start = parseFloat((Ra.start + Ra.duration).toFixed(5)),
                            ka.duration = Ia.duration) : Va !== 0 || Sa || ((ka = new Cd).start = 0),
                            Ra !== null && isNaN(Ra.duration) && (Ra.duration = parseFloat((ka.start - Ra.start).toFixed(5))),
                            ka !== null && (ka.id = ta(Ia, Va)),
                            ka !== null && Ia.hasOwnProperty(Ga.DURATION) && (ka.duration = Ia.duration),
                            ka !== null && (ka.index = Va,
                            ka.mpd = na,
                            Na.push(ka),
                            Oa = Ia,
                            Ra = ka),
                            Ia = null,
                            ka = null;
                        return Na.length === 0 || Ra !== null && isNaN(Ra.duration) && (Ra.duration = parseFloat((function(Ha) {
                            var xa = wa(Ha.mpd.manifest)
                              , sl = void 0;
                            if (Ha.mpd.manifest.mediaPresentationDuration)
                                sl = Ha.mpd.manifest.mediaPresentationDuration;
                            else if (Ha.duration)
                                sl = Ha.duration;
                            else {
                                if (!xa)
                                    throw new Error("Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.");
                                sl = Number.POSITIVE_INFINITY
                            }
                            return sl
                        }(Ra) - Ra.start).toFixed(5))),
                        Na
                    },
                    getMpd: function(na) {
                        var va = new Bh;
                        return na && (va.manifest = na,
                        na.hasOwnProperty(Ga.AVAILABILITY_START_TIME) ? va.availabilityStartTime = new Date(na.availabilityStartTime.getTime()) : va.availabilityStartTime = new Date(na.loadedTime.getTime()),
                        na.hasOwnProperty(Ga.AVAILABILITY_END_TIME) && (va.availabilityEndTime = new Date(na.availabilityEndTime.getTime())),
                        na.hasOwnProperty(Ga.MINIMUM_UPDATE_PERIOD) && (va.minimumUpdatePeriod = na.minimumUpdatePeriod),
                        na.hasOwnProperty(Ga.MEDIA_PRESENTATION_DURATION) && (va.mediaPresentationDuration = na.mediaPresentationDuration),
                        na.hasOwnProperty(ie.SUGGESTED_PRESENTATION_DELAY) && (va.suggestedPresentationDelay = na.suggestedPresentationDelay),
                        na.hasOwnProperty(Ga.TIMESHIFT_BUFFER_DEPTH) && (va.timeShiftBufferDepth = na.timeShiftBufferDepth),
                        na.hasOwnProperty(Ga.MAX_SEGMENT_DURATION) && (va.maxSegmentDuration = na.maxSegmentDuration)),
                        va
                    },
                    getEventsForPeriod: function(na) {
                        var va = na && na.mpd && na.mpd.manifest ? na.mpd.manifest : null
                          , Sa = va ? va.Period_asArray : null
                          , Na = Sa && na && la(na.index) ? Sa[na.index].EventStream_asArray : null
                          , Oa = []
                          , Ia = void 0
                          , Ra = void 0;
                        if (Na)
                            for (Ia = 0; Ia < Na.length; Ia++) {
                                var ka = new hf;
                                if (ka.period = na,
                                ka.timescale = 1,
                                !Na[Ia].hasOwnProperty(ie.SCHEME_ID_URI))
                                    throw new Error("Invalid EventStream. SchemeIdUri has to be set");
                                for (ka.schemeIdUri = Na[Ia].schemeIdUri,
                                Na[Ia].hasOwnProperty(Ga.TIMESCALE) && (ka.timescale = Na[Ia].timescale),
                                Na[Ia].hasOwnProperty(Ga.VALUE) && (ka.value = Na[Ia].value),
                                Ra = 0; Ra < Na[Ia].Event_asArray.length; Ra++) {
                                    var Va = new df;
                                    Va.presentationTime = 0,
                                    Va.eventStream = ka,
                                    Na[Ia].Event_asArray[Ra].hasOwnProperty(Ga.PRESENTATION_TIME) && (Va.presentationTime = Na[Ia].Event_asArray[Ra].presentationTime),
                                    Na[Ia].Event_asArray[Ra].hasOwnProperty(Ga.DURATION) && (Va.duration = Na[Ia].Event_asArray[Ra].duration),
                                    Na[Ia].Event_asArray[Ra].hasOwnProperty(Ga.ID) && (Va.id = Na[Ia].Event_asArray[Ra].id),
                                    Oa.push(Va)
                                }
                            }
                        return Oa
                    },
                    getEventStreamForAdaptationSet: function(na, va) {
                        var Sa = void 0
                          , Na = void 0
                          , Oa = void 0;
                        return na && na.Period_asArray && va && va.period && la(va.period.index) && (Na = na.Period_asArray[va.period.index]) && Na.AdaptationSet_asArray && la(va.index) && (Oa = Na.AdaptationSet_asArray[va.index]) && (Sa = Oa.InbandEventStream_asArray),
                        ma(Sa, null)
                    },
                    getEventStreamForRepresentation: function(na, va) {
                        var Sa = void 0
                          , Na = void 0
                          , Oa = void 0
                          , Ia = void 0;
                        return na && na.Period_asArray && va && va.adaptation && va.adaptation.period && la(va.adaptation.period.index) && (Na = na.Period_asArray[va.adaptation.period.index]) && Na.AdaptationSet_asArray && la(va.adaptation.index) && (Oa = Na.AdaptationSet_asArray[va.adaptation.index]) && Oa.Representation_asArray && la(va.index) && (Ia = Oa.Representation_asArray[va.index]) && (Sa = Ia.InbandEventStream_asArray),
                        ma(Sa, va)
                    },
                    getUTCTimingSources: function(na) {
                        var va = wa(na)
                          , Sa = !!na && na.hasOwnProperty(Ga.AVAILABILITY_START_TIME)
                          , Na = na ? na.UTCTiming_asArray : null
                          , Oa = [];
                        return (va || Sa) && Na && Na.forEach(function(Ia) {
                            var Ra = new O;
                            Ia.hasOwnProperty(ie.SCHEME_ID_URI) && (Ra.schemeIdUri = Ia.schemeIdUri,
                            Ia.hasOwnProperty(Ga.VALUE) && (Ra.value = Ia.value.toString(),
                            Oa.push(Ra)))
                        }),
                        Oa
                    },
                    getBaseURLsFromElement: ia,
                    getRepresentationSortFunction: ri,
                    getLocation: function(na) {
                        if (na && na.hasOwnProperty(ie.LOCATION))
                            return na.Location = na.Location_asArray[0],
                            na.Location
                    },
                    getUseCalculatedLiveEdgeTimeForAdaptation: function(na) {
                        var va = Da(na).Representation_asArray[0]
                          , Sa = void 0;
                        return va.hasOwnProperty(Ga.SEGMENT_LIST) ? !(Sa = va.SegmentList).hasOwnProperty(Ga.SEGMENT_TIMELINE) || ua(Sa.SegmentTimeline) : !(!va.hasOwnProperty(Ga.SEGMENT_TEMPLATE) || !(Sa = va.SegmentTemplate).hasOwnProperty(Ga.SEGMENT_TIMELINE)) && ua(Sa.SegmentTimeline)
                    }
                }
            }
            pf.__dashjs_factory_name = "DashManifestModel";
            var Uh = $.a.getSingletonFactory(pf)
              , Vh = function() {
                function xe() {
                    (function(qt, Pe) {
                        if (!(qt instanceof Pe))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, xe)
                }
                return xe.round10 = function(qt, Pe) {
                    return function(Qe, ei, sa) {
                        return sa === void 0 || +sa == 0 ? Math[Qe](ei) : (sa = +sa,
                        (ei = +ei) === null || isNaN(ei) || !(typeof sa == "number" && sa % 1 == 0) ? NaN : (ei = ei.toString().split("e"),
                        +((ei = (ei = Math[Qe](+(ei[0] + "e" + (ei[1] ? +ei[1] - sa : -sa)))).toString().split("e"))[0] + "e" + (ei[1] ? +ei[1] + sa : sa))))
                    }("round", qt, Pe)
                }
                ,
                xe
            }();
            function mf(xe) {
                var qt = (xe = xe || {}).dashManifestModel
                  , Pe = xe.manifestModel;
                function Qe(ti) {
                    return la(ti, ae.BUFFER_LEVEL)
                }
                function ei(ti) {
                    if (!ti)
                        return null;
                    var ra = ti.HttpList
                      , ni = null
                      , Kt = void 0;
                    if (!ra || ra.length <= 0)
                        return null;
                    for (Kt = ra.length - 1; Kt >= 0; ) {
                        if (ra[Kt].responsecode) {
                            ni = ra[Kt];
                            break
                        }
                        Kt--
                    }
                    return ni
                }
                function sa(ti) {
                    return ti && ti.HttpList ? ti.HttpList : []
                }
                function la(ti, ra) {
                    if (!ti)
                        return null;
                    var ni = ti[ra];
                    if (!ni)
                        return null;
                    var Kt = ni.length;
                    return Kt <= 0 ? null : ni[Kt - 1]
                }
                function ha(ti) {
                    var ra = {};
                    if (!ti)
                        return ra;
                    for (var ni = ti.trim().split(`\r
`), Kt = 0, oi = ni.length; Kt < oi; Kt++) {
                        var Ea = ni[Kt]
                          , ri = Ea.indexOf(": ");
                        ri > 0 && (ra[Ea.substring(0, ri)] = Ea.substring(ri + 2))
                    }
                    return ra
                }
                function ca(ti, ra, ni) {
                    var Kt = void 0
                      , oi = void 0
                      , Ea = void 0
                      , ri = void 0
                      , ya = void 0;
                    if (ti) {
                        for (Kt = ti.AdaptationSet_asArray,
                        ri = 0; ri < Kt.length; ri += 1)
                            for (Ea = Kt[ri].Representation_asArray,
                            ya = 0; ya < Ea.length; ya += 1)
                                if (ra === (oi = Ea[ya]).id)
                                    return ni ? ya : oi
                    }
                    return null
                }
                function pa(ti, ra) {
                    return qt.getIsTypeOf(ti, ra)
                }
                return {
                    getBandwidthForRepresentation: function(ti, ra) {
                        var ni;
                        return (ni = ca(Pe.getValue().Period_asArray[ra], ti)) === null ? null : ni.bandwidth
                    },
                    getIndexForRepresentation: function(ti, ra) {
                        return function(ni, Kt) {
                            var oi = ca(ni, Kt, !0);
                            return oi !== null ? oi : -1
                        }(Pe.getValue().Period_asArray[ra], ti)
                    },
                    getMaxIndexForBufferType: function(ti, ra) {
                        var ni = Pe.getValue();
                        return ni ? function(Kt, oi) {
                            var Ea = void 0
                              , ri = void 0
                              , ya = void 0
                              , Aa = void 0;
                            if (!Kt || !oi)
                                return -1;
                            for (ri = Kt.AdaptationSet_asArray,
                            Aa = 0; Aa < ri.length; Aa += 1)
                                if (ya = (Ea = ri[Aa]).Representation_asArray,
                                pa(Ea, oi))
                                    return ya.length;
                            return -1
                        }(ni.Period_asArray[ra], ti) : -1
                    },
                    getCurrentRepresentationSwitch: function(ti) {
                        return la(ti, ae.TRACK_SWITCH)
                    },
                    getLatestBufferLevelVO: Qe,
                    getCurrentBufferLevel: function(ti) {
                        var ra = Qe(ti);
                        return ra ? Vh.round10(ra.level / 1e3, -3) : 0
                    },
                    getCurrentHttpRequest: ei,
                    getHttpRequests: sa,
                    getCurrentDroppedFrames: function(ti) {
                        return la(ti, ae.DROPPED_FRAMES)
                    },
                    getCurrentSchedulingInfo: function(ti) {
                        return la(ti, ae.SCHEDULING_INFO)
                    },
                    getCurrentDVRInfo: function(ti) {
                        return la(ti, ae.DVR_INFO)
                    },
                    getCurrentManifestUpdate: function(ti) {
                        return la(ti, ae.MANIFEST_UPDATE)
                    },
                    getLatestFragmentRequestHeaderValueByID: function(ti, ra) {
                        var ni = {}
                          , Kt = ei(ti);
                        return Kt && (ni = ha(Kt._responseHeaders)),
                        ni[ra] === void 0 ? null : ni[ra]
                    },
                    getLatestMPDRequestHeaderValueByID: function(ti, ra) {
                        var ni, Kt = {}, oi = void 0, Ea = void 0;
                        for (Ea = (ni = sa(ti)).length - 1; Ea >= 0; Ea--)
                            if ((oi = ni[Ea]).type === vl.MPD_TYPE) {
                                Kt = ha(oi._responseHeaders);
                                break
                            }
                        return Kt[ra] === void 0 ? null : Kt[ra]
                    },
                    getRequestsQueue: function(ti) {
                        return ti ? ti.RequestsQueue : null
                    }
                }
            }
            mf.__dashjs_factory_name = "DashMetrics";
            var Gh = $.a.getSingletonFactory(mf);
            function gf() {
                var xe = this.context
                  , qt = Re(xe).getInstance()
                  , Pe = void 0
                  , Qe = void 0
                  , ei = void 0;
                function sa(ti) {
                    Pe = ti
                }
                function la(ti, ra, ni, Kt) {
                    return Kt ? ni && ra.timeShiftBufferDepth != Number.POSITIVE_INFINITY ? new Date(ra.availabilityStartTime.getTime() + 1e3 * (ti + ra.timeShiftBufferDepth)) : ra.availabilityEndTime : ni ? new Date(ra.availabilityStartTime.getTime() + 1e3 * (ti - Pe)) : ra.availabilityStartTime
                }
                function ha(ti, ra) {
                    return (ti.getTime() - ra.mpd.availabilityStartTime.getTime() + 1e3 * Pe) / 1e3
                }
                function ca(ti) {
                    Qe || ti.offset !== void 0 && (sa(ti.offset / 1e3),
                    Qe = !0)
                }
                function pa() {
                    Pe = 0,
                    Qe = !1,
                    ei = NaN
                }
                return {
                    initialize: function() {
                        pa(),
                        qt.on(bt.TIME_SYNCHRONIZATION_COMPLETED, ca, this)
                    },
                    isTimeSyncCompleted: function() {
                        return Qe
                    },
                    setTimeSyncCompleted: function(ti) {
                        Qe = ti
                    },
                    getClientTimeOffset: function() {
                        return Pe
                    },
                    setClientTimeOffset: sa,
                    getExpectedLiveEdge: function() {
                        return ei
                    },
                    setExpectedLiveEdge: function(ti) {
                        ei = ti
                    },
                    calcAvailabilityStartTimeFromPresentationTime: function(ti, ra, ni) {
                        return la.call(this, ti, ra, ni)
                    },
                    calcAvailabilityEndTimeFromPresentationTime: function(ti, ra, ni) {
                        return la.call(this, ti, ra, ni, !0)
                    },
                    calcPresentationTimeFromWallTime: ha,
                    calcPresentationTimeFromMediaTime: function(ti, ra) {
                        return ti + (ra.adaptation.period.start - ra.presentationTimeOffset)
                    },
                    calcPeriodRelativeTimeFromMpdRelativeTime: function(ti, ra) {
                        return ra - ti.adaptation.period.start
                    },
                    calcMediaTimeFromPresentationTime: function(ti, ra) {
                        return ti - ra.adaptation.period.start + ra.presentationTimeOffset
                    },
                    calcSegmentAvailabilityRange: function(ti, ra) {
                        var ni = ti.adaptation.period
                          , Kt = {
                            start: ni.start,
                            end: ni.start + ni.duration
                        };
                        if (!ra)
                            return Kt;
                        if (!Qe && ti.segmentAvailabilityRange)
                            return ti.segmentAvailabilityRange;
                        var oi = ti.segmentDuration || (ti.segments && ti.segments.length ? ti.segments[ti.segments.length - 1].duration : 0)
                          , Ea = ha(new Date, ni)
                          , ri = ni.start + ni.duration;
                        Kt.start = Math.max(Ea - ni.mpd.timeShiftBufferDepth, ni.start);
                        var ya = ti.availabilityTimeOffset !== void 0 && ti.availabilityTimeOffset < oi ? oi - ti.availabilityTimeOffset : oi;
                        return Kt.end = Ea >= ri && Ea - ya < ri ? ri : Ea - ya,
                        Kt
                    },
                    calcWallTimeForSegment: function(ti, ra) {
                        var ni = void 0
                          , Kt = void 0
                          , oi = void 0;
                        return ra && (ni = ti.representation.adaptation.period.mpd.suggestedPresentationDelay,
                        Kt = ti.presentationStartTime + ni,
                        oi = new Date(ti.availabilityStartTime.getTime() + 1e3 * Kt)),
                        oi
                    },
                    calcMSETimeOffset: function(ti) {
                        var ra = ti.presentationTimeOffset;
                        return ti.adaptation.period.start - ra
                    },
                    reset: function() {
                        qt.off(bt.TIME_SYNCHRONIZATION_COMPLETED, ca, this),
                        pa()
                    }
                }
            }
            gf.__dashjs_factory_name = "TimelineConverter";
            var $h = $.a.getSingletonFactory(gf)
              , jh = ve(7)
              , yf = ve.n(jh);
            function Jd() {
                var xe = "You must first call initialize() and set a source before calling this method"
                  , qt = "You must first call initialize() and set a valid source and view before calling this method"
                  , Pe = "You must first call attachView() to set the video element before calling this method"
                  , Qe = "You must first call attachSource() with a valid source before calling this method"
                  , ei = "MediaPlayer not initialized!"
                  , sa = this.context
                  , la = Re(sa).getInstance()
                  , ha = aa(sa).getInstance()
                  , ca = ha.log
                  , pa = NaN
                  , ti = void 0
                  , ra = void 0
                  , ni = void 0
                  , Kt = void 0
                  , oi = void 0
                  , Ea = void 0
                  , ri = void 0
                  , ya = void 0
                  , Aa = void 0
                  , wa = void 0
                  , _a = void 0
                  , Da = void 0
                  , ua = void 0
                  , ta = void 0
                  , ma = void 0
                  , ia = void 0
                  , na = void 0
                  , va = void 0
                  , Sa = void 0
                  , Na = void 0
                  , Oa = void 0
                  , Ia = void 0
                  , Ra = void 0
                  , ka = void 0
                  , Va = void 0
                  , Ha = void 0
                  , xa = void 0
                  , sl = void 0
                  , gl = void 0
                  , Ya = void 0
                  , il = void 0
                  , Ol = void 0
                  , _l = void 0
                  , Ul = void 0
                  , Yl = void 0
                  , ql = {
                    video: {},
                    audio: {}
                }
                  , Ml = {
                    min: 0,
                    video: 0,
                    audio: 0
                }
                  , ul = null
                  , al = {};
                function El() {
                    Ml.min && Na && Na.getDuration() > Ml.min && Sa && (Sa.setMediaDuration(Ml.min - .3),
                    Sa.setAppendWindowEnd(Ml.min - .3),
                    ia.setDeviationReset(!0))
                }
                function Tl() {
                    return !!ra && !!ka.getElement()
                }
                function $l() {
                    return Object(Mh.a)()
                }
                function Qa() {
                    if (!Ea)
                        throw qt;
                    return Na.isPaused()
                }
                function Sl(oa) {
                    var La = [ie.VIDEO, ie.AUDIO, ie.FRAGMENTED_TEXT];
                    if (oa) {
                        if (La.indexOf(oa) !== -1) {
                            var Ja = fl().getCurrentBufferLevel(bl(oa));
                            return Ja || NaN
                        }
                        return ca("Warning  - getBufferLength requested for invalid type"),
                        NaN
                    }
                    var ks = La.map(function(Il) {
                        return Zl(Il).length > 0 ? fl().getCurrentBufferLevel(bl(Il)) : Number.MAX_VALUE
                    }).reduce(function(Il, Fl) {
                        return Math.min(Il, Fl)
                    });
                    return ks === Number.MAX_VALUE ? NaN : ks
                }
                function nu(oa) {
                    var La = Uu()
                      , Ja = Na.getLiveDelay();
                    if (!La)
                        return 0;
                    var ks = La.range.start + oa;
                    return ks > La.range.end - Ja && (ks = La.range.end - Ja),
                    ks
                }
                function ru(oa, La) {
                    if (!Ea)
                        throw qt;
                    var Ja = Cl().currentTime;
                    if (oa !== void 0)
                        Ja = Sa.getTimeRelativeToStreamId(Ja, oa);
                    else if (Na.getIsDynamic()) {
                        var ks = Uu();
                        Ja = ks === null ? 0 : ol() - (ks.range.end - ks.time)
                    }
                    var Il = ia.getCachedDurationOffset("time");
                    return La && Ja - Il > 0 && (Ja -= Il,
                    Ja = Math.min(Ja, ol(void 0))),
                    Ja = parseFloat(Ja.toFixed(5))
                }
                function ol(oa) {
                    if (!Ea)
                        throw qt;
                    var La = Cl().duration;
                    if (Na.getIsDynamic()) {
                        var Ja, ks = Uu();
                        if (!ks)
                            return 0;
                        La = (Ja = ks.range.end - ks.range.start) < ks.manifestInfo.DVRWindowSize ? Ja : ks.manifestInfo.DVRWindowSize
                    }
                    if (oa) {
                        var Il = Cl().currentTime
                          , Fl = ia.getCachedDurationOffset("time")
                          , jl = ia.getCachedDurationOffset("offset");
                        Fl ? Il > Fl && (La = Il < jl ? jl - Fl : La - jl) : La = jl ? Math.min(La, jl) : La,
                        La = parseFloat(La.toFixed(5))
                    }
                    return La
                }
                function cl(oa) {
                    ri = oa
                }
                function Kl(oa, La) {
                    Ma(oa, La);
                    var Ja = new O;
                    Ja.schemeIdUri = oa,
                    Ja.value = La,
                    ia.getUTCTimingSources().push(Ja)
                }
                function Ma(oa, La) {
                    var Ja = ia.getUTCTimingSources();
                    Ja.forEach(function(ks, Il) {
                        ks.schemeIdUri === oa && ks.value === La && Ja.splice(Il, 1)
                    })
                }
                function xs() {
                    Kl(Id.DEFAULT_UTC_TIMING_SOURCE.scheme, Id.DEFAULT_UTC_TIMING_SOURCE.value)
                }
                function fl() {
                    return Oa
                }
                function bl(oa) {
                    return ma.getReadOnlyMetricsFor(oa)
                }
                function Cl() {
                    if (!ka.getElement())
                        throw Pe;
                    return ka.getElement()
                }
                function xl(oa) {
                    if (!Kt)
                        throw ei;
                    ka.setElement(oa),
                    oa && (xu(),
                    function() {
                        if (!Da) {
                            var La = dashjs.MetricsReporting;
                            if (typeof La == "function") {
                                var Ja = La(sa).create();
                                Da = Ja.createMetricsReporting({
                                    log: ca,
                                    eventBus: la,
                                    mediaElement: Cl(),
                                    dashManifestModel: Ia,
                                    metricsModel: ma,
                                    events: bt,
                                    constants: ie,
                                    metricsConstants: ae
                                })
                            }
                        }
                    }(),
                    function() {
                        if (!ua) {
                            var La = dashjs.MssHandler;
                            typeof La == "function" && (ua = La(sa).create({
                                eventBus: la,
                                mediaPlayerModel: ia,
                                metricsModel: ma,
                                playbackController: Na,
                                protectionController: _a,
                                errHandler: na,
                                events: bt,
                                constants: ie,
                                log: ca,
                                initSegmentType: vl.INIT_SEGMENT_TYPE,
                                BASE64: yf.a,
                                ISOBoxer: Rl.a
                            }))
                        }
                    }(),
                    Sa && Sa.switchToVideoElement()),
                    Ea && Au(),
                    Os()
                }
                function Zl(oa) {
                    if (!oi)
                        throw xe;
                    var La = Sa.getActiveStreamInfo();
                    return La ? wa.getTracksFor(oa, La) : []
                }
                function hu(oa) {
                    if (!Kt)
                        throw ei;
                    typeof oa == "string" && _u(sa).getInstance().initialize(oa),
                    ql.video = {},
                    ql.audio = {},
                    ra = oa,
                    (oi || Ea) && Au(),
                    Tl() && Os()
                }
                function Au() {
                    Ea = !1,
                    oi = !1,
                    ta.reset(),
                    Sa.reset(),
                    Na.reset(),
                    ya.reset(),
                    wa.reset(),
                    _a && (_a.reset(),
                    _a = null,
                    xu())
                }
                function wu() {
                    return ph(sa).create({
                        errHandler: na,
                        videoModel: ka,
                        metricsModel: ma,
                        mediaPlayerModel: ia,
                        requestModifier: Pd(sa).getInstance(),
                        mssHandler: ua
                    })
                }
                function xu() {
                    if (_a)
                        return _a;
                    var oa = dashjs.Protection;
                    if (typeof oa == "function") {
                        var La = oa(sa).create();
                        return bt.extend(oa.events),
                        vd.extend(oa.events, {
                            publicOnly: !0
                        }),
                        va || (va = Zc(sa).getInstance()),
                        _a = La.createProtectionSystem({
                            log: ca,
                            errHandler: na,
                            videoModel: ka,
                            capabilities: va,
                            eventBus: la,
                            events: bt,
                            BASE64: yf.a,
                            constants: ie,
                            ignoreEmeEncryptedEvent: Yl
                        })
                    }
                    return null
                }
                function Uu() {
                    var oa = ma.getReadOnlyMetricsFor(ie.VIDEO) || ma.getReadOnlyMetricsFor(ie.AUDIO);
                    return Oa.getCurrentDVRInfo(oa)
                }
                function Vu(oa) {
                    var La = Uu();
                    return La ? oa + (La.manifestInfo.availableFrom.getTime() / 1e3 + La.range.start) : 0
                }
                function Wu() {
                    if (!oi)
                        throw xe;
                    var oa = Sa.getActiveStreamInfo();
                    return oa ? Sa.getStreamById(oa.id) : null
                }
                function Os() {
                    var oa;
                    !oi && ra && (oi = !0,
                    ca("Streaming Initialized"),
                    oa = wu(),
                    Sa || (Sa = Xf(sa).getInstance()),
                    wa.setConfig({
                        errHandler: na,
                        domStorage: Va
                    }),
                    Sa.setConfig({
                        capabilities: va,
                        manifestLoader: oa,
                        manifestModel: Ra,
                        dashManifestModel: Ia,
                        mediaPlayerModel: ia,
                        protectionController: _a,
                        adapter: ta,
                        metricsModel: ma,
                        dashMetrics: Oa,
                        errHandler: na,
                        timelineConverter: Aa,
                        videoModel: ka,
                        playbackController: Na,
                        domStorage: Va,
                        abrController: ya,
                        mediaController: wa
                    }),
                    Na.setConfig({
                        streamController: Sa,
                        metricsModel: ma,
                        dashMetrics: Oa,
                        manifestModel: Ra,
                        mediaPlayerModel: ia,
                        dashManifestModel: Ia,
                        adapter: ta,
                        videoModel: ka
                    }),
                    ya.setConfig({
                        streamController: Sa,
                        domStorage: Va,
                        mediaPlayerModel: ia,
                        metricsModel: ma,
                        dashMetrics: Oa,
                        dashManifestModel: Ia,
                        manifestModel: Ra,
                        videoModel: ka,
                        adapter: ta,
                        initializeDate: zl()
                    }),
                    ya.createAbrRulesCollection(),
                    Sa.initialize(ri, ni),
                    ra.video || ra.audio || typeof ra == "string" ? Sa.load(ra, Ha) : Sa.loadWithManifest(ra, Ha)),
                    !Ea && Tl() && (Ea = !0,
                    ca("Playback Initialized"))
                }
                function qa(oa) {
                    var La = ia.getCachedDurationOffset("offset");
                    La && oa.time >= La && Ol && (ia.setCachedDurationOffset("time", La),
                    Ol = !1,
                    ka.setDataOffsetAttr(La),
                    la.trigger(bt.APPENDED_NEXT_SOURCE_DURATION_CHANGED, {
                        offset: La,
                        totalTime: oa.time,
                        totalDuration: ol(),
                        time: ru(void 0, !0),
                        duration: Ml.min || ol(!0)
                    }))
                }
                function dl(oa) {
                    try {
                        if (oa && oa.mediaType && oa.segments) {
                            var La = oa.mediaType
                              , Ja = ql[La]
                              , ks = oa.segments
                              , Il = oa.representation && oa.representation.index
                              , Fl = !0
                              , jl = []
                              , du = {}
                              , pu = 0
                              , Tu = 0;
                            if (Ja.total && Ja.total === ks.length && (Ja.segments.forEach(function(Hu, eu) {
                                Hu.duration && Hu.duration !== ks[eu].duration && eu < Ja.total - 1 && Math.ceil(1e3 * Math.abs(Hu.duration / Hu.timescale - ks[eu].duration / ks[eu].timescale)) > 100 && jl.push(eu)
                            }),
                            jl.length)) {
                                Fl = !1,
                                du = {
                                    old: Ja.qualityIndex,
                                    new: Il
                                };
                                var mu = ka.getTime()
                                  , $u = Math.floor(mu / 5);
                                jl.indexOf($u) === -1 && jl.indexOf($u + 1) === -1 && jl.indexOf($u + 2) === -1 && (Fl = !0)
                            }
                            var ju = 0
                              , rd = oa.segments && oa.segments[oa.segments.length - 1];
                            rd && (ju = (rd.duration + rd.startTime) / rd.timescale,
                            Ml[La] = ju,
                            (!Ml.min || Ml.min > 0 && Ml.min > ju) && (Ml.min = ju));
                            var id = 0;
                            ks && ks.length && (id = ks[0].startTime / ks[0].timescale,
                            wa.setStartOffsetTimeForType(La, id),
                            pu = parseInt(ks[0].mediaRange.split("-")[0], 10),
                            Tu = parseInt(ks[ks.length - 1].mediaRange.split("-")[1], 10),
                            _l = Math.max(_l, id)),
                            Ml.min === ju && ia.getCachedDurationOffset("duration") && id > 0 && (Ml.min -= id),
                            ia.setCachedDurationOffset("duration", Ml.min + sl);
                            var od = {
                                total: ks && ks.length,
                                segments: ks,
                                isDurationAllEqual: Fl,
                                qualityIndex: Il,
                                realDuration: ju,
                                startOffsetTime: id,
                                rangeStart: pu,
                                rangeEnd: Tu
                            };
                            Fl || (od.notEqualIndexList = jl,
                            od.notEqualQualityIndex = du),
                            ql[oa.mediaType] = od,
                            typeof ul == "function" && ul(La, od)
                        }
                    } catch (Hu) {
                        throw new Error("Parse segment loaded error, " + Hu)
                    }
                }
                function Bl() {
                    gl = !0;
                    var oa = ka.getBufferRange()
                      , La = ka.getElement().duration
                      , Ja = oa && oa.length && oa.end(oa.length - 1)
                      , ks = ka.getTime()
                      , Il = [La, Ja, ks + Sl("video"), ks + Sl("audio")]
                      , Fl = Il.filter(function(Tu) {
                        return !isNaN(Tu)
                    })
                      , jl = Fl.reduce(function(Tu, mu) {
                        return Tu + mu
                    }) / Fl.length
                      , du = Math.min.apply(null, Fl);
                    if (ca("onStreamBufferingCompleted", sl, Il, ia.getAppendingSourceState(), Ya),
                    Math.abs(du - jl) < 1 && (sl = parseFloat(du.toFixed(5)),
                    Ya.length)) {
                        var pu = Ya.splice(0, 1)[0];
                        ca("Appending delay next source", pu),
                        su(pu.manifest, pu.preloadData)
                    }
                }
                function iu(oa) {
                    if (Na.getEnded() && ia.getAppendingSourceState()) {
                        var La = oa.sender.getType();
                        if (al[La] = oa.bufferLevel,
                        al.audio > 0 && al.video > 0) {
                            var Ja = ka.getBufferRange()
                              , ks = Ja && Ja.length && Ja.end(Ja.length - 1)
                              , Il = Na.getTime();
                            ks > Il + .01 && (console.log("Playing next appending source after prev playback ended.", al),
                            Na.seek(Il + .01),
                            Na.play())
                        }
                    }
                    if (ia.getAppendingSourceState() && il) {
                        for (var Fl = ia.getCachedDurationOffset("offset"), jl = ka.getBufferRange(), du = Na.getTime(), pu = 0, Tu = 0; Tu < jl.length; Tu++)
                            jl.start(Tu) < du && jl.end(Tu) >= du && (pu = jl.end(Tu));
                        Fl > 0 && pu > Fl + 1 && (ia.setAppendingSourceState(!1),
                        ca("Appended Next Source, currentTime: " + du + " , buffered end: " + pu),
                        il = !1,
                        la.trigger(bt.APPENDED_NEXT_SOURCE, {
                            time: du,
                            ended: pu
                        }))
                    }
                    if (!Ul) {
                        var mu = ka.getBufferRange()
                          , $u = Na.getTime()
                          , ju = mu && mu.length && mu.start(0);
                        mu && mu.length && ju >= _l && (Ul = !0,
                        $u < ju && la.trigger(bt.START_OFFSET_TIME_WARNING, {
                            time: ju
                        }))
                    }
                }
                function zl() {
                    return pa
                }
                function su(oa, La) {
                    if (ca("Append Next Source", ka.getTime(), ka.isSeeking()),
                    !Kt)
                        throw ei;
                    if (typeof oa == "string" && _u(sa).getInstance().initialize(oa),
                    ka.isSeeking())
                        la.on(bt.PLAYBACK_SEEKED, function Ja() {
                            ca("Seeked to append next source"),
                            la.off(bt.PLAYBACK_SEEKED, Ja),
                            su(oa)
                        });
                    else {
                        if (!gl)
                            return ca("Stream buffering is not completed, delay to append!"),
                            void (Ya = [{
                                manifest: oa,
                                preloadData: La
                            }]);
                        ia.setAppendingSourceState(!0),
                        ia.setCachedDurationOffset("offset", sl),
                        la.trigger(bt.APPENDING_NEXT_SOURCE, {
                            manifest: oa,
                            time: Na.getTime(),
                            offset: sl
                        }),
                        il = !0,
                        Ol = !0,
                        gl = !1,
                        ql.video = {},
                        ql.audio = {},
                        ra = oa,
                        Ml.min = 0,
                        Ml.video = 0,
                        Ml.audio = 0,
                        Sa.load(oa, !0, !0)
                    }
                }
                return ti = {
                    initialize: function(oa, La, Ja, ks, Il, Fl, jl, du) {
                        var pu;
                        Il = Il,
                        ia.setExternalMediaLoader(Fl),
                        ia.setEnableMultipleAudioTracks(du),
                        Ha = !!ks,
                        pa = new Date,
                        Yl = jl,
                        delete window.__DASH_P2P_TYPE__,
                        va || (va = Zc(sa).getInstance()),
                        na = sd(sa).getInstance(),
                        va.supportsMediaSource() ? Kt || (Kt = !0,
                        Aa = $h(sa).getInstance(),
                        ya || (ya = Ba(sa).getInstance()),
                        Na || (Na = Mu(sa).getInstance()),
                        wa || (wa = Hl(sa).getInstance()),
                        ta = xh(sa).getInstance(),
                        Ia = Uh(sa).getInstance({
                            mediaController: wa,
                            timelineConverter: Aa,
                            adapter: ta
                        }),
                        Ra = mh(sa).getInstance(),
                        Oa = Gh(sa).getInstance({
                            manifestModel: Ra,
                            dashManifestModel: Ia
                        }),
                        ma = Rh(sa).getInstance(),
                        Va = Oh(sa).getInstance({
                            mediaPlayerModel: ia
                        }),
                        ta.setConfig({
                            dashManifestModel: Ia,
                            mediaPlayerModel: ia
                        }),
                        ma.setConfig({
                            adapter: ta
                        }),
                        xs(),
                        cl(Ja === void 0 || Ja),
                        oa && xl(oa),
                        La && hu(La),
                        Fl && (pu = Fl,
                        la.trigger(bt.BIND_MEDIA_SOURCE_LOADER, {
                            loader: pu
                        })),
                        la.trigger(bt.INIT_HID, {
                            hid: Il
                        }),
                        ca("[dash.js " + $l() + "] MediaPlayer has been initialized")) : na.capabilityError("mediasource")
                    },
                    setConfig: function(oa) {
                        oa && (oa.capabilities && (va = oa.capabilities),
                        oa.streamController && (Sa = oa.streamController),
                        oa.playbackController && (Na = oa.playbackController),
                        oa.mediaPlayerModel && (ia = oa.mediaPlayerModel),
                        oa.abrController && (ya = oa.abrController),
                        oa.mediaController && (wa = oa.mediaController))
                    },
                    on: function(oa, La, Ja) {
                        la.on(oa, La, Ja)
                    },
                    off: function(oa, La, Ja) {
                        la.off(oa, La, Ja)
                    },
                    extend: function(oa, La, Ja) {
                        $.a.extend(oa, La, Ja, sa)
                    },
                    attachView: xl,
                    attachSource: hu,
                    isReady: Tl,
                    preload: function() {
                        if (ka.getElement() || oi)
                            return !1;
                        if (!ra)
                            throw Qe;
                        Os()
                    },
                    play: function() {
                        if (!Ea)
                            throw qt;
                        if (!ri || Qa() && Ea)
                            return Na.play()
                    },
                    isPaused: Qa,
                    pause: function() {
                        if (!Ea)
                            throw qt;
                        Na.pause()
                    },
                    isSeeking: function() {
                        if (!Ea)
                            throw qt;
                        return Na.isSeeking()
                    },
                    isDynamic: function() {
                        if (!Ea)
                            throw qt;
                        return Na.getIsDynamic()
                    },
                    seek: function(oa, La) {
                        if (!Ea)
                            throw qt;
                        if (typeof oa != "number" || isNaN(oa))
                            throw "MediaPlayer Invalid Arguments!";
                        var Ja = Na.getIsDynamic() ? nu(oa) : oa;
                        La && (Ja += ia.getCachedDurationOffset("time")),
                        Na.seek(Ja)
                    },
                    setPlaybackRate: function(oa) {
                        if (!ka.getElement())
                            throw Pe;
                        Cl().playbackRate = oa
                    },
                    getPlaybackRate: function() {
                        if (!ka.getElement())
                            throw Pe;
                        return Cl().playbackRate
                    },
                    setMute: function(oa) {
                        if (!ka.getElement())
                            throw Pe;
                        Cl().muted = oa
                    },
                    isMuted: function() {
                        if (!ka.getElement())
                            throw Pe;
                        return Cl().muted
                    },
                    setVolume: function(oa) {
                        if (!ka.getElement())
                            throw Pe;
                        Cl().volume = oa
                    },
                    getVolume: function() {
                        if (!ka.getElement())
                            throw Pe;
                        return Cl().volume
                    },
                    time: ru,
                    duration: ol,
                    timeAsUTC: function() {
                        if (!Ea)
                            throw qt;
                        return ru() < 0 ? NaN : Vu(ru())
                    },
                    durationAsUTC: function() {
                        if (!Ea)
                            throw qt;
                        return Vu(ol())
                    },
                    getActiveStream: Wu,
                    getDVRWindowSize: function() {
                        var oa = Uu();
                        return oa ? oa.manifestInfo.DVRWindowSize : 0
                    },
                    getDVRSeekOffset: nu,
                    convertToTimeCode: function(oa) {
                        oa = Math.max(oa, 0);
                        var La = Math.floor(oa / 3600)
                          , Ja = Math.floor(oa % 3600 / 60)
                          , ks = Math.floor(oa % 3600 % 60);
                        return (La === 0 ? "" : La < 10 ? "0" + La.toString() + ":" : La.toString() + ":") + (Ja < 10 ? "0" + Ja.toString() : Ja.toString()) + ":" + (ks < 10 ? "0" + ks.toString() : ks.toString())
                    },
                    formatUTC: function(oa, La, Ja) {
                        var ks = arguments.length > 3 && arguments[3] !== void 0 && arguments[3]
                          , Il = new Date(1e3 * oa)
                          , Fl = Il.toLocaleDateString(La)
                          , jl = Il.toLocaleTimeString(La, {
                            hour12: Ja
                        });
                        return ks ? jl + " " + Fl : jl
                    },
                    getVersion: $l,
                    getDebug: function() {
                        return ha
                    },
                    getBufferLength: Sl,
                    getVideoContainer: function() {
                        return ka ? ka.getVideoContainer() : null
                    },
                    getTTMLRenderingDiv: function() {
                        return ka ? ka.getTTMLRenderingDiv() : null
                    },
                    getVideoElement: Cl,
                    getSource: function() {
                        if (!ra)
                            throw Qe;
                        return ra
                    },
                    setLiveDelayFragmentCount: function(oa) {
                        ia.setLiveDelayFragmentCount(oa)
                    },
                    setLiveDelay: function(oa) {
                        ia.setLiveDelay(oa)
                    },
                    getLiveDelay: function() {
                        return ia.getLiveDelay()
                    },
                    getCurrentLiveLatency: function() {
                        if (!Kt)
                            throw ei;
                        return Ea ? Na.getCurrentLiveLatency() : NaN
                    },
                    useSuggestedPresentationDelay: function(oa) {
                        ia.setUseSuggestedPresentationDelay(oa)
                    },
                    enableLastBitrateCaching: function(oa, La) {
                        ia.setLastBitrateCachingInfo(oa, La)
                    },
                    enableLastMediaSettingsCaching: function(oa, La) {
                        ia.setLastMediaSettingsCachingInfo(oa, La)
                    },
                    setMaxAllowedBitrateFor: function(oa, La) {
                        ya.setMaxAllowedBitrateFor(oa, La)
                    },
                    getMaxAllowedBitrateFor: function(oa) {
                        return ya.getMaxAllowedBitrateFor(oa)
                    },
                    getTopBitrateInfoFor: function(oa) {
                        if (!oi)
                            throw xe;
                        return ya.getTopBitrateInfoFor(oa)
                    },
                    setMinAllowedBitrateFor: function(oa, La) {
                        ya.setMinAllowedBitrateFor(oa, La)
                    },
                    getMinAllowedBitrateFor: function(oa) {
                        return ya.getMinAllowedBitrateFor(oa)
                    },
                    setMaxAllowedRepresentationRatioFor: function(oa, La) {
                        ya.setMaxAllowedRepresentationRatioFor(oa, La)
                    },
                    getMaxAllowedRepresentationRatioFor: function(oa) {
                        return ya.getMaxAllowedRepresentationRatioFor(oa)
                    },
                    setAutoPlay: cl,
                    getAutoPlay: function() {
                        return ri
                    },
                    setScheduleWhilePaused: function(oa) {
                        ia.setScheduleWhilePaused(oa)
                    },
                    getScheduleWhilePaused: function() {
                        return ia.getScheduleWhilePaused()
                    },
                    getDashMetrics: fl,
                    getMetricsFor: bl,
                    getQualityFor: function(oa) {
                        if (!oi)
                            throw xe;
                        return ya.getQualityFor(oa, Sa.getActiveStreamInfo())
                    },
                    setQualityFor: function(oa, La) {
                        if (!oi)
                            throw xe;
                        ya.setPlaybackQuality(oa, Sa.getActiveStreamInfo(), La)
                    },
                    updatePortalSize: function() {
                        ya.setElementSize(),
                        ya.setWindowResizeEventCalled(!0)
                    },
                    getLimitBitrateByPortal: function() {
                        return ya.getLimitBitrateByPortal()
                    },
                    setLimitBitrateByPortal: function(oa) {
                        ya.setLimitBitrateByPortal(oa)
                    },
                    getUsePixelRatioInLimitBitrateByPortal: function() {
                        return ya.getUsePixelRatioInLimitBitrateByPortal()
                    },
                    setUsePixelRatioInLimitBitrateByPortal: function(oa) {
                        ya.setUsePixelRatioInLimitBitrateByPortal(oa)
                    },
                    getBitrateInfoListFor: function(oa) {
                        if (!oi)
                            throw xe;
                        var La = Wu();
                        return La ? La.getBitrateListFor(oa) : []
                    },
                    setInitialBitrateFor: function(oa, La) {
                        ya.setInitialBitrateFor(oa, La)
                    },
                    getInitialBitrateFor: function(oa) {
                        if (!oi)
                            throw xe;
                        return ya.getInitialBitrateFor(oa)
                    },
                    setInitialRepresentationRatioFor: function(oa, La) {
                        ya.setInitialRepresentationRatioFor(oa, La)
                    },
                    getInitialRepresentationRatioFor: function(oa) {
                        return ya.getInitialRepresentationRatioFor(oa)
                    },
                    getStreamsFromManifest: function(oa) {
                        if (!oi)
                            throw xe;
                        return ta.getStreamsInfo(oa)
                    },
                    getTracksFor: Zl,
                    getTracksForTypeFromManifest: function(oa, La, Ja) {
                        if (!oi)
                            throw xe;
                        return (Ja = Ja || ta.getStreamsInfo(La, 1)[0]) ? ta.getAllMediaInfoForType(Ja, oa, La) : []
                    },
                    getCurrentTrackFor: function(oa) {
                        if (!oi)
                            throw xe;
                        var La = Sa.getActiveStreamInfo();
                        return La ? wa.getCurrentTrackFor(oa, La) : null
                    },
                    setInitialMediaSettingsFor: function(oa, La) {
                        if (!Kt)
                            throw ei;
                        wa.setInitialSettings(oa, La)
                    },
                    getInitialMediaSettingsFor: function(oa) {
                        if (!Kt)
                            throw ei;
                        return wa.getInitialSettings(oa)
                    },
                    setCurrentTrack: function(oa) {
                        if (!oi)
                            throw xe;
                        wa.setTrack(oa)
                    },
                    getTrackSwitchModeFor: function(oa) {
                        if (!Kt)
                            throw ei;
                        return wa.getSwitchMode(oa)
                    },
                    setTrackSwitchModeFor: function(oa, La) {
                        if (!Kt)
                            throw ei;
                        wa.setSwitchMode(oa, La)
                    },
                    setSelectionModeForInitialTrack: function(oa) {
                        if (!Kt)
                            throw ei;
                        wa.setSelectionModeForInitialTrack(oa)
                    },
                    getSelectionModeForInitialTrack: function() {
                        if (!Kt)
                            throw ei;
                        return wa.getSelectionModeForInitialTrack()
                    },
                    setFastSwitchEnabled: function(oa) {
                        ia.setFastSwitchEnabled(oa)
                    },
                    getFastSwitchEnabled: function() {
                        return ia.getFastSwitchEnabled()
                    },
                    setMovingAverageMethod: function(oa) {
                        oa === ie.MOVING_AVERAGE_SLIDING_WINDOW || oa === ie.MOVING_AVERAGE_EWMA ? ia.setMovingAverageMethod(oa) : ca("Warning: Ignoring setMovingAverageMethod(" + oa + ") - unknown value.")
                    },
                    getMovingAverageMethod: function() {
                        return ia.getMovingAverageMethod()
                    },
                    getAutoSwitchQualityFor: function(oa) {
                        return ya.getAutoSwitchBitrateFor(oa)
                    },
                    setAutoSwitchQualityFor: function(oa, La) {
                        ya.setAutoSwitchBitrateFor(oa, La)
                    },
                    setABRStrategy: function(oa) {
                        oa === ie.ABR_STRATEGY_DYNAMIC || oa === ie.ABR_STRATEGY_BOLA || oa === ie.ABR_STRATEGY_THROUGHPUT ? ia.setABRStrategy(oa) : ca("Warning: Ignoring setABRStrategy(" + oa + ") - unknown value.")
                    },
                    getABRStrategy: function() {
                        return ia.getABRStrategy()
                    },
                    useDefaultABRRules: function(oa) {
                        ia.setUseDefaultABRRules(oa)
                    },
                    addABRCustomRule: function(oa, La, Ja) {
                        ia.addABRCustomRule(oa, La, Ja)
                    },
                    removeABRCustomRule: function(oa) {
                        ia.removeABRCustomRule(oa)
                    },
                    removeAllABRCustomRule: function() {
                        ia.removeAllABRCustomRule()
                    },
                    setBandwidthSafetyFactor: function(oa) {
                        ia.setBandwidthSafetyFactor(oa)
                    },
                    getBandwidthSafetyFactor: function() {
                        return ia.getBandwidthSafetyFactor()
                    },
                    getAverageThroughput: function(oa) {
                        var La = ya.getThroughputHistory();
                        return La ? La.getAverageThroughput(oa) : 0
                    },
                    setAbandonLoadTimeout: function(oa) {
                        ia.setAbandonLoadTimeout(oa)
                    },
                    retrieveManifest: function(oa, La) {
                        var Ja = wu()
                          , ks = this;
                        la.on(bt.INTERNAL_MANIFEST_LOADED, function Il(Fl) {
                            Fl.error ? La(null, Fl.error) : La(Fl.manifest),
                            la.off(bt.INTERNAL_MANIFEST_LOADED, Il, ks),
                            Ja.reset()
                        }, ks),
                        _u(sa).getInstance().initialize(oa),
                        Ja.load(oa, Ha)
                    },
                    addUTCTimingSource: Kl,
                    removeUTCTimingSource: Ma,
                    clearDefaultUTCTimingSources: function() {
                        ia.setUTCTimingSources([])
                    },
                    restoreDefaultUTCTimingSources: xs,
                    setBufferToKeep: function(oa) {
                        ia.setBufferToKeep(oa)
                    },
                    setBufferAheadToKeep: function(oa) {
                        ia.setBufferAheadToKeep(oa)
                    },
                    setBufferPruningInterval: function(oa) {
                        ia.setBufferPruningInterval(oa)
                    },
                    setStableBufferTime: function(oa) {
                        ia.setStableBufferTime(oa)
                    },
                    getStableBufferTime: function() {
                        return ia.getStableBufferTime()
                    },
                    setBufferTimeAtTopQuality: function(oa) {
                        ia.setBufferTimeAtTopQuality(oa)
                    },
                    getBufferTimeAtTopQuality: function() {
                        return ia.getBufferTimeAtTopQuality()
                    },
                    setBufferTimeAtTopQualityLongForm: function(oa) {
                        ia.setBufferTimeAtTopQualityLongForm(oa)
                    },
                    getBufferTimeAtTopQualityLongForm: function() {
                        return ia.getBufferTimeAtTopQualityLongForm()
                    },
                    setFragmentLoaderRetryAttempts: function(oa) {
                        ia.setFragmentRetryAttempts(oa)
                    },
                    setFragmentLoaderRetryInterval: function(oa) {
                        ia.setFragmentRetryInterval(oa)
                    },
                    setManifestLoaderRetryAttempts: function(oa) {
                        ia.setManifestRetryAttempts(oa)
                    },
                    setManifestLoaderRetryInterval: function(oa) {
                        ia.setManifestRetryInterval(oa)
                    },
                    setXHRWithCredentialsForType: function(oa, La) {
                        ia.setXHRWithCredentialsForType(oa, La)
                    },
                    getXHRWithCredentialsForType: function(oa) {
                        return ia.getXHRWithCredentialsForType(oa)
                    },
                    setJumpGaps: function(oa) {
                        ia.setJumpGaps(oa)
                    },
                    getJumpGaps: function() {
                        return ia.getJumpGaps()
                    },
                    setSmallGapLimit: function(oa) {
                        ia.setSmallGapLimit(oa)
                    },
                    getSmallGapLimit: function() {
                        return ia.getSmallGapLimit()
                    },
                    getLowLatencyEnabled: function() {
                        return ia.getLowLatencyEnabled()
                    },
                    setLowLatencyEnabled: function(oa) {
                        return ia.setLowLatencyEnabled(oa)
                    },
                    setPreloadData: function(oa) {
                        return ia.setPreloadData(oa)
                    },
                    setManifestUpdateRetryInterval: function(oa) {
                        ia.setManifestUpdateRetryInterval(oa)
                    },
                    getManifestUpdateRetryInterval: function() {
                        return ia.getManifestUpdateRetryInterval()
                    },
                    setLongFormContentDurationThreshold: function(oa) {
                        ia.setLongFormContentDurationThreshold(oa)
                    },
                    setSegmentOverlapToleranceTime: function(oa) {
                        ia.setSegmentOverlapToleranceTime(oa)
                    },
                    setCacheLoadThresholdForType: function(oa, La) {
                        ia.setCacheLoadThresholdForType(oa, La)
                    },
                    getProtectionController: function() {
                        return xu()
                    },
                    attachProtectionController: function(oa) {
                        _a = oa
                    },
                    setProtectionData: function(oa) {
                        ni = oa,
                        Sa && Sa.setProtectionData(ni)
                    },
                    enableManifestDateHeaderTimeSource: function(oa) {
                        ia.setUseManifestDateHeaderTimeSource(oa)
                    },
                    attachVideoContainer: function(oa) {
                        if (!ka.getElement())
                            throw Pe;
                        ka.setVideoContainer(oa)
                    },
                    attachTTMLRenderingDiv: function(oa) {
                        if (!ka.getElement())
                            throw Pe;
                        ka.setTTMLRenderingDiv(oa)
                    },
                    getUseDeadTimeLatencyForAbr: function() {
                        return ya.getUseDeadTimeLatency()
                    },
                    setUseDeadTimeLatencyForAbr: function(oa) {
                        ya.setUseDeadTimeLatency(oa)
                    },
                    getThumbnail: function(oa) {
                        if (oa < 0)
                            return null;
                        var La = Na.getIsDynamic() ? nu(oa) : oa
                          , Ja = Sa.getStreamForTime(La);
                        if (Ja === null)
                            return null;
                        var ks = Ja.getThumbnailController()
                          , Il = Ja.getStreamInfo();
                        if (!ks || !Il)
                            return null;
                        var Fl = Sa.getTimeRelativeToStreamId(La, Ja.getId());
                        return ks.get(Fl)
                    },
                    setDefaultQualityFor: function(oa, La) {
                        ya || (ya = Ba(sa).getInstance()),
                        ya.setDefaultQualityFor(oa, La)
                    },
                    getDefaultQualityFor: function(oa) {
                        return ya.getDefaultQualityFor(oa)
                    },
                    getDroppedFramesInfo: function() {
                        return ya.getDroppedFramesInfo()
                    },
                    getCurrentSegmentInfoFor: function(oa) {
                        return ya.getCurrentSegmentInfoFor(oa)
                    },
                    onInitSegmentsLoaded: function(oa) {
                        ul = oa
                    },
                    getThroughputDict: function(oa) {
                        var La = ya.getThroughputHistory();
                        return La ? La.getDict(oa) : {}
                    },
                    getInitializeDate: zl,
                    updateSource: function(oa) {
                        if (!Kt)
                            throw ei;
                        typeof oa == "string" && _u(sa).getInstance().initialize(oa),
                        ql.video = {},
                        ql.audio = {},
                        ra = oa,
                        Sa.load(ra, Ha)
                    },
                    switchSource: function(oa) {
                        if (!Kt)
                            throw ei;
                        typeof oa == "string" && _u(sa).getInstance().initialize(oa),
                        ql.video = {},
                        ql.audio = {},
                        Ml.min = 0,
                        Ml.video = 0,
                        Ml.audio = 0,
                        ra = oa,
                        sl = 0,
                        ka.setDataOffsetAttr(0),
                        ia.setCachedDurationOffset("offset", 0),
                        ia.setCachedDurationOffset("time", 0),
                        ia.setCachedDurationOffset("duration", 0),
                        ia.setAppendingSourceState(!1),
                        ia.resetStartAndSeekTime(),
                        Ol = !1,
                        Ya = [],
                        (oi || Ea) && Au(),
                        Tl() && Os()
                    },
                    appendSource: su,
                    setEndOfStreamState: function(oa) {
                        ia && ia.setEndOfStreamState(oa)
                    },
                    setP2pPermission: function(oa) {
                        oa || ia.addBufferingCount()
                    },
                    setP2pType: function(oa, La) {
                        var Ja, ks = !1;
                        switch (oa) {
                        case "yf-eg":
                        case "yf-cg2":
                            window.YFDashIO && (ks = !0);
                            break;
                        case "xl-eg":
                        case "xl-cg2":
                            window.xyvp && (ks = !0);
                            break;
                        case "ks-eg":
                        case "ks-cg2":
                            window.KSLoader && (ks = !0);
                            break;
                        case "bili-eg":
                        case "bili-cg2":
                            window.DIYSdk && (ks = !0);
                            break;
                        case "pear-eg":
                        case "pear-cg2":
                            window.PearDownloader && (ks = !0)
                        }
                        ks ? window.__DASH_P2P_TYPE__ = oa : La ? (Ja = La,
                        new Promise(function(Il, Fl) {
                            var jl = document.createElement("script");
                            jl.src = Ja,
                            jl.onload = function() {
                                window.clearTimeout(xa),
                                Il()
                            }
                            ,
                            jl.onerror = function() {
                                window.clearTimeout(xa),
                                Fl(),
                                la.trigger(bt.PCDN_LOADED_ERROR, {
                                    code: i.DOWNLOAD_PCDN_SCRIPT_ERROR,
                                    url: Ja
                                })
                            }
                            ,
                            document.body.appendChild(jl),
                            xa = window.setTimeout(function() {
                                Fl(),
                                la.trigger(bt.PCDN_LOADED_ERROR, {
                                    code: i.DOWNLOAD_PCDN_SCRIPT_TIMEOUT,
                                    url: Ja
                                })
                            }, 2e3)
                        }
                        )).then(function() {
                            window.__DASH_P2P_TYPE__ = oa,
                            ca("[MediaPlayer] p2p Sdk Scripts Loaded")
                        }).catch(function() {
                            console.warn("load p2p sdk scripts failed")
                        }) : console.warn("lack p2p sdk scripts")
                    },
                    switchAudioTrack: function(oa) {
                        return ia.getAudioTrackIds().find(function(La) {
                            return La.id === oa
                        }) ? (ia.setAudioTrackId(oa),
                        la.trigger(bt.SWITCH_AUDIO_TRACK_REQUEST, {
                            id: oa
                        }),
                        0) : -1
                    },
                    getCurrentAudioTrackId: function() {
                        return ia.getAudioTrackId()
                    },
                    getAudioTrackList: function() {
                        return ia.getAudioTrackIds()
                    },
                    getRetryTimes: function() {
                        return ia.getRetryTimes()
                    },
                    getSpaceUtilLastSeekInSec: function() {
                        return (new Date().getTime() - ia.getLastStartSeekTime()) / 1e3
                    },
                    reset: function() {
                        hu(null),
                        xl(null),
                        ni = null,
                        il = !1,
                        Ol = !1,
                        sl = 0,
                        Ya = [],
                        _a && (_a.reset(),
                        _a = null),
                        Da && (Da.reset(),
                        Da = null),
                        Na && (Na.reset(),
                        Na = null),
                        la.reset()
                    }
                },
                function() {
                    Kt = !1,
                    Ea = !1,
                    oi = !1,
                    ri = !0,
                    _a = null,
                    ni = null,
                    ta = null,
                    bt.extend(vd),
                    ia = Id(sa).getInstance(),
                    ka = Nh(sa).getInstance(),
                    sl = 0,
                    gl = !1,
                    Ya = [],
                    al = {
                        video: 0,
                        audio: 0
                    },
                    _l = 0,
                    la.on(bt.SEGMENTS_LOADED, dl, ti),
                    la.on(bt.BUFFER_LEVEL_UPDATED, iu, ti),
                    la.on(bt.PLAYBACK_ENDED, Bl, this),
                    la.on(bt.STREAM_BUFFERING_COMPLETED, Bl, this),
                    la.on(bt.PLAYBACK_TIME_UPDATED, qa, this),
                    la.on(bt.PLAYBACK_METADATA_LOADED, El, this)
                }(),
                ti
            }
            Jd.__dashjs_factory_name = "MediaPlayer";
            var ec = $.a.getClassFactory(Jd);
            ec.events = vd,
            $.a.updateClassFactory(Jd.__dashjs_factory_name, ec),
            ye.a = ec
        }
        , function(y, ye, ve) {
            var ie, ae, i, O, $, Te = {
                encode: function(Re) {
                    for (var Ye = [], _t = 0; _t < Re.length; ++_t) {
                        var Jt = Re.charCodeAt(_t);
                        Jt < 128 ? Ye.push(Jt) : Jt < 2048 ? (Ye.push(192 | Jt >> 6),
                        Ye.push(128 | 63 & Jt)) : Jt < 65536 ? (Ye.push(224 | Jt >> 12),
                        Ye.push(128 | 63 & Jt >> 6),
                        Ye.push(128 | 63 & Jt)) : (Ye.push(240 | Jt >> 18),
                        Ye.push(128 | 63 & Jt >> 12),
                        Ye.push(128 | 63 & Jt >> 6),
                        Ye.push(128 | 63 & Jt))
                    }
                    return Ye
                },
                decode: function(Re) {
                    for (var Ye = [], _t = 0; _t < Re.length; ) {
                        var Jt = Re[_t++];
                        Jt < 128 || (Jt < 224 ? (Jt = (31 & Jt) << 6,
                        Jt |= 63 & Re[_t++]) : Jt < 240 ? (Jt = (15 & Jt) << 12,
                        Jt |= (63 & Re[_t++]) << 6,
                        Jt |= 63 & Re[_t++]) : (Jt = (7 & Jt) << 18,
                        Jt |= (63 & Re[_t++]) << 12,
                        Jt |= (63 & Re[_t++]) << 6,
                        Jt |= 63 & Re[_t++])),
                        Ye.push(String.fromCharCode(Jt))
                    }
                    return Ye.join("")
                }
            }, we = {};
            ie = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            ae = function(Re) {
                for (var Ye = 0, _t = [], Jt = 0 | Re.length / 3; 0 < Jt--; ) {
                    var bt = (Re[Ye] << 16) + (Re[Ye + 1] << 8) + Re[Ye + 2];
                    Ye += 3,
                    _t.push(ie.charAt(63 & bt >> 18)),
                    _t.push(ie.charAt(63 & bt >> 12)),
                    _t.push(ie.charAt(63 & bt >> 6)),
                    _t.push(ie.charAt(63 & bt))
                }
                return Re.length - Ye == 2 ? (bt = (Re[Ye] << 16) + (Re[Ye + 1] << 8),
                _t.push(ie.charAt(63 & bt >> 18)),
                _t.push(ie.charAt(63 & bt >> 12)),
                _t.push(ie.charAt(63 & bt >> 6)),
                _t.push("=")) : Re.length - Ye == 1 && (bt = Re[Ye] << 16,
                _t.push(ie.charAt(63 & bt >> 18)),
                _t.push(ie.charAt(63 & bt >> 12)),
                _t.push("==")),
                _t.join("")
            }
            ,
            i = function() {
                for (var Re = [], Ye = 0; Ye < ie.length; ++Ye)
                    Re[ie.charCodeAt(Ye)] = Ye;
                return Re["=".charCodeAt(0)] = 0,
                Re
            }(),
            O = function(Re) {
                for (var Ye = 0, _t = [], Jt = 0 | Re.length / 4; 0 < Jt--; ) {
                    var bt = (i[Re.charCodeAt(Ye)] << 18) + (i[Re.charCodeAt(Ye + 1)] << 12) + (i[Re.charCodeAt(Ye + 2)] << 6) + i[Re.charCodeAt(Ye + 3)];
                    _t.push(255 & bt >> 16),
                    _t.push(255 & bt >> 8),
                    _t.push(255 & bt),
                    Ye += 4
                }
                return _t && (Re.charAt(Ye - 2) == "=" ? (_t.pop(),
                _t.pop()) : Re.charAt(Ye - 1) == "=" && _t.pop()),
                _t
            }
            ,
            $ = {
                encode: function(Re) {
                    for (var Ye = [], _t = 0; _t < Re.length; ++_t)
                        Ye.push(Re.charCodeAt(_t));
                    return Ye
                },
                decode: function(Re) {
                    for (var Ye = 0; Ye < s.length; ++Ye)
                        a[Ye] = String.fromCharCode(a[Ye]);
                    return a.join("")
                }
            },
            we.decodeArray = function(Re) {
                var Ye = O(Re);
                return new Uint8Array(Ye)
            }
            ,
            we.encodeASCII = function(Re) {
                var Ye = $.encode(Re);
                return ae(Ye)
            }
            ,
            we.decodeASCII = function(Re) {
                var Ye = O(Re);
                return $.decode(Ye)
            }
            ,
            we.encode = function(Re) {
                var Ye = Te.encode(Re);
                return ae(Ye)
            }
            ,
            we.decode = function(Re) {
                var Ye = O(Re);
                return Te.decode(Ye)
            }
            ,
            ye.decode = we.decode,
            ye.decodeArray = we.decodeArray,
            ye.encode = we.encode,
            ye.encodeASCII = we.encodeASCII
        }
        , function(y, ye, ve) {
            (function(ie) {
                var ae = ve(6);
                ve.d(ye, "a", function() {
                    return ae.a
                });
                var i = ve(0)
                  , O = ve(5)
                  , $ = typeof window < "u" && window || ie
                  , Te = $.dashjs;
                Te || (Te = $.dashjs = {}),
                Te.MediaPlayer = ae.a,
                Te.FactoryMaker = i.a,
                Te.Version = Object(O.a)()
            }
            ).call(this, ve(16))
        }
        , function(y, ye, ve) {
            var ie = this && this.__importDefault || function(ai) {
                return ai && ai.__esModule ? ai : {
                    default: ai
                }
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            }),
            ye.isMultiAudioTracksSupported = ye.getVideoCodecStrategy = ye.isFLACTypeSupported = ye.shouldUseHardwareDecodingAV1 = ye.isBrowserSupportHardwareDecodeAV1 = ye.getSupportedVideoIdList = ye.is8KTypeSupported = ye.isAV18KTypeSupported = ye.isBrowserSupportAV1 = ye.isMIMETypeSupported = ye.isAV1TypeSupported = ye.isHEVC8kTypeSupported = ye.isHEVCDolbyVisionTypeSupported = ye.isEC3DolbyATMOSTypeSupported = ye.isHEVCHDR10TypeSupported = ye.isBwpHEVCPrefSupported = ye.isHEVCTypeSupported = void 0;
            var ae = ve(3)
              , i = ve(10)
              , O = ie(ve(4))
              , $ = ve(11);
            ye.isHEVCTypeSupported = function() {
                return O.default.getSessionStorage("enableHEVCError") !== "1" && (!!window.__ENABLE_WASM_PLAYER__ || window.MediaSource && window.MediaSource.isTypeSupported && window.MediaSource.isTypeSupported('video/mp4; codecs="hev1.1.6.L120.90"'))
            }
            ,
            ye.isBwpHEVCPrefSupported = function() {
                if (O.default.getSessionStorage("enableHEVCError") === "1")
                    return !1;
                switch ($.getUserCodecPreferType()) {
                case ae.USER_CODEC_PREFER_TYPE.HEVC:
                    return !0;
                case ae.USER_CODEC_PREFER_TYPE.AV1:
                case ae.USER_CODEC_PREFER_TYPE.DISABLE:
                    return !1;
                default:
                    var ai = parseInt(O.default.getLocalStorage("bilibili_player_codec_prefer_strategy"), 10);
                    return ae.USER_CODEC_PREFER_TYPE.DISABLE !== ai
                }
            }
            ;
            var Te = function(ai) {
                var ii, da, aa, Ta;
                if (O.default.getSessionStorage("enableHEVCError") === "1")
                    return !1;
                var fa = !1
                  , He = (da = (ii = window.navigator) === null || ii === void 0 ? void 0 : ii.userAgent) === null || da === void 0 ? void 0 : da.toLowerCase()
                  , Zt = He.indexOf("safari") > -1 && He.indexOf("chrom") < 0
                  , si = 0
                  , ga = He.match(/version\/\d+/);
                Zt && ga && ga.length && (si = Number(ga[0].substr(8)));
                var ba = He.indexOf("edge/") > -1
                  , Ca = 0
                  , za = He.match(/edge\/\d+/);
                ba && za && za.length && (Ca = Number(za[0].substr(5)));
                var Ms = (ai == null ? void 0 : ai.codec) || "hev1.2.4.H150.90"
                  , Pa = window.MediaSource && window.MediaSource.isTypeSupported('video/mp4; codecs="' + Ms + '"')
                  , Ua = (aa = window.matchMedia("(color-gamut:p3)")) === null || aa === void 0 ? void 0 : aa.matches
                  , Wa = ((Ta = window.screen) === null || Ta === void 0 || Ta.colorDepth,
                parseInt(O.default.getLocalStorage("bilibili_player_force_hdr"), 10))
                  , Ka = i.getCurrentBrowserInfo()
                  , Ns = Ka.type
                  , pl = Ka.version;
                return Pa && (Zt && Ua && si >= 13 || ba && Ca >= 18 || Ua && Ns === "Chrome" && pl >= 104 || Wa) && (fa = !0),
                fa
            };
            ye.isHEVCHDR10TypeSupported = Te;
            var we = function(ai) {
                var ii = window.MediaSource;
                return ii && !!ii.isTypeSupported(ai)
            };
            ye.isMIMETypeSupported = we;
            var Re = function(ai) {
                var ii, da, aa, Ta;
                if (O.default.getSessionStorage("enableHEVCError") === "1")
                    return !1;
                var fa = (da = (ii = window.navigator) === null || ii === void 0 ? void 0 : ii.userAgent) === null || da === void 0 ? void 0 : da.toLowerCase()
                  , He = i.getSafariInfo(fa)
                  , Zt = i.getEdgeInfo(fa)
                  , si = !1;
                if (ai && ai.codec)
                    si = we('video/mp4; codecs="' + ai.codec + '"');
                else {
                    var ga = we('video/mp4; codecs="hev1.1.6.L153.90"')
                      , ba = we('video/mp4; codecs="dvh1.05.06"');
                    si = ga && ba
                }
                var Ca = parseInt(O.default.getLocalStorage("bilibili_player_force_hdr"), 10);
                if (!si)
                    return !1;
                var za = !1;
                He.isSafari && (za = ((aa = window.matchMedia("(color-gamut:p3)")) === null || aa === void 0 ? void 0 : aa.matches) && He.version >= 13 || !1),
                Zt.isEdge && (za = Zt.version >= 18);
                var Ms = i.getCurrentBrowserInfo()
                  , Pa = Ms.type
                  , Ua = Ms.version;
                return Pa === "Chrome" && (za = ((Ta = window.matchMedia("(color-gamut:p3)")) === null || Ta === void 0 ? void 0 : Ta.matches) && Ua >= 104 || !1),
                !!Ca || za
            };
            ye.isHEVCDolbyVisionTypeSupported = Re,
            ye.isEC3DolbyATMOSTypeSupported = function() {
                var ai, ii, da = we('audio/mp4; codecs="ec-3"'), aa = (ii = (ai = window.navigator) === null || ai === void 0 ? void 0 : ai.userAgent) === null || ii === void 0 ? void 0 : ii.toLowerCase(), Ta = i.getSafariInfo(aa), fa = i.getEdgeInfo(aa);
                return !!da && (Ta.isSafari && Ta.version >= 13 || fa.isEdge)
            }
            ;
            var Ye = function(ai) {
                var ii = (ai == null ? void 0 : ai.width) || 7680
                  , da = (ai == null ? void 0 : ai.height) || 4320
                  , aa = (ai == null ? void 0 : ai.codec) || "hev1.1.6.L180.90";
                if (!we('video/mp4;codecs="' + aa + '";width=' + ii + ";height=" + da))
                    return !1;
                var Ta = i.getSafariInfo();
                return !!parseInt(O.default.getLocalStorage("bilibili_player_force_8k"), 10) || Ta.isSafari && Ta.version >= 13
            };
            ye.isHEVC8kTypeSupported = Ye;
            var _t = function(ai) {
                var ii = i.getCurrentBrowserInfo()
                  , da = ii.type
                  , aa = ii.version;
                return ai = typeof ai == "number" ? ai : 4e3,
                da === i.BROWSER_TYPE.ChromiumEdge && aa >= 79 || da === i.BROWSER_TYPE.Chrome && aa >= 70 || da === i.BROWSER_TYPE.Firefox && aa >= 67 || da === i.BROWSER_TYPE.QQ && aa >= 70 && ai <= 4e3
            };
            ye.isBrowserSupportAV1 = _t,
            ye.isAV1TypeSupported = function(ai) {
                if (!window || !window.MediaSource || !window.MediaSource.isTypeSupported || !_t())
                    return !1;
                var ii = "av01.0.08M.08.0.110.01.01.01.0";
                if (!ai)
                    return we('video/mp4;codecs="' + ii + '";');
                var da = ai.width
                  , aa = ai.height;
                return we('video/mp4;codecs="' + ii + '";width=' + da + ";height=" + aa)
            }
            ;
            var Jt = function(ai) {
                var ii = (ai == null ? void 0 : ai.width) || 7680
                  , da = (ai == null ? void 0 : ai.height) || 4320
                  , aa = (ai == null ? void 0 : ai.codec) || "av01.0.16M.08.0.110.01.01.01.0";
                return !!we('video/mp4;codecs="' + aa + '";width=' + ii + ";height=" + da) && (!!parseInt(O.default.getLocalStorage("bilibili_player_force_8k"), 10) || _t())
            };
            ye.isAV18KTypeSupported = Jt,
            ye.is8KTypeSupported = function() {
                return Jt() || Ye()
            }
            ,
            ye.getSupportedVideoIdList = function(ai, ii, da) {
                try {
                    var aa = []
                      , Ta = typeof (ii == null ? void 0 : ii.enableHEVC) != "boolean" || ii.enableHEVC
                      , fa = typeof (ii == null ? void 0 : ii.enableAV1) != "boolean" || ii.enableAV1
                      , He = function(el) {
                        return el.indexOf("av01") !== -1 ? ae.VIDEO_CODEC_ID.AV1 : el.indexOf("hev") !== -1 || el.indexOf("dvh") !== -1 ? ae.VIDEO_CODEC_ID.HEVC : ae.VIDEO_CODEC_ID.AVC
                    }
                      , Zt = function(el) {
                        return el && el instanceof Array && el.length > 0
                    }
                      , si = function(el, wl, fu, vl) {
                        for (var kl = vl[0], Xl = vl[1], uu = 0, tu = el; uu < tu.length; uu++) {
                            var Ps = tu[uu]
                              , $s = He(Ps);
                            if ($s === ae.VIDEO_CODEC_ID.AV1 && Xl && Jt({
                                codec: Ps
                            })) {
                                wl.push(fu);
                                break
                            }
                            if ($s === ae.VIDEO_CODEC_ID.HEVC && kl && Ye({
                                codec: Ps
                            })) {
                                wl.push(fu);
                                break
                            }
                        }
                    }
                      , ga = function(el, wl, fu, vl) {
                        for (var kl = 0, Xl = el; kl < Xl.length; kl++)
                            if (vl({
                                codec: Xl[kl]
                            })) {
                                wl.push(fu);
                                break
                            }
                    };
                    if (!Zt(ai))
                        return aa;
                    var ba = typeof da == "number" ? da : 0
                      , Ca = ai.filter(function(el) {
                        return el.quality > ba
                    });
                    if (Ca.length <= 0)
                        return aa;
                    for (var za = 0, Ms = Ca; za < Ms.length; za++) {
                        var Pa = Ms[za]
                          , Ua = Pa.quality
                          , Wa = Pa.codecs;
                        if (Zt(Wa))
                            if ([ae.VIDEO_QN.QN_DOLBY_VISION, ae.VIDEO_QN.QN_HDR10, ae.VIDEO_QN.QN_8K].includes(Ua))
                                if (ae.VIDEO_QN.QN_8K === Ua)
                                    (Ta || fa) && si(Wa, aa, Ua, [Ta, fa]);
                                else {
                                    if (!Ta)
                                        continue;
                                    ga(Wa, aa, Ua, ae.VIDEO_QN.QN_DOLBY_VISION === Ua ? Re : Te)
                                }
                            else
                                for (var Ka = 0, Ns = Wa; Ka < Ns.length; Ka++) {
                                    var pl = Ns[Ka];
                                    if (we('video/mp4;codecs="' + pl + '";')) {
                                        aa.push(Ua);
                                        break
                                    }
                                }
                        else
                            aa.push(Ua)
                    }
                    return aa
                } catch (el) {
                    return []
                }
            }
            ;
            var bt = function() {
                var ai = i.getCurrentBrowserInfo()
                  , ii = ai.type
                  , da = ai.version;
                return ii === i.BROWSER_TYPE.ChromiumEdge && da >= 79 || ii === i.BROWSER_TYPE.Chrome && da >= 70
            };
            ye.isBrowserSupportHardwareDecodeAV1 = bt,
            ye.shouldUseHardwareDecodingAV1 = function() {
                if (!bt())
                    return !1;
                var ai = i.getGPUInfo().toLowerCase();
                return !!Object.values({
                    rtx3xx: /rtx 3[0-9]{3}/,
                    m1max: /m1 max/
                }).some(function(ii) {
                    return ii.test(ai)
                })
            }
            ,
            ye.isFLACTypeSupported = function() {
                var ai, ii, da = we('audio/mp4; codecs="flac"'), aa = (ii = (ai = window.navigator) === null || ai === void 0 ? void 0 : ai.userAgent) === null || ii === void 0 ? void 0 : ii.toLowerCase(), Ta = i.getSafariInfo(aa);
                return !!da && (Ta.isSafari && Ta.version >= 13 || da)
            }
            ,
            ye.getVideoCodecStrategy = function(ai) {
                return $.applyCodecStrategy(ai)
            }
            ,
            ye.isMultiAudioTracksSupported = function() {
                var ai = i.getCurrentBrowserInfo()
                  , ii = ai.type
                  , da = ai.version;
                return ii === i.BROWSER_TYPE.ChromiumEdge && da >= 79 || ii === i.BROWSER_TYPE.Chrome && da >= 69 || ii === i.BROWSER_TYPE.Firefox && da >= 67 || ii === i.BROWSER_TYPE.QQ && da >= 69 || ii === i.BROWSER_TYPE.Safari && da >= 13 || ii === i.BROWSER_TYPE.Sogou
            }
        }
        , function(y, ye, ve) {
            var ie = this && this.__importDefault || function(O) {
                return O && O.__esModule ? O : {
                    default: O
                }
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            }),
            ye.BROWSER_TYPE = ye.getGPUInfo = ye.getCurrentBrowserInfo = ye.getFireFoxInfo = ye.getEdgeInfo = ye.getSafariInfo = void 0;
            var ae, i = ie(ve(4));
            (function(O) {
                O.Chrome = "Chrome",
                O.ChromiumEdge = "Edge",
                O.LegacyEdge = "LegacyEdge",
                O.Firefox = "FireFox",
                O.Safari = "Safari",
                O.QQ = "QQ",
                O.Sogou = "Sogou",
                O.Other = "Other"
            }
            )(ae || (ae = {})),
            ye.BROWSER_TYPE = ae,
            ye.getSafariInfo = function(O) {
                var $, Te;
                O || (O = (Te = ($ = window.navigator) === null || $ === void 0 ? void 0 : $.userAgent) === null || Te === void 0 ? void 0 : Te.toLowerCase());
                var we = O.indexOf("safari") > -1 && O.indexOf("chrom") < 0
                  , Re = O.match(/version\/\d+/);
                return {
                    isSafari: we,
                    version: we && (Re != null && Re.length) ? +Re[0].substr(8) : -1
                }
            }
            ,
            ye.getEdgeInfo = function(O) {
                var $, Te;
                O || (O = (Te = ($ = window.navigator) === null || $ === void 0 ? void 0 : $.userAgent) === null || Te === void 0 ? void 0 : Te.toLowerCase());
                var we = O.indexOf("edge/") > -1
                  , Re = O.match(/edge\/\d+/);
                return {
                    isEdge: we,
                    version: we && (Re != null && Re.length) ? +Re[0].substr(5) : -1
                }
            }
            ,
            ye.getFireFoxInfo = function(O) {
                var $, Te;
                O || (O = (Te = ($ = window.navigator) === null || $ === void 0 ? void 0 : $.userAgent) === null || Te === void 0 ? void 0 : Te.toLowerCase());
                var we = O.indexOf("Firefox/") > -1
                  , Re = O.match(/Firefox\/\d+/);
                return {
                    isFireFox: we,
                    version: we && (Re != null && Re.length) ? +Re[0].substr(8) : -1
                }
            }
            ,
            ye.getCurrentBrowserInfo = function() {
                var O, $, Te = ($ = (O = window.navigator) === null || O === void 0 ? void 0 : O.userAgent) === null || $ === void 0 ? void 0 : $.toLowerCase(), we = {
                    type: ae.Other,
                    version: 0
                };
                try {
                    var Re = {
                        Chrome: Te.indexOf("chrome") > -1 && Te.indexOf("safari") > -1,
                        Firefox: Te.indexOf("firefox") > -1,
                        Safari: Te.indexOf("safari") > -1 && Te.indexOf("chrome") === -1,
                        LegacyEdge: Te.indexOf("edge") > -1,
                        Edge: Te.indexOf("edg/") > -1,
                        QQ: Te.indexOf("qqbrowser") > -1,
                        Sogou: Te.indexOf("se 2.x") > -1
                    };
                    for (var Ye in Re)
                        if (Re[Ye]) {
                            var _t = ""
                              , Jt = null;
                            Ye === "QQ" ? (_t = Te.match(/chrome\/([\d.]+)/)[1],
                            Jt = ae.QQ) : Ye === "Chrome" ? (Jt = ae.Chrome,
                            _t = Te.match(/chrome\/([\d.]+)/)[1]) : Ye === "Firefox" ? (_t = Te.match(/firefox\/([\d.]+)/)[1],
                            Jt = ae.Firefox) : Ye === "Safari" ? (_t = Te.match(/version\/([\d.]+)/)[1],
                            Jt = ae.Safari) : Ye === "Edge" ? (_t = Te.match(/edg\/([\d.]+)/)[1],
                            Jt = ae.ChromiumEdge) : Ye === "LegacyEdge" ? (_t = Te.match(/edge\/([\d.]+)/)[1],
                            Jt = ae.LegacyEdge) : Ye === "Sogou" && (Jt = ae.Sogou,
                            _t = Te.match(/chrome\/([\d.]+)/)[1]),
                            we.type = Jt,
                            we.version = parseInt(_t, 10)
                        }
                } catch (bt) {
                    we.type = ae.Other,
                    we.version = 0
                }
                return we
            }
            ,
            ye.getGPUInfo = function() {
                return i.default.getLocalStorage("bilibili_player_gpu_renderer") || ""
            }
        }
        , function(y, ye, ve) {
            var ie = this && this.__importDefault || function(da) {
                return da && da.__esModule ? da : {
                    default: da
                }
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            }),
            ye.getUserCodecPreferType = ye.applyCodecStrategy = void 0;
            var ae = ve(3)
              , i = ie(ve(4))
              , O = ve(9)
              , $ = "bilibili_player_codec_prefer_type"
              , Te = -1
              , we = 0
              , Re = 1
              , Ye = {
                HARDWARE: ae.VIDEO_QN.QN_4K,
                SOFTWARE: ae.VIDEO_QN.QN_1080P_60
            }
              , _t = [ae.VIDEO_QN.QN_8K]
              , Jt = {
                HARDWARE: ae.VIDEO_QN.QN_4K,
                SOFTWARE: ae.VIDEO_QN.QN_1080P_PLUS,
                WASM: ae.VIDEO_QN.QN_1080P_60
            }
              , bt = [ae.VIDEO_QN.QN_HDR10, ae.VIDEO_QN.QN_DOLBY_VISION, ae.VIDEO_QN.QN_8K];
            function ai() {
                return parseInt(i.default.getLocalStorage($), 10) || ae.USER_CODEC_PREFER_TYPE.RECOMMEND
            }
            function ii() {
                return new Promise(function(da, aa) {
                    var Ta = "bilibili_player_codec_prefer_reset"
                      , fa = "1.5.2";
                    i.default.getLocalStorage(Ta) !== fa ? (i.default.setLocalStorage(Ta, fa),
                    da()) : aa()
                }
                )
            }
            ye.applyCodecStrategy = function(da) {
                var aa, Ta, fa = da.state, He = da.manifest, Zt = da.enableAV1, si = da.enableHEVC, ga = da.log, ba = da.defaultVideoQn, Ca = ae.VIDEO_CODEC_ID.HEVC, za = ae.VIDEO_CODEC_ID.AV1, Ms = ae.VIDEO_CODEC_ID.AVC, Pa = Te, Ua = Re, Wa = we, Ka = fa ? fa.defaultVideoQuality : ba;
                Ka = Ka || 0;
                var Ns = Pa
                  , pl = Pa
                  , el = !1
                  , wl = !1
                  , fu = He.video
                  , vl = He.duration;
                if (fu && fu.forEach(function(Xl) {
                    Xl.codecid === za && (Ns = O.isMIMETypeSupported('video/mp4;codecs="' + Xl.codecs + '";') ? Ua : Wa,
                    Xl.id !== Ka && Ka !== 0 || (el = !0)),
                    Xl.codecid === Ca && (pl = O.isMIMETypeSupported('video/mp4;codecs="' + Xl.codecs + '";') ? Ua : Wa,
                    Xl.id !== Ka && Ka !== 0 || (wl = !0))
                }),
                ga && ga({
                    type: "UA",
                    message: "" + ((Ta = (aa = window.navigator) === null || aa === void 0 ? void 0 : aa.userAgent) === null || Ta === void 0 ? void 0 : Ta.toLowerCase())
                }),
                ga && ga({
                    type: "abilityDetect",
                    message: "[0]Ability: isAV1CodecSupported: " + Ns + ", isAV1HasCurrentQn: " + el + "        isHEVCCodecSupported: " + pl + ", isHEVCHasCurrentQn: " + wl
                }),
                Ns === Ua && el && function(Xl, uu, tu, Ps, $s) {
                    var nl = Xl;
                    if (nl) {
                        var Ll = 0;
                        uu && uu.defaultVideoQuality ? Ll = uu.defaultVideoQuality : typeof $s == "number" && (Ll = $s);
                        var Nl = Ye.HARDWARE
                          , Gl = Ye.SOFTWARE;
                        Ll > (O.shouldUseHardwareDecodingAV1() ? Nl : Gl) && (nl = !1);
                        var vu = ai();
                        switch (vu) {
                        case ae.USER_CODEC_PREFER_TYPE.AV1:
                            nl = !0;
                            break;
                        case ae.USER_CODEC_PREFER_TYPE.DISABLE:
                        case ae.USER_CODEC_PREFER_TYPE.HEVC:
                            nl = !1
                        }
                        _t.includes(Ll) && (nl = !0),
                        O.isBrowserSupportAV1(tu) || (nl = !1);
                        var Cu = !!+i.default.getSessionStorage("enableAV1Error");
                        Cu && (nl = !1),
                        Ps && Ps({
                            type: "applyAV1Strategy",
                            message: "[1] Apply AV1 strategy, enable: " + nl + ", preferType: " + vu + ", hardwareLimit: " + Nl + ", softwareLimit: " + Gl + ", prevEnableAV1Error: " + Cu
                        })
                    }
                    return nl
                }(Zt, fa, vl, ga, ba))
                    return za;
                var kl = !!window.__ENABLE_WASM_PLAYER__;
                return (pl === Ua || kl) && wl && function(Xl, uu, tu, Ps) {
                    var $s = Xl;
                    if ($s) {
                        var nl = navigator && navigator.userAgent && navigator.userAgent.toLowerCase()
                          , Ll = nl.indexOf("edge/") > -1
                          , Nl = uu && uu.defaultVideoQuality || Ps
                          , Gl = Jt.SOFTWARE
                          , vu = Jt.HARDWARE
                          , Cu = Jt.WASM
                          , Ru = Nl > Gl && !Ll && nl.indexOf("chrome/") > 0
                          , Yu = Nl > vu
                          , nd = nl.indexOf("edg/") > -1
                          , qu = !!+i.default.getSessionStorage("enableHEVCError")
                          , ml = "bilibili_player_codec_prefer_strategy"
                          , Fa = parseInt(i.default.getLocalStorage(ml), 10);
                        window.__ENABLE_WASM_PLAYER__ ? Nl > Cu && ($s = !1) : (Ru || Yu) && ($s = !1);
                        var Za = ai();
                        ae.USER_CODEC_PREFER_TYPE.HEVC === Za ? $s = !0 : ae.USER_CODEC_PREFER_TYPE.DISABLE === Za || ae.USER_CODEC_PREFER_TYPE.AV1 === Za ? ($s = !1,
                        ii().then(function() {
                            i.default.setLocalStorage($, "" + ae.USER_CODEC_PREFER_TYPE.RECOMMEND)
                        }).catch(function() {})) : (ii().catch(function() {}),
                        ae.USER_CODEC_PREFER_TYPE.DISABLE === Fa && ($s = !1)),
                        bt.includes(Nl) && ($s = !0),
                        (!window.__ENABLE_WASM_PLAYER__ && nd || qu) && ($s = !1),
                        tu && tu({
                            type: "applyHEVCStrategy",
                            message: "[1] Apply HEVC strategy, enable: " + $s + ", preferType: " + Za + ", hardwareLimit: " + vu + ", softwareLimit: " + Gl + ", wasm: " + Cu + ", prevEnableHEVCError: " + qu + ", strategyType: " + Fa
                        })
                    }
                    return $s
                }(si, fa, ga, ba) ? Ca : Ms
            }
            ,
            ye.getUserCodecPreferType = ai
        }
        , function(y, ye, ve) {
            var ie = this && this.__assign || function() {
                return (ie = Object.assign || function(O) {
                    for (var $, Te = 1, we = arguments.length; Te < we; Te++)
                        for (var Re in $ = arguments[Te])
                            Object.prototype.hasOwnProperty.call($, Re) && (O[Re] = $[Re]);
                    return O
                }
                ).apply(this, arguments)
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            }),
            ye.BUFFERING = void 0;
            var ae = ve(3);
            ye.BUFFERING = {
                PLAYBACK: {
                    PLAYING: 1,
                    SEEKING: 2,
                    SWITCHING_QUALITY: 3,
                    SWITCHING_SOURCE: 4,
                    UPDATING_SOURCE: 5,
                    APPENDING_SOURCE: 6
                },
                TYPE: {
                    UNKNOWN: 0,
                    SEEKING: 10,
                    SEEKING_INSIDE_BUFFERED: 11,
                    SEEKING_OUTSIDE_BUFFERED: 12,
                    NETWORK: 20,
                    NETWORK_CONNECT_TIMEOUT: 21,
                    NETWORK_READING_TIMEOUT: 22,
                    NETWORK_DOWNLOAD_TIMEOUT: 23,
                    NETWORK_DOWNLOAD_ERROR: 24,
                    NETWORK_POOR: 25,
                    NETWORK_POOR_UNDER_PLAYBACKRATE: 26,
                    NETWORK_DOWNLOAD_TOO_LONG: 27,
                    MEDIA: 30,
                    MEDIA_ERR_ABORTED: 31,
                    MEDIA_ERR_NETWORK: 32,
                    MEDIA_ERR_DECODE: 33,
                    MEDIA_ERR_SRC_NOT_SUPPORTED: 34,
                    MEDIA_DECODING_PERFORMANCE: 35,
                    GAP: 40,
                    GAP_BEFORE_CURRENT: 41,
                    GAP_AFTER_CURRENT: 42,
                    PERFORMANCE: 50,
                    PERFORMANCE_UNKNOWN: 51,
                    INTERNAL: 60,
                    INTERNAL_STARTING: 61,
                    INTERNAL_ENDING: 62,
                    INTERNAL_UNNORMAL_RANGES: 63,
                    INTERNAL_VIDEO_RANGES: 64,
                    INTERNAL_AUDIO_RANGES: 65
                }
            };
            var i = function() {
                function O($) {
                    this.video = $,
                    this.swichingInfo = null,
                    this.downloadInfo = null
                }
                return O.prototype.setSwitchingInfo = function($) {
                    if (this.swichingInfo = $,
                    $ && this.video && this.video.buffered && this.video.buffered.length > 0) {
                        var Te = this.video.buffered.end(this.video.buffered.length - 1)
                          , we = this.video.currentTime
                          , Re = Math.floor(1e3 * (Te - we)) / 1e3;
                        this.swichingInfo.bufferLen = Re
                    }
                }
                ,
                O.prototype.getInfo = function($) {
                    var Te = {
                        type: -1
                    };
                    if (!$)
                        return Te;
                    try {
                        var we = this.video
                          , Re = we.currentTime
                          , Ye = we.duration
                          , _t = we.readyState
                          , Jt = we.buffered
                          , bt = Jt && Jt.length
                          , ai = we.seeking
                          , ii = we.playbackRate
                          , da = ye.BUFFERING.TYPE.UNKNOWN
                          , aa = $.playbackState || ye.BUFFERING.PLAYBACK.PLAYING;
                        if (!ai || aa !== ye.BUFFERING.PLAYBACK.PLAYING && aa !== ye.BUFFERING.PLAYBACK.SWITCHING_QUALITY || (aa = ye.BUFFERING.PLAYBACK.SEEKING),
                        Te = {
                            type: da,
                            isSeeking: ai,
                            cTime: Re,
                            duration: Ye,
                            rState: _t,
                            nRanges: bt,
                            vLength: $.videoBufferLength,
                            aLength: $.audioBufferLength,
                            activity: $.networkActivity,
                            vSpeed: Math.round($.videoSpeed),
                            aSpeed: Math.round($.audioSpeed),
                            playbackRate: ii,
                            vQn: $.videoCurrentQn,
                            aQn: $.audioCurrentQn,
                            retryTimes: $.retryTimes,
                            seekSpace: $.seekSpace
                        },
                        aa === ye.BUFFERING.PLAYBACK.SEEKING)
                            da = bt === 0 ? ye.BUFFERING.TYPE.SEEKING_OUTSIDE_BUFFERED : ye.BUFFERING.TYPE.SEEKING_INSIDE_BUFFERED;
                        else {
                            var Ta = this.checkGapInfo()
                              , fa = Ta.nativeBufferLength;
                            if (Te.nLength = fa,
                            Te.cRange = Ta.start + "-" + Ta.end,
                            Ta.hasGap)
                                da = Ta.type,
                                Te.gap = Ta.gapStart + "-" + Ta.gapEnd,
                                Te.gapLength = Ta.gapLength;
                            else if (fa < 1) {
                                var He = this.checkLackOfBufferInfo($);
                                da = He.type,
                                Te.vCode = He.videoErrorCode,
                                Te.aCode = He.audioErrorCode
                            } else
                                da = _t >= 3 ? ye.BUFFERING.TYPE.PERFORMANCE : ye.BUFFERING.TYPE.PERFORMANCE_UNKNOWN
                        }
                        var Zt = this.checkNativeErrorInfo();
                        Zt.type && (da = Zt.type,
                        Te.nCode = Zt.code);
                        var si = $.fragmentLoadingInfo;
                        if (si && si.video) {
                            var ga = si.video;
                            Te.vFragment = ga.id + "-" + ga.index,
                            $.latestPlayurlErrorHTTPCode && (Te.hCode = $.latestPlayurlErrorHTTPCode)
                        }
                        si && si.audio && (ga = si.audio,
                        Te.aFragment = ga.id + "-" + ga.index,
                        $.latestPlayurlErrorHTTPCode && (Te.hCode = $.latestPlayurlErrorHTTPCode)),
                        Te.type = "" + aa + (da || "00")
                    } catch (ba) {
                        throw new Error(ba.message)
                    }
                    return this.swichingInfo && (Te = ie(ie({}, Te), this.swichingInfo)),
                    this.downloadInfo && (Te = ie(ie({}, Te), this.downloadInfo)),
                    Te
                }
                ,
                O.prototype.checkGapInfo = function() {
                    var $ = this.video
                      , Te = $.currentTime
                      , we = $.buffered
                      , Re = we && we.length
                      , Ye = 0
                      , _t = !1
                      , Jt = 0
                      , bt = 0
                      , ai = {
                        start: 0,
                        end: 0
                    }
                      , ii = 0
                      , da = ye.BUFFERING.TYPE.UNKNOWN;
                    if (Re && Re > 1)
                        for (var aa = 0; aa < Re; aa++) {
                            var Ta = we.start(aa)
                              , fa = we.end(aa);
                            Ta <= Te && fa >= Te && (Ye = Math.floor(1e3 * (fa - Te)) / 1e3,
                            ai = {
                                start: Ta,
                                end: fa
                            },
                            da === ye.BUFFERING.TYPE.GAP_BEFORE_CURRENT ? bt = Ta : Jt = fa),
                            Ta > Te && Ta - Te <= 1 && da !== ye.BUFFERING.TYPE.GAP_BEFORE_CURRENT && (_t = !0,
                            da = ye.BUFFERING.TYPE.GAP_AFTER_CURRENT,
                            bt = bt ? Math.min(bt, Ta) : Ta,
                            Jt = ai.end),
                            Te - fa < 3 && Te - fa >= 0 && (_t = !0,
                            da = ye.BUFFERING.TYPE.GAP_BEFORE_CURRENT,
                            Jt = fa,
                            bt = ai.start)
                        }
                    else
                        Re === 1 && (fa = we.end(0),
                        ai = {
                            start: we.start(0),
                            end: fa
                        },
                        Ye = Math.floor(1e3 * (fa - Te)) / 1e3);
                    return _t && (ii = Math.round(1e3 * (bt - Jt)) / 1e3),
                    {
                        type: da,
                        start: ai.start,
                        end: ai.end,
                        nativeBufferLength: Ye,
                        hasGap: _t,
                        gapStart: Jt,
                        gapEnd: bt,
                        gapLength: ii
                    }
                }
                ,
                O.prototype.checkLackOfBufferInfo = function($) {
                    var Te = ye.BUFFERING.TYPE.UNKNOWN
                      , we = this.video
                      , Re = we.currentTime
                      , Ye = we.buffered
                      , _t = we.duration
                      , Jt = we.readyState
                      , bt = 0
                      , ai = 0;
                    if (Ye && Ye.length)
                        if (_t && _t - Re < 1)
                            Te = ye.BUFFERING.TYPE.INTERNAL_ENDING;
                        else {
                            var ii = this.checkNetworkInfo($);
                            Te = ii.type,
                            bt = ii.videoErrorCode,
                            ai = ii.audioErrorCode
                        }
                    else
                        Te = Re <= $.startOffsetTime && Jt <= 1 ? ye.BUFFERING.TYPE.INTERNAL_STARTING : ($.networkActivity.length && $.networkActivity.reduce(function(da, aa) {
                            return da + aa
                        })) < 100 ? ye.BUFFERING.TYPE.NETWORK_POOR : $.videoBufferLength ? $.audioBufferLength ? ye.BUFFERING.TYPE.INTERNAL_UNNORMAL_RANGES : ye.BUFFERING.TYPE.INTERNAL_AUDIO_RANGES : ye.BUFFERING.TYPE.INTERNAL_VIDEO_RANGES;
                    return {
                        type: Te,
                        videoErrorCode: bt,
                        audioErrorCode: ai
                    }
                }
                ,
                O.prototype.checkNetworkInfo = function($) {
                    var Te = this
                      , we = ye.BUFFERING.TYPE.UNKNOWN
                      , Re = this.video.currentTime
                      , Ye = $.videoBufferLength || 0
                      , _t = $.audioBufferLength || 0
                      , Jt = $.networkWarningHistory
                      , bt = this.getCurrentNetworkWarningInfo({
                        mediaType: ae.STRING.VIDEO,
                        currentQn: $.videoCurrentQn,
                        networkWarningHistory: Jt,
                        warningTime: Re + Ye,
                        bufferLength: Ye
                    }, 1)
                      , ai = this.getCurrentNetworkWarningInfo({
                        mediaType: ae.STRING.AUDIO,
                        currentQn: $.audioCurrentQn,
                        networkWarningHistory: Jt,
                        warningTime: Re + _t,
                        bufferLength: _t
                    }, 1)
                      , ii = bt.code
                      , da = ai.code
                      , aa = this.getBufferingTypeByPoorNetwork(ii)
                      , Ta = this.getBufferingTypeByPoorNetwork(da);
                    if (aa || Ta)
                        we = aa || "00",
                        Ta && (we = "" + we + Ta);
                    else if (this.video.playbackRate > 1)
                        we = ye.BUFFERING.TYPE.NETWORK_POOR_UNDER_PLAYBACKRATE;
                    else {
                        var fa = $.fragmentLoadingInfo
                          , He = function(Ca) {
                            if (!Ca)
                                return !1;
                            var za = Ca.startDownloadTime
                              , Ms = Ca.loaderType
                              , Pa = Ca.qn
                              , Ua = Ca.index
                              , Wa = (new Date().getTime() - za) / 1e3;
                            return Te.downloadInfo || (Te.downloadInfo = {}),
                            Te.downloadInfo[Ca.mediaType] = {
                                downloadTime: Wa,
                                loaderType: Ms,
                                qn: Pa,
                                index: Ua
                            },
                            Wa > 5
                        };
                        if (fa) {
                            var Zt = fa.video
                              , si = fa.audio
                              , ga = He(Zt)
                              , ba = He(si);
                            we = ga || ba ? ye.BUFFERING.TYPE.NETWORK_DOWNLOAD_TOO_LONG : ye.BUFFERING.TYPE.NETWORK
                        } else
                            we = ye.BUFFERING.TYPE.NETWORK
                    }
                    return {
                        type: we,
                        videoErrorCode: ii,
                        audioErrorCode: da,
                        videoBufferLength: Ye,
                        audioBufferLength: _t
                    }
                }
                ,
                O.prototype.checkNativeErrorInfo = function() {
                    var $ = this.video.error
                      , Te = $ && $.code || 0
                      , we = ye.BUFFERING.TYPE.UNKNOWN;
                    if ($ && Te)
                        switch (Te) {
                        case 1:
                            we = ye.BUFFERING.TYPE.MEDIA_ERR_ABORTED;
                            break;
                        case 2:
                            we = ye.BUFFERING.TYPE.MEDIA_ERR_NETWORK;
                            break;
                        case 3:
                            we = ye.BUFFERING.TYPE.MEDIA_ERR_DECODE;
                            break;
                        case 4:
                            we = ye.BUFFERING.TYPE.MEDIA_ERR_SRC_NOT_SUPPORTED;
                            break;
                        default:
                            we = ye.BUFFERING.TYPE.MEDIA
                        }
                    return {
                        type: we,
                        code: Te
                    }
                }
                ,
                O.prototype.getCurrentNetworkWarningInfo = function($, Te) {
                    if (Te === void 0 && (Te = 1),
                    !$)
                        return {
                            code: 0
                        };
                    var we = $.mediaType
                      , Re = {
                        code: 0,
                        type: "",
                        mediaType: $.mediaType
                    }
                      , Ye = $.networkWarningHistory
                      , _t = $.warningTime
                      , Jt = $.bufferLength
                      , bt = $.currentQn;
                    if (Ye.length && Jt < Te) {
                        _t += Te;
                        try {
                            var ai = Ye.filter(function(ii) {
                                return ii.mediaType === we && ii.startTime <= _t + Te && ii.startTime + ii.duration >= _t && ii.id === bt.toString()
                            });
                            ai.length && (Re = ai[ai.length - 1])
                        } catch (ii) {
                            throw new Error("getCurrentNetworkWarningInfo error, " + JSON.stringify(ii))
                        }
                    }
                    return Re
                }
                ,
                O.prototype.getBufferingTypeByPoorNetwork = function($) {
                    var Te = ye.BUFFERING.TYPE.UNKNOWN;
                    if ($)
                        switch ($) {
                        case ae.ERROR.CONNECT_FRAGMENT_ERROR_TIMEOUT:
                            Te = ye.BUFFERING.TYPE.NETWORK_CONNECT_TIMEOUT;
                            break;
                        case ae.ERROR.DOWNLOAD_FRAGMENT_ERROR_TIMEOUT:
                            Te = ye.BUFFERING.TYPE.NETWORK_DOWNLOAD_TIMEOUT;
                            break;
                        case ae.ERROR.DOWNLOAD_FRAGMENT_ERROR:
                            Te = ye.BUFFERING.TYPE.NETWORK_DOWNLOAD_ERROR
                        }
                    return Te
                }
                ,
                O
            }();
            ye.default = i
        }
        , function(y, ye, ve) {
            var ie = Array.isArray
              , ae = Object.keys
              , i = Object.prototype.hasOwnProperty;
            y.exports = function O($, Te) {
                if ($ === Te)
                    return !0;
                var we, Re, Ye, _t = ie($), Jt = ie(Te);
                if (_t && Jt) {
                    if ((Re = $.length) != Te.length)
                        return !1;
                    for (we = 0; we < Re; we++)
                        if (!O($[we], Te[we]))
                            return !1;
                    return !0
                }
                if (_t != Jt)
                    return !1;
                var bt = $ instanceof Date
                  , ai = Te instanceof Date;
                if (bt != ai)
                    return !1;
                if (bt && ai)
                    return $.getTime() == Te.getTime();
                var ii = $ instanceof RegExp
                  , da = Te instanceof RegExp;
                if (ii != da)
                    return !1;
                if (ii && da)
                    return $.toString() == Te.toString();
                if ($ instanceof Object && Te instanceof Object) {
                    var aa = ae($);
                    if ((Re = aa.length) !== ae(Te).length)
                        return !1;
                    for (we = 0; we < Re; we++)
                        if (!i.call(Te, aa[we]))
                            return !1;
                    for (we = 0; we < Re; we++)
                        if (!O($[Ye = aa[we]], Te[Ye]))
                            return !1;
                    return !0
                }
                return !1
            }
        }
        , function(y, ye, ve) {
            (function(ie) {
                var ae = {
                    42: 225,
                    92: 233,
                    94: 237,
                    95: 243,
                    96: 250,
                    123: 231,
                    124: 247,
                    125: 209,
                    126: 241,
                    127: 9608,
                    128: 174,
                    129: 176,
                    130: 189,
                    131: 191,
                    132: 8482,
                    133: 162,
                    134: 163,
                    135: 9834,
                    136: 224,
                    137: 32,
                    138: 232,
                    139: 226,
                    140: 234,
                    141: 238,
                    142: 244,
                    143: 251,
                    144: 193,
                    145: 201,
                    146: 211,
                    147: 218,
                    148: 220,
                    149: 252,
                    150: 8216,
                    151: 161,
                    152: 42,
                    153: 8217,
                    154: 9473,
                    155: 169,
                    156: 8480,
                    157: 8226,
                    158: 8220,
                    159: 8221,
                    160: 192,
                    161: 194,
                    162: 199,
                    163: 200,
                    164: 202,
                    165: 203,
                    166: 235,
                    167: 206,
                    168: 207,
                    169: 239,
                    170: 212,
                    171: 217,
                    172: 249,
                    173: 219,
                    174: 171,
                    175: 187,
                    176: 195,
                    177: 227,
                    178: 205,
                    179: 204,
                    180: 236,
                    181: 210,
                    182: 242,
                    183: 213,
                    184: 245,
                    185: 123,
                    186: 125,
                    187: 92,
                    188: 94,
                    189: 95,
                    190: 124,
                    191: 8764,
                    192: 196,
                    193: 228,
                    194: 214,
                    195: 246,
                    196: 223,
                    197: 165,
                    198: 164,
                    199: 9475,
                    200: 197,
                    201: 229,
                    202: 216,
                    203: 248,
                    204: 9487,
                    205: 9491,
                    206: 9495,
                    207: 9499
                }
                  , i = function(He) {
                    var Zt = He;
                    return ae.hasOwnProperty(He) && (Zt = ae[He]),
                    String.fromCharCode(Zt)
                }
                  , O = 15
                  , $ = 32
                  , Te = {
                    17: 1,
                    18: 3,
                    21: 5,
                    22: 7,
                    23: 9,
                    16: 11,
                    19: 12,
                    20: 14
                }
                  , we = {
                    17: 2,
                    18: 4,
                    21: 6,
                    22: 8,
                    23: 10,
                    19: 13,
                    20: 15
                }
                  , Re = {
                    25: 1,
                    26: 3,
                    29: 5,
                    30: 7,
                    31: 9,
                    24: 11,
                    27: 12,
                    28: 14
                }
                  , Ye = {
                    25: 2,
                    26: 4,
                    29: 6,
                    30: 8,
                    31: 10,
                    27: 13,
                    28: 15
                }
                  , _t = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"]
                  , Jt = {
                    verboseFilter: {
                        DATA: 3,
                        DEBUG: 3,
                        INFO: 2,
                        WARNING: 2,
                        TEXT: 1,
                        ERROR: 0
                    },
                    time: null,
                    verboseLevel: 0,
                    setTime: function(He) {
                        this.time = He
                    },
                    log: function(He, Zt) {
                        var si = this.verboseFilter[He];
                        this.verboseLevel >= si && console.log(this.time + " [" + He + "] " + Zt)
                    }
                }
                  , bt = function(He) {
                    for (var Zt = [], si = 0; si < He.length; si++)
                        Zt.push(He[si].toString(16));
                    return Zt
                }
                  , ai = function(He, Zt, si, ga, ba) {
                    this.foreground = He || "white",
                    this.underline = Zt || !1,
                    this.italics = si || !1,
                    this.background = ga || "black",
                    this.flash = ba || !1
                };
                ai.prototype = {
                    reset: function() {
                        this.foreground = "white",
                        this.underline = !1,
                        this.italics = !1,
                        this.background = "black",
                        this.flash = !1
                    },
                    setStyles: function(He) {
                        for (var Zt = ["foreground", "underline", "italics", "background", "flash"], si = 0; si < Zt.length; si++) {
                            var ga = Zt[si];
                            He.hasOwnProperty(ga) && (this[ga] = He[ga])
                        }
                    },
                    isDefault: function() {
                        return this.foreground === "white" && !this.underline && !this.italics && this.background === "black" && !this.flash
                    },
                    equals: function(He) {
                        return this.foreground === He.foreground && this.underline === He.underline && this.italics === He.italics && this.background === He.background && this.flash === He.flash
                    },
                    copy: function(He) {
                        this.foreground = He.foreground,
                        this.underline = He.underline,
                        this.italics = He.italics,
                        this.background = He.background,
                        this.flash = He.flash
                    },
                    toString: function() {
                        return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                    }
                };
                var ii = function(He, Zt, si, ga, ba, Ca) {
                    this.uchar = He || " ",
                    this.penState = new ai(Zt,si,ga,ba,Ca)
                };
                ii.prototype = {
                    reset: function() {
                        this.uchar = " ",
                        this.penState.reset()
                    },
                    setChar: function(He, Zt) {
                        this.uchar = He,
                        this.penState.copy(Zt)
                    },
                    setPenState: function(He) {
                        this.penState.copy(He)
                    },
                    equals: function(He) {
                        return this.uchar === He.uchar && this.penState.equals(He.penState)
                    },
                    copy: function(He) {
                        this.uchar = He.uchar,
                        this.penState.copy(He.penState)
                    },
                    isEmpty: function() {
                        return this.uchar === " " && this.penState.isDefault()
                    }
                };
                var da = function() {
                    this.chars = [];
                    for (var He = 0; He < $; He++)
                        this.chars.push(new ii);
                    this.pos = 0,
                    this.currPenState = new ai
                };
                da.prototype = {
                    equals: function(He) {
                        for (var Zt = !0, si = 0; si < $; si++)
                            if (!this.chars[si].equals(He.chars[si])) {
                                Zt = !1;
                                break
                            }
                        return Zt
                    },
                    copy: function(He) {
                        for (var Zt = 0; Zt < $; Zt++)
                            this.chars[Zt].copy(He.chars[Zt])
                    },
                    isEmpty: function() {
                        for (var He = !0, Zt = 0; Zt < $; Zt++)
                            if (!this.chars[Zt].isEmpty()) {
                                He = !1;
                                break
                            }
                        return He
                    },
                    setCursor: function(He) {
                        this.pos !== He && (this.pos = He),
                        this.pos < 0 ? (Jt.log("ERROR", "Negative cursor position " + this.pos),
                        this.pos = 0) : this.pos > $ && (Jt.log("ERROR", "Too large cursor position " + this.pos),
                        this.pos = $)
                    },
                    moveCursor: function(He) {
                        var Zt = this.pos + He;
                        if (He > 1)
                            for (var si = this.pos + 1; si < Zt + 1; si++)
                                this.chars[si].setPenState(this.currPenState);
                        this.setCursor(Zt)
                    },
                    backSpace: function() {
                        this.moveCursor(-1),
                        this.chars[this.pos].setChar(" ", this.currPenState)
                    },
                    insertChar: function(He) {
                        He >= 144 && this.backSpace();
                        var Zt = i(He);
                        this.pos >= $ ? Jt.log("ERROR", "Cannot insert " + He.toString(16) + " (" + Zt + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(Zt, this.currPenState),
                        this.moveCursor(1))
                    },
                    clearFromPos: function(He) {
                        var Zt;
                        for (Zt = He; Zt < $; Zt++)
                            this.chars[Zt].reset()
                    },
                    clear: function() {
                        this.clearFromPos(0),
                        this.pos = 0,
                        this.currPenState.reset()
                    },
                    clearToEndOfRow: function() {
                        this.clearFromPos(this.pos)
                    },
                    getTextString: function() {
                        for (var He = [], Zt = !0, si = 0; si < $; si++) {
                            var ga = this.chars[si].uchar;
                            ga !== " " && (Zt = !1),
                            He.push(ga)
                        }
                        return Zt ? "" : He.join("")
                    },
                    setPenStyles: function(He) {
                        this.currPenState.setStyles(He),
                        this.chars[this.pos].setPenState(this.currPenState)
                    }
                };
                var aa = function() {
                    this.rows = [];
                    for (var He = 0; He < O; He++)
                        this.rows.push(new da);
                    this.currRow = 14,
                    this.nrRollUpRows = null,
                    this.reset()
                };
                aa.prototype = {
                    reset: function() {
                        for (var He = 0; He < O; He++)
                            this.rows[He].clear();
                        this.currRow = 14
                    },
                    equals: function(He) {
                        for (var Zt = !0, si = 0; si < O; si++)
                            if (!this.rows[si].equals(He.rows[si])) {
                                Zt = !1;
                                break
                            }
                        return Zt
                    },
                    copy: function(He) {
                        for (var Zt = 0; Zt < O; Zt++)
                            this.rows[Zt].copy(He.rows[Zt])
                    },
                    isEmpty: function() {
                        for (var He = !0, Zt = 0; Zt < O; Zt++)
                            if (!this.rows[Zt].isEmpty()) {
                                He = !1;
                                break
                            }
                        return He
                    },
                    backSpace: function() {
                        this.rows[this.currRow].backSpace()
                    },
                    clearToEndOfRow: function() {
                        this.rows[this.currRow].clearToEndOfRow()
                    },
                    insertChar: function(He) {
                        this.rows[this.currRow].insertChar(He)
                    },
                    setPen: function(He) {
                        this.rows[this.currRow].setPenStyles(He)
                    },
                    moveCursor: function(He) {
                        this.rows[this.currRow].moveCursor(He)
                    },
                    setCursor: function(He) {
                        Jt.log("INFO", "setCursor: " + He),
                        this.rows[this.currRow].setCursor(He)
                    },
                    setPAC: function(He) {
                        Jt.log("INFO", "pacData = " + JSON.stringify(He));
                        var Zt = He.row - 1;
                        this.nrRollUpRows && Zt < this.nrRollUpRows - 1 && (Zt = this.nrRollUpRows - 1),
                        this.currRow = Zt;
                        var si = this.rows[this.currRow];
                        if (He.indent !== null) {
                            var ga = He.indent
                              , ba = Math.max(ga - 1, 0);
                            si.setCursor(He.indent),
                            He.color = si.chars[ba].penState.foreground
                        }
                        var Ca = {
                            foreground: He.color,
                            underline: He.underline,
                            italics: He.italics,
                            background: "black",
                            flash: !1
                        };
                        this.setPen(Ca)
                    },
                    setBkgData: function(He) {
                        Jt.log("INFO", "bkgData = " + JSON.stringify(He)),
                        this.backSpace(),
                        this.setPen(He),
                        this.insertChar(32)
                    },
                    setRollUpRows: function(He) {
                        this.nrRollUpRows = He
                    },
                    rollUp: function() {
                        if (this.nrRollUpRows !== null) {
                            Jt.log("TEXT", this.getDisplayText());
                            var He = this.currRow + 1 - this.nrRollUpRows
                              , Zt = this.rows.splice(He, 1)[0];
                            Zt.clear(),
                            this.rows.splice(this.currRow, 0, Zt),
                            Jt.log("INFO", "Rolling up")
                        } else
                            Jt.log("DEBUG", "roll_up but nrRollUpRows not set yet")
                    },
                    getDisplayText: function(He) {
                        He = He || !1;
                        for (var Zt = [], si = "", ga = -1, ba = 0; ba < O; ba++) {
                            var Ca = this.rows[ba].getTextString();
                            Ca && (ga = ba + 1,
                            He ? Zt.push("Row " + ga + ': "' + Ca + '"') : Zt.push(Ca.trim()))
                        }
                        return Zt.length > 0 && (si = He ? "[" + Zt.join(" | ") + "]" : Zt.join(`
`)),
                        si
                    },
                    getTextAndFormat: function() {
                        return this.rows
                    }
                };
                var Ta = function(He, Zt) {
                    this.chNr = He,
                    this.outputFilter = Zt,
                    this.mode = null,
                    this.verbose = 0,
                    this.displayedMemory = new aa,
                    this.nonDisplayedMemory = new aa,
                    this.lastOutputScreen = new aa,
                    this.currRollUpRow = this.displayedMemory.rows[14],
                    this.writeScreen = this.displayedMemory,
                    this.mode = null,
                    this.cueStartTime = null
                };
                Ta.prototype = {
                    modes: ["MODE_ROLL-UP", "MODE_POP-ON", "MODE_PAINT-ON", "MODE_TEXT"],
                    reset: function() {
                        this.mode = null,
                        this.displayedMemory.reset(),
                        this.nonDisplayedMemory.reset(),
                        this.lastOutputScreen.reset(),
                        this.currRollUpRow = this.displayedMemory.rows[14],
                        this.writeScreen = this.displayedMemory,
                        this.mode = null,
                        this.cueStartTime = null,
                        this.lastCueEndTime = null
                    },
                    getHandler: function() {
                        return this.outputFilter
                    },
                    setHandler: function(He) {
                        this.outputFilter = He
                    },
                    setPAC: function(He) {
                        this.writeScreen.setPAC(He)
                    },
                    setBkgData: function(He) {
                        this.writeScreen.setBkgData(He)
                    },
                    setMode: function(He) {
                        He !== this.mode && (this.mode = He,
                        Jt.log("INFO", "MODE=" + He),
                        this.mode == "MODE_POP-ON" ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory,
                        this.writeScreen.reset()),
                        this.mode !== "MODE_ROLL-UP" && (this.displayedMemory.nrRollUpRows = null,
                        this.nonDisplayedMemory.nrRollUpRows = null),
                        this.mode = He)
                    },
                    insertChars: function(He) {
                        for (var Zt = 0; Zt < He.length; Zt++)
                            this.writeScreen.insertChar(He[Zt]);
                        var si = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                        Jt.log("INFO", si + ": " + this.writeScreen.getDisplayText(!0)),
                        this.mode !== "MODE_PAINT-ON" && this.mode !== "MODE_ROLL-UP" || (Jt.log("TEXT", "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)),
                        this.outputDataUpdate())
                    },
                    cc_RCL: function() {
                        Jt.log("INFO", "RCL - Resume Caption Loading"),
                        this.setMode("MODE_POP-ON")
                    },
                    cc_BS: function() {
                        Jt.log("INFO", "BS - BackSpace"),
                        this.mode !== "MODE_TEXT" && (this.writeScreen.backSpace(),
                        this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                    },
                    cc_AOF: function() {},
                    cc_AON: function() {},
                    cc_DER: function() {
                        Jt.log("INFO", "DER- Delete to End of Row"),
                        this.writeScreen.clearToEndOfRow(),
                        this.outputDataUpdate()
                    },
                    cc_RU: function(He) {
                        Jt.log("INFO", "RU(" + He + ") - Roll Up"),
                        this.writeScreen = this.displayedMemory,
                        this.setMode("MODE_ROLL-UP"),
                        this.writeScreen.setRollUpRows(He)
                    },
                    cc_FON: function() {
                        Jt.log("INFO", "FON - Flash On"),
                        this.writeScreen.setPen({
                            flash: !0
                        })
                    },
                    cc_RDC: function() {
                        Jt.log("INFO", "RDC - Resume Direct Captioning"),
                        this.setMode("MODE_PAINT-ON")
                    },
                    cc_TR: function() {
                        Jt.log("INFO", "TR"),
                        this.setMode("MODE_TEXT")
                    },
                    cc_RTD: function() {
                        Jt.log("INFO", "RTD"),
                        this.setMode("MODE_TEXT")
                    },
                    cc_EDM: function() {
                        Jt.log("INFO", "EDM - Erase Displayed Memory"),
                        this.displayedMemory.reset(),
                        this.outputDataUpdate()
                    },
                    cc_CR: function() {
                        Jt.log("CR - Carriage Return"),
                        this.writeScreen.rollUp(),
                        this.outputDataUpdate()
                    },
                    cc_ENM: function() {
                        Jt.log("INFO", "ENM - Erase Non-displayed Memory"),
                        this.nonDisplayedMemory.reset()
                    },
                    cc_EOC: function() {
                        if (Jt.log("INFO", "EOC - End Of Caption"),
                        this.mode === "MODE_POP-ON") {
                            var He = this.displayedMemory;
                            this.displayedMemory = this.nonDisplayedMemory,
                            this.nonDisplayedMemory = He,
                            this.writeScreen = this.nonDisplayedMemory,
                            Jt.log("TEXT", "DISP: " + this.displayedMemory.getDisplayText())
                        }
                        this.outputDataUpdate()
                    },
                    cc_TO: function(He) {
                        Jt.log("INFO", "TO(" + He + ") - Tab Offset"),
                        this.writeScreen.moveCursor(He)
                    },
                    cc_MIDROW: function(He) {
                        var Zt = {
                            flash: !1
                        };
                        if (Zt.underline = He % 2 == 1,
                        Zt.italics = He >= 46,
                        Zt.italics)
                            Zt.foreground = "white";
                        else {
                            var si = Math.floor(He / 2) - 16;
                            Zt.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][si]
                        }
                        Jt.log("INFO", "MIDROW: " + JSON.stringify(Zt)),
                        this.writeScreen.setPen(Zt)
                    },
                    outputDataUpdate: function() {
                        var He = Jt.time;
                        He !== null && this.outputFilter && (this.outputFilter.updateData && this.outputFilter.updateData(He, this.displayedMemory),
                        this.cueStartTime !== null || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, He, this.lastOutputScreen),
                        this.cueStartTime = this.displayedMemory.isEmpty() ? null : He) : this.cueStartTime = He,
                        this.lastOutputScreen.copy(this.displayedMemory))
                    },
                    cueSplitAtTime: function(He) {
                        this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, He, this.displayedMemory),
                        this.cueStartTime = He))
                    }
                };
                var fa = function(He, Zt, si) {
                    this.field = He || 1,
                    this.outputs = [Zt, si],
                    this.channels = [new Ta(1,Zt), new Ta(2,si)],
                    this.currChNr = -1,
                    this.lastCmdA = null,
                    this.lastCmdB = null,
                    this.bufferedData = [],
                    this.startTime = null,
                    this.lastTime = null,
                    this.dataCounters = {
                        padding: 0,
                        char: 0,
                        cmd: 0,
                        other: 0
                    }
                };
                fa.prototype = {
                    getHandler: function(He) {
                        return this.channels[He].getHandler()
                    },
                    setHandler: function(He, Zt) {
                        this.channels[He].setHandler(Zt)
                    },
                    addData: function(He, Zt) {
                        var si, ga, ba, Ca = !1;
                        this.lastTime = He,
                        Jt.setTime(He);
                        for (var za = 0; za < Zt.length; za += 2)
                            ga = 127 & Zt[za],
                            ba = 127 & Zt[za + 1],
                            ga >= 16 && ga <= 31 && ga === this.lastCmdA && ba === this.lastCmdB ? (this.lastCmdA = null,
                            this.lastCmdB = null,
                            Jt.log("DEBUG", "Repeated command (" + bt([ga, ba]) + ") is dropped")) : ga !== 0 || ba !== 0 ? (Jt.log("DATA", "[" + bt([Zt[za], Zt[za + 1]]) + "] -> (" + bt([ga, ba]) + ")"),
                            (si = this.parseCmd(ga, ba)) || (si = this.parseMidrow(ga, ba)),
                            si || (si = this.parsePAC(ga, ba)),
                            si || (si = this.parseBackgroundAttributes(ga, ba)),
                            !si && (Ca = this.parseChars(ga, ba)) && (this.currChNr && this.currChNr >= 0 ? this.channels[this.currChNr - 1].insertChars(Ca) : Jt.log("WARNING", "No channel found yet. TEXT-MODE?")),
                            si ? this.dataCounters.cmd += 2 : Ca ? this.dataCounters.char += 2 : (this.dataCounters.other += 2,
                            Jt.log("WARNING", "Couldn't parse cleaned data " + bt([ga, ba]) + " orig: " + bt([Zt[za], Zt[za + 1]])))) : this.dataCounters.padding += 2
                    },
                    parseCmd: function(He, Zt) {
                        var si = null;
                        if (!((He === 20 || He === 21 || He === 28 || He === 29) && 32 <= Zt && Zt <= 47) && !((He === 23 || He === 31) && 33 <= Zt && Zt <= 35))
                            return !1;
                        si = He === 20 || He === 21 || He === 23 ? 1 : 2;
                        var ga = this.channels[si - 1];
                        return He === 20 || He === 21 || He === 28 || He === 29 ? Zt === 32 ? ga.cc_RCL() : Zt === 33 ? ga.cc_BS() : Zt === 34 ? ga.cc_AOF() : Zt === 35 ? ga.cc_AON() : Zt === 36 ? ga.cc_DER() : Zt === 37 ? ga.cc_RU(2) : Zt === 38 ? ga.cc_RU(3) : Zt === 39 ? ga.cc_RU(4) : Zt === 40 ? ga.cc_FON() : Zt === 41 ? ga.cc_RDC() : Zt === 42 ? ga.cc_TR() : Zt === 43 ? ga.cc_RTD() : Zt === 44 ? ga.cc_EDM() : Zt === 45 ? ga.cc_CR() : Zt === 46 ? ga.cc_ENM() : Zt === 47 && ga.cc_EOC() : ga.cc_TO(Zt - 32),
                        this.lastCmdA = He,
                        this.lastCmdB = Zt,
                        this.currChNr = si,
                        !0
                    },
                    parseMidrow: function(He, Zt) {
                        var si = null;
                        if ((He === 17 || He === 25) && 32 <= Zt && Zt <= 47) {
                            if ((si = He === 17 ? 1 : 2) !== this.currChNr)
                                return Jt.log("ERROR", "Mismatch channel in midrow parsing"),
                                !1;
                            var ga = this.channels[si - 1];
                            return ga.insertChars([32]),
                            ga.cc_MIDROW(Zt),
                            Jt.log("DEBUG", "MIDROW (" + bt([He, Zt]) + ")"),
                            this.lastCmdA = He,
                            this.lastCmdB = Zt,
                            !0
                        }
                        return !1
                    },
                    parsePAC: function(He, Zt) {
                        var si, ga = null;
                        if (!((17 <= He && He <= 23 || 25 <= He && He <= 31) && 64 <= Zt && Zt <= 127) && !((He === 16 || He === 24) && 64 <= Zt && Zt <= 95))
                            return !1;
                        si = He <= 23 ? 1 : 2,
                        ga = 64 <= Zt && Zt <= 95 ? si === 1 ? Te[He] : Re[He] : si === 1 ? we[He] : Ye[He];
                        var ba = this.interpretPAC(ga, Zt);
                        return this.channels[si - 1].setPAC(ba),
                        this.lastCmdA = He,
                        this.lastCmdB = Zt,
                        this.currChNr = si,
                        !0
                    },
                    interpretPAC: function(He, Zt) {
                        var si = Zt
                          , ga = {
                            color: null,
                            italics: !1,
                            indent: null,
                            underline: !1,
                            row: He
                        };
                        return si = Zt > 95 ? Zt - 96 : Zt - 64,
                        ga.underline = (1 & si) == 1,
                        si <= 13 ? ga.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(si / 2)] : si <= 15 ? (ga.italics = !0,
                        ga.color = "white") : ga.indent = 4 * Math.floor((si - 16) / 2),
                        ga
                    },
                    parseChars: function(He, Zt) {
                        var si = null
                          , ga = null
                          , ba = null;
                        if (He >= 25 ? (si = 2,
                        ba = He - 8) : (si = 1,
                        ba = He),
                        17 <= ba && ba <= 19) {
                            var Ca = Zt;
                            Ca = ba === 17 ? Zt + 80 : ba === 18 ? Zt + 112 : Zt + 144,
                            Jt.log("INFO", "Special char '" + i(Ca) + "' in channel " + si),
                            ga = [Ca],
                            this.lastCmdA = He,
                            this.lastCmdB = Zt
                        } else
                            32 <= He && He <= 127 && (ga = Zt === 0 ? [He] : [He, Zt],
                            this.lastCmdA = null,
                            this.lastCmdB = null);
                        if (ga) {
                            var za = bt(ga);
                            Jt.log("DEBUG", "Char codes =  " + za.join(","))
                        }
                        return ga
                    },
                    parseBackgroundAttributes: function(He, Zt) {
                        var si, ga, ba;
                        return ((He === 16 || He === 24) && 32 <= Zt && Zt <= 47 || (He === 23 || He === 31) && 45 <= Zt && Zt <= 47) && (si = {},
                        He === 16 || He === 24 ? (ga = Math.floor((Zt - 32) / 2),
                        si.background = _t[ga],
                        Zt % 2 == 1 && (si.background = si.background + "_semi")) : Zt === 45 ? si.background = "transparent" : (si.foreground = "black",
                        Zt === 47 && (si.underline = !0)),
                        ba = He < 24 ? 1 : 2,
                        this.channels[ba - 1].setBkgData(si),
                        this.lastCmdA = He,
                        this.lastCmdB = Zt,
                        !0)
                    },
                    reset: function() {
                        for (var He = 0; He < this.channels.length; He++)
                            this.channels[He] && this.channels[He].reset();
                        this.lastCmdA = null,
                        this.lastCmdB = null
                    },
                    cueSplitAtTime: function(He) {
                        for (var Zt = 0; Zt < this.channels.length; Zt++)
                            this.channels[Zt] && this.channels[Zt].cueSplitAtTime(He)
                    }
                },
                ie.logger = Jt,
                ie.PenState = ai,
                ie.CaptionScreen = aa,
                ie.Cea608Parser = fa,
                ie.findCea608Nalus = function(He, Zt, si) {
                    for (var ga = 0, ba = Zt, Ca = [], za = function(Ka, Ns, pl, el) {
                        if (Ka !== 4 || Ns < 8)
                            return null;
                        var wl = pl.getUint8(el)
                          , fu = pl.getUint16(el + 1)
                          , vl = pl.getUint32(el + 3)
                          , kl = pl.getUint8(el + 7);
                        return wl == 181 && fu == 49 && vl == 1195456820 && kl == 3
                    }; ba < Zt + si; ) {
                        if (ga = He.getUint32(ba),
                        (31 & He.getUint8(ba + 4)) === 6)
                            for (var Ms = ba + 5, Pa = -1; Ms < ba + 4 + ga - 1; ) {
                                Pa = 0;
                                for (var Ua = 255; Ua === 255; )
                                    Pa += Ua = He.getUint8(Ms),
                                    Ms++;
                                var Wa = 0;
                                for (Ua = 255; Ua === 255; )
                                    Wa += Ua = He.getUint8(Ms),
                                    Ms++;
                                za(Pa, Wa, He, Ms) && Ca.push([Ms, Wa]),
                                Ms += Wa
                            }
                        ba += ga + 4
                    }
                    return Ca
                }
                ,
                ie.extractCea608DataFromRange = function(He, Zt) {
                    var si = Zt[0]
                      , ga = [[], []];
                    si += 8;
                    var ba = 31 & He.getUint8(si);
                    si += 2;
                    for (var Ca = 0; Ca < ba; Ca++) {
                        var za = He.getUint8(si)
                          , Ms = 4 & za
                          , Pa = 3 & za;
                        si++;
                        var Ua = He.getUint8(si);
                        si++;
                        var Wa = He.getUint8(si);
                        si++,
                        Ms && (127 & Ua) + (127 & Wa) != 0 && (Pa === 0 ? (ga[0].push(Ua),
                        ga[0].push(Wa)) : Pa === 1 && (ga[1].push(Ua),
                        ga[1].push(Wa)))
                    }
                    return ga
                }
            }
            )(ye)
        }
        , function(y, ye, ve) {
            var ie = ve(22).default
              , ae = ve(17).default;
            window.dashjs = ie,
            y.exports = ae
        }
        , function(y, ye) {
            var ve;
            ve = function() {
                return this
            }();
            try {
                ve = ve || new Function("return this")()
            } catch (ie) {
                typeof window == "object" && (ve = window)
            }
            y.exports = ve
        }
        , function(y, ye, ve) {
            var ie = this && this.__assign || function() {
                return (ie = Object.assign || function(fa) {
                    for (var He, Zt = 1, si = arguments.length; Zt < si; Zt++)
                        for (var ga in He = arguments[Zt])
                            Object.prototype.hasOwnProperty.call(He, ga) && (fa[ga] = He[ga]);
                    return fa
                }
                ).apply(this, arguments)
            }
              , ae = this && this.__createBinding || (Object.create ? function(fa, He, Zt, si) {
                si === void 0 && (si = Zt),
                Object.defineProperty(fa, si, {
                    enumerable: !0,
                    get: function() {
                        return He[Zt]
                    }
                })
            }
            : function(fa, He, Zt, si) {
                si === void 0 && (si = Zt),
                fa[si] = He[Zt]
            }
            )
              , i = this && this.__setModuleDefault || (Object.create ? function(fa, He) {
                Object.defineProperty(fa, "default", {
                    enumerable: !0,
                    value: He
                })
            }
            : function(fa, He) {
                fa.default = He
            }
            )
              , O = this && this.__importStar || function(fa) {
                if (fa && fa.__esModule)
                    return fa;
                var He = {};
                if (fa != null)
                    for (var Zt in fa)
                        Zt !== "default" && Object.prototype.hasOwnProperty.call(fa, Zt) && ae(He, fa, Zt);
                return i(He, fa),
                He
            }
              , $ = this && this.__spreadArrays || function() {
                for (var fa = 0, He = 0, Zt = arguments.length; He < Zt; He++)
                    fa += arguments[He].length;
                var si = Array(fa)
                  , ga = 0;
                for (He = 0; He < Zt; He++)
                    for (var ba = arguments[He], Ca = 0, za = ba.length; Ca < za; Ca++,
                    ga++)
                        si[ga] = ba[Ca];
                return si
            }
              , Te = this && this.__importDefault || function(fa) {
                return fa && fa.__esModule ? fa : {
                    default: fa
                }
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            });
            var we = ve(18)
              , Re = ve(9)
              , Ye = Te(ve(4))
              , _t = ve(3)
              , Jt = Te(ve(19))
              , bt = O(ve(12))
              , ai = Te(ve(20))
              , ii = ve(11)
              , da = ve(10)
              , aa = Te(ve(21))
              , Ta = function() {
                function fa(He, Zt) {
                    if (this.config = {
                        scriptSrc: "https://static.hdslb.com/player/js/dash.mediaplayer.min.js",
                        scriptMaxLoadTime: 1e4,
                        minQualityNumberMappingNumber: 6,
                        videoInfoScheduleTime: 1e3
                    },
                    Zt != null && Zt.hid && typeof Zt.hid == "string" && (this.config.hid = Zt.hid),
                    Zt != null && Zt.mediaSourceLoader && typeof Zt.mediaSourceLoader == "function" && (this.externalMediaLoader = Zt.mediaSourceLoader),
                    this.state = {
                        defaultVideoQuality: 0,
                        defaultAudioQuality: 0,
                        setTheDefaultVideoQualityState: !1,
                        stableBufferTime: 60,
                        isAutoPlay: !1,
                        abrStrategy: _t.STRING.ABR_THROUGHPUT,
                        isAutoSwitch: {
                            video: !1,
                            audio: !1
                        },
                        autoSwitchTopQualityMap: {
                            video: -1,
                            audio: -1
                        },
                        onScriptLoading: !1,
                        initialized: !1,
                        mpd: null,
                        manifest: null,
                        manifestInfo: {},
                        currentQualityIndex: {
                            video: 0,
                            audio: 0
                        },
                        maxQualityIndex: {
                            video: -1,
                            audio: -1
                        },
                        qualityNumberMap: {
                            video: {},
                            audio: {}
                        },
                        segmentsInfoMap: {
                            video: {},
                            audio: {}
                        },
                        mediaInfo: {},
                        statisticsInfo: {},
                        autoSwitchStartTime: 0,
                        preloadData: null,
                        startOffsetTime: 0,
                        enforceSSLStream: !1,
                        latestPlayurlExpireTimeStamp: 0,
                        latestPlayurlErrorHTTPCode: 0,
                        fragmentLoadingInfo: {},
                        appendingSourceState: !1,
                        logHistory: [],
                        networkWarningHistory: [],
                        playbackState: bt.BUFFERING.PLAYBACK.PLAYING,
                        enableHEVC: !1,
                        enableAV1: !1,
                        cdnInfo: {
                            cdn: 0,
                            p2p: 0,
                            nc: 0,
                            business: 0,
                            mcdn: 0,
                            bcache: 0,
                            vcache: 0,
                            ncFail: 0,
                            ncGotFail: 0
                        },
                        cdnInfoDetail: {},
                        requestedInfoDetail: {},
                        NCInfo: {},
                        filterVideoInfo: {},
                        protectionDataSet: null,
                        ignoreEmeEncryptedEvent: Zt.ignoreEmeEncryptedEvent,
                        enableMultiAudioTracks: !!Zt.enableMultiAudioTracks
                    },
                    this.timer = {
                        loadScript: 0,
                        videoInfoSchedule: 0,
                        removeSwitchSourceTransition: 0,
                        qnChangeTimeOutFlag: {
                            video: -1,
                            audio: -1
                        }
                    },
                    this.events = {},
                    this.components = {
                        networkActivity: new Jt.default,
                        bufferingInfo: new bt.default(He),
                        bufferingStrategy: new ai.default,
                        performanceInfo: new aa.default
                    },
                    this.video = He,
                    this.mixin(Zt),
                    !He || !(He instanceof HTMLVideoElement || window.__ENABLE_WASM_PLAYER__ && He instanceof window.BwpElement))
                        throw new Error("Video parameter is not a HTMLVideoElement")
                }
                return fa.prototype.processManifest = function(He, Zt, si) {
                    return typeof He != "string" && this.processSpecialAudioItem(He, this.state.defaultAudioQuality),
                    this.filterManifest({
                        enableHEVC: Zt,
                        enableAV1: si,
                        manifest: He,
                        state: this.state
                    })
                }
                ,
                fa.prototype.preload = function() {
                    var He = this;
                    this.detectDashJSExists() || this.loadDashPlayerScript().then(function() {
                        He.fire(_t.EVENTS.SCRIPT_LOADED)
                    }).catch(function(Zt) {
                        He.error({
                            msg: "Load dash player script error",
                            detail: Zt
                        })
                    })
                }
                ,
                fa.prototype.initialize = function(He, Zt) {
                    var si = this;
                    this.mixin(Zt);
                    var ga = this.processManifest(He, this.state.enableHEVC, this.state.enableAV1)
                      , ba = ga.codecId
                      , Ca = ga.manifest;
                    return this.state.mpd = Ca,
                    this.state.enableHEVC = ba === _t.VIDEO_CODEC_ID.HEVC,
                    this.state.enableAV1 = ba === _t.VIDEO_CODEC_ID.AV1,
                    this.components.bufferingStrategy.setHEVCEnableFlag(this.state.enableHEVC).setOnOptimizingCallback(this.fire.bind(this)),
                    new Promise(function(za, Ms) {
                        He || Ms({
                            msg: "Manifest parameter error, manifest: " + JSON.stringify(He)
                        }),
                        si.detectDashJSExists() ? si.createPlayer(za, Ms) : si.state.onScriptLoading ? si.on(_t.EVENTS.SCRIPT_LOADED, function() {
                            si.off(_t.EVENTS.SCRIPT_LOADED),
                            si.createPlayer(za, Ms)
                        }) : si.loadDashPlayerScript().then(function() {
                            si.createPlayer(za, Ms)
                        }).catch(function(Pa) {
                            si.error(Pa)
                        })
                    }
                    )
                }
                ,
                fa.prototype.on = function(He, Zt) {
                    He && typeof Zt == "function" && (this.events[He] || (this.events[He] = []),
                    this.events[He].push(Zt))
                }
                ,
                fa.prototype.once = function(He, Zt) {
                    var si = this;
                    this.on(He, function(ga) {
                        Zt(ga),
                        si.off(He, Zt)
                    })
                }
                ,
                fa.prototype.off = function(He, Zt) {
                    if (He)
                        if (typeof Zt == "function") {
                            if (this.events[He] && this.events[He].length) {
                                var si = this.events[He].indexOf(Zt);
                                si >= 0 && this.events[He].splice(si, 1)
                            }
                        } else
                            this.events[He] = []
                }
                ,
                fa.prototype.fire = function(He, Zt) {
                    if (He) {
                        var si = this.events[He];
                        si && si.length && si.forEach(function(ga) {
                            typeof ga == "function" && ga.call(null, Zt)
                        })
                    }
                }
                ,
                fa.prototype.play = function() {
                    try {
                        return this.player.play()
                    } catch (He) {
                        this.error({
                            msg: "Call play function error",
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.pause = function() {
                    try {
                        this.player.pause()
                    } catch (He) {
                        this.error({
                            msg: "Call pause function error",
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.getCurrentTime = function(He) {
                    He === void 0 && (He = !0);
                    try {
                        return this.player.time(void 0, He)
                    } catch (Zt) {
                        this.error({
                            type: _t.STRING.WARNING,
                            msg: "Call getCurrentTime function error",
                            detail: Zt
                        })
                    }
                    return 0
                }
                ,
                fa.prototype.getBufferedTime = function() {
                    this.getCurrentTime();
                    var He = this.video;
                    try {
                        He.buffered
                    } catch (Zt) {
                        this.error({
                            msg: "Call getBufferedTime function error",
                            detail: Zt
                        })
                    }
                    return 0
                }
                ,
                fa.prototype.getDuration = function(He) {
                    He === void 0 && (He = !0);
                    try {
                        return this.player.duration(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call getDuration function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.seek = function(He, Zt) {
                    var si = this;
                    return Zt === void 0 && (Zt = !1),
                    new Promise(function(ga, ba) {
                        if (isNaN(parseInt("" + He, 10)) || He < 0)
                            ba({
                                msg: "Seek time value error, time: " + He
                            });
                        else if (si.state.appendingSourceState)
                            ba({
                                msg: "Call seek function error while appending source, time: " + He
                            });
                        else
                            try {
                                var Ca = si.getCurrentTime()
                                  , za = Date.now();
                                si.changePlaybackState(bt.BUFFERING.PLAYBACK.SEEKING);
                                var Ms = si.getStartOffsetTime();
                                He < Ms && (He = Ms + .3);
                                var Pa = 999999
                                  , Ua = si.state.segmentsInfoMap
                                  , Wa = parseInt(si.video.getAttribute("data-offset"), 10) || 0;
                                if (Ua)
                                    for (var Ka in Ua)
                                        Pa = Math.min(Ua[Ka].realDuration + Wa, Pa);
                                Pa = Math.min(si.state.manifest.mediaPresentationDuration, Pa),
                                He > Pa - .6 && (He = Pa - .6),
                                si.player.seek(He, Zt);
                                var Ns = function() {
                                    si.changePlaybackState(bt.BUFFERING.PLAYBACK.PLAYING).player.off(_t.EVENTS.PLAYBACK_SEEKED, Ns),
                                    ga({
                                        cost: Math.floor(Date.now() - za),
                                        currentTime: Ca,
                                        seekedTime: He,
                                        isRelative: Zt
                                    })
                                };
                                si.player.on(_t.EVENTS.PLAYBACK_SEEKED, Ns)
                            } catch (pl) {
                                si.error({
                                    msg: "Call seek function error",
                                    detail: pl
                                })
                            }
                    }
                    )
                }
                ,
                fa.prototype.getCorePlayer = function() {
                    return this.player
                }
                ,
                fa.prototype.setVolume = function(He) {
                    if (isNaN(parseInt("" + He, 10)) || He < 0 || He > 1)
                        this.error({
                            msg: "SetVolume value error, value: " + He
                        });
                    else
                        try {
                            this.player.setVolume(He)
                        } catch (Zt) {
                            this.error({
                                msg: "Call setVolume function error",
                                detail: Zt
                            })
                        }
                }
                ,
                fa.prototype.getVolume = function() {
                    try {
                        return this.player.getVolume()
                    } catch (He) {
                        this.error({
                            msg: "Call getVolume function error",
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.setPlaybackRate = function(He) {
                    try {
                        this.player.setPlaybackRate(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call setPlaybackRate function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.getPlaybackRate = function() {
                    try {
                        return this.player.getPlaybackRate()
                    } catch (He) {
                        this.error({
                            msg: "Call getPlaybackRate function error",
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.getAutoSwitchQualityFor = function(He) {
                    try {
                        return this.player.getAutoSwitchQualityFor(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call getAutoSwitchQualityFor function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.setAutoSwitchQualityFor = function(He, Zt, si) {
                    Zt === void 0 && (Zt = !1),
                    si === void 0 && (si = !0);
                    try {
                        this.state.isAutoSwitch && si && (this.state.isAutoSwitch[He] = Zt),
                        Zt || this.setMaxAllowedBitrateFor(He, 0),
                        this.player.setAutoSwitchQualityFor(He, Zt)
                    } catch (ga) {
                        this.error({
                            msg: "Call setAutoSwitchQualityFor function error",
                            detail: ga
                        })
                    }
                    return this
                }
                ,
                fa.prototype.getAudioQuallityCanBeUsed = function(He) {
                    return He === _t.DOLBY_AUDIO_QN.AUDIO || He === _t.DOLBY_AUDIO_QN.AMTOS ? this.checkAudioCodecCanUseByType(_t.SPECIAL_AUDIO_TYPE.DOLBY) && He || 30280 : He === _t.FLAC_QN ? this.checkAudioCodecCanUseByType(_t.SPECIAL_AUDIO_TYPE.FLAC) && He || 30280 : He
                }
                ,
                fa.prototype.getQualityList = function(He) {
                    try {
                        return this.player.getBitrateInfoListFor(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call getQualityList function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.setDefaultQualityFor = function(He, Zt) {
                    Zt === void 0 && (Zt = 0);
                    var si = this.getQualityIndexFromQualityNumber(Zt, He);
                    try {
                        var ga = this.state.mpd && this.state.mpd[He];
                        if (!ga)
                            return;
                        var ba = ga.length;
                        ba && (si = Math.min(si, ba - 1)),
                        si >= 0 ? (this.state.currentQualityIndex[He] = si,
                        this.player.setDefaultQualityFor(He, si)) : this.error({
                            msg: "Call setDefaultQualityFor function error, quality: " + Zt
                        })
                    } catch (Ca) {
                        this.error({
                            msg: "Call setDefaultQualityFor function error, quality: " + Zt + ", qualityIndex = " + si,
                            detail: Ca
                        })
                    }
                }
                ,
                fa.prototype.setAutoSwitchTopQualityFor = function(He, Zt) {
                    var si = this;
                    try {
                        if (!this.state.initialized) {
                            var ga = function() {
                                si.off(_t.EVENTS.STREAM_INITIALIZED, ga),
                                si.setAutoSwitchTopQualityFor(He, Zt)
                            };
                            return void this.on(_t.EVENTS.STREAM_INITIALIZED, ga)
                        }
                        if (!Zt && Zt !== 0)
                            return void this.setMaxAllowedBitrateFor(He, 0);
                        if (!(this.state.isAutoSwitch && this.state.isAutoSwitch[He]))
                            return;
                        var ba = this.getQualityIndexFromQualityNumber(Zt, He)
                          , Ca = this.getQualityList(He)
                          , za = Ca && Ca[ba]
                          , Ms = Math.floor(za.bitrate / 1e3) + 1;
                        this.state.autoSwitchTopQualityMap[He] = ba,
                        this.setMaxAllowedBitrateFor(He, Ms)
                    } catch (Pa) {
                        this.error({
                            msg: "Call setAutoSwitchTopQualityFor function error",
                            detail: Pa
                        })
                    }
                }
                ,
                fa.prototype.setQualityFor = function(He, Zt) {
                    var si = this;
                    return new Promise(function(ga, ba) {
                        if (isNaN(parseInt("" + Zt, 10)) || Zt < 0)
                            ba({
                                msg: "Set quality value error, quality: " + Zt,
                                code: _t.ERROR_CODE.SET_QUALITY_VALUE_ERR
                            });
                        else if (si.detectQualityTypeIsLegal(He))
                            ba({
                                msg: "Set quality type error, type: " + He,
                                code: _t.ERROR_CODE.SET_QUALITY_TYPE_ERR
                            });
                        else if (si.state.appendingSourceState)
                            ba({
                                msg: "Reject setQualityFor by appending next source.",
                                code: _t.ERROR_CODE.SET_QUALITY_APENDING_ERR
                            });
                        else if (He === "audio" && si.state.enableMultiAudioTracks)
                            ba({
                                msg: "MultiAudioTrack disable change Qn",
                                code: _t.ERROR_CODE.SET_QUALITY_MULTI_TRACK
                            });
                        else if (He === "audio" && si.getAutoSwitchQualityFor("video"))
                            ba({
                                msg: "abr disable change Qn",
                                code: _t.ERROR_CODE.SET_QUALITY_ABR
                            });
                        else
                            try {
                                var Ca = Zt;
                                if ((Zt = si.getQualityIndexFromQualityNumber(Zt, He)) === si.state.currentQualityIndex[He])
                                    return void ba({
                                        msg: "Set quality equal current quality, quality: " + Zt,
                                        code: _t.ERROR_CODE.SET_QUALITY_SAME_VALUE,
                                        isChange: Ca !== si.getQualityNumberFromQualityIndex(Zt) && Zt !== Ca
                                    });
                                si.player.setQualityFor(He, Zt);
                                var za = Date.now()
                                  , Ms = function(Ua) {
                                    si.timer.qnChangeTimeOutFlag[Ua] !== -1 && (clearTimeout(si.timer.qnChangeTimeOutFlag[Ua]),
                                    si.timer.qnChangeTimeOutFlag[Ua] = -1)
                                };
                                Ms(He),
                                si.timer.qnChangeTimeOutFlag[He] = window.setTimeout(function() {
                                    si.player.off(_t.EVENTS.QUALITY_CHANGE_RENDERED, Pa),
                                    ba({
                                        msg: "Call setQualityFor timeout",
                                        code: _t.ERROR_CODE.SET_QUALITY_TIME_OUT
                                    }),
                                    Ms(He);
                                    var Ua = si.state.currentQualityIndex[He];
                                    si.player.setQualityFor(He, Ua)
                                }, 1e4);
                                var Pa = function(Ua) {
                                    if (Ua.mediaType === He) {
                                        var Wa = Ua.newQuality;
                                        if (Ms(Ua.mediaType),
                                        si.player.off(_t.EVENTS.QUALITY_CHANGE_RENDERED, Pa),
                                        Wa === Zt) {
                                            var Ka = si.getQualityNumberFromQualityIndex(Wa, He);
                                            Wa !== Ca && Ca !== Ka ? (ba({
                                                msg: "Quality rendered and quality is not " + Ca + " but " + Ka,
                                                code: _t.ERROR_CODE.SET_QUALITY_RENDER_CHANGED,
                                                newQuality: Wa,
                                                newQnNumber: Ka
                                            }),
                                            si.fire(_t.EVENTS.QUALITY_CHANGE_ABNORMAL, {
                                                type: _t.EVENTS.QUALITY_CHANGE_ABNORMAL,
                                                mediaType: He,
                                                defaultQuality: Ca,
                                                currentIndex: Wa,
                                                qualityNumber: Ka
                                            })) : ga(si.getQualityChangedData(Ua, za))
                                        }
                                    }
                                };
                                si.player.on(_t.EVENTS.QUALITY_CHANGE_RENDERED, Pa)
                            } catch (Ua) {
                                ba({
                                    msg: "Call setQualityFor function error",
                                    code: _t.ERROR_CODE.SET_QUALITY_ERR,
                                    detail: Ua
                                })
                            }
                    }
                    )
                }
                ,
                fa.prototype.getQualityFor = function(He) {
                    try {
                        return this.player.getQualityFor(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call getQualityFor function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.setStableBufferTime = function(He) {
                    He === void 0 && (He = 60);
                    try {
                        this.player.setStableBufferTime(He),
                        this.player.setBufferTimeAtTopQuality(He),
                        this.player.setBufferTimeAtTopQualityLongForm(He),
                        this.player.setBufferAheadToKeep(He + 10)
                    } catch (Zt) {
                        this.error({
                            msg: "Call setStableBufferTime function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.getStableBufferTime = function() {
                    try {
                        return this.player.getStableBufferTime()
                    } catch (He) {
                        this.error({
                            msg: "Call getStableBufferTime function error",
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.getBufferLength = function(He) {
                    try {
                        return this.player.getBufferLength(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call getBufferLength function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.getCurrentPlayURLFor = function(He) {
                    try {
                        return this.player.getCurrentSegmentInfoFor(He).url || ""
                    } catch (Zt) {
                        this.error({
                            msg: "Call getCurrentPlayURLFor function error, type: " + He + ", qualityIndex: " + this.state.currentQualityIndex[He],
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.getVideoInfo = function() {
                    return {
                        mediaInfo: this.state.mediaInfo,
                        statisticsInfo: this.state.statisticsInfo
                    }
                }
                ,
                fa.prototype.getCurrentCodecID = function(He) {
                    He === void 0 && (He = _t.STRING.VIDEO);
                    var Zt = 0;
                    return He === _t.STRING.VIDEO && this.state && (Zt = _t.VIDEO_CODEC_ID.AVC,
                    this.state.enableAV1 && (Zt = _t.VIDEO_CODEC_ID.AV1),
                    this.state.enableHEVC && (Zt = _t.VIDEO_CODEC_ID.HEVC)),
                    Zt
                }
                ,
                fa.prototype.getAverageConnectionSpeed = function(He) {
                    He === void 0 && (He = _t.STRING.VIDEO);
                    try {
                        return Number(this.player.getAverageThroughput(He)) || 0
                    } catch (Zt) {
                        this.error({
                            msg: "Call getAverageConnectionSpeed function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.switchSource = function(He, Zt, si) {
                    var ga = this;
                    if (si === void 0 && (si = !1),
                    window.clearTimeout(this.timer.removeSwitchSourceTransition),
                    this.onVideoSwitchSourceEnded(),
                    Zt && (typeof Zt.videoid != "string" || typeof Zt.audioid != "string" ? this.error({
                        type: _t.STRING.WARNING,
                        msg: "Preload data videoid/audioid value must be string type.",
                        detail: Zt
                    }) : this.player && this.player.setPreloadData(Zt)),
                    si) {
                        var ba = document.createElement("canvas")
                          , Ca = this.video.offsetWidth
                          , za = this.video.offsetHeight
                          , Ms = this.video.videoWidth / this.video.videoHeight
                          , Pa = Ca / za;
                        ba.width = Ca,
                        ba.height = za,
                        ba.style.zIndex = "10",
                        ba.style.position = "absolute",
                        ba.className = _t.STRING.SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME;
                        var Ua = ba.getContext("2d")
                          , Wa = void 0
                          , Ka = void 0;
                        Pa >= Ms ? (Wa = za * Ms,
                        Ka = za) : (Wa = Ca,
                        Ka = Ca / Ms),
                        Ua.fillRect(0, 0, ba.width, ba.height),
                        Ua.drawImage(this.video, Math.abs(Ca - Wa) / 2, Math.abs(za - Ka) / 2, Wa, Ka),
                        this.video.parentNode.appendChild(ba),
                        this.timer.removeSwitchSourceTransition = window.setTimeout(function() {
                            ga.onVideoSwitchSourceEnded()
                        }, 1e4),
                        ba = null,
                        Ua = null,
                        this.video.removeEventListener("canplay", this.onVideoSwitchSourceEnded),
                        this.video.removeEventListener("playing", this.onVideoSwitchSourceEnded),
                        this.video.addEventListener("canplay", this.onVideoSwitchSourceEnded),
                        this.video.addEventListener("playing", this.onVideoSwitchSourceEnded)
                    }
                    return new Promise(function(Ns, pl) {
                        try {
                            if (He = ga.filterManifest({
                                manifest: He,
                                state: ga.state
                            }).manifest,
                            ga.state.mpd = He,
                            ga.player) {
                                for (var el in ga.state.currentQualityIndex)
                                    ga.state.currentQualityIndex[el] >= 0 && ga.setDefaultQualityFor(el, ga.state.currentQualityIndex[el]);
                                ga.state.defaultVideoQuality = ga.state.currentQualityIndex.video,
                                ga.state.defaultAudioQuality = ga.state.currentQualityIndex.audio,
                                ga.bindSwitchSourceEvents(Ns, pl, 1e4),
                                ga.player.switchSource(He)
                            } else
                                pl("Dash Player Error")
                        } catch (wl) {
                            pl(wl)
                        }
                    }
                    )
                }
                ,
                fa.prototype.updateSource = function(He) {
                    var Zt = this;
                    return new Promise(function(si, ga) {
                        try {
                            He = Zt.filterManifest({
                                manifest: He,
                                state: Zt.state
                            }).manifest,
                            Zt.player.updateSource(He);
                            var ba = window.setTimeout(function() {
                                ga({
                                    msg: "Update Source Timeout"
                                })
                            }, 5e3)
                              , Ca = function() {
                                Zt.player.off(_t.EVENTS.STREAM_INITIALIZED, Ca),
                                clearTimeout(ba),
                                si(null)
                            };
                            Zt.player.on(_t.EVENTS.STREAM_INITIALIZED, Ca)
                        } catch (za) {
                            ga({
                                msg: "Call updateSource function error, " + JSON.stringify(za),
                                detail: za
                            })
                        }
                    }
                    )
                }
                ,
                fa.prototype.appendSource = function(He, Zt) {
                    var si = this
                      , ga = this.state.appendingSourceState
                      , ba = this.state;
                    return new Promise(function(Ca, za) {
                        ga && za("Dash Player is Appending Next Source!"),
                        si.setAutoSwitchQualityFor("video", !1, !1),
                        si.setAutoSwitchQualityFor("audio", !1, !1);
                        var Ms = Date.now();
                        Zt && (typeof Zt.videoid != "string" || typeof Zt.audioid != "string" ? si.error({
                            type: _t.STRING.WARNING,
                            msg: "Preload data videoid/audioid value must be string type.",
                            detail: Zt
                        }) : si.player && si.player.setPreloadData(Zt));
                        var Pa = setTimeout(function() {
                            si.state.appendingSourceState = !1,
                            za({
                                msg: "Append source time out."
                            })
                        }, 5e3);
                        si.state.appendingSourceState = !0;
                        try {
                            if (si.player) {
                                for (var Ua in si.state.currentQualityIndex)
                                    si.state.currentQualityIndex[Ua] >= 0 && si.setDefaultQualityFor(Ua, si.state.currentQualityIndex[Ua]);
                                He = si.filterManifest({
                                    manifest: He,
                                    state: si.state
                                }).manifest,
                                si.player.setEndOfStreamState(!1),
                                si.player.appendSource(He);
                                var Wa = function(Ns) {
                                    clearTimeout(Pa),
                                    si.player.off(_t.EVENTS.APPENDED_NEXT_SOURCE, Wa),
                                    Ca({
                                        cost: Date.now() - Ms
                                    })
                                };
                                si.player.on(_t.EVENTS.APPENDED_NEXT_SOURCE, Wa);
                                var Ka = function(Ns) {
                                    si.player.off(_t.EVENTS.APPENDED_NEXT_SOURCE_DURATION_CHANGED, Ka),
                                    si.state.appendingSourceState = !1,
                                    ba.autoSwitchTopQualityMap.video >= 0 && si.setAutoSwitchTopQualityFor("video", ba.autoSwitchTopQualityMap.video),
                                    si.setAutoSwitchQualityFor("video", ba.isAutoSwitch[_t.STRING.VIDEO], !1),
                                    si.setAutoSwitchQualityFor("audio", ba.isAutoSwitch[_t.STRING.AUDIO], !1)
                                };
                                si.player.on(_t.EVENTS.APPENDED_NEXT_SOURCE_DURATION_CHANGED, Ka)
                            } else
                                clearTimeout(Pa),
                                si.state.appendingSourceState = !1,
                                za({
                                    msg: "Missing dash player instance!"
                                })
                        } catch (Ns) {
                            clearTimeout(Pa),
                            si.state.appendingSourceState = !1,
                            za({
                                msg: "Append Source Error",
                                detail: Ns
                            })
                        }
                    }
                    )
                }
                ,
                fa.prototype.getNextFragmentHistoryInfo = function() {
                    var He = "";
                    try {
                        var Zt = function(Ca) {
                            return Ca ? 1 : 0
                        };
                        if (this.state.getNextFragmentHistory) {
                            var si = function(Ca) {
                                var za = ga.state.getNextFragmentHistory[Ca]
                                  , Ms = "";
                                za.forEach(function(Pa) {
                                    var Ua, Wa, Ka = [Zt(Pa.final), Pa.currentTime, Pa.bufferLevel.toFixed(3), (Ua = [Pa.bufferResetInProgress, Pa.isReplacement, Pa.switchTrack, Pa.hasTopQualityChanged, Pa.lastInitQuality, Pa.bufferLevelRule],
                                    Wa = "",
                                    Ua.length && Ua.forEach(function(Ns) {
                                        Wa += "" + Zt(Ns)
                                    }),
                                    parseInt(Wa, 2))];
                                    Ms += Ka.join(",") + ";"
                                }),
                                He += Ca + ":" + Ms + "!"
                            }
                              , ga = this;
                            for (var ba in this.state.getNextFragmentHistory)
                                si(ba)
                        }
                    } catch (Ca) {}
                    return He
                }
                ,
                fa.prototype.isLoadingFragment = function(He) {
                    if (He)
                        return !!this.state.fragmentLoadingInfo[He]
                }
                ,
                fa.prototype.getNetworkActivity = function() {
                    return this.components.networkActivity && this.components.networkActivity.getNetworkActivity()
                }
                ,
                fa.prototype.getNetworkActivityHistory = function(He) {
                    return He === void 0 && (He = 0),
                    this.components.networkActivity && this.components.networkActivity.getNetworkActivityHistory(He)
                }
                ,
                fa.prototype.setEndOfStreamState = function(He) {
                    He === void 0 && (He = !1);
                    try {
                        return this.player.setEndOfStreamState(He)
                    } catch (Zt) {
                        this.error({
                            msg: "Call setEndOfStreamState function error",
                            detail: Zt
                        })
                    }
                }
                ,
                fa.prototype.getLogHistory = function() {
                    var He = this.state && this.state.logHistory || []
                      , Zt = He.join(`
`);
                    return {
                        length: He.length,
                        log: Zt,
                        size: function(si) {
                            for (var ga = [], ba = [si], Ca = 0; ba.length; ) {
                                var za = ba.pop();
                                if (typeof za == "boolean")
                                    Ca += 4;
                                else if (typeof za == "string")
                                    Ca += 2 * za.length;
                                else if (typeof za == "number")
                                    Ca += 8;
                                else if (typeof za == "object" && ga.indexOf(za) === -1)
                                    for (var Ms in ga.push(za),
                                    za)
                                        ba.push(za[Ms])
                            }
                            return Ca
                        }(Zt)
                    }
                }
                ,
                fa.prototype.getPerformanceInfo = function() {
                    var He = this.getDroppedFramesInfo();
                    return this.components.performanceInfo.getInfo(He)
                }
                ,
                fa.prototype.getBufferingInfo = function() {
                    var He, Zt = {
                        type: -1
                    };
                    try {
                        var si = this.state.currentQualityIndex.video
                          , ga = this.state.currentQualityIndex.audio;
                        Zt = this.components.bufferingInfo && this.components.bufferingInfo.getInfo({
                            videoBufferLength: this.getBufferLength("video"),
                            audioBufferLength: this.getBufferLength("audio"),
                            videoCurrentIndex: si,
                            audioCurrentIndex: ga,
                            videoCurrentQn: this.getQualityNumberFromQualityIndex(si, _t.STRING.VIDEO),
                            audioCurrentQn: this.getQualityNumberFromQualityIndex(ga, _t.STRING.AUDIO),
                            videoSpeed: this.getAverageConnectionSpeed(_t.STRING.VIDEO),
                            audioSpeed: this.getAverageConnectionSpeed(_t.STRING.AUDIO),
                            networkActivity: this.getNetworkActivityHistory(5),
                            playbackState: this.state.playbackState,
                            latestPlayurlErrorHTTPCode: this.state.latestPlayurlErrorHTTPCode,
                            fragmentLoadingInfo: this.state.fragmentLoadingInfo,
                            networkWarningHistory: this.state.networkWarningHistory,
                            startOffsetTime: this.state.startOffsetTime,
                            retryTimes: this.player.getRetryTimes(),
                            seekSpace: this.player.getSpaceUtilLastSeekInSec()
                        }),
                        Zt = ie(ie({}, Zt), this.getPerformanceInfo()),
                        (He = this.components) === null || He === void 0 || He.bufferingStrategy.push(Zt)
                    } catch (ba) {
                        throw new Error(ba.message)
                    }
                    return Zt
                }
                ,
                fa.prototype.getCDNInfo = function(He) {
                    if (He === void 0 && (He = !1),
                    this.state) {
                        var Zt = ie({}, this.state.cdnInfo);
                        return He && (this.state.cdnInfo = {
                            cdn: 0,
                            p2p: 0,
                            nc: 0,
                            business: 0,
                            mcdn: 0,
                            bcache: 0,
                            vcache: 0,
                            ncFail: 0,
                            ncGotFail: 0
                        }),
                        Zt
                    }
                    return {}
                }
                ,
                fa.prototype.getCDNInfoDetail = function(He) {
                    if (He === void 0 && (He = !1),
                    this.state) {
                        var Zt = ie({}, this.state.cdnInfoDetail);
                        return He && (this.state.cdnInfoDetail = {}),
                        Zt
                    }
                    return {}
                }
                ,
                fa.prototype.getRequestedInfoDetail = function(He) {
                    if (He === void 0 && (He = !1),
                    this.state) {
                        var Zt = ie({}, this.state.requestedInfoDetail);
                        return He && (this.state.requestedInfoDetail = {}),
                        Zt
                    }
                    return {}
                }
                ,
                fa.prototype.getNCInfo = function(He) {
                    if (He === void 0 && (He = !1),
                    this.state) {
                        var Zt = {};
                        for (var si in this.state.NCInfo)
                            Zt[si] = ie({}, this.state.NCInfo[si]);
                        return He && (this.state.NCInfo = {}),
                        Zt
                    }
                    return {}
                }
                ,
                fa.prototype.switchAudioTrack = function(He) {
                    var Zt = this;
                    return new Promise(function(si, ga) {
                        try {
                            var ba = -1
                              , Ca = "";
                            if (Zt.state.enableMultiAudioTracks ? He === Zt.getCurrentAudioTrackId() && (ba = _t.ERROR_CODE.SWITCH_AUDIO_TRACK_ID_NOT_CHANGED,
                            Ca = "the id which is going to be switched is equal to current") : (ba = _t.ERROR_CODE.SWITCH_AUDIO_TRACK_NOT_SUPPORT,
                            Ca = "not support multiple audio tracks"),
                            ba !== -1)
                                return void ga({
                                    code: ba,
                                    msg: Ca
                                });
                            Zt.player.switchAudioTrack(He) !== 0 ? ga({
                                code: ba = _t.ERROR_CODE.SWITCH_AUDIO_TRACK_ID_NOT_EXIST,
                                msg: Ca = "the id which is going to be switched is not exist"
                            }) : Zt.once(_t.EVENTS.SWITCH_AUDIO_TRACK_RENDERED, function(za) {
                                si(za)
                            })
                        } catch (za) {
                            ga({
                                code: _t.ERROR_CODE.SWITCH_AUDIO_TRACK_ERR,
                                msg: "switch aduio track failed, " + (za && za.message)
                            })
                        }
                    }
                    )
                }
                ,
                fa.prototype.getCurrentAudioTrackId = function() {
                    return this.player.getCurrentAudioTrackId()
                }
                ,
                fa.prototype.getAudioTrackList = function() {
                    try {
                        return this.player.getAudioTrackList()
                    } catch (He) {
                        return []
                    }
                }
                ,
                fa.prototype.destroy = function() {
                    try {
                        this.player.off(_t.EVENTS.FRAGMENT_LOADING_STARTED, this.onFragmentLoading, this),
                        this.player.off(_t.EVENTS.FRAGMENT_LOADING_PROGRESS, this.onFragmentLoading, this),
                        this.player.off(_t.EVENTS.FRAGMENT_LOADING_COMPLETED, this.onFragmentLoading, this),
                        this.player.off(_t.EVENTS.SWITCH_AUDIO_TRACK_REQUEST, this.onAudioTrackSwitchRequest, this),
                        this.player.off(_t.EVENTS.SWITCH_AUDIO_TRACK_RENDERED, this.onAudioTrackSwitchRendered, this),
                        this.player.off(_t.EVENTS.LOG, this.onDashJSLog, this),
                        this.player.off(_t.EVENTS.PREDICT_SEEK, this.onPredictSeek, this),
                        this.player && this.player.reset(),
                        this.onVideoSwitchSourceEnded(),
                        clearTimeout(this.timer && this.timer.networkActivity),
                        clearTimeout(this.timer && this.timer.loadScript),
                        clearTimeout(this.timer && this.timer.videoInfoSchedule),
                        clearTimeout(this.timer && this.timer.removeSwitchSourceTransition),
                        clearTimeout(this.timer.qnChangeTimeOutFlag.video),
                        clearTimeout(this.timer.qnChangeTimeOutFlag.audio),
                        this.timer = null,
                        this.events = {},
                        this.config = null,
                        this.state = null,
                        this.video = null,
                        this.player = null,
                        this.components.networkActivity.destroy(),
                        this.externalMediaLoader = null
                    } catch (He) {
                        this.error({
                            msg: "Call destroy function error, " + (He && He.message),
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.mixin = function(He) {
                    if (He && He instanceof Object)
                        for (var Zt in He)
                            He.hasOwnProperty(Zt) && this.state.hasOwnProperty(Zt) && (this.state[Zt] = He[Zt]);
                    this.state && this.state.isAutoSwitch || (this.state.isAutoSwitch = {
                        video: !1,
                        audio: !1
                    })
                }
                ,
                fa.prototype.loadDashPlayerScript = function() {
                    var He = this
                      , Zt = this.config.scriptSrc;
                    return new Promise(function(si, ga) {
                        try {
                            var ba = document.createElement("script");
                            ba.src = Zt,
                            ba.onload = function() {
                                He.state.onScriptLoading = !1,
                                clearTimeout(He.timer.loadScript),
                                si()
                            }
                            ,
                            ba.onerror = function(Ca) {
                                He.state.onScriptLoading = !1,
                                clearTimeout(He.timer.loadScript),
                                ga({
                                    msg: "Load dash player script error, src: " + Zt,
                                    detail: Ca
                                })
                            }
                            ,
                            document.body.appendChild(ba),
                            He.state.onScriptLoading = !0,
                            He.timer.loadScript = window.setTimeout(function() {
                                ga({
                                    msg: "Call loadDashPlayerScript function timeout"
                                })
                            }, He.config.scriptMaxLoadTime)
                        } catch (Ca) {
                            ga({
                                msg: "Call loadDashPlayerScript function error",
                                detail: Ca
                            })
                        }
                    }
                    )
                }
                ,
                fa.prototype.createPlayer = function(He, Zt) {
                    var si, ga = window.dashjs, ba = this.state;
                    this.state.defaultVideoQuality = this.getQualityIndexFromQualityNumber(ba.defaultVideoQuality, _t.STRING.VIDEO),
                    this.state.defaultAudioQuality = this.getQualityIndexFromQualityNumber(ba.defaultAudioQuality, _t.STRING.AUDIO);
                    try {
                        var Ca = ga.MediaPlayer().create();
                        ba && ba.protectionDataSet && typeof Ca.setProtectionData == "function" && Ca.setProtectionData(ba.protectionDataSet),
                        this.player = Ca,
                        this.setDebugLog(),
                        this.bindEvents(He),
                        this.state.logHistory.push("Dash player log history, " + JSON.stringify(fa.CONFIG)),
                        ba.preloadData && Ca.setPreloadData(ba.preloadData),
                        Ca.initialize(this.video, ba.mpd, ba.isAutoPlay, ba.enforceSSLStream, (si = this.config) === null || si === void 0 ? void 0 : si.hid, this.externalMediaLoader, ba.ignoreEmeEncryptedEvent, ba.enableMultiAudioTracks),
                        Ca.setABRStrategy(ba.abrStrategy || _t.STRING.ABR_THROUGHPUT),
                        Ca.setAutoSwitchQualityFor(_t.STRING.VIDEO, ba.isAutoSwitch[_t.STRING.VIDEO]),
                        Ca.setAutoSwitchQualityFor(_t.STRING.AUDIO, ba.isAutoSwitch[_t.STRING.AUDIO]),
                        Ca.setFastSwitchEnabled(!0),
                        Ca.enableLastBitrateCaching(!1),
                        Ca.setBufferPruningInterval(20),
                        ba.mpd && ba.mpd.interactive && Ca.setEndOfStreamState(!1),
                        Ca.setJumpGaps(!0),
                        this.setStableBufferTime(this.state.stableBufferTime)
                    } catch (za) {
                        Zt({
                            msg: "Call createPlayer function error",
                            detail: za
                        })
                    }
                }
                ,
                fa.prototype.bindEvents = function(He) {
                    var Zt = this
                      , si = this.player
                      , ga = function() {
                        si.off(_t.EVENTS.STREAM_INITIALIZED, ga, Zt),
                        Zt.state.initialized = !0;
                        var Ca = Zt.player.getBitrateInfoListFor("video");
                        He && He(Ca),
                        Zt.fire(_t.EVENTS.STREAM_INITIALIZED),
                        Zt.videoInfoSchedule(),
                        Zt.detectDefaultQualityChangeAbnormal()
                    };
                    si.on(_t.EVENTS.STREAM_INITIALIZED, ga, this),
                    si.on(_t.EVENTS.MANIFEST_LOADED, this.parseManifestInfo, this),
                    si.on(_t.EVENTS.GET_NEXT_FRAGMENT, this.getNextFragmentInfo, this),
                    si.on(_t.EVENTS.FRAGMENT_LOADING_STARTED, this.onFragmentLoading, this),
                    si.on(_t.EVENTS.FRAGMENT_LOADING_PROGRESS, this.onFragmentLoading, this),
                    si.on(_t.EVENTS.FRAGMENT_LOADING_COMPLETED, this.onFragmentLoading, this),
                    si.on(_t.EVENTS.SWITCH_AUDIO_TRACK_REQUEST, this.onAudioTrackSwitchRequest, this),
                    si.on(_t.EVENTS.SWITCH_AUDIO_TRACK_RENDERED, this.onAudioTrackSwitchRendered, this),
                    si.on(_t.EVENTS.FRAGMENT_LOADED_ERROR, this.onFragmentLoadingError, this),
                    si.on(_t.EVENTS.REQUEST_RETRYED, this.onFragmentLoadingError, this),
                    si.on(_t.EVENTS.LOG, this.onDashJSLog, this),
                    si.on(_t.EVENTS.PREDICT_SEEK, this.onPredictSeek, this),
                    si.onInitSegmentsLoaded(this.onInitSegmentsLoaded.bind(this)),
                    si.on(_t.EVENTS.DELAY_TO_APPEND_TO_BUFFER, function(Ca) {}),
                    si.on(_t.EVENTS.START_OFFSET_TIME_WARNING, function(Ca) {
                        var za = Ca && Ca.time;
                        za && za > Zt.state.startOffsetTime && (Zt.error({
                            type: _t.STRING.WARNING,
                            code: _t.ERROR.START_OFFSET_TIME_WARNING,
                            msg: "Start offset time is less than buffer.start(0), " + Zt.state.startOffsetTime + " < " + za
                        }),
                        Zt.state.startOffsetTime = za + .2)
                    });
                    var ba = function() {
                        var Ca;
                        (Ca = Zt.video) === null || Ca === void 0 || Ca.removeEventListener("loadedmetadata", ba),
                        setTimeout(function() {
                            if (Zt.video) {
                                var za = Zt.video.buffered
                                  , Ms = za.length && za.start(0)
                                  , Pa = Zt.video.currentTime;
                                Pa < Ms && (Zt.error({
                                    type: _t.STRING.WARNING,
                                    code: _t.ERROR.START_OFFSET_TIME_WARNING,
                                    msg: "Current offset time is less than buffer.start(0), " + Pa + " < " + Ms
                                }),
                                Zt.state.startOffsetTime = Ms + .2,
                                si.seek(Ms + .2))
                            }
                        }, 3e3)
                    };
                    this.video.addEventListener("loadedmetadata", ba),
                    this.bindDashCorePlayerEvents()
                }
                ,
                fa.prototype.onAudioTrackSwitchRequest = function(He) {
                    this.fire(_t.EVENTS.SWITCH_AUDIO_TRACK_REQUEST, He)
                }
                ,
                fa.prototype.onAudioTrackSwitchRendered = function(He) {
                    this.fire(_t.EVENTS.SWITCH_AUDIO_TRACK_RENDERED, He)
                }
                ,
                fa.prototype.bindSwitchSourceEvents = function(He, Zt, si) {
                    var ga = this
                      , ba = Date.now()
                      , Ca = window.setTimeout(function() {
                        ga.onVideoSwitchSourceEnded(),
                        Zt({
                            err: "Dash Player Switch Source timeout",
                            cost: Date.now() - ba
                        })
                    }, si)
                      , za = function() {
                        window.clearTimeout(Ca),
                        ga.player.off(_t.EVENTS.STREAM_INITIALIZED, za, ga),
                        He({
                            cost: Date.now() - ba
                        })
                    };
                    this.player.on(_t.EVENTS.STREAM_INITIALIZED, za, this)
                }
                ,
                fa.prototype.error = function(He) {
                    He.code = He.code || _t.ERROR.INTERNAL_ERROR,
                    He.msg = "[Dash] " + He.msg,
                    He.type = He.type || _t.STRING.ERROR,
                    this.state && this.state.logHistory.push("Dash player " + He.type + " - " + He.code + ": " + He.msg),
                    _t.STRING.ERROR === He.type ? this.fire(_t.EVENTS.ERROR, He) : this.fire(_t.EVENTS.WARNING, He)
                }
                ,
                fa.prototype.bindDashCorePlayerEvents = function() {
                    var He = this
                      , Zt = this.events;
                    this.player.on(_t.EVENTS.ERROR, function(si) {
                        var ga, ba = (ga = si == null ? void 0 : si.event) === null || ga === void 0 ? void 0 : ga.request;
                        ba && (ba.code = si.httpCode || si.code),
                        He.recordRequestedInfoDetail(ba == null ? void 0 : ba.mediaType, ba),
                        He.errorHandler(si)
                    }),
                    this.on(_t.EVENTS.QUALITY_CHANGE_REQUESTED, function(si) {
                        He.changePlaybackState(bt.BUFFERING.PLAYBACK.SWITCHING_QUALITY),
                        He.components.bufferingInfo && He.components.bufferingInfo.setSwitchingInfo({
                            mediaType: si.mediaType,
                            newQuality: si.newQuality,
                            oldQuality: si.oldQuality
                        })
                    }),
                    this.on(_t.EVENTS.QUALITY_CHANGE_RENDERED, function(si) {
                        He.changePlaybackState(bt.BUFFERING.PLAYBACK.PLAYING),
                        He.components.bufferingInfo && He.components.bufferingInfo.setSwitchingInfo(null),
                        He.state.currentQualityIndex[si.mediaType] = si.newQuality
                    }),
                    [{
                        key: _t.EVENTS.QUALITY_CHANGE_REQUESTED,
                        callbackQueue: function() {
                            return Zt[_t.EVENTS.QUALITY_CHANGE_REQUESTED]
                        }
                    }, {
                        key: _t.EVENTS.QUALITY_CHANGE_RENDERED,
                        callbackQueue: function() {
                            return Zt[_t.EVENTS.QUALITY_CHANGE_RENDERED]
                        }
                    }, {
                        key: _t.EVENTS.QUALITY_CHANGE_DOWNLOADED,
                        callbackQueue: function() {
                            return Zt[_t.EVENTS.QUALITY_CHANGE_DOWNLOADED]
                        }
                    }].forEach(function(si) {
                        He.player.on(si.key, function(ga) {
                            try {
                                var ba = si.callbackQueue();
                                ba && ba.forEach(function(Ca) {
                                    typeof Ca == "function" && Ca(He.getQualityChangedData(ga))
                                })
                            } catch (Ca) {
                                He.error({
                                    msg: "Call " + si.key + " callback queue error",
                                    detail: Ca,
                                    type: _t.STRING.WARNING
                                })
                            }
                        })
                    }),
                    this.player.on(_t.EVENTS.FRAGMENT_LOADED_ERROR, function(si) {
                        if (si) {
                            if (!si.code)
                                return;
                            var ga = _t.STRING.WARNING;
                            si.code === _t.ERROR.DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE && (ga = _t.STRING.ERROR),
                            He.saveNetworkWarningInfo(si),
                            He.error({
                                code: si.code,
                                detail: si,
                                msg: "Fragment Loaded Error, " + JSON.stringify(si),
                                type: ga
                            })
                        }
                    }),
                    this.player.on(_t.EVENTS.PCDN_LOADED_ERROR, function(si) {
                        if (si) {
                            if (!si.code)
                                return;
                            He.error({
                                code: si.code,
                                detail: si,
                                msg: "Pcdn Loaded Error, " + JSON.stringify(si),
                                type: _t.STRING.WARNING
                            })
                        }
                    }),
                    this.player.on(_t.EVENTS.CDN_LOAD_INFO, this.onDashCDNLoadInfo, this),
                    this.player.on(_t.EVENTS.QUOTA_EXCEEDED, function(si) {})
                }
                ,
                fa.prototype.errorHandler = function(He) {
                    if (He)
                        try {
                            var Zt = He.code
                              , si = He.error
                              , ga = He.event.message;
                            switch (Zt) {
                            case _t.ERROR.DOWNLOAD_ERROR:
                            case _t.ERROR.DOWNLOAD_MPD_ERROR:
                            case _t.ERROR.DOWNLOAD_XINK_ERROR:
                            case _t.ERROR.DOWNLOAD_INIT_SEGMENT_ERROR:
                            case _t.ERROR.DOWNLOAD_MEDIA_SEGMENT_ERROR:
                            case _t.ERROR.DOWNLOAD_INDEX_SEGMENT_ERROR:
                            case _t.ERROR.DOWNLOAD_SWITCHING_SEGMENT_ERROR:
                            case _t.ERROR.DOWNLOAD_OTHER_ERROR:
                                var ba = He.event.url
                                  , Ca = He.httpCode
                                  , za = !0;
                                if (Ca && Ca >= 400) {
                                    var Ms = 0;
                                    if (ba) {
                                        var Pa = ba.match(/expires=\d+/g)
                                          , Ua = ba.match(/deadline=\d+/g);
                                        Ms = Pa && parseInt(Pa[0].substr(8), 10) || Ua && parseInt(Ua[0].substr(9), 10)
                                    }
                                    Ms && this.state.latestPlayurlExpireTimeStamp === Ms && this.state.latestPlayurlErrorHTTPCode === Ca && (za = !1),
                                    this.state.latestPlayurlExpireTimeStamp = Ms,
                                    this.state.latestPlayurlErrorHTTPCode = Ca
                                }
                                za && this.error({
                                    code: Zt,
                                    msg: Ca + " downloadError - " + ba,
                                    detail: He
                                });
                                break;
                            case _t.ERROR.MANIFEST_ERROR:
                            case _t.ERROR.MANIFEST_TYPE_ERROR:
                            case _t.ERROR.MANIFEST_RESOLVE_ERROR:
                                this.error({
                                    code: Zt,
                                    msg: si + " - " + ga,
                                    detail: He
                                });
                                break;
                            case _t.ERROR.MEDIA_ERROR:
                            case _t.ERROR.MEDIA_ABORTED_ERROR:
                            case _t.ERROR.MEDIA_NETWORK_ERROR:
                            case _t.ERROR.MEDIA_DECODE_ERROR:
                            case _t.ERROR.MEDIA_SUPPORTED_ERROR:
                            case _t.ERROR.MEDIA_ENCRYPTED_ERROR:
                            case _t.ERROR.MEDIA_UNKNOWN_ERROR:
                                this.state.enableAV1 && Ye.default.setSessionStorage("enableAV1Error", "1"),
                                this.state.enableHEVC && Ye.default.setSessionStorage("enableHEVCError", "1");
                                var Wa = He.event;
                                this.error({
                                    code: Zt,
                                    msg: si + " - " + Wa,
                                    detail: He
                                });
                                break;
                            default:
                                this.error({
                                    msg: "Unknown error.",
                                    detail: He
                                }),
                                console.error(He)
                            }
                        } catch (Ka) {
                            this.error({
                                msg: "Unknown error.",
                                detail: Ka
                            })
                        }
                }
                ,
                fa.prototype.detectDashJSExists = function() {
                    return !(!window.dashjs || !window.dashjs.MediaPlayer)
                }
                ,
                fa.prototype.detectQualityTypeIsLegal = function(He) {
                    return !(He === _t.STRING.VIDEO || He === _t.STRING.AUDIO)
                }
                ,
                fa.prototype.parseManifestInfo = function(He) {
                    var Zt = this;
                    try {
                        var si = He.data;
                        if (this.state.manifest = si,
                        si && si.Period) {
                            var ga = {
                                baseUri: si.baseUri,
                                representation: {
                                    video: [],
                                    audio: []
                                }
                            }
                              , ba = {
                                video: {},
                                audio: {}
                            }
                              , Ca = si.Period.AdaptationSet_asArray;
                            Ca.length && Ca.forEach(function(za) {
                                var Ms = za.Representation_asArray;
                                if (Ms) {
                                    var Pa = "";
                                    Ms instanceof Array || (Ms = [Ms]),
                                    Ms.length && (Ms.sort(function(Ua, Wa) {
                                        return Ua.bandwidth - Wa.bandwidth
                                    }),
                                    Ms.forEach(function(Ua, Wa) {
                                        var Ka = Ua.frameRate
                                          , Ns = Ua.mimeType || za.mimeType;
                                        try {
                                            if (Ka && ("" + Ka).indexOf("/") > -1) {
                                                var pl = Ka.split("/");
                                                Ka = (Ka = parseInt(pl[0], 10) / parseInt(pl[1], 10)).toFixed(3)
                                            }
                                        } catch (wl) {
                                            Zt.error({
                                                msg: "Parse fps error, fps: " + Ka,
                                                detail: wl
                                            })
                                        }
                                        var el = {
                                            id: Ua.id,
                                            baseURL: Ua.BaseURL,
                                            width: Ua.width,
                                            height: Ua.height,
                                            bandwidth: Ua.bandwidth,
                                            codecs: Ua.codecs,
                                            fps: Ka,
                                            mimeType: Ns,
                                            sar: Ua.sar,
                                            startWithSAP: Ua.startWithSAP,
                                            audioSamplingRate: Ua.audioSamplingRate
                                        };
                                        Ns.indexOf(_t.STRING.VIDEO) > -1 ? Pa = _t.STRING.VIDEO : Ns.indexOf(_t.STRING.AUDIO) > -1 ? Pa = _t.STRING.AUDIO : Zt.error({
                                            msg: "Manifest missing mimeType",
                                            detail: Ua
                                        }),
                                        Pa && (function(wl) {
                                            var fu, vl, kl, Xl = wl.mimeType, uu = wl.codecs, tu = wl.width, Ps = wl.height, $s = wl.id;
                                            return fu = function(nl, Ll, Nl, Gl) {
                                                return nl + ';codecs="' + Ll + '"' + (Nl && Gl ? ';width="' + Nl + '";height="' + Gl + '"' : ";")
                                            }(Xl, uu, tu, Ps),
                                            ((kl = (vl = window.MediaSource).isTypeSupported) === null || kl === void 0 ? void 0 : kl.call(vl, fu)) && function(nl, Ll, Nl) {
                                                return da.getCurrentBrowserInfo().type !== da.BROWSER_TYPE.Firefox || nl !== _t.VIDEO_QN.QN_4K || !(!Ll || !Nl) && Ll <= 4096 && Nl <= 2160
                                            }(+$s, tu, Ps)
                                        }(el) || Zt.isUsingWasmPlayer()) ? (ga.representation[Pa].push(el),
                                        ba[Pa][el.id] = Wa) : Zt.onDashJSLog({
                                            type: "FilterCodecNotSupportedQn",
                                            message: "abandon qn: " + el.id
                                        })
                                    })),
                                    Zt.state.maxQualityIndex[Pa] = Ms.length - 1
                                }
                            }),
                            this.state.manifestInfo = ga,
                            this.state.qualityNumberMap = ba,
                            this.state.setTheDefaultVideoQualityState || (this.state.setTheDefaultVideoQualityState = !0,
                            this.setDefaultQualityFor("video", this.state.defaultVideoQuality),
                            this.setDefaultQualityFor("audio", this.state.defaultAudioQuality))
                        }
                    } catch (za) {
                        this.error({
                            msg: "Parse dash player manifest error",
                            detail: He
                        })
                    }
                }
                ,
                fa.prototype.getQualityIndexFromQualityNumber = function(He, Zt) {
                    Zt === void 0 && (Zt = _t.STRING.VIDEO);
                    var si = 0;
                    Zt === _t.STRING.AUDIO && [_t.DOLBY_AUDIO_QN.AMTOS, _t.DOLBY_AUDIO_QN.AUDIO, _t.FLAC_QN].includes(He) && (He = this.getAudioQuallityCanBeUsed(He));
                    try {
                        var ga = this.state.qualityNumberMap[Zt];
                        He = parseInt("" + He, 10);
                        var ba = this.state.maxQualityIndex[Zt];
                        if (ga && ga[He] >= 0 && He >= this.config.minQualityNumberMappingNumber) {
                            var Ca = ga[He];
                            Ca >= 0 && (si = Ca)
                        } else if (ba === -1 || He >= 0 && He <= ba)
                            si = He;
                        else if (ga) {
                            for (var za in ga)
                                if (ga.hasOwnProperty(za)) {
                                    var Ms = parseInt(za, 10);
                                    Ms < He && (si = ga["" + Math.max(si, Ms)])
                                }
                            this.error({
                                msg: "Quality number or index is error, qn or index: " + He + ",using lower quality number: " + this.getQualityNumberFromQualityIndex(si) + " with quality index: " + si,
                                type: _t.STRING.WARNING
                            })
                        } else
                            this.error({
                                msg: "Quality number or index is error, qn or index: " + He + ", qn map: " + JSON.stringify(ga) + ", max quality index: " + ba,
                                type: _t.STRING.WARNING
                            })
                    } catch (Pa) {
                        this.error({
                            msg: "Call getQualityIndexFromQualityNumber error, qn: " + He,
                            detail: Pa
                        })
                    }
                    return si
                }
                ,
                fa.prototype.getQualityNumberFromQualityIndex = function(He, Zt) {
                    Zt === void 0 && (Zt = _t.STRING.VIDEO);
                    try {
                        var si = this.state.qualityNumberMap[Zt];
                        if (He = parseInt("" + He, 10),
                        si) {
                            for (var ga in si)
                                if (si.hasOwnProperty(ga) && si[ga] === He)
                                    return parseInt(ga, 10)
                        }
                    } catch (ba) {
                        this.error({
                            msg: "Call getQualityNumberFromQualityIndex error, qn: " + He,
                            detail: ba
                        })
                    }
                    return 32
                }
                ,
                fa.prototype.getDroppedFramesInfo = function() {
                    try {
                        return this.player.getDroppedFramesInfo() || {}
                    } catch (He) {
                        this.error({
                            msg: "Call getDroppedFramesInfo function error",
                            detail: He,
                            type: _t.STRING.WARNING
                        })
                    }
                }
                ,
                fa.prototype.getCurrentTrackFor = function(He) {
                    try {
                        return this.player.getCurrentTrackFor(He) || {}
                    } catch (Zt) {
                        this.error({
                            msg: "Call getCurrentTrackFor function error, " + (Zt && Zt.message),
                            detail: Zt,
                            type: _t.STRING.WARNING
                        })
                    }
                }
                ,
                fa.prototype.getCurrentSegmentInfoFor = function(He) {
                    He === void 0 && (He = _t.STRING.VIDEO);
                    try {
                        return this.player.getCurrentSegmentInfoFor(He) || {}
                    } catch (Zt) {
                        this.error({
                            msg: "Call getCurrentSegmentInfoFor function error",
                            detail: Zt,
                            type: _t.STRING.WARNING
                        })
                    }
                }
                ,
                fa.prototype.onInitSegmentsLoaded = function(He, Zt) {
                    try {
                        if (this.state.segmentsInfoMap[He] = Zt,
                        !Zt.isDurationAllEqual) {
                            var si = Zt.notEqualQualityIndex;
                            this.error({
                                code: _t.ERROR.DURATION_IS_NOT_ALL_EQUAL,
                                msg: "Segments duration is not all equal, type: " + He + ", quality index switch: " + si.old + " => " + si.new + ", segment index list: " + Zt.notEqualIndexList + " } "
                            })
                        }
                        var ga = this.state.segmentsInfoMap
                          , ba = this.state.appendingSourceState;
                        if (ga && ga.video && ga.audio && !ba) {
                            var Ca = ga.video.realDuration
                              , za = ga.audio.realDuration
                              , Ms = Math.abs(Ca - za);
                            if (Ms > 3) {
                                var Pa = this.getQualityNumberFromQualityIndex(ga.video.qualityIndex, _t.STRING.VIDEO)
                                  , Ua = this.getQualityNumberFromQualityIndex(ga.audio.qualityIndex, _t.STRING.AUDIO)
                                  , Wa = ga.video.segments.length
                                  , Ka = ga.audio.segments.length;
                                this.error({
                                    type: _t.STRING.WARNING,
                                    code: _t.ERROR.DURATION_DEVIATION_IS_TOO_LARGE,
                                    msg: "Video / audio duration deviation is too large, deviation: " + Ms + "s. Video qn:" + Pa + ", segments:" + Wa + ", duration:" + Ca + ". Audio qn:" + Ua + ", segments:" + Ka + ", duration:" + za
                                })
                            }
                        }
                        if (this.state.startOffsetTime < Zt.startOffsetTime && (this.state.startOffsetTime = Zt.startOffsetTime,
                        Zt.segments && Zt.segments.length)) {
                            var Ns = Zt.segments[0];
                            Ns.duration,
                            Ns.timescale,
                            this.state.startOffsetTime > .1 && (this.player.seek(this.state.startOffsetTime + .2),
                            this.error({
                                type: _t.STRING.WARNING,
                                code: _t.ERROR.START_OFFSET_TIME_WARNING,
                                msg: He + " start offset time is greater than 0, " + this.state.startOffsetTime
                            }))
                        }
                    } catch (pl) {
                        this.error({
                            msg: "Call onInitSegmentsLoaded function error",
                            detail: pl
                        })
                    }
                }
                ,
                fa.prototype.setMaxAllowedBitrateFor = function(He, Zt) {
                    try {
                        this.player.setMaxAllowedBitrateFor(He, Zt)
                    } catch (si) {
                        this.error({
                            msg: "Call setMaxAllowedBitrateFor function error",
                            detail: si
                        })
                    }
                }
                ,
                fa.prototype.videoInfoSchedule = function() {
                    var He = this
                      , Zt = {}
                      , si = {};
                    try {
                        var ga = this.state
                          , ba = ga.manifestInfo
                          , Ca = ga.currentQualityIndex
                          , za = ba.representation[_t.STRING.VIDEO][Ca[_t.STRING.VIDEO]] || {}
                          , Ms = ba.representation[_t.STRING.AUDIO][Ca[_t.STRING.AUDIO]] || {}
                          , Pa = za.mimeType + ';codecs="' + za.codecs + '"'
                          , Ua = this.getCurrentSegmentInfoFor(_t.STRING.VIDEO)
                          , Wa = Ms.mimeType + ';codecs="' + Ms.codecs + '"'
                          , Ka = this.getCurrentSegmentInfoFor(_t.STRING.AUDIO)
                          , Ns = this.getDroppedFramesInfo()
                          , pl = this.getCurrentCodecID(_t.STRING.VIDEO);
                        Zt = {
                            width: za.width,
                            height: za.height,
                            sar: za.sar,
                            mimeType: Pa + ", " + Wa,
                            fps: za.fps,
                            videoDataRate: za.bandwidth,
                            videoCodec: za.codecs,
                            videoCodecID: pl,
                            audioDataRate: Ms.bandwidth,
                            audioCodec: Ms.codecs,
                            audioCodecID: 0,
                            audioSampleRate: Ms.audioSamplingRate || 0,
                            audioChannelCount: 0
                        },
                        si = {
                            playerType: "DashPlayer",
                            speed: Math.round(this.getAverageConnectionSpeed(_t.STRING.VIDEO)),
                            videoConnectionSpeed: Math.round(this.getAverageConnectionSpeed(_t.STRING.VIDEO)),
                            audioConnectionSpeed: Math.round(this.getAverageConnectionSpeed(_t.STRING.AUDIO)),
                            networkActivity: this.components.networkActivity && this.components.networkActivity.getNetworkActivity(),
                            videoBufferHealth: this.getBufferLength("video") || 0,
                            audioBufferHealth: this.getBufferLength("audio") || 0,
                            droppedFrames: Ns.droppedFrames || 0,
                            decodedFrames: Ns.totalFrames || 0,
                            audioURL: Ka.url || "",
                            audioCurrentSegmentIndex: Ka.index || 0,
                            audioCurrentSegmentStartTime: Ka.startTime || 0,
                            audioCurrentSegmentDuration: Ka.duration || 0,
                            audioTotalSegmentCount: ga.segmentsInfoMap[_t.STRING.AUDIO].total || 0,
                            videoURL: Ua.url || "",
                            videoCurrentSegmentIndex: Ua.index || 0,
                            videoCurrentSegmentStartTime: Ua.startTime || 0,
                            videoCurrentSegmentDuration: Ua.duration || 0,
                            videoTotalSegmentCount: ga.segmentsInfoMap[_t.STRING.VIDEO].total || 0
                        },
                        this.state.mediaInfo = Zt,
                        this.state.statisticsInfo = si,
                        this.fire(_t.EVENTS.VIDEO_INFO, {
                            mediaInfo: Zt,
                            statisticsInfo: si
                        })
                    } catch (el) {}
                    clearTimeout(this.timer && this.timer.videoInfoSchedule),
                    this.config && this.config.videoInfoScheduleTime && this.timer && (this.timer.videoInfoSchedule = window.setTimeout(function() {
                        He.videoInfoSchedule()
                    }, this.config.videoInfoScheduleTime))
                }
                ,
                fa.prototype.getQualityChangedData = function(He, Zt) {
                    var si = {};
                    try {
                        var ga = He.mediaType
                          , ba = He.type
                          , Ca = He.newQuality
                          , za = He.oldQuality
                          , Ms = this.state.isAutoSwitch[ga];
                        si = {
                            mediaType: ga,
                            type: ba,
                            newQuality: Ca,
                            newQualityNumber: this.getQualityNumberFromQualityIndex(Ca, ga),
                            oldQuality: za,
                            oldQualityNumber: this.getQualityNumberFromQualityIndex(za, ga),
                            currentTime: this.getCurrentTime(),
                            isAutoSwitch: Ms,
                            dict: this.player.getThroughputDict("video")
                        },
                        _t.EVENTS.QUALITY_CHANGE_RENDERED === ba ? ((Zt = Zt || this.state.autoSwitchStartTime || 0) && (si.cost = Math.floor(Date.now() - Zt)),
                        this.state.autoSwitchStartTime = 0) : _t.EVENTS.QUALITY_CHANGE_REQUESTED === ba && (this.state.autoSwitchStartTime = Date.now())
                    } catch (Pa) {
                        this.error({
                            msg: "Call getQualityChangedData error",
                            detail: Pa,
                            type: _t.STRING.WARNING
                        })
                    }
                    return si
                }
                ,
                fa.prototype.onVideoSwitchSourceEnded = function(He) {
                    try {
                        var Zt = void 0;
                        if (He && He.target) {
                            var si = He.target.parentElement;
                            Zt = si && si.querySelectorAll("." + _t.STRING.SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME)
                        } else
                            Zt = document.querySelectorAll("." + _t.STRING.SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME);
                        Zt && Zt.length && Zt.forEach(function(ga) {
                            ga && ga.parentElement.removeChild(ga)
                        })
                    } catch (ga) {
                        console.error("Remove transition canvas error.", ga)
                    }
                }
                ,
                fa.prototype.getStartOffsetTime = function() {
                    var He = 0;
                    try {
                        var Zt = this.state.segmentsInfoMap;
                        Zt && (He = Math.max(Zt.video.startOffsetTime || 0, Zt.audio.startOffsetTime || 0))
                    } catch (si) {}
                    return He
                }
                ,
                fa.prototype.setDebugLog = function() {
                    try {
                        var He = location.href;
                        He && He.indexOf("debug=1") > 0 && this.player.getDebug().setLogToBrowserConsole(!0)
                    } catch (Zt) {}
                }
                ,
                fa.prototype.getNextFragmentInfo = function(He) {
                    if (He && He.mediaType) {
                        var Zt = He.mediaType;
                        this.state.getNextFragmentHistory || (this.state.getNextFragmentHistory = {
                            video: [],
                            audio: []
                        });
                        var si = !1
                          , ga = this.state.getNextFragmentHistory[Zt].length;
                        if (ga) {
                            var ba = this.state.getNextFragmentHistory[Zt][this.state.getNextFragmentHistory[Zt].length - 1];
                            for (var Ca in ba)
                                if (ba[Ca] !== He[Ca]) {
                                    si = !0;
                                    break
                                }
                        }
                        !si && ga || (ga >= 30 && this.state.getNextFragmentHistory[He.mediaType].splice(0, 1),
                        this.state.getNextFragmentHistory[He.mediaType].push(He))
                    }
                }
                ,
                fa.prototype.onFragmentLoading = function(He) {
                    var Zt, si;
                    if (He && He.type) {
                        var ga = He.type
                          , ba = He.request
                          , Ca = this.covertFragmentInfoObject(ba);
                        if (Ca.loadingType = ga,
                        ga === _t.EVENTS.FRAGMENT_LOADING_STARTED)
                            this.state.fragmentLoadingInfo[Ca.mediaType] = Ca;
                        else if (ga === _t.EVENTS.FRAGMENT_LOADING_COMPLETED) {
                            var za = this.state.fragmentLoadingInfo[Ca.mediaType];
                            Ca.isError = !!He.error;
                            var Ms = He.response && He.response.byteLength || 0
                              , Pa = Number(ba.firstByteDate) - Number(ba.requestStartDate);
                            Pa = Pa ? Math.max(Pa, 1) : 1;
                            var Ua = Number(ba.requestEndDate) - Number(ba.firstByteDate);
                            Ua = Ua ? Math.max(Ua, 1) : 1;
                            var Wa = Number(ba.requestEndDate) - Number(ba.requestStartDate);
                            Wa = Wa ? Math.max(Wa, 1) : 1;
                            var Ka = Math.round(8 * Ms / Wa);
                            Ca.latencyTime = Pa,
                            Ca.downloadTime = Ua,
                            Ca.totalTime = Wa,
                            Ca.downloadBytes = Ms,
                            Ca.connectionSpeed = Ka,
                            Ca.data = He.response,
                            Ca.totalSize = this.state.segmentsInfoMap[Ca.mediaType].rangeEnd + 1;
                            var Ns = !0;
                            for (var pl in za)
                                if (za[pl] !== Ca[pl] && pl !== "loadingType" && !isNaN(za[pl])) {
                                    Ns = !1;
                                    break
                                }
                            Ns && (this.state.fragmentLoadingInfo[Ca.mediaType] = null,
                            this.fire(_t.EVENTS.FRAGMENT_LOADING_COMPLETED, Ca)),
                            this.bpNCSaveData(Ca);
                            var el = ba.mediaType;
                            el !== "video" && el !== "audio" || this.recordRequestedInfoDetail(el, {
                                code: 200,
                                qn: Ca == null ? void 0 : Ca.qn,
                                index: Ca == null ? void 0 : Ca.index,
                                rType: (Zt = ba == null ? void 0 : ba.loadInfo) === null || Zt === void 0 ? void 0 : Zt.rType,
                                protocol: (si = ba == null ? void 0 : ba.loadInfo) === null || si === void 0 ? void 0 : si.protocol,
                                currentTime: this.getCurrentTime(),
                                buffered: this.getBufferLength(el),
                                now: Math.round(performance == null ? void 0 : performance.now()),
                                latencyTime: Pa,
                                downloadTime: Ua,
                                totalTime: Wa,
                                connectionSpeed: Ka,
                                totalSize: Ms,
                                url: ba == null ? void 0 : ba.url
                            })
                        } else
                            this.state.fragmentLoadingInfo && this.state.fragmentLoadingInfo[Ca.mediaType] && !this.state.fragmentLoadingInfo[Ca.mediaType].loaderType && (this.state.fragmentLoadingInfo[Ca.mediaType].loaderType = Ca.loaderType),
                            this.components.networkActivity && this.components.networkActivity.onFragmentLoadingProgess(He)
                    }
                }
                ,
                fa.prototype.onFragmentLoadingError = function(He) {
                    if (He) {
                        if (He.type === _t.EVENTS.REQUEST_RETRYED && (He == null ? void 0 : He.code) < 4e3)
                            return;
                        var Zt = He == null ? void 0 : He.mediaType;
                        Zt !== "video" && Zt !== "audio" || this.recordRequestedInfoDetail(Zt, {
                            code: He == null ? void 0 : He.code,
                            qn: (He == null ? void 0 : He.id) || (He == null ? void 0 : He.qn),
                            index: He == null ? void 0 : He.index,
                            rType: He.rType,
                            retryTimes: He.retryTimes,
                            currentTime: this.getCurrentTime(),
                            buffered: this.getBufferLength(Zt),
                            now: Math.round(performance == null ? void 0 : performance.now()),
                            totalTime: He == null ? void 0 : He.timeout,
                            totalSize: He == null ? void 0 : He.received,
                            url: He == null ? void 0 : He.url
                        })
                    }
                }
                ,
                fa.prototype.recordRequestedInfoDetail = function(He, Zt) {
                    var si, ga, ba;
                    if (Zt && this.state) {
                        !((si = this.state) === null || si === void 0) && si.requestedInfoDetail[He] || (this.state.requestedInfoDetail[He] = {
                            latestHost: "",
                            list: []
                        }),
                        this.state.requestedInfoDetail[He].list.length > 500 && this.state.requestedInfoDetail[He].list.shift();
                        var Ca = "-";
                        try {
                            var za = Zt == null ? void 0 : Zt.url.match(/\/\/\S+\/upgcxcode/g)[0].split(".");
                            za.splice(za.length - 2),
                            Ca = za.join(".").replace("//", "");
                            var Ms = this.state.requestedInfoDetail[He].latestHost;
                            Ms && Ms === Ca ? Ca = "+" : this.state.requestedInfoDetail[He].latestHost = Ca
                        } catch (Ua) {}
                        var Pa = {
                            co: Zt.code,
                            qn: parseInt((Zt.qn || Zt.representationId).toString().substr(-3), 10),
                            in: Zt.index,
                            rt: (Zt.rType || "-").substr(0, 1),
                            qr: (Zt.protocol || "-").substr(0, 1),
                            ct: Ye.default.toFixed(Zt.currentTime || 0, 2),
                            bf: Ye.default.toFixed(Zt.buffered || 0, 2),
                            lt: Zt.latencyTime || 0,
                            dt: Zt.downloadTime || 0,
                            cs: Zt.connectionSpeed || 0,
                            ts: Zt.totalSize || 0,
                            ry: Zt.retryTimes || 0,
                            ht: Ca
                        };
                        (ba = (ga = this.state) === null || ga === void 0 ? void 0 : ga.requestedInfoDetail[He]) === null || ba === void 0 || ba.list.push(Pa)
                    }
                }
                ,
                fa.prototype.bpNCSaveData = function(He) {
                    if (He && He.url && He.range && He.data) {
                        var Zt = this.getBPNC();
                        if (Zt && typeof Zt.allowDPSaveDataByNC == "function") {
                            var si = ("" + He.url).split("?")[0].split("/")
                              , ga = si[si.length - 1].split(".")[0].split("-").pop();
                            if (ga) {
                                var ba = parseInt(ga, 10);
                                if (!isNaN(ba) && Zt.allowDPSaveDataByNC({
                                    qn: ba
                                })) {
                                    var Ca = {
                                        url: He.url,
                                        range: He.range,
                                        data: He.data,
                                        totalSize: He.totalSize,
                                        token: Zt.getToken()
                                    };
                                    Zt.saveData(Ca)
                                }
                            }
                        }
                    }
                }
                ,
                fa.prototype.getBPNC = function() {
                    var He, Zt = "bpNC";
                    return !((He = this.config) === null || He === void 0) && He.hid && (Zt += "_" + this.config.hid),
                    window[Zt]
                }
                ,
                fa.prototype.covertFragmentInfoObject = function(He) {
                    var Zt = {};
                    try {
                        Zt = {
                            type: He.type,
                            mediaType: He.mediaType,
                            startTime: He.startTime,
                            url: He.url,
                            index: He.index,
                            id: He.representationId,
                            qn: this.getQualityNumberFromQualityIndex(He.quality, He.mediaType),
                            range: He.range,
                            duration: He.duration,
                            isError: !1
                        },
                        He.requestStartDate ? Zt.startDownloadTime = new Date(He.requestStartDate).getTime() : Zt.startDownloadTime = new Date().getTime(),
                        He.loadInfo && (Zt.loaderType = He.loadInfo.rType)
                    } catch (si) {}
                    return Zt
                }
                ,
                fa.prototype.onDashJSLog = function(He) {
                    this.state.logHistory || (this.state.logHistory = []),
                    this.state.logHistory.length >= 2e4 && this.state.logHistory.shift(),
                    He && this.state.logHistory.push(He.message)
                }
                ,
                fa.prototype.onPredictSeek = function(He) {
                    this.fire(_t.EVENTS.PREDICT_SEEK, He)
                }
                ,
                fa.prototype.onDashCDNLoadInfo = function(He) {
                    var Zt, si, ga, ba, Ca, za, Ms, Pa, Ua;
                    if (He != null && He.loadInfo) {
                        var Wa = He.loadInfo
                          , Ka = He == null ? void 0 : He.mediaInfo.id;
                        for (var Ns in Ka && !this.state.cdnInfoDetail[Ka] && (this.state.cdnInfoDetail[Ka] = {
                            cdn: 0,
                            p2p: 0,
                            nc: 0,
                            business: 0,
                            mcdn: 0,
                            bcache: 0,
                            vcache: 0,
                            ncFail: 0,
                            ncGotFail: 0
                        }),
                        this.state.cdnInfo)
                            Wa[Ns] && (this.state.cdnInfo[Ns] += Wa[Ns],
                            Ka && (this.state.cdnInfoDetail[Ka][Ns] += Wa[Ns]));
                        if (Wa.rType === "XHR" && Wa.url && Wa.cdn) {
                            var pl = Wa.url;
                            pl.indexOf("upos-") > -1 ? (this.state.cdnInfo.business += Wa.cdn,
                            Ka && (this.state.cdnInfoDetail[Ka].business += Wa.cdn)) : pl.indexOf("os=mcdn") > -1 ? (this.state.cdnInfo.mcdn += Wa.cdn,
                            Ka && (this.state.cdnInfoDetail[Ka].mcdn += Wa.cdn)) : pl.indexOf("os=bcache") > -1 ? (this.state.cdnInfo.bcache += Wa.cdn,
                            Ka && (this.state.cdnInfoDetail[Ka].bcache += Wa.cdn)) : pl.indexOf("os=vcache") > -1 && (this.state.cdnInfo.vcache += Wa.cdn,
                            Ka && (this.state.cdnInfoDetail[Ka].vcache += Wa.cdn))
                        }
                        this.fire(_t.EVENTS.CDN_LOAD_INFO, Wa)
                    }
                    if (!((Zt = He == null ? void 0 : He.NCInfo) === null || Zt === void 0) && Zt.responseData && this.state.NCInfo) {
                        var el = He == null ? void 0 : He.NCInfo
                          , wl = (Ka = el.qn,
                        this.state.NCInfo[Ka] || {
                            total: 0,
                            response: 0,
                            expect: 0
                        });
                        if (el.code === 9999) {
                            if (wl.total++,
                            el.range) {
                                var fu = el.range.split("-")
                                  , vl = parseInt(fu[0], 10)
                                  , kl = parseInt(fu[1], 10);
                                kl && (wl.expect += kl - vl + 1 || 0)
                            }
                            return void (this.state.NCInfo[Ka] = wl)
                        }
                        if (wl[el.code] || (wl[el.code] = {}),
                        el.code === 4999)
                            return wl[el.code].count = ((si = wl[el.code]) === null || si === void 0 ? void 0 : si.count) + 1 || 1,
                            !((ga = this.video) === null || ga === void 0) && ga.seeking && (wl[el.code].seeking = wl[el.code].seeking + 1 || 1),
                            void (this.state.NCInfo[Ka] = wl);
                        var Xl = el.responseData
                          , uu = Xl.gotDataByte
                          , tu = Xl.getDataTime
                          , Ps = Xl.usePeerSids
                          , $s = Xl.retryCount
                          , nl = Xl.originRange;
                        Ps = Ps || [],
                        uu = uu || 0,
                        tu = tu || 0,
                        $s = $s || 0,
                        nl && nl.hasOwnProperty("start") && nl.hasOwnProperty("end") || (nl = {
                            start: 0,
                            end: 0
                        });
                        var Ll = Math.abs(nl.end - nl.start) + 1
                          , Nl = (Ps == null ? void 0 : Ps.length) || 0;
                        if (wl.response++,
                        wl[el.code].count = ((ba = wl[el.code]) === null || ba === void 0 ? void 0 : ba.count) + 1 || 1,
                        wl[el.code].bytes = ((Ca = wl[el.code]) === null || Ca === void 0 ? void 0 : Ca.bytes) + uu || uu,
                        wl[el.code].time = ((za = wl[el.code]) === null || za === void 0 ? void 0 : za.time) + tu || tu,
                        wl[el.code].peers = ((Ms = wl[el.code]) === null || Ms === void 0 ? void 0 : Ms.peers) + Nl || Nl,
                        wl[el.code].retry = ((Pa = wl[el.code]) === null || Pa === void 0 ? void 0 : Pa.retry) + $s || $s,
                        wl[el.code].expect = ((Ua = wl[el.code]) === null || Ua === void 0 ? void 0 : Ua.expect) + Ll || Ll,
                        el.code !== 4003 && el.code !== 40003 || uu !== 0 || (wl[el.code].abnormal = wl[el.code].abnormal + 1 || 1),
                        el.code === 2e3 || el.code === 24e3) {
                            var Gl = "peers_" + Nl;
                            wl[el.code][Gl] = wl[el.code][Gl] + 1 || 1
                        }
                        this.state.NCInfo[Ka] = wl
                    }
                }
                ,
                fa.prototype.changePlaybackState = function(He) {
                    return this.state.playbackState = He,
                    this
                }
                ,
                fa.prototype.saveNetworkWarningInfo = function(He) {
                    this.state.networkWarningHistory && (this.state.networkWarningHistory || (this.state.networkWarningHistory = []),
                    this.state.networkWarningHistory.length >= 100 && this.state.networkWarningHistory.shift(),
                    this.state.networkWarningHistory.push(He))
                }
                ,
                fa.prototype.detectDefaultQualityChangeAbnormal = function() {
                    var He = this
                      , Zt = this.state
                      , si = Zt.defaultVideoQuality
                      , ga = Zt.defaultAudioQuality
                      , ba = Zt.currentQualityIndex
                      , Ca = ba.video
                      , za = ba.audio;
                    return [{
                        type: _t.STRING.VIDEO,
                        defaultQuality: si,
                        currentIndex: Ca
                    }, {
                        type: _t.STRING.AUDIO,
                        defaultQuality: ga,
                        currentIndex: za
                    }].forEach(function(Ms) {
                        var Pa = He.getQualityNumberFromQualityIndex(Ms.currentIndex, Ms.type)
                          , Ua = Ms.defaultQuality
                          , Wa = Ms.currentIndex;
                        Ua >= 0 && Wa >= 0 && [Wa, Pa].indexOf(Ua) === -1 && He.fire(_t.EVENTS.QUALITY_CHANGE_ABNORMAL, {
                            type: _t.EVENTS.QUALITY_CHANGE_ABNORMAL,
                            mediaType: Ms.type,
                            defaultQuality: Ua,
                            currentIndex: Wa,
                            qualityNumber: Pa
                        })
                    }),
                    this
                }
                ,
                fa.prototype.isUsingWasmPlayer = function() {
                    return window.__ENABLE_WASM_PLAYER__ && this.video instanceof window.BwpElement
                }
                ,
                fa.prototype.filterHEVCSpecialVideoUrl = function(He) {
                    var Zt = this;
                    if (typeof He != "string" && (He != null && He.video)) {
                        var si = this.state.defaultVideoQuality
                          , ga = [_t.VIDEO_QN.QN_8K, _t.VIDEO_QN.QN_DOLBY_VISION, _t.VIDEO_QN.QN_HDR10]
                          , ba = _t.VIDEO_CODEC_ID.HEVC;
                        ((He == null ? void 0 : He.video) || []).filter(function(Ca) {
                            return Ca.codecid === ba
                        }).length <= 0 || ga.includes(si) || (He.video = He.video.filter(function(Ca) {
                            if (!ga.includes(Ca.id))
                                return !0;
                            var za = Zt.state.filterVideoInfo
                              , Ms = _t.FILTER_VIDEO_URL_REASON.FILTER_SPECIAL_VIDEO;
                            return za[Ms] === void 0 && (za[Ms] = []),
                            za[Ms].push(JSON.parse(JSON.stringify(Ca))),
                            Zt.onDashJSLog({
                                type: "filterSpecialVideo",
                                message: "filter hevc special video urls"
                            }),
                            !1
                        }))
                    }
                }
                ,
                fa.prototype.filterManifest = function(He) {
                    var Zt = He.manifest;
                    He.log = this.onDashJSLog.bind(this),
                    He.enableAV1 === void 0 && (He.enableAV1 = this.state.enableAV1),
                    He.enableHEVC === void 0 && (He.enableHEVC = this.state.enableHEVC),
                    Zt && !Zt.video && (this.onDashJSLog({
                        type: "audio-only",
                        message: "playing in audio-only"
                    }),
                    typeof Zt != "string" && (Zt.video = []));
                    var si = _t.VIDEO_CODEC_ID.AVC;
                    return Zt && Zt.video && Zt.video instanceof Array && (this.filterHEVCSpecialVideoUrl(He.manifest),
                    si = ii.applyCodecStrategy(He),
                    Zt.video = Zt.video.filter(function(ga) {
                        return ga.codecid === si
                    }),
                    Zt = this.adjustManifestHack(Zt)),
                    {
                        codecId: si,
                        manifest: Zt
                    }
                }
                ,
                fa.prototype.adjustManifestHack = function(He) {
                    var Zt;
                    if (((Zt = He == null ? void 0 : He.video) === null || Zt === void 0 ? void 0 : Zt.length) > 1) {
                        var si = He.video
                          , ga = Math.max.apply(Math, si.map(function(za) {
                            return za.bandwidth
                        }))
                          , ba = Math.min.apply(Math, si.map(function(za) {
                            return za.bandwidth
                        }));
                        if (Math.abs(ga - ba) < 1e4) {
                            this.state && this.state.logHistory.push("Adjust manifest hack, max: " + ga + ", min: " + ba + ", delta: " + Math.abs(ga - ba));
                            for (var Ca = si.length - 1; Ca > 0; Ca--)
                                si[Ca - 1].bandwidth = Math.max(si[Ca - 1].bandwidth, si[Ca].bandwidth + 1e4)
                        }
                    }
                    return He
                }
                ,
                fa.prototype.processSpecialAudioItem = function(He, Zt) {
                    var si;
                    Zt === void 0 && (Zt = 30280),
                    He.audio;
                    var ga = He.flac
                      , ba = He.dolby;
                    if (ga && ga.audio && Re.isFLACTypeSupported() && Zt === _t.FLAC_QN)
                        return ga.audio.codecs = ga.audio.codecs.toLocaleLowerCase(),
                        void (He.audio = [ga.audio]);
                    ba && (!((si = ba == null ? void 0 : ba.audio) === null || si === void 0) && si.length) && Re.isEC3DolbyATMOSTypeSupported() && [_t.DOLBY_AUDIO_QN.AMTOS, _t.DOLBY_AUDIO_QN.AUDIO].includes(Zt) && (He.audio = $(ba.audio))
                }
                ,
                fa.prototype.checkAudioCodecCanUseByType = function(He) {
                    var Zt = this.state.mpd && this.state.mpd[_t.STRING.AUDIO] ? this.state.mpd[_t.STRING.AUDIO] : this.state.manifest && this.state.manifest.audio ? this.state.manifest.audio : void 0;
                    if (!(Zt && Zt.length))
                        return !1;
                    switch (He) {
                    case _t.SPECIAL_AUDIO_TYPE.DOLBY:
                        if (Re.isEC3DolbyATMOSTypeSupported())
                            return Zt.findIndex(function(si) {
                                return si.id === _t.DOLBY_AUDIO_QN.AUDIO || si.id === _t.DOLBY_AUDIO_QN.AMTOS
                            }) !== -1;
                        break;
                    case _t.SPECIAL_AUDIO_TYPE.FLAC:
                        if (Re.isFLACTypeSupported())
                            return Zt.findIndex(function(si) {
                                return si.id === _t.FLAC_QN
                            }) !== -1
                    }
                    return !1
                }
                ,
                fa.EVENTS = _t.EVENTS,
                fa.ERROR = _t.ERROR,
                fa.STRING = _t.STRING,
                fa.BUFFERING = bt.BUFFERING,
                fa.CONFIG = we.CONFIG,
                fa.ERROR_CODE = _t.ERROR_CODE,
                fa.isHEVCTypeSupported = Re.isHEVCTypeSupported,
                fa.isBwpHEVCPrefSupported = Re.isBwpHEVCPrefSupported,
                fa.isHEVCHDR10TypeSupported = Re.isHEVCHDR10TypeSupported,
                fa.isEC3DolbyATMOSTypeSupported = Re.isEC3DolbyATMOSTypeSupported,
                fa.isHEVCDolbyVisionTypeSupported = Re.isHEVCDolbyVisionTypeSupported,
                fa.isHEVC8kTypeSupported = Re.isHEVC8kTypeSupported,
                fa.isAV1TypeSupported = Re.isAV1TypeSupported,
                fa.isAV18KTypeSupported = Re.isAV18KTypeSupported,
                fa.is8KTypeSupported = Re.is8KTypeSupported,
                fa.getSupportedVideoIdList = Re.getSupportedVideoIdList,
                fa.shouldUseHardwareDecodingAV1 = Re.shouldUseHardwareDecodingAV1,
                fa.isFLACTypeSupported = Re.isFLACTypeSupported,
                fa.getVideoCodecStrategy = Re.getVideoCodecStrategy,
                fa.isMultiAudioTracksSupported = Re.isMultiAudioTracksSupported,
                fa
            }();
            ye.default = Ta
        }
        , function(y, ye, ve) {
            Object.defineProperty(ye, "__esModule", {
                value: !0
            }),
            ye.CONFIG = void 0;
            var ie = {
                version: "1.15.7",
                gitHash: "a8f92de1",
                build: 341,
                release: "2023-04-17T09:04:37.782Z",
                mode: "production"
            };
            ye.CONFIG = ie
        }
        , function(y, ye, ve) {
            Object.defineProperty(ye, "__esModule", {
                value: !0
            });
            var ie = function() {
                function ae() {
                    this.state = {
                        runningInterval: 1e3,
                        maxCacheLength: 200,
                        fragmentLoadingProgressInfo: {},
                        networkActivityLoadedList: [],
                        networkActivityHistory: [],
                        networkActivityLatestTraceTime: 0
                    },
                    this.initalize()
                }
                return ae.prototype.onFragmentLoadingProgess = function(i) {
                    var O = i.request
                      , $ = 0
                      , Te = Math.floor(performance.now())
                      , we = O.quality + "-" + O.index + "-" + O.ts
                      , Re = !1;
                    if (this.state.fragmentLoadingProgressInfo[O.mediaType] && this.state.fragmentLoadingProgressInfo[O.mediaType][we]) {
                        var Ye = this.state.fragmentLoadingProgressInfo[O.mediaType][we]
                          , _t = !1;
                        for (var Jt in Ye)
                            if (Jt !== "bytesLoaded" && Ye[Jt] !== O[Jt])
                                _t = !0;
                            else if (Ye.bytesLoaded === O.bytesLoaded)
                                return;
                        $ = _t ? O.bytesLoaded : O.bytesLoaded - Ye.bytesLoaded
                    } else
                        this.state.fragmentLoadingProgressInfo[O.mediaType] || (this.state.fragmentLoadingProgressInfo[O.mediaType] = {}),
                        $ = O.bytesLoaded;
                    O.bytesLoaded === O.bytesTotal && (Re = !0),
                    Re ? delete this.state.fragmentLoadingProgressInfo[O.mediaType][we] : this.state.fragmentLoadingProgressInfo[O.mediaType][we] = {
                        bytesLoaded: O.bytesLoaded,
                        bytesTotal: O.bytesTotal,
                        quality: O.quality,
                        index: O.index,
                        mediaType: O.mediaType,
                        range: O.range
                    },
                    this.state.networkActivityLoadedList.length >= this.state.maxCacheLength && this.state.networkActivityLoadedList.splice(0, 1),
                    $ && this.state.networkActivityLoadedList.push({
                        time: Te,
                        loaded: Math.max($, 0)
                    })
                }
                ,
                ae.prototype.getNetworkActivity = function() {
                    return this.state.networkActivityHistory.length ? this.state.networkActivityHistory[this.state.networkActivityHistory.length - 1] : 0
                }
                ,
                ae.prototype.getNetworkActivityHistory = function(i) {
                    return i === void 0 && (i = 0),
                    i ? this.state.networkActivityHistory.slice(this.state.networkActivityHistory.length - i) : this.state.networkActivityHistory
                }
                ,
                ae.prototype.destroy = function() {
                    clearTimeout(this.state && this.state.networkActivityTimer),
                    this.state = null
                }
                ,
                ae.prototype.initalize = function() {
                    this.runNewWorkActivityTimer()
                }
                ,
                ae.prototype.runNewWorkActivityTimer = function() {
                    var i = this;
                    this.runNetworkActivity(),
                    clearTimeout(this.state.networkActivityTimer),
                    this.state.networkActivityTimer = window.setTimeout(function() {
                        i.runNewWorkActivityTimer()
                    }, this.state.runningInterval)
                }
                ,
                ae.prototype.runNetworkActivity = function() {
                    var i = this.state.runningInterval
                      , O = Math.floor(performance.now())
                      , $ = this.state.networkActivityLatestTraceTime
                      , Te = this.state.networkActivityLoadedList.filter(function(Re) {
                        return O - Re.time < i && O > $
                    });
                    this.state.networkActivityLatestTraceTime = O;
                    var we = 0;
                    Te && Te.length && Te.forEach(function(Re) {
                        return we += Re.loaded
                    }),
                    this.state.networkActivityHistory.length >= this.state.maxCacheLength && this.state.networkActivityHistory.splice(0, 1),
                    this.state.networkActivityHistory.push(Math.max(we, 0))
                }
                ,
                ae
            }();
            ye.default = ie
        }
        , function(y, ye, ve) {
            var ie = this && this.__importDefault || function(we) {
                return we && we.__esModule ? we : {
                    default: we
                }
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            });
            var ae = ve(3)
              , i = ve(12)
              , O = ie(ve(4))
              , $ = "hevcPerf"
              , Te = function() {
                function we() {
                    this.bufferingHistory = [],
                    this.state = {
                        enableHEVC: !1
                    }
                }
                return we.prototype.setHEVCEnableFlag = function(Re) {
                    return Re === void 0 && (Re = !1),
                    this.state.enableHEVC = Re,
                    this
                }
                ,
                we.prototype.push = function(Re) {
                    this.bufferingHistory.length >= this.MAX_HISTORY_LENGTH && this.bufferingHistory.shift(),
                    Re.timestamp = this.getNow(),
                    this.bufferingHistory.push(Re),
                    this.optimize()
                }
                ,
                we.prototype.setOnOptimizingCallback = function(Re) {
                    this.state.onOptimizingCallback = Re
                }
                ,
                we.prototype.onOptimzing = function(Re, Ye) {
                    typeof this.state.onOptimizingCallback == "function" && this.state.onOptimizingCallback(Re, Ye)
                }
                ,
                we.prototype.optimize = function() {
                    var Re = this.getNow()
                      , Ye = this.bufferingHistory.filter(function(bt) {
                        return Re - bt.timestamp <= 2e4
                    });
                    if (this.state.enableHEVC) {
                        var _t = "" + i.BUFFERING.PLAYBACK.PLAYING + i.BUFFERING.TYPE.PERFORMANCE
                          , Jt = Ye.filter(function(bt) {
                            return _t === bt.type
                        });
                        Jt && Jt.length >= 10 && (this.state.enableHEVC = !1,
                        this.disableHEVCFlag())
                    }
                }
                ,
                we.prototype.disableHEVCFlag = function() {
                    parseInt(O.default.getLocalStorage("bilibili_player_codec_prefer_type"), 10) !== 1 && (O.default.setLocalStorage("bilibili_player_codec_prefer_strategy", "2"),
                    this.onOptimzing(ae.EVENTS.BUFFERING_OPTIMIZATION, {
                        type: $
                    }))
                }
                ,
                we.prototype.getNow = function() {
                    var Re;
                    return ((Re = window.performance) === null || Re === void 0 ? void 0 : Re.now()) || Date.now()
                }
                ,
                we
            }();
            ye.default = Te
        }
        , function(y, ye, ve) {
            var ie = this && this.__assign || function() {
                return (ie = Object.assign || function(i) {
                    for (var O, $ = 1, Te = arguments.length; $ < Te; $++)
                        for (var we in O = arguments[$])
                            Object.prototype.hasOwnProperty.call(O, we) && (i[we] = O[we]);
                    return i
                }
                ).apply(this, arguments)
            }
            ;
            Object.defineProperty(ye, "__esModule", {
                value: !0
            });
            var ae = function() {
                function i() {
                    this.frameCount = 0,
                    this.totalFrameCnt = 0,
                    this.fpsArr = [],
                    this.lastFPSTime = 0,
                    this.battery = null,
                    this.chargingState = 1,
                    this.rafId = -1,
                    this.lastFPSTime = this.getTime(),
                    this.runFPSDetect(),
                    this.runBatteryStateDetect()
                }
                return i.prototype.getInfo = function(O) {
                    var $ = +(document.visibilityState === "visible")
                      , Te = this.chargingState
                      , we = navigator.hardwareConcurrency || 0;
                    return ie({
                        viState: $,
                        fps: this.getFPS(),
                        oneLowFps: this.get1PercentLowFPS(),
                        stdDev: this.getStandardDeviation(),
                        charging: Te,
                        coreNum: we,
                        totalRFrames: this.totalFrameCnt
                    }, O)
                }
                ,
                i.prototype.destroy = function() {
                    this.fpsArr.length = 0,
                    window.cancelAnimationFrame(this.rafId),
                    this.battery && (this.battery.removeEventListener("chargingchange", this.onChargingStateChange),
                    this.battery = null)
                }
                ,
                i.prototype.getFPS = function() {
                    return this.fpsArr.length ? Math.floor(this.fpsArr.reduce(function(O, $) {
                        return O + $
                    }, 0) / this.fpsArr.length) : 0
                }
                ,
                i.prototype.get1PercentLowFPS = function() {
                    if (!this.fpsArr.length || this.fpsArr.length < 5)
                        return 0;
                    var O = this.fpsArr.slice().sort(function(we, Re) {
                        return we - Re
                    })
                      , $ = Math.ceil(.01 * O.length)
                      , Te = O.slice(0, $);
                    return Te.length ? Math.floor(Te.reduce(function(we, Re) {
                        return we + Re
                    }, 0) / Te.length) || 1 : 0
                }
                ,
                i.prototype.getStandardDeviation = function() {
                    var O = this.fpsArr.slice()
                      , $ = O.length;
                    if (!$)
                        return 0;
                    var Te = O.reduce(function(Re, Ye) {
                        return Re + Ye
                    }, 0) / $
                      , we = O.reduce(function(Re, Ye) {
                        return Re + Math.pow(Ye - Te, 2)
                    }, 0) / $;
                    return +Math.sqrt(we).toFixed(1)
                }
                ,
                i.prototype.getTime = function() {
                    return performance.now() || new Date().getTime()
                }
                ,
                i.prototype.runFPSDetect = function() {
                    var O = this;
                    typeof window.requestAnimationFrame != "function" && (window.requestAnimationFrame = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.oRequestAnimationFrame || function(Te) {
                        window.setTimeout(Te, 1e3 / 60)
                    }
                    ,
                    window.cancelAnimationFrame = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function(Te) {
                        clearTimeout(Te)
                    }
                    );
                    var $ = function() {
                        O.frameCount++,
                        O.totalFrameCnt++;
                        var Te = O.getTime()
                          , we = Te - O.lastFPSTime;
                        if (we >= 1e3) {
                            var Re = O.frameCount / we * 1e3;
                            O.frameCount = 1,
                            O.lastFPSTime = Te,
                            O.fpsArr.length >= 7200 && O.fpsArr.shift(),
                            O.fpsArr.push(Math.floor(Re) || 1)
                        }
                        O.rafId = requestAnimationFrame($)
                    };
                    this.rafId = requestAnimationFrame($)
                }
                ,
                i.prototype.onChargingStateChange = function() {
                    this.chargingState = +this.battery.charging
                }
                ,
                i.prototype.runBatteryStateDetect = function() {
                    var O = this;
                    typeof navigator.getBattery == "function" && (this.onChargingStateChange = this.onChargingStateChange.bind(this),
                    navigator.getBattery().then(function($) {
                        O.battery = $,
                        O.chargingState = +$.charging,
                        $.addEventListener("chargingchange", O.onChargingStateChange)
                    }))
                }
                ,
                i
            }();
            ye.default = ae
        }
        , function(y, ye, ve) {
            ve.r(ye),
            ve.d(ye, "MediaPlayer", function() {
                return ie.a
            }),
            ve.d(ye, "Protection", function() {
                return ml
            });
            var ie = ve(8)
              , ae = function() {
                function Fa() {
                    (function(Za, $a) {
                        if (!(Za instanceof $a))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, Fa)
                }
                return Fa.findCencContentProtection = function(Za) {
                    for (var $a = null, ja = 0; ja < Za.length; ++ja) {
                        var Ba = Za[ja];
                        Ba.schemeIdUri.toLowerCase() === "urn:mpeg:dash:mp4protection:2011" && Ba.value.toLowerCase() === "cenc" && ($a = Ba)
                    }
                    return $a
                }
                ,
                Fa.getPSSHData = function(Za) {
                    var $a = 8
                      , ja = new DataView(Za)
                      , Ba = ja.getUint8($a);
                    return $a += 20,
                    Ba > 0 && ($a += 4 + 16 * ja.getUint32($a)),
                    $a += 4,
                    Za.slice($a)
                }
                ,
                Fa.getPSSHForKeySystem = function(Za, $a) {
                    var ja = Fa.parsePSSHList($a);
                    return ja.hasOwnProperty(Za.uuid.toLowerCase()) ? ja[Za.uuid.toLowerCase()] : null
                }
                ,
                Fa.parseInitDataFromContentProtection = function(Za, $a) {
                    return "pssh"in Za ? $a.decodeArray(Za.pssh.__text).buffer : null
                }
                ,
                Fa.parsePSSHList = function(Za) {
                    if (Za === null)
                        return [];
                    for (var $a = new DataView(Za.buffer || Za), ja = {}, Ba = 0; ; ) {
                        var rl, Xa, Cs = void 0, yl = Ba;
                        if (Ba >= $a.buffer.byteLength)
                            break;
                        if (rl = Ba + $a.getUint32(Ba),
                        Ba += 4,
                        $a.getUint32(Ba) === 1886614376)
                            if (Ba += 4,
                            (Xa = $a.getUint8(Ba)) === 0 || Xa === 1) {
                                Ba++,
                                Ba += 3,
                                Cs = "";
                                var hl = void 0
                                  , ll = void 0;
                                for (hl = 0; hl < 4; hl++)
                                    Cs += (ll = $a.getUint8(Ba + hl).toString(16)).length === 1 ? "0" + ll : ll;
                                for (Ba += 4,
                                Cs += "-",
                                hl = 0; hl < 2; hl++)
                                    Cs += (ll = $a.getUint8(Ba + hl).toString(16)).length === 1 ? "0" + ll : ll;
                                for (Ba += 2,
                                Cs += "-",
                                hl = 0; hl < 2; hl++)
                                    Cs += (ll = $a.getUint8(Ba + hl).toString(16)).length === 1 ? "0" + ll : ll;
                                for (Ba += 2,
                                Cs += "-",
                                hl = 0; hl < 2; hl++)
                                    Cs += (ll = $a.getUint8(Ba + hl).toString(16)).length === 1 ? "0" + ll : ll;
                                for (Ba += 2,
                                Cs += "-",
                                hl = 0; hl < 6; hl++)
                                    Cs += (ll = $a.getUint8(Ba + hl).toString(16)).length === 1 ? "0" + ll : ll;
                                Ba += 6,
                                Cs = Cs.toLowerCase(),
                                $a.getUint32(Ba),
                                Ba += 4,
                                ja[Cs] = $a.buffer.slice(yl, rl),
                                Ba = rl
                            } else
                                Ba = rl;
                        else
                            Ba = rl
                    }
                    return ja
                }
                ,
                Fa
            }()
              , i = function Fa(Za, $a) {
                (function(ja, Ba) {
                    if (!(ja instanceof Ba))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.contentType = Za,
                this.robustness = $a
            }
              , O = function Fa(Za, $a, ja, Ba, rl) {
                (function(Xa, Cs) {
                    if (!(Xa instanceof Cs))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.initDataTypes = ["cenc"],
                Za && Za.length && (this.audioCapabilities = Za),
                $a && $a.length && (this.videoCapabilities = $a),
                this.distinctiveIdentifier = ja,
                this.persistentState = Ba,
                this.sessionTypes = rl
            }
              , $ = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(Fa) {
                return typeof Fa
            }
            : function(Fa) {
                return Fa && typeof Symbol == "function" && Fa.constructor === Symbol && Fa !== Symbol.prototype ? "symbol" : typeof Fa
            }
            ;
            function Te(Fa) {
                var Za, $a = (Fa = Fa || {}).protectionKeyController, ja = Fa.protectionModel, Ba = Fa.eventBus, rl = Fa.events, Xa = Fa.log, Cs = Fa.BASE64, yl = Fa.constants, hl = Fa.ignoreEmeEncryptedEvent, ll = void 0, Ql = void 0, Hl = void 0, bu = void 0, cu = void 0, ou = void 0;
                function tl(Dl, Wl) {
                    var au = ae.getPSSHForKeySystem(ou, Dl)
                      , Su = Pl(ou);
                    if (au) {
                        for (var lu = ja.getAllInitData(), Eu = 0; Eu < lu.length; Eu++)
                            if ($a.initDataEquals(au, lu[Eu]))
                                return void Xa("DRM: Ignoring initData because we have already seen it!");
                        try {
                            ja.createKeySession(au, Su, Vl(ou), Wl)
                        } catch (Ou) {
                            Ba.trigger(rl.KEY_SESSION_CREATED, {
                                data: null,
                                error: "Error creating key session! " + Ou.message
                            })
                        }
                    } else
                        Dl ? ja.createKeySession(Dl, Su, Vl(ou), Wl) : Ba.trigger(rl.KEY_SESSION_CREATED, {
                            data: null,
                            error: "Selected key system is " + ou.systemString + ".  needkey/encrypted event contains no initData corresponding to that key system!"
                        })
                }
                function Rl(Dl, Wl) {
                    ja.loadKeySession(Dl, Wl, Vl(ou))
                }
                function Al(Dl) {
                    Dl ? (ja.setMediaElement(Dl),
                    Ba.on(rl.NEED_KEY, Fu, this)) : Dl === null && (ja.setMediaElement(Dl),
                    Ba.off(rl.NEED_KEY, Fu, this))
                }
                function Pl(Dl) {
                    var Wl = null;
                    if (Dl) {
                        var au = Dl.systemString;
                        Hl && (Wl = au in Hl ? Hl[au] : null)
                    }
                    return Wl
                }
                function Jl(Dl) {
                    var Wl = Pl(Dl)
                      , au = []
                      , Su = []
                      , lu = Wl && Wl.audioRobustness && Wl.audioRobustness.length > 0 ? Wl.audioRobustness : cu
                      , Eu = Wl && Wl.videoRobustness && Wl.videoRobustness.length > 0 ? Wl.videoRobustness : cu
                      , Ou = Vl(Dl);
                    return Ql.forEach(function(ku) {
                        ku.type === yl.AUDIO ? au.push(new i(ku.codec,lu)) : ku.type === yl.VIDEO && Su.push(new i(ku.codec,Eu))
                    }),
                    new O(au,Su,"optional",Ou === "temporary" ? "optional" : "required",[Ou])
                }
                function Vl(Dl) {
                    var Wl = Pl(Dl);
                    return Wl && Wl.sessionType ? Wl.sessionType : bu
                }
                function gu(Dl, Wl) {
                    var au = this
                      , Su = [];
                    Dl = Dl.sort(function(zu, _u) {
                        return (Hl && Hl[zu.ks.systemString] && Hl[zu.ks.systemString].priority >= 0 ? Hl[zu.ks.systemString].priority : Dl.length) - (Hl && Hl[_u.ks.systemString] && Hl[_u.ks.systemString].priority >= 0 ? Hl[_u.ks.systemString].priority : Dl.length)
                    });
                    var lu = void 0;
                    if (ou)
                        for (lu = 0; lu < Dl.length && !(ou === Dl[lu].ks && function() {
                            return Su.push({
                                ks: Dl[lu].ks,
                                configs: [Jl(ou)]
                            }),
                            Ba.on(rl.KEY_SYSTEM_ACCESS_COMPLETE, function zu(_u) {
                                Ba.off(rl.KEY_SYSTEM_ACCESS_COMPLETE, zu, au),
                                _u.error ? Wl || Ba.trigger(rl.KEY_SYSTEM_SELECTED, {
                                    error: "DRM: KeySystem Access Denied! -- " + _u.error
                                }) : (Xa("DRM: KeySystem Access Granted"),
                                Ba.trigger(rl.KEY_SYSTEM_SELECTED, {
                                    data: _u.data
                                }),
                                Dl[lu].sessionId ? Rl(Dl[lu].sessionId, Dl[lu].initData) : Dl[lu].initData && tl(Dl[lu].initData, Dl[lu].cdmData))
                            }, au),
                            ja.requestKeySystemAccess(Su),
                            "break"
                        }() === "break"); lu++)
                            ;
                    else if (ou === void 0) {
                        ou = null,
                        ll.push(Dl);
                        for (var Eu = 0; Eu < Dl.length; Eu++)
                            Su.push({
                                ks: Dl[Eu].ks,
                                configs: [Jl(Dl[Eu].ks)]
                            });
                        var Ou = void 0
                          , ku = function zu(_u) {
                            Ba.off(rl.KEY_SYSTEM_ACCESS_COMPLETE, zu, au),
                            _u.error ? (ou = void 0,
                            Ba.off(rl.INTERNAL_KEY_SYSTEM_SELECTED, Ku, au),
                            Wl || Ba.trigger(rl.KEY_SYSTEM_SELECTED, {
                                data: null,
                                error: "DRM: KeySystem Access Denied! -- " + _u.error
                            })) : (Ou = _u.data,
                            Xa("DRM: KeySystem Access Granted (" + Ou.keySystem.systemString + ")!  Selecting key system..."),
                            ja.selectKeySystem(Ou))
                        }
                          , Ku = function zu(_u) {
                            if (Ba.off(rl.INTERNAL_KEY_SYSTEM_SELECTED, zu, au),
                            Ba.off(rl.KEY_SYSTEM_ACCESS_COMPLETE, ku, au),
                            _u.error)
                                ou = void 0,
                                Wl || Ba.trigger(rl.KEY_SYSTEM_SELECTED, {
                                    data: null,
                                    error: "DRM: Error selecting key system! -- " + _u.error
                                });
                            else {
                                ou = ja.getKeySystem(),
                                Ba.trigger(rl.KEY_SYSTEM_SELECTED, {
                                    data: Ou
                                });
                                var Bu = Pl(ou);
                                Bu && Bu.serverCertificate && Bu.serverCertificate.length > 0 && ja.setServerCertificate(Cs.decodeArray(Bu.serverCertificate).buffer);
                                for (var Mu = 0; Mu < ll.length; Mu++)
                                    for (lu = 0; lu < ll[Mu].length; lu++)
                                        if (ou === ll[Mu][lu].ks) {
                                            if ($a.isClearKey(ou) && Bu && Bu.hasOwnProperty("clearkeys")) {
                                                var ud = {
                                                    kids: Object.keys(Bu.clearkeys)
                                                };
                                                ll[Mu][lu].initData = new TextEncoder().encode(JSON.stringify(ud))
                                            }
                                            ll[Mu][lu].sessionId ? Rl(ll[Mu][lu].sessionId, ll[Mu][lu].initData) : ll[Mu][lu].initData !== null && tl(ll[Mu][lu].initData, ll[Mu][lu].cdmData);
                                            break
                                        }
                            }
                        };
                        Ba.on(rl.INTERNAL_KEY_SYSTEM_SELECTED, Ku, au),
                        Ba.on(rl.KEY_SYSTEM_ACCESS_COMPLETE, ku, au),
                        ja.requestKeySystemAccess(Su)
                    } else
                        ll.push(Dl)
                }
                function yu(Dl, Wl) {
                    Ba.trigger(rl.LICENSE_REQUEST_COMPLETE, {
                        data: Dl,
                        error: Wl
                    })
                }
                function Gu(Dl) {
                    Dl.error ? Ba.trigger(rl.KEY_STATUSES_CHANGED, {
                        data: null,
                        error: "DRM: KeyStatusChange error! -- " + Dl.error
                    }) : Xa("DRM: key status = " + Dl.status)
                }
                function Lu(Dl) {
                    if (Xa("DRM: onKeyMessage"),
                    Dl.error)
                        Xa(Dl.error);
                    else {
                        var Wl = Dl.data;
                        Ba.trigger(rl.KEY_MESSAGE, {
                            data: Wl
                        });
                        var au = Wl.messageType ? Wl.messageType : "license-request"
                          , Su = Wl.message
                          , lu = Wl.sessionToken
                          , Eu = Pl(ou)
                          , Ou = ou ? ou.systemString : null
                          , ku = $a.getLicenseServer(ou, Eu, au)
                          , Ku = {
                            sessionToken: lu,
                            messageType: au
                        };
                        if (Su && Su.byteLength !== 0) {
                            if (!ku)
                                return Xa("DRM: License server request not required for this message (type = " + Dl.data.messageType + ").  Session ID = " + lu.getSessionID()),
                                void yu(Ku);
                            if ($a.isClearKey(ou)) {
                                var zu = $a.processClearKeyLicenseRequest(ou, Eu, Su);
                                if (zu)
                                    return Xa("DRM: ClearKey license request handled by application!"),
                                    yu(Ku),
                                    void ja.updateKeySession(lu, zu)
                            }
                            var _u = new XMLHttpRequest
                              , Bu = null;
                            if (Eu && Eu.serverURL) {
                                var Mu = Eu.serverURL;
                                typeof Mu == "string" && Mu !== "" ? Bu = Mu : (Mu === void 0 ? "undefined" : $(Mu)) === "object" && Mu.hasOwnProperty(au) && (Bu = Mu[au])
                            } else
                                Eu && Eu.laURL && Eu.laURL !== "" ? Bu = Eu.laURL : (Bu = ou.getLicenseServerURLFromInitData(ae.getPSSHData(lu.initData))) || (Bu = Dl.data.laURL);
                            if (Bu = ku.getServerURLFromMessage(Bu, Su, au)) {
                                var ud = function(Qu, Zu, Pu, _d) {
                                    var Ld = Qu.response ? ku.getErrorResponse(Qu.response, Pu, _d) : "NONE";
                                    yu(Zu, "DRM: " + Pu + ' update, XHR complete. status is "' + Qu.statusText + '" (' + Qu.status + "), readyState is " + Qu.readyState + ".  Response is " + Ld)
                                };
                                _u.open(ku.getHTTPMethod(au), Bu, !0),
                                _u.responseType = ku.getResponseType(Ou, au),
                                _u.onload = function() {
                                    if (this.status == 200) {
                                        var Qu = ku.getLicenseMessage(this.response, Ou, au);
                                        Qu !== null ? (yu(Ku),
                                        ja.updateKeySession(lu, Qu)) : ud(this, Ku, Ou, au)
                                    } else
                                        ud(this, Ku, Ou, au)
                                }
                                ,
                                _u.onabort = function() {
                                    yu(Ku, "DRM: " + Ou + ' update, XHR aborted. status is "' + this.statusText + '" (' + this.status + "), readyState is " + this.readyState)
                                }
                                ,
                                _u.onerror = function() {
                                    yu(Ku, "DRM: " + Ou + ' update, XHR error. status is "' + this.statusText + '" (' + this.status + "), readyState is " + this.readyState)
                                }
                                ;
                                var Ed = function(Qu) {
                                    if (Qu)
                                        for (var Zu in Qu)
                                            Zu.toLowerCase() === "authorization" && (_u.withCredentials = !0),
                                            _u.setRequestHeader(Zu, Qu[Zu])
                                };
                                Eu && Ed(Eu.httpRequestHeaders),
                                Ed(ou.getRequestHeadersFromMessage(Su)),
                                Eu && typeof Eu.withCredentials == "boolean" && (_u.withCredentials = Eu.withCredentials),
                                _u.send(ou.getLicenseRequestFromMessage(Su))
                            } else
                                yu(Ku, "DRM: No license server URL specified!")
                        } else
                            yu(Ku, "DRM: Empty key message from CDM")
                    }
                }
                function Fu(Dl) {
                    if (!hl) {
                        if (Xa("DRM: onNeedKey"),
                        Dl.key.initDataType !== "cenc")
                            return void Xa("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: " + Dl.key.initDataType);
                        var Wl = Dl.key.initData;
                        if (ArrayBuffer.isView(Wl) && (Wl = Wl.buffer),
                        ou) {
                            var au = ae.getPSSHForKeySystem(ou, Wl);
                            if (au) {
                                for (var Su = ja.getAllInitData(), lu = 0; lu < Su.length; lu++)
                                    if ($a.initDataEquals(au, Su[lu]))
                                        return void Xa("DRM: Ignoring initData because we have already seen it!")
                            }
                        }
                        Xa("DRM: initData:", String.fromCharCode.apply(null, new Uint8Array(Wl)));
                        var Eu = $a.getSupportedKeySystems(Wl, Hl);
                        if (Eu.length === 0)
                            return void Xa("DRM: Received needkey event with initData, but we don't support any of the key systems!");
                        gu(Eu, !1)
                    }
                }
                return Za = {
                    initializeForMedia: function(Dl) {
                        if (!Dl)
                            throw new Error("mediaInfo can not be null or undefined");
                        (function() {
                            if (!(Ba && Ba.hasOwnProperty("on") && $a && $a.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))
                                throw new Error("Missing config parameter(s)")
                        }
                        )(),
                        Ba.on(rl.INTERNAL_KEY_MESSAGE, Lu, this),
                        Ba.on(rl.INTERNAL_KEY_STATUS_CHANGED, Gu, this),
                        Ql.push(Dl);
                        var Wl = $a.getSupportedKeySystemsFromContentProtection(Dl.contentProtection);
                        Wl && Wl.length > 0 && gu(Wl, !0)
                    },
                    createKeySession: tl,
                    loadKeySession: Rl,
                    removeKeySession: function(Dl) {
                        ja.removeKeySession(Dl)
                    },
                    closeKeySession: function(Dl) {
                        ja.closeKeySession(Dl)
                    },
                    setServerCertificate: function(Dl) {
                        ja.setServerCertificate(Dl)
                    },
                    setMediaElement: Al,
                    setSessionType: function(Dl) {
                        bu = Dl
                    },
                    setRobustnessLevel: function(Dl) {
                        cu = Dl
                    },
                    setProtectionData: function(Dl) {
                        Hl = Dl,
                        $a.setProtectionData(Dl)
                    },
                    getSupportedKeySystemsFromContentProtection: function(Dl) {
                        return $a.getSupportedKeySystemsFromContentProtection(Dl)
                    },
                    getKeySystems: function() {
                        return $a ? $a.getKeySystems() : []
                    },
                    reset: function() {
                        Ba.off(rl.INTERNAL_KEY_MESSAGE, Lu, this),
                        Ba.off(rl.INTERNAL_KEY_STATUS_CHANGED, Gu, this),
                        Al(null),
                        ou = void 0,
                        ja && (ja.reset(),
                        ja = null),
                        Ql = []
                    }
                },
                ll = [],
                Ql = [],
                bu = "temporary",
                cu = "",
                Za
            }
            Te.__dashjs_factory_name = "ProtectionController";
            var we = dashjs.FactoryMaker.getClassFactory(Te)
              , Re = function Fa(Za, $a) {
                (function(ja, Ba) {
                    if (!(ja instanceof Ba))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.keyID = Za,
                this.key = $a
            }
              , Ye = function() {
                function Fa(Za, $a) {
                    if (function(ja, Ba) {
                        if (!(ja instanceof Ba))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, Fa),
                    $a && $a !== "persistent" && $a !== "temporary")
                        throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");
                    this.keyPairs = Za,
                    this.type = $a
                }
                return Fa.prototype.toJWK = function() {
                    var Za = void 0
                      , $a = this.keyPairs.length
                      , ja = {
                        keys: []
                    };
                    for (Za = 0; Za < $a; Za++) {
                        var Ba = {
                            kty: "oct",
                            alg: "A128KW",
                            kid: this.keyPairs[Za].keyID,
                            k: this.keyPairs[Za].key
                        };
                        ja.keys.push(Ba)
                    }
                    this.type && (ja.type = this.type);
                    var rl = JSON.stringify(ja)
                      , Xa = rl.length
                      , Cs = new ArrayBuffer(Xa)
                      , yl = new Uint8Array(Cs);
                    for (Za = 0; Za < Xa; Za++)
                        yl[Za] = rl.charCodeAt(Za);
                    return Cs
                }
                ,
                Fa
            }()
              , _t = new (function() {
                function Fa() {
                    (function(Za, $a) {
                        if (!(Za instanceof $a))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, Fa),
                    this.init()
                }
                return Fa.prototype.init = function() {
                    this.CLEARKEY_KEYSTEM_STRING = "org.w3.clearkey",
                    this.WIDEVINE_KEYSTEM_STRING = "com.widevine.alpha",
                    this.PLAYREADY_KEYSTEM_STRING = "com.microsoft.playready"
                }
                ,
                Fa
            }())
              , Jt = "e2719d58-a985-b3c9-781a-b030af78d30e"
              , bt = _t.CLEARKEY_KEYSTEM_STRING;
            function ai(Fa) {
                var Za = (Fa = Fa || {}).BASE64;
                return {
                    uuid: Jt,
                    schemeIdURI: "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",
                    systemString: bt,
                    getInitData: function($a) {
                        return ae.parseInitDataFromContentProtection($a, Za)
                    },
                    getRequestHeadersFromMessage: function() {
                        return null
                    },
                    getLicenseRequestFromMessage: function($a) {
                        return new Uint8Array($a)
                    },
                    getLicenseServerURLFromInitData: function() {
                        return null
                    },
                    getCDMData: function() {
                        return null
                    },
                    getSessionId: function() {
                        return null
                    },
                    getClearKeysFromProtectionData: function($a, ja) {
                        var Ba = null;
                        if ($a) {
                            for (var rl = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(ja))), Xa = [], Cs = 0; Cs < rl.kids.length; Cs++) {
                                var yl = rl.kids[Cs]
                                  , hl = $a.clearkeys && $a.clearkeys.hasOwnProperty(yl) ? $a.clearkeys[yl] : null;
                                if (!hl)
                                    throw new Error("DRM: ClearKey keyID (" + yl + ") is not known!");
                                Xa.push(new Re(yl,hl))
                            }
                            Ba = new Ye(Xa)
                        }
                        return Ba
                    }
                }
            }
            ai.__dashjs_factory_name = "KeySystemClearKey";
            var ii = dashjs.FactoryMaker.getSingletonFactory(ai)
              , da = "1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"
              , aa = _t.CLEARKEY_KEYSTEM_STRING;
            function Ta(Fa) {
                var Za = Fa.BASE64
                  , $a = Fa.log;
                return {
                    uuid: da,
                    schemeIdURI: "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",
                    systemString: aa,
                    getInitData: function(ja) {
                        return ae.parseInitDataFromContentProtection(ja, Za)
                    },
                    getRequestHeadersFromMessage: function() {
                        return null
                    },
                    getLicenseRequestFromMessage: function(ja) {
                        return new Uint8Array(ja)
                    },
                    getLicenseServerURLFromInitData: function() {
                        return null
                    },
                    getCDMData: function() {
                        return null
                    },
                    getSessionId: function() {
                        return null
                    },
                    getClearKeysFromProtectionData: function(ja, Ba) {
                        var rl = null;
                        if (ja) {
                            for (var Xa = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(Ba))), Cs = [], yl = 0; yl < Xa.kids.length; yl++) {
                                var hl = Xa.kids[yl]
                                  , ll = ja.clearkeys && ja.clearkeys.hasOwnProperty(hl) ? ja.clearkeys[hl] : null;
                                if (!ll)
                                    throw new Error("DRM: ClearKey keyID (" + hl + ") is not known!");
                                Cs.push(new Re(hl,ll))
                            }
                            rl = new Ye(Cs),
                            $a("Warning: ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")
                        }
                        return rl
                    }
                }
            }
            Ta.__dashjs_factory_name = "KeySystemW3CClearKey";
            var fa = dashjs.FactoryMaker.getSingletonFactory(Ta)
              , He = "edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"
              , Zt = _t.WIDEVINE_KEYSTEM_STRING;
            function si(Fa) {
                var Za = null
                  , $a = (Fa = Fa || {}).BASE64;
                return {
                    uuid: He,
                    schemeIdURI: "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",
                    systemString: Zt,
                    init: function(ja) {
                        ja && (Za = ja)
                    },
                    getInitData: function(ja) {
                        return ae.parseInitDataFromContentProtection(ja, $a)
                    },
                    getRequestHeadersFromMessage: function() {
                        return null
                    },
                    getLicenseRequestFromMessage: function(ja) {
                        return new Uint8Array(ja)
                    },
                    getLicenseServerURLFromInitData: function() {
                        return null
                    },
                    getCDMData: function() {
                        return null
                    },
                    getSessionId: function(ja) {
                        return Za && Za.sessionId ? Za.sessionId : ja && ja.sessionId ? ja.sessionId : null
                    }
                }
            }
            si.__dashjs_factory_name = "KeySystemWidevine";
            var ga = dashjs.FactoryMaker.getSingletonFactory(si)
              , ba = "9a04f079-9840-4286-ab92-e65be0885f95"
              , Ca = _t.PLAYREADY_KEYSTEM_STRING
              , za = void 0;
            function Ms(Fa) {
                var Za = "utf16"
                  , $a = (Fa = Fa || {}).BASE64;
                function ja() {
                    if (!$a || !$a.hasOwnProperty("decodeArray") || !$a.hasOwnProperty("decodeArray"))
                        throw new Error("Missing config parameter(s)")
                }
                return {
                    uuid: ba,
                    schemeIdURI: "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",
                    systemString: Ca,
                    getInitData: function(Ba) {
                        var rl, Xa, Cs, yl = new Uint8Array([112, 115, 115, 104, 0, 0, 0, 0]), hl = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]), ll = 0, Ql = null, Hl = void 0, bu = void 0;
                        if (ja(),
                        "pssh"in Ba)
                            return ae.parseInitDataFromContentProtection(Ba, $a);
                        if ("pro"in Ba)
                            Ql = $a.decodeArray(Ba.pro.__text);
                        else {
                            if (!("prheader"in Ba))
                                return null;
                            Ql = $a.decodeArray(Ba.prheader.__text)
                        }
                        return rl = Ql.length,
                        Xa = 4 + yl.length + hl.length + 4 + rl,
                        Cs = new ArrayBuffer(Xa),
                        Hl = new Uint8Array(Cs),
                        (bu = new DataView(Cs)).setUint32(ll, Xa),
                        ll += 4,
                        Hl.set(yl, ll),
                        ll += yl.length,
                        Hl.set(hl, ll),
                        ll += hl.length,
                        bu.setUint32(ll, rl),
                        ll += 4,
                        Hl.set(Ql, ll),
                        ll += rl,
                        Hl.buffer
                    },
                    getRequestHeadersFromMessage: function(Ba) {
                        var rl, Xa = void 0, Cs = {}, yl = new DOMParser, hl = Za === "utf16" ? new Uint16Array(Ba) : new Uint8Array(Ba);
                        rl = String.fromCharCode.apply(null, hl);
                        for (var ll = (Xa = yl.parseFromString(rl, "application/xml")).getElementsByTagName("name"), Ql = Xa.getElementsByTagName("value"), Hl = 0; Hl < ll.length; Hl++)
                            Cs[ll[Hl].childNodes[0].nodeValue] = Ql[Hl].childNodes[0].nodeValue;
                        return Cs.hasOwnProperty("Content") && (Cs["Content-Type"] = Cs.Content,
                        delete Cs.Content),
                        Cs.hasOwnProperty("Content-Type") || (Cs["Content-Type"] = "text/xml; charset=" + Za),
                        Cs
                    },
                    getLicenseRequestFromMessage: function(Ba) {
                        var rl = null
                          , Xa = new DOMParser
                          , Cs = Za === "utf16" ? new Uint16Array(Ba) : new Uint8Array(Ba);
                        ja();
                        var yl = String.fromCharCode.apply(null, Cs)
                          , hl = Xa.parseFromString(yl, "application/xml");
                        if (hl.getElementsByTagName("Challenge")[0]) {
                            var ll = hl.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;
                            ll && (rl = $a.decode(ll))
                        } else if (hl.getElementsByTagName("parsererror").length)
                            return Ba;
                        return rl
                    },
                    getLicenseServerURLFromInitData: function(Ba) {
                        if (Ba)
                            for (var rl = new DataView(Ba), Xa = rl.getUint16(4, !0), Cs = 6, yl = new DOMParser, hl = 0; hl < Xa; hl++) {
                                var ll = rl.getUint16(Cs, !0);
                                Cs += 2;
                                var Ql = rl.getUint16(Cs, !0);
                                if (Cs += 2,
                                ll === 1) {
                                    var Hl = Ba.slice(Cs, Cs + Ql)
                                      , bu = String.fromCharCode.apply(null, new Uint16Array(Hl))
                                      , cu = yl.parseFromString(bu, "application/xml");
                                    if (cu.getElementsByTagName("LA_URL")[0]) {
                                        var ou = cu.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;
                                        if (ou)
                                            return ou
                                    }
                                    if (cu.getElementsByTagName("LUI_URL")[0]) {
                                        var tl = cu.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;
                                        if (tl)
                                            return tl
                                    }
                                } else
                                    Cs += Ql
                            }
                        return null
                    },
                    getCDMData: function() {
                        var Ba = void 0
                          , rl = void 0
                          , Xa = void 0
                          , Cs = void 0;
                        if (ja(),
                        za && za.cdmData) {
                            for (Ba = [],
                            Cs = 0; Cs < za.cdmData.length; ++Cs)
                                Ba.push(za.cdmData.charCodeAt(Cs)),
                                Ba.push(0);
                            for (Ba = String.fromCharCode.apply(null, Ba),
                            Ba = $a.encode(Ba),
                            rl = '<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%", Ba),
                            Xa = [],
                            Cs = 0; Cs < rl.length; ++Cs)
                                Xa.push(rl.charCodeAt(Cs)),
                                Xa.push(0);
                            return new Uint8Array(Xa).buffer
                        }
                        return null
                    },
                    getSessionId: function() {
                        return null
                    },
                    setPlayReadyMessageFormat: function(Ba) {
                        if (Ba !== "utf8" && Ba !== "utf16")
                            throw new Error("Illegal PlayReady message format! -- " + Ba);
                        Za = Ba
                    },
                    init: function(Ba) {
                        Ba && (za = Ba)
                    }
                }
            }
            Ms.__dashjs_factory_name = "KeySystemPlayReady";
            var Pa = dashjs.FactoryMaker.getSingletonFactory(Ms);
            function Ua(Fa) {
                var Za = (Fa = Fa || {}).BASE64
                  , $a = {};
                return $a[_t.WIDEVINE_KEYSTEM_STRING] = {
                    responseType: "json",
                    getLicenseMessage: function(ja) {
                        return Za.decodeArray(ja.license)
                    },
                    getErrorResponse: function(ja) {
                        return ja
                    }
                },
                $a[_t.PLAYREADY_KEYSTEM_STRING] = {
                    responseType: "arraybuffer",
                    getLicenseMessage: function(ja) {
                        return ja
                    },
                    getErrorResponse: function(ja) {
                        return String.fromCharCode.apply(null, new Uint8Array(ja))
                    }
                },
                {
                    getServerURLFromMessage: function(ja) {
                        return ja
                    },
                    getHTTPMethod: function() {
                        return "POST"
                    },
                    getResponseType: function(ja) {
                        return $a[ja].responseType
                    },
                    getLicenseMessage: function(ja, Ba) {
                        return function() {
                            if (!Za || !Za.hasOwnProperty("decodeArray"))
                                throw new Error("Missing config parameter(s)")
                        }(),
                        $a[Ba].getLicenseMessage(ja)
                    },
                    getErrorResponse: function(ja, Ba) {
                        return $a[Ba].getErrorResponse(ja)
                    }
                }
            }
            Ua.__dashjs_factory_name = "DRMToday";
            var Wa = dashjs.FactoryMaker.getSingletonFactory(Ua);
            function Ka() {
                var Fa = "http://schemas.xmlsoap.org/soap/envelope/";
                function Za(Ba) {
                    var rl = String.fromCharCode.apply(null, new Uint8Array(Ba));
                    return decodeURIComponent(escape(rl))
                }
                function $a(Ba) {
                    if (window.DOMParser) {
                        var rl = Za(Ba)
                          , Xa = new window.DOMParser().parseFromString(rl, "text/xml")
                          , Cs = Xa ? Xa.getElementsByTagNameNS(Fa, "Envelope")[0] : null
                          , yl = Cs ? Cs.getElementsByTagNameNS(Fa, "Body")[0] : null;
                        if (yl && yl.getElementsByTagNameNS(Fa, "Fault")[0])
                            return null
                    }
                    return Ba
                }
                function ja(Ba) {
                    var rl = ""
                      , Xa = ""
                      , Cs = ""
                      , yl = -1
                      , hl = -1;
                    if (window.DOMParser) {
                        var ll = Za(Ba)
                          , Ql = new window.DOMParser().parseFromString(ll, "text/xml")
                          , Hl = Ql ? Ql.getElementsByTagNameNS(Fa, "Envelope")[0] : null
                          , bu = Hl ? Hl.getElementsByTagNameNS(Fa, "Body")[0] : null
                          , cu = bu ? bu.getElementsByTagNameNS(Fa, "Fault")[0] : null
                          , ou = cu ? cu.getElementsByTagName("detail")[0] : null
                          , tl = ou ? ou.getElementsByTagName("Exception")[0] : null
                          , Rl = null;
                        if (cu === null)
                            return ll;
                        rl = (Rl = cu.getElementsByTagName("faultstring")[0].firstChild) ? Rl.nodeValue : null,
                        tl !== null && (Xa = (Rl = tl.getElementsByTagName("StatusCode")[0]) ? Rl.firstChild.nodeValue : null,
                        yl = (Cs = (Rl = tl.getElementsByTagName("Message")[0]) ? Rl.firstChild.nodeValue : null) ? Cs.lastIndexOf("[") + 1 : -1,
                        hl = Cs ? Cs.indexOf("]") : -1,
                        Cs = Cs ? Cs.substring(yl, hl) : "")
                    }
                    var Al = "code: " + Xa + ", name: " + rl;
                    return Cs && (Al += ", message: " + Cs),
                    Al
                }
                return {
                    getServerURLFromMessage: function(Ba) {
                        return Ba
                    },
                    getHTTPMethod: function() {
                        return "POST"
                    },
                    getResponseType: function() {
                        return "arraybuffer"
                    },
                    getLicenseMessage: function(Ba) {
                        return $a.call(this, Ba)
                    },
                    getErrorResponse: function(Ba) {
                        return ja.call(this, Ba)
                    }
                }
            }
            Ka.__dashjs_factory_name = "PlayReady";
            var Ns = dashjs.FactoryMaker.getSingletonFactory(Ka);
            function pl() {
                return {
                    getServerURLFromMessage: function(Fa) {
                        return Fa
                    },
                    getHTTPMethod: function() {
                        return "POST"
                    },
                    getResponseType: function() {
                        return "arraybuffer"
                    },
                    getLicenseMessage: function(Fa) {
                        return Fa
                    },
                    getErrorResponse: function(Fa) {
                        return String.fromCharCode.apply(null, new Uint8Array(Fa))
                    }
                }
            }
            pl.__dashjs_factory_name = "Widevine";
            var el = dashjs.FactoryMaker.getSingletonFactory(pl);
            function wl() {
                return {
                    getServerURLFromMessage: function(Fa, Za) {
                        var $a = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(Za)));
                        Fa += "/?";
                        for (var ja = 0; ja < $a.kids.length; ja++)
                            Fa += $a.kids[ja] + "&";
                        return Fa = Fa.substring(0, Fa.length - 1)
                    },
                    getHTTPMethod: function() {
                        return "GET"
                    },
                    getResponseType: function() {
                        return "json"
                    },
                    getLicenseMessage: function(Fa) {
                        if (!Fa.hasOwnProperty("keys"))
                            return null;
                        for (var Za = [], $a = 0; $a < Fa.keys.length; $a++) {
                            var ja = Fa.keys[$a]
                              , Ba = ja.kid.replace(/=/g, "")
                              , rl = ja.k.replace(/=/g, "");
                            Za.push(new Re(Ba,rl))
                        }
                        return new Ye(Za)
                    },
                    getErrorResponse: function(Fa) {
                        return String.fromCharCode.apply(null, new Uint8Array(Fa))
                    }
                }
            }
            wl.__dashjs_factory_name = "ClearKey";
            var fu = dashjs.FactoryMaker.getSingletonFactory(wl);
            function vl() {
                var Fa = this.context
                  , Za = void 0
                  , $a = void 0
                  , ja = void 0
                  , Ba = void 0
                  , rl = void 0;
                return {
                    initialize: function() {
                        $a = [];
                        var Xa = void 0;
                        Xa = Pa(Fa).getInstance({
                            BASE64: ja
                        }),
                        $a.push(Xa),
                        Xa = ga(Fa).getInstance({
                            BASE64: ja
                        }),
                        $a.push(Xa),
                        Xa = ii(Fa).getInstance({
                            BASE64: ja
                        }),
                        $a.push(Xa),
                        Ba = Xa,
                        Xa = fa(Fa).getInstance({
                            BASE64: ja,
                            log: Za
                        }),
                        $a.push(Xa),
                        rl = Xa
                    },
                    setProtectionData: function(Xa) {
                        for (var Cs, yl, hl = 0; hl < $a.length; hl++) {
                            var ll = $a[hl];
                            ll.hasOwnProperty("init") && ll.init((Cs = ll.systemString,
                            yl = void 0,
                            yl = null,
                            Xa && (yl = Cs in Xa ? Xa[Cs] : null),
                            yl))
                        }
                    },
                    isClearKey: function(Xa) {
                        return Xa === Ba || Xa === rl
                    },
                    initDataEquals: function(Xa, Cs) {
                        if (Xa.byteLength === Cs.byteLength) {
                            for (var yl = new Uint8Array(Xa), hl = new Uint8Array(Cs), ll = 0; ll < yl.length; ll++)
                                if (yl[ll] !== hl[ll])
                                    return !1;
                            return !0
                        }
                        return !1
                    },
                    getKeySystems: function() {
                        return $a
                    },
                    getKeySystemBySystemString: function(Xa) {
                        for (var Cs = 0; Cs < $a.length; Cs++)
                            if ($a[Cs].systemString === Xa)
                                return $a[Cs];
                        return null
                    },
                    getSupportedKeySystemsFromContentProtection: function(Xa) {
                        var Cs = void 0
                          , yl = void 0
                          , hl = void 0
                          , ll = void 0
                          , Ql = [];
                        if (Xa)
                            for (hl = 0; hl < $a.length; ++hl)
                                for (yl = $a[hl],
                                ll = 0; ll < Xa.length; ++ll)
                                    (Cs = Xa[ll]).schemeIdUri.toLowerCase() === yl.schemeIdURI && Ql.push({
                                        ks: yl,
                                        initData: yl.getInitData(Cs),
                                        cdmData: yl.getCDMData(),
                                        sessionId: yl.getSessionId(Cs)
                                    });
                        return Ql
                    },
                    getSupportedKeySystems: function(Xa, Cs) {
                        for (var yl = [], hl = ae.parsePSSHList(Xa), ll = void 0, Ql = void 0, Hl = void 0, bu = 0; bu < $a.length; ++bu)
                            Ql = (ll = $a[bu]).systemString,
                            Hl = !Cs || Ql in Cs,
                            ll.uuid in hl && Hl && yl.push({
                                ks: ll,
                                initData: hl[ll.uuid],
                                cdmData: ll.getCDMData(),
                                sessionId: ll.getSessionId()
                            });
                        return yl
                    },
                    getLicenseServer: function(Xa, Cs, yl) {
                        if (yl === "license-release" || yl === "individualization-request")
                            return null;
                        var hl = null;
                        return Cs && Cs.hasOwnProperty("drmtoday") ? hl = Wa(Fa).getInstance({
                            BASE64: ja
                        }) : Xa.systemString === _t.WIDEVINE_KEYSTEM_STRING ? hl = el(Fa).getInstance() : Xa.systemString === _t.PLAYREADY_KEYSTEM_STRING ? hl = Ns(Fa).getInstance() : Xa.systemString === _t.CLEARKEY_KEYSTEM_STRING && (hl = fu(Fa).getInstance()),
                        hl
                    },
                    processClearKeyLicenseRequest: function(Xa, Cs, yl) {
                        try {
                            return Xa.getClearKeysFromProtectionData(Cs, yl)
                        } catch (hl) {
                            return Za("Failed to retrieve clearkeys from ProtectionData"),
                            null
                        }
                    },
                    setConfig: function(Xa) {
                        Xa && (Xa.log && (Za = Xa.log),
                        Xa.BASE64 && (ja = Xa.BASE64))
                    }
                }
            }
            vl.__dashjs_factory_name = "ProtectionKeyController";
            var kl = dashjs.FactoryMaker.getSingletonFactory(vl)
              , Xl = new (function(Fa) {
                function Za() {
                    (function(ja, Ba) {
                        if (!(ja instanceof Ba))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, Za);
                    var $a = function(ja, Ba) {
                        if (!ja)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !Ba || typeof Ba != "object" && typeof Ba != "function" ? ja : Ba
                    }(this, Fa.call(this));
                    return $a.INTERNAL_KEY_MESSAGE = "internalKeyMessage",
                    $a.INTERNAL_KEY_SYSTEM_SELECTED = "internalKeySystemSelected",
                    $a.INTERNAL_KEY_STATUS_CHANGED = "internalkeyStatusChanged",
                    $a.KEY_ADDED = "public_keyAdded",
                    $a.KEY_ERROR = "public_keyError",
                    $a.KEY_MESSAGE = "public_keyMessage",
                    $a.KEY_SESSION_CLOSED = "public_keySessionClosed",
                    $a.KEY_SESSION_CREATED = "public_keySessionCreated",
                    $a.KEY_SESSION_REMOVED = "public_keySessionRemoved",
                    $a.KEY_STATUSES_CHANGED = "public_keyStatusesChanged",
                    $a.KEY_SYSTEM_ACCESS_COMPLETE = "public_keySystemAccessComplete",
                    $a.KEY_SYSTEM_SELECTED = "public_keySystemSelected",
                    $a.LICENSE_REQUEST_COMPLETE = "public_licenseRequestComplete",
                    $a.NEED_KEY = "needkey",
                    $a.PROTECTION_CREATED = "public_protectioncreated",
                    $a.PROTECTION_DESTROYED = "public_protectiondestroyed",
                    $a.SERVER_CERTIFICATE_UPDATED = "serverCertificateUpdated",
                    $a.TEARDOWN_COMPLETE = "protectionTeardownComplete",
                    $a.VIDEO_ELEMENT_SELECTED = "videoElementSelected",
                    $a
                }
                return function($a, ja) {
                    if (typeof ja != "function" && ja !== null)
                        throw new TypeError("Super expression must either be null or a function, not " + typeof ja);
                    $a.prototype = Object.create(ja && ja.prototype, {
                        constructor: {
                            value: $a,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    ja && (Object.setPrototypeOf ? Object.setPrototypeOf($a, ja) : $a.__proto__ = ja)
                }(Za, Fa),
                Za
            }(ve(2).a))
              , uu = function Fa(Za, $a) {
                (function(ja, Ba) {
                    if (!(ja instanceof Ba))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.initData = Za,
                this.initDataType = $a
            }
              , tu = function Fa(Za, $a) {
                (function(ja, Ba) {
                    if (!(ja instanceof Ba))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.sessionToken = Za,
                this.error = $a
            }
              , Ps = function Fa(Za, $a, ja, Ba) {
                (function(rl, Xa) {
                    if (!(rl instanceof Xa))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.sessionToken = Za,
                this.message = $a,
                this.defaultURL = ja,
                this.messageType = Ba || "license-request"
            }
              , $s = function Fa(Za, $a) {
                (function(ja, Ba) {
                    if (!(ja instanceof Ba))
                        throw new TypeError("Cannot call a class as a function")
                }
                )(this, Fa),
                this.keySystem = Za,
                this.ksConfiguration = $a
            };
            function nl(Fa) {
                Fa = Fa || {};
                var Za, $a = this.context, ja = Fa.eventBus, Ba = Fa.events, rl = Fa.log, Xa = void 0, Cs = void 0, yl = void 0, hl = void 0, ll = void 0, Ql = void 0;
                function Hl(tl, Rl) {
                    navigator.requestMediaKeySystemAccess !== void 0 && typeof navigator.requestMediaKeySystemAccess == "function" ? function(Al) {
                        var Pl = tl[Al].ks
                          , Jl = tl[Al].configs;
                        navigator.requestMediaKeySystemAccess(Pl.systemString, Jl).then(function(Vl) {
                            var gu = typeof Vl.getConfiguration == "function" ? Vl.getConfiguration() : null
                              , yu = new $s(Pl,gu);
                            yu.mksa = Vl,
                            ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                                data: yu
                            })
                        }).catch(function(Vl) {
                            ++Al < tl.length ? Hl(tl, Al) : ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                                error: "Key system access denied! " + Vl.message
                            })
                        })
                    }(Rl) : ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                        error: "Insecure origins are not allowed"
                    })
                }
                function bu(tl) {
                    var Rl = tl.session;
                    return Rl.removeEventListener("keystatuseschange", tl),
                    Rl.removeEventListener("message", tl),
                    Rl.close()
                }
                function cu(tl) {
                    for (var Rl = 0; Rl < hl.length; Rl++)
                        if (hl[Rl] === tl) {
                            hl.splice(Rl, 1);
                            break
                        }
                }
                function ou(tl, Rl, Al, Pl) {
                    var Jl = {
                        session: tl,
                        initData: Rl,
                        sessionId: Pl,
                        handleEvent: function(Vl) {
                            switch (Vl.type) {
                            case "keystatuseschange":
                                ja.trigger(Ba.KEY_STATUSES_CHANGED, {
                                    data: this
                                }),
                                Vl.target.keyStatuses.forEach(function() {
                                    var yu = void 0
                                      , Gu = void 0;
                                    switch (arguments && arguments.length > 0 && (arguments[0] && (typeof arguments[0] == "string" ? yu = arguments[0] : Gu = arguments[0]),
                                    arguments[1] && (typeof arguments[1] == "string" ? yu = arguments[1] : Gu = arguments[1])),
                                    yu) {
                                    case "expired":
                                        ja.trigger(Ba.INTERNAL_KEY_STATUS_CHANGED, {
                                            error: "License has expired"
                                        });
                                        break;
                                    default:
                                        ja.trigger(Ba.INTERNAL_KEY_STATUS_CHANGED, {
                                            status: yu,
                                            keyId: Gu
                                        })
                                    }
                                });
                                break;
                            case "message":
                                var gu = ArrayBuffer.isView(Vl.message) ? Vl.message.buffer : Vl.message;
                                ja.trigger(Ba.INTERNAL_KEY_MESSAGE, {
                                    data: new Ps(this,gu,void 0,Vl.messageType)
                                })
                            }
                        },
                        getSessionID: function() {
                            return tl.sessionId
                        },
                        getExpirationTime: function() {
                            return tl.expiration
                        },
                        getKeyStatuses: function() {
                            return tl.keyStatuses
                        },
                        getSessionType: function() {
                            return Al
                        }
                    };
                    return tl.addEventListener("keystatuseschange", Jl),
                    tl.addEventListener("message", Jl),
                    tl.closed.then(function() {
                        cu(Jl),
                        rl("DRM: Session closed.  SessionID = " + Jl.getSessionID()),
                        ja.trigger(Ba.KEY_SESSION_CLOSED, {
                            data: Jl.getSessionID()
                        })
                    }),
                    hl.push(Jl),
                    Jl
                }
                return Za = {
                    getAllInitData: function() {
                        for (var tl = [], Rl = 0; Rl < hl.length; Rl++)
                            hl[Rl].initData && tl.push(hl[Rl].initData);
                        return tl
                    },
                    requestKeySystemAccess: function(tl) {
                        Hl(tl, 0)
                    },
                    getKeySystem: function() {
                        return Xa
                    },
                    selectKeySystem: function(tl) {
                        tl.mksa.createMediaKeys().then(function(Rl) {
                            Xa = tl.keySystem,
                            yl = Rl,
                            Cs ? Cs.setMediaKeys(yl).then(function() {
                                ja.trigger(Ba.INTERNAL_KEY_SYSTEM_SELECTED)
                            }) : ja.trigger(Ba.INTERNAL_KEY_SYSTEM_SELECTED)
                        }).catch(function() {
                            ja.trigger(Ba.INTERNAL_KEY_SYSTEM_SELECTED, {
                                error: "Error selecting keys system (" + tl.keySystem.systemString + ")! Could not create MediaKeys -- TODO"
                            })
                        })
                    },
                    setMediaElement: function(tl) {
                        Cs !== tl && (Cs && (Cs.removeEventListener("encrypted", ll),
                        Cs.setMediaKeys && Cs.setMediaKeys(null)),
                        (Cs = tl) && (Cs.addEventListener("encrypted", ll),
                        Cs.setMediaKeys && yl && Cs.setMediaKeys(yl)))
                    },
                    setServerCertificate: function(tl) {
                        if (!Xa || !yl)
                            throw new Error("Can not set server certificate until you have selected a key system");
                        yl.setServerCertificate(tl).then(function() {
                            rl("DRM: License server certificate successfully updated."),
                            ja.trigger(Ba.SERVER_CERTIFICATE_UPDATED)
                        }).catch(function(Rl) {
                            ja.trigger(Ba.SERVER_CERTIFICATE_UPDATED, {
                                error: "Error updating server certificate -- " + Rl.name
                            })
                        })
                    },
                    createKeySession: function(tl, Rl, Al) {
                        if (!Xa || !yl)
                            throw new Error("Can not create sessions until you have selected a key system");
                        var Pl = yl.createSession(Al)
                          , Jl = ou(Pl, tl, Al)
                          , Vl = this.getKeySystem().systemString === _t.CLEARKEY_KEYSTEM_STRING && Rl && Rl.clearkeys ? "keyids" : "cenc";
                        Pl.generateRequest(Vl, tl).then(function() {
                            rl("DRM: Session created.  SessionID = " + Jl.getSessionID()),
                            ja.trigger(Ba.KEY_SESSION_CREATED, {
                                data: Jl
                            })
                        }).catch(function(gu) {
                            cu(Jl),
                            ja.trigger(Ba.KEY_SESSION_CREATED, {
                                data: null,
                                error: "Error generating key request -- " + gu.name
                            })
                        })
                    },
                    updateKeySession: function(tl, Rl) {
                        var Al = tl.session;
                        Ql.isClearKey(Xa) && (Rl = Rl.toJWK()),
                        Al.update(Rl).catch(function(Pl) {
                            ja.trigger(Ba.KEY_ERROR, {
                                data: new tu(tl,"Error sending update() message! " + Pl.name)
                            })
                        })
                    },
                    loadKeySession: function(tl, Rl, Al) {
                        if (!Xa || !yl)
                            throw new Error("Can not load sessions until you have selected a key system");
                        for (var Pl = 0; Pl < hl.length; Pl++)
                            if (tl === hl[Pl].sessionId)
                                return void rl("DRM: Ignoring session ID because we have already seen it!");
                        var Jl = yl.createSession(Al)
                          , Vl = ou(Jl, Rl, Al, tl);
                        Jl.load(tl).then(function(gu) {
                            gu ? (rl("DRM: Session loaded.  SessionID = " + Vl.getSessionID()),
                            ja.trigger(Ba.KEY_SESSION_CREATED, {
                                data: Vl
                            })) : (cu(Vl),
                            ja.trigger(Ba.KEY_SESSION_CREATED, {
                                data: null,
                                error: "Could not load session! Invalid Session ID (" + tl + ")"
                            }))
                        }).catch(function(gu) {
                            cu(Vl),
                            ja.trigger(Ba.KEY_SESSION_CREATED, {
                                data: null,
                                error: "Could not load session (" + tl + ")! " + gu.name
                            })
                        })
                    },
                    removeKeySession: function(tl) {
                        tl.session.remove().then(function() {
                            rl("DRM: Session removed.  SessionID = " + tl.getSessionID()),
                            ja.trigger(Ba.KEY_SESSION_REMOVED, {
                                data: tl.getSessionID()
                            })
                        }, function(Rl) {
                            ja.trigger(Ba.KEY_SESSION_REMOVED, {
                                data: null,
                                error: "Error removing session (" + tl.getSessionID() + "). " + Rl.name
                            })
                        })
                    },
                    closeKeySession: function(tl) {
                        bu(tl).catch(function(Rl) {
                            cu(tl),
                            ja.trigger(Ba.KEY_SESSION_CLOSED, {
                                data: null,
                                error: "Error closing session (" + tl.getSessionID() + ") " + Rl.name
                            })
                        })
                    },
                    reset: function() {
                        var tl = hl.length
                          , Rl = void 0;
                        tl !== 0 ? function() {
                            for (var Al = function(Jl) {
                                cu(Jl),
                                hl.length === 0 && (Cs ? (Cs.removeEventListener("encrypted", ll),
                                Cs.setMediaKeys(null).then(function() {
                                    ja.trigger(Ba.TEARDOWN_COMPLETE)
                                })) : ja.trigger(Ba.TEARDOWN_COMPLETE))
                            }, Pl = 0; Pl < tl; Pl++)
                                (function(Jl) {
                                    Rl.session.closed.then(function() {
                                        Al(Jl)
                                    }),
                                    bu(Rl).catch(function() {
                                        Al(Jl)
                                    })
                                }
                                )(Rl = hl[Pl])
                        }() : ja.trigger(Ba.TEARDOWN_COMPLETE)
                    }
                },
                Xa = null,
                Cs = null,
                yl = null,
                hl = [],
                Ql = kl($a).getInstance(),
                ll = {
                    handleEvent: function(tl) {
                        switch (tl.type) {
                        case "encrypted":
                            if (tl.initData) {
                                var Rl = ArrayBuffer.isView(tl.initData) ? tl.initData.buffer : tl.initData;
                                ja.trigger(Ba.NEED_KEY, {
                                    key: new uu(Rl,tl.initDataType)
                                })
                            }
                        }
                    }
                },
                Za
            }
            nl.__dashjs_factory_name = "ProtectionModel_21Jan2015";
            var Ll = dashjs.FactoryMaker.getClassFactory(nl);
            function Nl(Fa) {
                Fa = Fa || {};
                var Za, $a = this.context, ja = Fa.eventBus, Ba = Fa.events, rl = Fa.log, Xa = Fa.api, Cs = void 0, yl = void 0, hl = void 0, ll = void 0, Ql = void 0, Hl = void 0, bu = void 0;
                function cu(tl) {
                    var Rl = tl.session;
                    Rl.removeEventListener(Xa.error, tl),
                    Rl.removeEventListener(Xa.message, tl),
                    Rl.removeEventListener(Xa.ready, tl),
                    Rl.removeEventListener(Xa.close, tl);
                    for (var Al = 0; Al < Ql.length; Al++)
                        if (Ql[Al] === tl) {
                            Ql.splice(Al, 1);
                            break
                        }
                    Rl[Xa.release]()
                }
                function ou() {
                    var tl = null
                      , Rl = function() {
                        Cs.removeEventListener("loadedmetadata", tl),
                        Cs[Xa.setMediaKeys](hl),
                        ja.trigger(Ba.VIDEO_ELEMENT_SELECTED)
                    };
                    Cs.readyState >= 1 ? Rl() : (tl = Rl.bind(this),
                    Cs.addEventListener("loadedmetadata", tl))
                }
                return Za = {
                    getAllInitData: function() {
                        for (var tl = [], Rl = 0; Rl < Ql.length; Rl++)
                            tl.push(Ql[Rl].initData);
                        return tl
                    },
                    requestKeySystemAccess: function(tl) {
                        for (var Rl = !1, Al = 0; Al < tl.length; Al++)
                            for (var Pl = tl[Al].ks.systemString, Jl = tl[Al].configs, Vl = null, gu = null, yu = 0; yu < Jl.length; yu++) {
                                var Gu = Jl[yu].audioCapabilities
                                  , Lu = Jl[yu].videoCapabilities;
                                if (Gu && Gu.length !== 0) {
                                    Vl = [];
                                    for (var Fu = 0; Fu < Gu.length; Fu++)
                                        window[Xa.MediaKeys].isTypeSupported(Pl, Gu[Fu].contentType) && Vl.push(Gu[Fu])
                                }
                                if (Lu && Lu.length !== 0) {
                                    gu = [];
                                    for (var Dl = 0; Dl < Lu.length; Dl++)
                                        window[Xa.MediaKeys].isTypeSupported(Pl, Lu[Dl].contentType) && gu.push(Lu[Dl])
                                }
                                if (!(!Vl && !gu || Vl && Vl.length === 0 || gu && gu.length === 0)) {
                                    Rl = !0;
                                    var Wl = new O(Vl,gu)
                                      , au = bu.getKeySystemBySystemString(Pl);
                                    ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                                        data: new $s(au,Wl)
                                    });
                                    break
                                }
                            }
                        Rl || ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                            error: "Key system access denied! -- No valid audio/video content configurations detected!"
                        })
                    },
                    getKeySystem: function() {
                        return yl
                    },
                    selectKeySystem: function(tl) {
                        try {
                            hl = tl.mediaKeys = new window[Xa.MediaKeys](tl.keySystem.systemString),
                            yl = tl.keySystem,
                            ll = tl,
                            Cs && ou(),
                            ja.trigger(Ba.INTERNAL_KEY_SYSTEM_SELECTED)
                        } catch (Rl) {
                            ja.trigger(Ba.INTERNAL_KEY_SYSTEM_SELECTED, {
                                error: "Error selecting keys system (" + yl.systemString + ")! Could not create MediaKeys -- TODO"
                            })
                        }
                    },
                    setMediaElement: function(tl) {
                        Cs !== tl && (Cs && Cs.removeEventListener(Xa.needkey, Hl),
                        (Cs = tl) && (Cs.addEventListener(Xa.needkey, Hl),
                        hl && ou()))
                    },
                    createKeySession: function(tl, Rl, Al, Pl) {
                        if (!yl || !hl || !ll)
                            throw new Error("Can not create sessions until you have selected a key system");
                        var Jl = null;
                        if (ll.ksConfiguration.videoCapabilities !== null && ll.ksConfiguration.videoCapabilities.length > 0 && (Jl = ll.ksConfiguration.videoCapabilities[0]),
                        Jl === null && ll.ksConfiguration.audioCapabilities !== null && ll.ksConfiguration.audioCapabilities.length > 0 && (Jl = ll.ksConfiguration.audioCapabilities[0]),
                        Jl === null)
                            throw new Error("Can not create sessions for unknown content types.");
                        var Vl = Jl.contentType
                          , gu = hl.createSession(Vl, new Uint8Array(tl), Pl ? new Uint8Array(Pl) : null)
                          , yu = function(Gu, Lu) {
                            return {
                                session: Gu,
                                initData: Lu,
                                getSessionID: function() {
                                    return this.session.sessionId
                                },
                                getExpirationTime: function() {
                                    return NaN
                                },
                                getSessionType: function() {
                                    return "temporary"
                                },
                                handleEvent: function(Fu) {
                                    switch (Fu.type) {
                                    case Xa.error:
                                        var Dl = "KeyError";
                                        ja.trigger(Ba.KEY_ERROR, {
                                            data: new tu(this,Dl)
                                        });
                                        break;
                                    case Xa.message:
                                        var Wl = ArrayBuffer.isView(Fu.message) ? Fu.message.buffer : Fu.message;
                                        ja.trigger(Ba.INTERNAL_KEY_MESSAGE, {
                                            data: new Ps(this,Wl,Fu.destinationURL)
                                        });
                                        break;
                                    case Xa.ready:
                                        rl("DRM: Key added."),
                                        ja.trigger(Ba.KEY_ADDED);
                                        break;
                                    case Xa.close:
                                        rl("DRM: Session closed.  SessionID = " + this.getSessionID()),
                                        ja.trigger(Ba.KEY_SESSION_CLOSED, {
                                            data: this.getSessionID()
                                        })
                                    }
                                }
                            }
                        }(gu, tl);
                        gu.addEventListener(Xa.error, yu),
                        gu.addEventListener(Xa.message, yu),
                        gu.addEventListener(Xa.ready, yu),
                        gu.addEventListener(Xa.close, yu),
                        Ql.push(yu),
                        rl("DRM: Session created.  SessionID = " + yu.getSessionID()),
                        ja.trigger(Ba.KEY_SESSION_CREATED, {
                            data: yu
                        })
                    },
                    updateKeySession: function(tl, Rl) {
                        var Al = tl.session;
                        bu.isClearKey(yl) ? Al.update(new Uint8Array(Rl.toJWK())) : Al.update(new Uint8Array(Rl))
                    },
                    closeKeySession: cu,
                    setServerCertificate: function() {},
                    loadKeySession: function() {},
                    removeKeySession: function() {},
                    reset: function() {
                        try {
                            for (var tl = 0; tl < Ql.length; tl++)
                                cu(Ql[tl]);
                            Cs && Cs.removeEventListener(Xa.needkey, Hl),
                            ja.trigger(Ba.TEARDOWN_COMPLETE)
                        } catch (Rl) {
                            ja.trigger(Ba.TEARDOWN_COMPLETE, {
                                error: "Error tearing down key sessions and MediaKeys! -- " + Rl.message
                            })
                        }
                    }
                },
                Cs = null,
                yl = null,
                hl = null,
                ll = null,
                Ql = [],
                bu = kl($a).getInstance(),
                Hl = {
                    handleEvent: function(tl) {
                        switch (tl.type) {
                        case Xa.needkey:
                            if (tl.initData) {
                                var Rl = ArrayBuffer.isView(tl.initData) ? tl.initData.buffer : tl.initData;
                                ja.trigger(Ba.NEED_KEY, {
                                    key: new uu(Rl,"cenc")
                                })
                            }
                        }
                    }
                },
                Za
            }
            Nl.__dashjs_factory_name = "ProtectionModel_3Feb2014";
            var Gl = dashjs.FactoryMaker.getClassFactory(Nl);
            function vu(Fa) {
                Fa = Fa || {};
                var Za, $a = this.context, ja = Fa.eventBus, Ba = Fa.events, rl = Fa.log, Xa = Fa.api, Cs = Fa.errHandler, yl = void 0, hl = void 0, ll = void 0, Ql = void 0, Hl = void 0, bu = void 0, cu = void 0;
                function ou(Al) {
                    try {
                        yl[Xa.cancelKeyRequest](hl.systemString, Al.sessionID)
                    } catch (Pl) {
                        ja.trigger(Ba.KEY_SESSION_CLOSED, {
                            data: null,
                            error: "Error closing session (" + Al.sessionID + ") " + Pl.message
                        })
                    }
                }
                function tl(Al, Pl) {
                    if (Pl && Al) {
                        for (var Jl = Al.length, Vl = 0; Vl < Jl; Vl++)
                            if (Al[Vl].sessionID == Pl)
                                return Al[Vl];
                        return null
                    }
                    return null
                }
                function Rl() {
                    yl.removeEventListener(Xa.keyerror, cu),
                    yl.removeEventListener(Xa.needkey, cu),
                    yl.removeEventListener(Xa.keymessage, cu),
                    yl.removeEventListener(Xa.keyadded, cu)
                }
                return Za = {
                    getAllInitData: function() {
                        for (var Al = [], Pl = 0; Pl < Ql.length; Pl++)
                            Al.push(Ql[Pl].initData);
                        for (var Jl = 0; Jl < Hl.length; Jl++)
                            Al.push(Hl[Jl].initData);
                        return Al
                    },
                    requestKeySystemAccess: function(Al) {
                        var Pl = yl;
                        Pl || (Pl = document.createElement("video"));
                        for (var Jl = !1, Vl = 0; Vl < Al.length; Vl++)
                            for (var gu = Al[Vl].ks.systemString, yu = Al[Vl].configs, Gu = null, Lu = null, Fu = 0; Fu < yu.length; Fu++) {
                                var Dl = yu[Fu].videoCapabilities;
                                if (Dl && Dl.length !== 0) {
                                    Lu = [];
                                    for (var Wl = 0; Wl < Dl.length; Wl++)
                                        Pl.canPlayType(Dl[Wl].contentType, gu) !== "" && Lu.push(Dl[Wl])
                                }
                                if (Lu && (!Lu || Lu.length !== 0)) {
                                    Jl = !0;
                                    var au = new O(Gu,Lu)
                                      , Su = ll.getKeySystemBySystemString(gu);
                                    ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                                        data: new $s(Su,au)
                                    });
                                    break
                                }
                            }
                        Jl || ja.trigger(Ba.KEY_SYSTEM_ACCESS_COMPLETE, {
                            error: "Key system access denied! -- No valid audio/video content configurations detected!"
                        })
                    },
                    getKeySystem: function() {
                        return hl
                    },
                    selectKeySystem: function(Al) {
                        hl = Al.keySystem,
                        ja.trigger(Ba.INTERNAL_KEY_SYSTEM_SELECTED)
                    },
                    setMediaElement: function(Al) {
                        yl !== Al && (yl && Rl(),
                        (yl = Al) && (yl.addEventListener(Xa.keyerror, cu),
                        yl.addEventListener(Xa.needkey, cu),
                        yl.addEventListener(Xa.keymessage, cu),
                        yl.addEventListener(Xa.keyadded, cu),
                        ja.trigger(Ba.VIDEO_ELEMENT_SELECTED)))
                    },
                    createKeySession: function(Al) {
                        if (!hl)
                            throw new Error("Can not create sessions until you have selected a key system");
                        if (bu || Hl.length === 0) {
                            var Pl = {
                                sessionID: null,
                                initData: Al,
                                getSessionID: function() {
                                    return this.sessionID
                                },
                                getExpirationTime: function() {
                                    return NaN
                                },
                                getSessionType: function() {
                                    return "temporary"
                                }
                            };
                            return Ql.push(Pl),
                            yl[Xa.generateKeyRequest](hl.systemString, new Uint8Array(Al)),
                            Pl
                        }
                        throw new Error("Multiple sessions not allowed!")
                    },
                    updateKeySession: function(Al, Pl) {
                        var Jl = Al.sessionID;
                        if (ll.isClearKey(hl))
                            for (var Vl = 0; Vl < Pl.keyPairs.length; Vl++)
                                yl[Xa.addKey](hl.systemString, Pl.keyPairs[Vl].key, Pl.keyPairs[Vl].keyID, Jl);
                        else
                            yl[Xa.addKey](hl.systemString, new Uint8Array(Pl), new Uint8Array(Al.initData), Jl)
                    },
                    closeKeySession: ou,
                    setServerCertificate: function() {},
                    loadKeySession: function() {},
                    removeKeySession: function() {},
                    reset: function() {
                        yl && Rl();
                        for (var Al = 0; Al < Hl.length; Al++)
                            ou(Hl[Al]);
                        ja.trigger(Ba.TEARDOWN_COMPLETE)
                    }
                },
                yl = null,
                hl = null,
                Ql = [],
                Hl = [],
                ll = kl($a).getInstance(),
                cu = {
                    handleEvent: function(Al) {
                        var Pl = null;
                        switch (Al.type) {
                        case Xa.needkey:
                            var Jl = ArrayBuffer.isView(Al.initData) ? Al.initData.buffer : Al.initData;
                            ja.trigger(Ba.NEED_KEY, {
                                key: new uu(Jl,"cenc")
                            });
                            break;
                        case Xa.keyerror:
                            if ((Pl = tl(Hl, Al.sessionId)) || (Pl = tl(Ql, Al.sessionId)),
                            Pl) {
                                var Vl = "";
                                switch (Al.errorCode.code) {
                                case 1:
                                    Vl += "MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";
                                    break;
                                case 2:
                                    Vl += "MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";
                                    break;
                                case 3:
                                    Vl += "MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";
                                    break;
                                case 4:
                                    Vl += "MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";
                                    break;
                                case 5:
                                    Vl += "MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";
                                    break;
                                case 6:
                                    Vl += "MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."
                                }
                                Vl += "  System Code = " + Al.systemCode,
                                ja.trigger(Ba.KEY_ERROR, {
                                    data: new tu(Pl,Vl)
                                })
                            } else
                                rl("No session token found for key error");
                            break;
                        case Xa.keyadded:
                            (Pl = tl(Hl, Al.sessionId)) || (Pl = tl(Ql, Al.sessionId)),
                            Pl ? (rl("DRM: Key added."),
                            ja.trigger(Ba.KEY_ADDED, {
                                data: Pl
                            })) : rl("No session token found for key added");
                            break;
                        case Xa.keymessage:
                            if ((bu = Al.sessionId !== null && Al.sessionId !== void 0) ? !(Pl = tl(Hl, Al.sessionId)) && Ql.length > 0 && (Pl = Ql.shift(),
                            Hl.push(Pl),
                            Pl.sessionID = Al.sessionId,
                            ja.trigger(Ba.KEY_SESSION_CREATED, {
                                data: Pl
                            })) : Ql.length > 0 && (Pl = Ql.shift(),
                            Hl.push(Pl),
                            Ql.length !== 0 && Cs.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),
                            Pl) {
                                var gu = ArrayBuffer.isView(Al.message) ? Al.message.buffer : Al.message;
                                Pl.keyMessage = gu,
                                ja.trigger(Ba.INTERNAL_KEY_MESSAGE, {
                                    data: new Ps(Pl,gu,Al.defaultURL)
                                })
                            } else
                                rl("No session token found for key message")
                        }
                    }
                },
                Za
            }
            vu.__dashjs_factory_name = "ProtectionModel_01b";
            var Cu = dashjs.FactoryMaker.getClassFactory(vu)
              , Ru = [{
                generateKeyRequest: "generateKeyRequest",
                addKey: "addKey",
                cancelKeyRequest: "cancelKeyRequest",
                needkey: "needkey",
                keyerror: "keyerror",
                keyadded: "keyadded",
                keymessage: "keymessage"
            }, {
                generateKeyRequest: "webkitGenerateKeyRequest",
                addKey: "webkitAddKey",
                cancelKeyRequest: "webkitCancelKeyRequest",
                needkey: "webkitneedkey",
                keyerror: "webkitkeyerror",
                keyadded: "webkitkeyadded",
                keymessage: "webkitkeymessage"
            }]
              , Yu = [{
                setMediaKeys: "setMediaKeys",
                MediaKeys: "MediaKeys",
                release: "close",
                needkey: "needkey",
                error: "keyerror",
                message: "keymessage",
                ready: "keyadded",
                close: "keyclose"
            }, {
                setMediaKeys: "msSetMediaKeys",
                MediaKeys: "MSMediaKeys",
                release: "close",
                needkey: "msneedkey",
                error: "mskeyerror",
                message: "mskeymessage",
                ready: "mskeyadded",
                close: "mskeyclose"
            }];
            function nd() {
                var Fa = this.context;
                function Za($a, ja) {
                    for (var Ba = 0; Ba < ja.length; Ba++) {
                        var rl = ja[Ba];
                        if (typeof $a[rl[Object.keys(rl)[0]]] == "function")
                            return rl
                    }
                    return null
                }
                return {
                    createProtectionSystem: function($a) {
                        var ja = null
                          , Ba = kl(Fa).getInstance();
                        Ba.setConfig({
                            log: $a.log,
                            BASE64: $a.BASE64
                        }),
                        Ba.initialize();
                        var rl = function(Xa) {
                            var Cs = Xa.log
                              , yl = Xa.eventBus
                              , hl = Xa.errHandler
                              , ll = Xa.videoModel ? Xa.videoModel.getElement() : null;
                            return ll && ll.onencrypted === void 0 || ll && ll.mediaKeys === void 0 ? Za(ll, Yu) ? (Cs("EME detected on this user agent! (ProtectionModel_3Feb2014)"),
                            Gl(Fa).create({
                                log: Cs,
                                eventBus: yl,
                                events: Xa.events,
                                api: Za(ll, Yu)
                            })) : Za(ll, Ru) ? (Cs("EME detected on this user agent! (ProtectionModel_01b)"),
                            Cu(Fa).create({
                                log: Cs,
                                eventBus: yl,
                                errHandler: hl,
                                events: Xa.events,
                                api: Za(ll, Ru)
                            })) : (Cs("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),
                            null) : (Cs("EME detected on this user agent! (ProtectionModel_21Jan2015)"),
                            Ll(Fa).create({
                                log: Cs,
                                eventBus: yl,
                                events: Xa.events
                            }))
                        }($a);
                        return !ja && rl && (ja = we(Fa).create({
                            protectionModel: rl,
                            protectionKeyController: Ba,
                            eventBus: $a.eventBus,
                            log: $a.log,
                            events: $a.events,
                            BASE64: $a.BASE64,
                            constants: $a.constants,
                            ignoreEmeEncryptedEvent: $a.ignoreEmeEncryptedEvent
                        }),
                        $a.capabilities.setEncryptedMediaSupported(!0)),
                        ja
                    }
                }
            }
            nd.__dashjs_factory_name = "Protection";
            var qu = dashjs.FactoryMaker.getClassFactory(nd);
            qu.events = Xl,
            dashjs.FactoryMaker.updateClassFactory(nd.__dashjs_factory_name, qu);
            var ml = qu;
            dashjs.Protection = ml,
            ye.default = dashjs
        }
        ])
    })
}
)(dashPlayer);
var dashPlayerExports = dashPlayer.exports;
const ne = getDefaultExportFromCjs(dashPlayerExports);
var AUDIO = new Blob([new Uint8Array([255, 227, 24, 196, 0, 0, 0, 3, 72, 1, 64, 0, 0, 4, 132, 16, 31, 227, 192, 225, 76, 255, 67, 12, 255, 221, 27, 255, 228, 97, 73, 63, 255, 195, 131, 69, 192, 232, 223, 255, 255, 207, 102, 239, 255, 255, 255, 101, 158, 206, 70, 20, 59, 255, 254, 95, 70, 149, 66, 4, 16, 128, 0, 2, 2, 32, 240, 138, 255, 36, 106, 183, 255, 227, 24, 196, 59, 11, 34, 62, 80, 49, 135, 40, 0, 253, 29, 191, 209, 200, 141, 71, 7, 255, 252, 152, 74, 15, 130, 33, 185, 6, 63, 255, 252, 195, 70, 203, 86, 53, 15, 255, 255, 247, 103, 76, 121, 64, 32, 47, 255, 34, 227, 194, 209, 138, 76, 65, 77, 69, 51, 46, 57, 55, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 255, 227, 24, 196, 73, 13, 153, 210, 100, 81, 135, 56, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170])],{
    type: "audio/mpeg"
})
  , VIDEO = new Blob([new Uint8Array([0, 0, 0, 28, 102, 116, 121, 112, 105, 115, 111, 109, 0, 0, 2, 0, 105, 115, 111, 109, 105, 115, 111, 50, 109, 112, 52, 49, 0, 0, 0, 8, 102, 114, 101, 101, 0, 0, 2, 239, 109, 100, 97, 116, 33, 16, 5, 32, 164, 27, 255, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 167, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 33, 16, 5, 32, 164, 27, 255, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 167, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 0, 2, 194, 109, 111, 111, 118, 0, 0, 0, 108, 109, 118, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 232, 0, 0, 0, 47, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 1, 236, 116, 114, 97, 107, 0, 0, 0, 92, 116, 107, 104, 100, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 101, 100, 116, 115, 0, 0, 0, 28, 101, 108, 115, 116, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 47, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 100, 109, 100, 105, 97, 0, 0, 0, 32, 109, 100, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 172, 68, 0, 0, 8, 0, 85, 196, 0, 0, 0, 0, 0, 45, 104, 100, 108, 114, 0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0, 0, 0, 1, 15, 109, 105, 110, 102, 0, 0, 0, 16, 115, 109, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 100, 105, 110, 102, 0, 0, 0, 28, 100, 114, 101, 102, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1, 0, 0, 0, 211, 115, 116, 98, 108, 0, 0, 0, 103, 115, 116, 115, 100, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 87, 109, 112, 52, 97, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 16, 0, 0, 0, 0, 172, 68, 0, 0, 0, 0, 0, 51, 101, 115, 100, 115, 0, 0, 0, 0, 3, 128, 128, 128, 34, 0, 2, 0, 4, 128, 128, 128, 20, 64, 21, 0, 0, 0, 0, 1, 244, 0, 0, 1, 243, 249, 5, 128, 128, 128, 2, 18, 16, 6, 128, 128, 128, 1, 2, 0, 0, 0, 24, 115, 116, 116, 115, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 4, 0, 0, 0, 0, 28, 115, 116, 115, 99, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 28, 115, 116, 115, 122, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 115, 0, 0, 1, 116, 0, 0, 0, 20, 115, 116, 99, 111, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 44, 0, 0, 0, 98, 117, 100, 116, 97, 0, 0, 0, 90, 109, 101, 116, 97, 0, 0, 0, 0, 0, 0, 0, 33, 104, 100, 108, 114, 0, 0, 0, 0, 0, 0, 0, 0, 109, 100, 105, 114, 97, 112, 112, 108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 105, 108, 115, 116, 0, 0, 0, 37, 169, 116, 111, 111, 0, 0, 0, 29, 100, 97, 116, 97, 0, 0, 0, 1, 0, 0, 0, 0, 76, 97, 118, 102, 53, 54, 46, 52, 48, 46, 49, 48, 49])],{
    type: "video/mp4"
});
function setupDefaultValues(n) {
    return Object.assign({
        muted: !1,
        timeout: 250,
        inline: !1
    }, n)
}
function startPlayback(n, d) {
    var y = n.muted
      , ye = n.timeout
      , ve = n.inline
      , ie = d()
      , ae = ie.element
      , i = ie.source
      , O = void 0
      , $ = void 0
      , Te = void 0;
    return ae.muted = y,
    y === !0 && ae.setAttribute("muted", "muted"),
    ve === !0 && ae.setAttribute("playsinline", "playsinline"),
    ae.src = i,
    new Promise(function(we) {
        O = ae.play(),
        $ = setTimeout(function() {
            Te(!1, new Error("Timeout " + ye + " ms has been reached"))
        }, ye),
        Te = function(Ye) {
            var _t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
            ae.remove(),
            ae.srcObject = null,
            clearTimeout($),
            we({
                result: Ye,
                error: _t
            })
        }
        ,
        O !== void 0 ? O.then(function() {
            return Te(!0)
        }).catch(function(Re) {
            return Te(!1, Re)
        }) : Te(!0)
    }
    )
}
function video(n) {
    return n = setupDefaultValues(n),
    startPlayback(n, function() {
        return {
            element: document.createElement("video"),
            source: URL.createObjectURL(VIDEO)
        }
    })
}
function audio(n) {
    return n = setupDefaultValues(n),
    startPlayback(n, function() {
        return {
            element: document.createElement("audio"),
            source: URL.createObjectURL(AUDIO)
        }
    })
}
var index = {
    audio,
    video
}
  , __defProp = Object.defineProperty
  , __defProps = Object.defineProperties
  , __getOwnPropDescs = Object.getOwnPropertyDescriptors
  , __getOwnPropSymbols = Object.getOwnPropertySymbols
  , __hasOwnProp = Object.prototype.hasOwnProperty
  , __propIsEnum = Object.prototype.propertyIsEnumerable
  , __pow = Math.pow
  , __defNormalProp = (n,d,y)=>d in n ? __defProp(n, d, {
    enumerable: !0,
    configurable: !0,
    writable: !0,
    value: y
}) : n[d] = y
  , __spreadValues = (n,d)=>{
    for (var y in d || (d = {}))
        __hasOwnProp.call(d, y) && __defNormalProp(n, y, d[y]);
    if (__getOwnPropSymbols)
        for (var y of __getOwnPropSymbols(d))
            __propIsEnum.call(d, y) && __defNormalProp(n, y, d[y]);
    return n
}
  , __spreadProps = (n,d)=>__defProps(n, __getOwnPropDescs(d))
  , __async = (n,d,y)=>new Promise((ye,ve)=>{
    var ie = O=>{
        try {
            i(y.next(O))
        } catch ($) {
            ve($)
        }
    }
      , ae = O=>{
        try {
            i(y.throw(O))
        } catch ($) {
            ve($)
        }
    }
      , i = O=>O.done ? ye(O.value) : Promise.resolve(O.value).then(ie, ae);
    i((y = y.apply(n, d)).next())
}
);
function Tt(n, d) {
    return d.forEach(function(y) {
        y && typeof y != "string" && !Array.isArray(y) && Object.keys(y).forEach(function(ye) {
            if (ye !== "default" && !(ye in n)) {
                var ve = Object.getOwnPropertyDescriptor(y, ye);
                Object.defineProperty(n, ye, ve.get ? ve : {
                    enumerable: !0,
                    get: function() {
                        return y[ye]
                    }
                })
            }
        })
    }),
    Object.freeze(n)
}
const Rs = (n,d)=>n === d
  , Ie = Symbol("solid-proxy")
  , We = {
    equals: Rs
};
let li = pi;
const Se = {}
  , ge = 1
  , wt = 2
  , di = {
    owned: null,
    cleanups: null,
    context: null,
    owner: null
};
var z = null;
let Ve = null
  , j = null
  , Ue = null
  , q = null
  , le = null
  , St = 0;
function Be(n, d) {
    const y = j
      , ye = z
      , ve = n.length === 0 ? di : {
        owned: null,
        cleanups: null,
        context: null,
        owner: d || ye
    };
    z = ve,
    j = null;
    try {
        return qe(()=>n(()=>Nt(ve)), !0)
    } finally {
        j = y,
        z = ye
    }
}
function P(n, d) {
    d = d ? Object.assign({}, We, d) : We;
    const y = {
        value: n,
        observers: null,
        observerSlots: null,
        pending: Se,
        comparator: d.equals || void 0
    }
      , ye = ve=>(typeof ve == "function" && (ve = ve(y.pending !== Se ? y.pending : y.value)),
    At(y, ve));
    return [gi.bind(y), ye]
}
function ci(n, d, y) {
    const ye = Ze(n, d, !0, ge);
    Ae(ye)
}
function D(n, d, y) {
    const ye = Ze(n, d, !1, ge);
    Ae(ye)
}
function pe(n, d, y) {
    li = js;
    const ye = Ze(n, d, !1, ge);
    ye.user = !0,
    le ? le.push(ye) : queueMicrotask(()=>Ae(ye))
}
function H(n, d, y) {
    y = y ? Object.assign({}, We, y) : We;
    const ye = Ze(n, d, !0, 0);
    return ye.pending = Se,
    ye.observers = null,
    ye.observerSlots = null,
    ye.comparator = y.equals || void 0,
    Ae(ye),
    gi.bind(ye)
}
function ui(n) {
    if (Ue)
        return n();
    let d;
    const y = Ue = [];
    try {
        d = n()
    } finally {
        Ue = null
    }
    return qe(()=>{
        for (let ye = 0; ye < y.length; ye += 1) {
            const ve = y[ye];
            if (ve.pending !== Se) {
                const ie = ve.pending;
                ve.pending = Se,
                At(ve, ie)
            }
        }
    }
    , !1),
    d
}
function be(n) {
    let d, y = j;
    return j = null,
    d = n(),
    j = y,
    d
}
function me(n, d, y) {
    const ye = Array.isArray(n);
    let ve, ie = y && y.defer;
    return ae=>{
        let i;
        if (ye) {
            i = [];
            for (let $ = 0; $ < n.length; $++)
                i.push(n[$]())
        } else
            i = n();
        if (ie) {
            ie = !1;
            return
        }
        const O = be(()=>d(i, ve, ae));
        return ve = i,
        O
    }
}
function W(n) {
    pe(()=>be(n))
}
function R(n) {
    return z === null || (z.cleanups === null ? z.cleanups = [n] : z.cleanups.push(n)),
    n
}
function hi() {
    return j
}
function Vs() {
    return z
}
function fi(n, d) {
    const y = z;
    z = n;
    try {
        return qe(d, !0)
    } finally {
        z = y
    }
}
function Us(n) {
    const d = H(n);
    return H(()=>Mt(d()))
}
function gi() {
    const n = Ve;
    if (this.sources && (this.state || n)) {
        const d = q;
        q = null,
        this.state === ge || n ? Ae(this) : Dt(this),
        q = d
    }
    if (j) {
        const d = this.observers ? this.observers.length : 0;
        j.sources ? (j.sources.push(this),
        j.sourceSlots.push(d)) : (j.sources = [this],
        j.sourceSlots = [d]),
        this.observers ? (this.observers.push(j),
        this.observerSlots.push(j.sources.length - 1)) : (this.observers = [j],
        this.observerSlots = [j.sources.length - 1])
    }
    return this.value
}
function At(n, d, y) {
    if (n.comparator && n.comparator(n.value, d))
        return d;
    if (Ue)
        return n.pending === Se && Ue.push(n),
        n.pending = d,
        d;
    let ye = !1;
    return n.value = d,
    n.observers && n.observers.length && qe(()=>{
        for (let ve = 0; ve < n.observers.length; ve += 1) {
            const ie = n.observers[ve];
            ye && Ve.disposed.has(ie),
            ie.pure ? q.push(ie) : le.push(ie),
            ie.observers && (ye && !ie.tState || !ye && !ie.state) && mi(ie),
            ye || (ie.state = ge)
        }
        if (q.length > 1e6)
            throw q = [],
            new Error
    }
    , !1),
    d
}
function Ae(n) {
    if (!n.fn)
        return;
    Nt(n);
    const d = z
      , y = j
      , ye = St;
    j = z = n,
    Bs(n, n.value, ye),
    j = y,
    z = d
}
function Bs(n, d, y) {
    let ye;
    try {
        ye = n.fn(d)
    } catch (ve) {
        yi(ve)
    }
    (!n.updatedAt || n.updatedAt <= y) && (n.observers && n.observers.length ? At(n, ye) : n.value = ye,
    n.updatedAt = y)
}
function Ze(n, d, y, ye=ge, ve) {
    const ie = {
        fn: n,
        state: ye,
        updatedAt: null,
        owned: null,
        sources: null,
        sourceSlots: null,
        cleanups: null,
        value: d,
        owner: z,
        context: null,
        pure: y
    };
    return z === null || z !== di && (z.owned ? z.owned.push(ie) : z.owned = [ie]),
    ie
}
function ze(n) {
    const d = Ve;
    if (n.state !== ge)
        return n.state = 0;
    if (n.suspense && be(n.suspense.inFallback))
        return n.suspense.effects.push(n);
    const y = [n];
    for (; (n = n.owner) && (!n.updatedAt || n.updatedAt < St); )
        (n.state || d) && y.push(n);
    for (let ye = y.length - 1; ye >= 0; ye--)
        if (n = y[ye],
        n.state === ge || d)
            Ae(n);
        else if (n.state === wt || d) {
            const ve = q;
            q = null,
            Dt(n, y[0]),
            q = ve
        }
}
function qe(n, d) {
    if (q)
        return n();
    let y = !1;
    d || (q = []),
    le ? y = !0 : le = [],
    St++;
    try {
        return n()
    } catch (ye) {
        yi(ye)
    } finally {
        zs(y)
    }
}
function zs(n) {
    q && (pi(q),
    q = null),
    !n && (le.length ? ui(()=>{
        li(le),
        le = null
    }
    ) : le = null)
}
function pi(n) {
    for (let d = 0; d < n.length; d++)
        ze(n[d])
}
function js(n) {
    let d, y = 0;
    for (d = 0; d < n.length; d++) {
        const ve = n[d];
        ve.user ? n[y++] = ve : ze(ve)
    }
    const ye = n.length;
    for (d = 0; d < y; d++)
        ze(n[d]);
    for (d = ye; d < n.length; d++)
        ze(n[d])
}
function Dt(n, d) {
    n.state = 0;
    const y = Ve;
    for (let ye = 0; ye < n.sources.length; ye += 1) {
        const ve = n.sources[ye];
        ve.sources && (ve.state === ge || y ? ve !== d && ze(ve) : (ve.state === wt || y) && Dt(ve, d))
    }
}
function mi(n) {
    const d = Ve;
    for (let y = 0; y < n.observers.length; y += 1) {
        const ye = n.observers[y];
        (!ye.state || d) && (ye.state = wt,
        ye.pure ? q.push(ye) : le.push(ye),
        ye.observers && mi(ye))
    }
}
function Nt(n) {
    let d;
    if (n.sources)
        for (; n.sources.length; ) {
            const y = n.sources.pop()
              , ye = n.sourceSlots.pop()
              , ve = y.observers;
            if (ve && ve.length) {
                const ie = ve.pop()
                  , ae = y.observerSlots.pop();
                ye < ve.length && (ie.sourceSlots[ae] = ye,
                ve[ye] = ie,
                y.observerSlots[ye] = ae)
            }
        }
    if (n.owned) {
        for (d = 0; d < n.owned.length; d++)
            Nt(n.owned[d]);
        n.owned = null
    }
    if (n.cleanups) {
        for (d = 0; d < n.cleanups.length; d++)
            n.cleanups[d]();
        n.cleanups = null
    }
    n.state = 0,
    n.context = null
}
function yi(n) {
    throw n
}
function Mt(n) {
    if (typeof n == "function" && !n.length)
        return Mt(n());
    if (Array.isArray(n)) {
        const d = [];
        for (let y = 0; y < n.length; y++) {
            const ye = Mt(n[y]);
            Array.isArray(ye) ? d.push.apply(d, ye) : d.push(ye)
        }
        return d
    }
    return n
}
const Fs = Symbol("fallback");
function Ei(n) {
    for (let d = 0; d < n.length; d++)
        n[d]()
}
function Gs(n, d, y={}) {
    let ye = []
      , ve = []
      , ie = []
      , ae = 0
      , i = d.length > 1 ? [] : null;
    return R(()=>Ei(ie)),
    ()=>{
        let O = n() || [], $, Te;
        return be(()=>{
            let Re = O.length, Ye, _t, Jt, bt, ai, ii, da, aa, Ta;
            if (Re === 0)
                ae !== 0 && (Ei(ie),
                ie = [],
                ye = [],
                ve = [],
                ae = 0,
                i && (i = [])),
                y.fallback && (ye = [Fs],
                ve[0] = Be(fa=>(ie[0] = fa,
                y.fallback())),
                ae = 1);
            else if (ae === 0) {
                for (ve = new Array(Re),
                Te = 0; Te < Re; Te++)
                    ye[Te] = O[Te],
                    ve[Te] = Be(we);
                ae = Re
            } else {
                for (Jt = new Array(Re),
                bt = new Array(Re),
                i && (ai = new Array(Re)),
                ii = 0,
                da = Math.min(ae, Re); ii < da && ye[ii] === O[ii]; ii++)
                    ;
                for (da = ae - 1,
                aa = Re - 1; da >= ii && aa >= ii && ye[da] === O[aa]; da--,
                aa--)
                    Jt[aa] = ve[da],
                    bt[aa] = ie[da],
                    i && (ai[aa] = i[da]);
                for (Ye = new Map,
                _t = new Array(aa + 1),
                Te = aa; Te >= ii; Te--)
                    Ta = O[Te],
                    $ = Ye.get(Ta),
                    _t[Te] = $ === void 0 ? -1 : $,
                    Ye.set(Ta, Te);
                for ($ = ii; $ <= da; $++)
                    Ta = ye[$],
                    Te = Ye.get(Ta),
                    Te !== void 0 && Te !== -1 ? (Jt[Te] = ve[$],
                    bt[Te] = ie[$],
                    i && (ai[Te] = i[$]),
                    Te = _t[Te],
                    Ye.set(Ta, Te)) : ie[$]();
                for (Te = ii; Te < Re; Te++)
                    Te in Jt ? (ve[Te] = Jt[Te],
                    ie[Te] = bt[Te],
                    i && (i[Te] = ai[Te],
                    i[Te](Te))) : ve[Te] = Be(we);
                ve = ve.slice(0, ae = Re),
                ye = O.slice(0)
            }
            return ve
        }
        );
        function we(Re) {
            if (ie[Te] = Re,
            i) {
                const [Ye,_t] = P(Te);
                return i[Te] = _t,
                d(O[Te], Ye)
            }
            return d(O[Te])
        }
    }
}
function _(n, d) {
    return be(()=>n(d))
}
function Ke() {
    return !0
}
const Hs = {
    get(n, d, y) {
        return d === Ie ? y : n.get(d)
    },
    has(n, d) {
        return n.has(d)
    },
    set: Ke,
    deleteProperty: Ke,
    getOwnPropertyDescriptor(n, d) {
        return {
            configurable: !0,
            enumerable: !0,
            get() {
                return n.get(d)
            },
            set: Ke,
            deleteProperty: Ke
        }
    },
    ownKeys(n) {
        return n.keys()
    }
};
function Lt(n) {
    return typeof n == "function" ? n() : n
}
function de(...n) {
    return new Proxy({
        get(d) {
            for (let y = n.length - 1; y >= 0; y--) {
                const ye = Lt(n[y])[d];
                if (ye !== void 0)
                    return ye
            }
        },
        has(d) {
            for (let y = n.length - 1; y >= 0; y--)
                if (d in Lt(n[y]))
                    return !0;
            return !1
        },
        keys() {
            const d = [];
            for (let y = 0; y < n.length; y++)
                d.push(...Object.keys(Lt(n[y])));
            return [...new Set(d)]
        }
    },Hs)
}
let Qs = 0;
function Ys() {
    return `cl-${Qs++}`
}
function se(n) {
    const d = "fallback"in n && {
        fallback: ()=>n.fallback
    };
    return H(Gs(()=>n.each, n.children, d || void 0))
}
function Q(n) {
    let d = !1;
    const y = H(()=>n.when, void 0, {
        equals: (ye,ve)=>d ? ye === ve : !ye == !ve
    });
    return H(()=>{
        const ye = y();
        if (ye) {
            const ve = n.children;
            return (d = typeof ve == "function" && ve.length > 0) ? be(()=>ve(ye)) : ve
        }
        return n.fallback
    }
    )
}
function _i(n) {
    let d = !1;
    const y = Us(()=>n.children)
      , ye = H(()=>{
        let ve = y();
        Array.isArray(ve) || (ve = [ve]);
        for (let ie = 0; ie < ve.length; ie++) {
            const ae = ve[ie].when;
            if (ae)
                return [ie, ae, ve[ie]]
        }
        return [-1]
    }
    , void 0, {
        equals: (ve,ie)=>ve[0] === ie[0] && (d ? ve[1] === ie[1] : !ve[1] == !ie[1]) && ve[2] === ie[2]
    });
    return H(()=>{
        const [ve,ie,ae] = ye();
        if (ve < 0)
            return n.fallback;
        const i = ae.children;
        return (d = typeof i == "function" && i.length > 0) ? be(()=>i(ie)) : i
    }
    )
}
function Je(n) {
    return n
}
function V(n, d) {
    return H(n, void 0, d ? void 0 : {
        equals: d
    })
}
function Ws(n, d, y) {
    let ye = y.length
      , ve = d.length
      , ie = ye
      , ae = 0
      , i = 0
      , O = d[ve - 1].nextSibling
      , $ = null;
    for (; ae < ve || i < ie; ) {
        if (d[ae] === y[i]) {
            ae++,
            i++;
            continue
        }
        for (; d[ve - 1] === y[ie - 1]; )
            ve--,
            ie--;
        if (ve === ae) {
            const Te = ie < ye ? i ? y[i - 1].nextSibling : y[ie - i] : O;
            for (; i < ie; )
                n.insertBefore(y[i++], Te)
        } else if (ie === i)
            for (; ae < ve; )
                (!$ || !$.has(d[ae])) && d[ae].remove(),
                ae++;
        else if (d[ae] === y[ie - 1] && y[i] === d[ve - 1]) {
            const Te = d[--ve].nextSibling;
            n.insertBefore(y[i++], d[ae++].nextSibling),
            n.insertBefore(y[--ie], Te),
            d[ve] = y[ie]
        } else {
            if (!$) {
                $ = new Map;
                let we = i;
                for (; we < ie; )
                    $.set(y[we], we++)
            }
            const Te = $.get(d[ae]);
            if (Te != null)
                if (i < Te && Te < ie) {
                    let we = ae, Re = 1, Ye;
                    for (; ++we < ve && we < ie && !((Ye = $.get(d[we])) == null || Ye !== Te + Re); )
                        Re++;
                    if (Re > Te - i) {
                        const _t = d[ae];
                        for (; i < Te; )
                            n.insertBefore(y[i++], _t)
                    } else
                        n.replaceChild(y[i++], d[ae++])
                } else
                    ae++;
            else
                d[ae++].remove()
        }
    }
}
const vi = "_$DX_DELEGATE";
function Zs(n, d, y) {
    let ye;
    return Be(ve=>{
        ye = ve,
        d === document ? n() : p(d, n(), d.firstChild ? null : void 0, y)
    }
    ),
    ()=>{
        ye(),
        d.textContent = ""
    }
}
function T(n, d, y) {
    const ye = document.createElement("template");
    ye.innerHTML = n;
    let ve = ye.content.firstChild;
    return y && (ve = ve.firstChild),
    ve
}
function Z(n, d=window.document) {
    const y = d[vi] || (d[vi] = new Set);
    for (let ye = 0, ve = n.length; ye < ve; ye++) {
        const ie = n[ye];
        y.has(ie) || (y.add(ie),
        d.addEventListener(ie, qs))
    }
}
function ee(n, d, y) {
    y == null ? n.removeAttribute(d) : n.setAttribute(d, y)
}
function te(n, d, y, ye) {
    ye ? Array.isArray(y) ? (n[`$$ ${d}`] = y[0],
    n[`$$ ${d}Data`] = y[1]) : n[`$$ ${d}`] = y : Array.isArray(y) ? n.addEventListener(d, ve=>y[0](y[1], ve)) : n.addEventListener(d, y)
}
function S(n, d, y={}) {
    const ye = Object.keys(d || {})
      , ve = Object.keys(y);
    let ie, ae;
    for (ie = 0,
    ae = ve.length; ie < ae; ie++) {
        const i = ve[ie];
        !i || i === "undefined" || d[i] || (Ii(n, i, !1),
        delete y[i])
    }
    for (ie = 0,
    ae = ye.length; ie < ae; ie++) {
        const i = ye[ie]
          , O = !!d[i];
        !i || i === "undefined" || y[i] === O || !O || (Ii(n, i, !0),
        y[i] = O)
    }
    return y
}
function De(n, d, y={}) {
    const ye = n.style;
    if (d == null || typeof d == "string")
        return ye.cssText = d;
    typeof y == "string" && (y = {});
    let ve, ie;
    for (ie in y)
        d[ie] == null && ye.removeProperty(ie),
        delete y[ie];
    for (ie in d)
        ve = d[ie],
        ve !== y[ie] && (ye.setProperty(ie, ve),
        y[ie] = ve);
    return y
}
function p(n, d, y, ye) {
    if (y !== void 0 && !ye && (ye = []),
    typeof d != "function")
        return Xe(n, d, ye, y);
    D(ve=>Xe(n, d(), ve, y), ye)
}
function Ii(n, d, y) {
    const ye = d.trim().split(/\s+/);
    for (let ve = 0, ie = ye.length; ve < ie; ve++)
        n.classList.toggle(ye[ve], y)
}
function qs(n) {
    const d = `$$ ${n.type}`;
    let y = n.composedPath && n.composedPath()[0] || n.target;
    for (n.target !== y && Object.defineProperty(n, "target", {
        configurable: !0,
        value: y
    }),
    Object.defineProperty(n, "currentTarget", {
        configurable: !0,
        get() {
            return y || document
        }
    }); y !== null; ) {
        const ye = y[d];
        if (ye && !y.disabled) {
            const ve = y[`${d}Data`];
            if (ve !== void 0 ? ye(ve, n) : ye(n),
            n.cancelBubble)
                return
        }
        y = y.host && y.host !== y && y.host instanceof Node ? y.host : y.parentNode
    }
}
function Xe(n, d, y, ye, ve) {
    for (; typeof y == "function"; )
        y = y();
    if (d === y)
        return y;
    const ie = typeof d
      , ae = ye !== void 0;
    if (n = ae && y[0] && y[0].parentNode || n,
    ie === "string" || ie === "number")
        if (ie === "number" && (d = d.toString()),
        ae) {
            let i = y[0];
            i && i.nodeType === 3 ? i.data = d : i = document.createTextNode(d),
            y = Ne(n, y, ye, i)
        } else
            y !== "" && typeof y == "string" ? y = n.firstChild.data = d : y = n.textContent = d;
    else if (d == null || ie === "boolean")
        y = Ne(n, y, ye);
    else {
        if (ie === "function")
            return D(()=>{
                let i = d();
                for (; typeof i == "function"; )
                    i = i();
                y = Xe(n, i, y, ye)
            }
            ),
            ()=>y;
        if (Array.isArray(d)) {
            const i = [];
            if (Ct(i, d, ve))
                return D(()=>y = Xe(n, i, y, ye, !0)),
                ()=>y;
            if (i.length === 0) {
                if (y = Ne(n, y, ye),
                ae)
                    return y
            } else
                Array.isArray(y) ? y.length === 0 ? bi(n, i, ye) : Ws(n, y, i) : (y && Ne(n),
                bi(n, i));
            y = i
        } else if (d instanceof Node) {
            if (Array.isArray(y)) {
                if (ae)
                    return y = Ne(n, y, ye, d);
                Ne(n, y, null, d)
            } else
                y == null || y === "" || !n.firstChild ? n.appendChild(d) : n.replaceChild(d, n.firstChild);
            y = d
        }
    }
    return y
}
function Ct(n, d, y) {
    let ye = !1;
    for (let ve = 0, ie = d.length; ve < ie; ve++) {
        let ae = d[ve], i;
        if (ae instanceof Node)
            n.push(ae);
        else if (!(ae == null || ae === !0 || ae === !1))
            if (Array.isArray(ae))
                ye = Ct(n, ae) || ye;
            else if ((i = typeof ae) == "string")
                n.push(document.createTextNode(ae));
            else if (i === "function")
                if (y) {
                    for (; typeof ae == "function"; )
                        ae = ae();
                    ye = Ct(n, Array.isArray(ae) ? ae : [ae]) || ye
                } else
                    n.push(ae),
                    ye = !0;
            else
                n.push(document.createTextNode(ae.toString()))
    }
    return ye
}
function bi(n, d, y) {
    for (let ye = 0, ve = d.length; ye < ve; ye++)
        n.insertBefore(d[ye], y)
}
function Ne(n, d, y, ye) {
    if (y === void 0)
        return n.textContent = "";
    const ve = ye || document.createTextNode("");
    if (d.length) {
        let ie = !1;
        for (let ae = d.length - 1; ae >= 0; ae--) {
            const i = d[ae];
            if (ve !== i) {
                const O = i.parentNode === n;
                !ie && !ae ? O ? n.replaceChild(ve, i) : n.insertBefore(ve, y) : O && i.remove()
            } else
                ie = !0
        }
    } else
        n.insertBefore(ve, y);
    return [ve]
}
const Ks = "http://www.w3.org/2000/svg";
function Js(n, d=!1) {
    return d ? document.createElementNS(Ks, n) : document.createElement(n)
}
function Xs(n) {
    const {useShadow: d} = n
      , y = document.createTextNode("")
      , ye = n.mount || document.body;
    function ve() {
        return ()=>n.children
    }
    if (ye instanceof HTMLHeadElement) {
        const [ie,ae] = P(!1)
          , i = ()=>ae(!0);
        Be(O=>p(ye, ()=>ie() ? O() : ve()(), null)),
        R(()=>{
            i()
        }
        )
    } else {
        const ie = Js(n.isSVG ? "g" : "div", n.isSVG)
          , ae = d && ie.attachShadow ? ie.attachShadow({
            mode: "open"
        }) : ie;
        Object.defineProperty(ie, "host", {
            get() {
                return y.parentNode
            }
        }),
        p(ae, ve()),
        ye.appendChild(ie),
        n.ref && n.ref(ie),
        R(()=>ye.removeChild(ie))
    }
    return y
}
function Ti() {
    return {
        prefix: "wa"
    }
}
const wi = n=>typeof n == "function";
var Si = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aGRwaS9wY190b2FzdF9jbG9zZTwvdGl0bGU+CiAgICA8ZyBpZD0icGNfdG9hc3RfY2xvc2UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJpY29uLzM2cHgvY2xvc2UiPgogICAgICAgICAgICA8cmVjdCBpZD0ieC1iZyIgZmlsbD0iI0Q4RDhEOCIgb3BhY2l0eT0iMCIgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48L3JlY3Q+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjgyMTQ3ODk1LDYuMzI4NzIxNiBMMTEuOTk5MzcyMiwxMC41MDY4Mjg0IEwxNi4xNzg1MjEsNi4zMjg3MjE2IEMxNi41NjkwNDUzLDUuOTM4MTk3MzEgMTcuMjAyMjEwMyw1LjkzODE5NzMxIDE3LjU5MjczNDYsNi4zMjg3MjE2IEMxNy45ODMyNTg5LDYuNzE5MjQ1ODkgMTcuOTgzMjU4OSw3LjM1MjQxMDg3IDE3LjU5MjczNDYsNy43NDI5MzUxNiBMMTMuNDE0MzcyMiwxMS45MjA4Mjg0IEwxNy41OTI3MzQ2LDE2LjA5OTk3NzMgQzE3Ljk4MzI1ODksMTYuNDkwNTAxNSAxNy45ODMyNTg5LDE3LjEyMzY2NjUgMTcuNTkyNzM0NiwxNy41MTQxOTA4IEMxNy4yMDIyMTAzLDE3LjkwNDcxNTEgMTYuNTY5MDQ1MywxNy45MDQ3MTUxIDE2LjE3ODUyMSwxNy41MTQxOTA4IEwxMS45OTkzNzIyLDEzLjMzNTgyODQgTDcuODIxNDc4OTUsMTcuNTE0MTkwOCBDNy40MzA5NTQ2NiwxNy45MDQ3MTUxIDYuNzk3Nzg5NjgsMTcuOTA0NzE1MSA2LjQwNzI2NTM5LDE3LjUxNDE5MDggQzYuMDE2NzQxMSwxNy4xMjM2NjY1IDYuMDE2NzQxMSwxNi40OTA1MDE1IDYuNDA3MjY1MzksMTYuMDk5OTc3MyBMMTAuNTg1MzcyMiwxMS45MjA4Mjg0IEw2LjQwNzI2NTM5LDcuNzQyOTM1MTYgQzYuMDE2NzQxMSw3LjM1MjQxMDg3IDYuMDE2NzQxMSw2LjcxOTI0NTg5IDYuNDA3MjY1MzksNi4zMjg3MjE2IEM2Ljc5Nzc4OTY4LDUuOTM4MTk3MzEgNy40MzA5NTQ2Niw1LjkzODE5NzMxIDcuODIxNDc4OTUsNi4zMjg3MjE2IFoiIGlkPSJ4IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=";
const er = T("<div><span></span></div>")
  , Ai = T("<img>")
  , tr = T("<span></span>")
  , Di = n=>{
    const [d,y] = P(!1)
      , {prefix: ye} = Ti()
      , {closable: ve, h5: ie, msg: ae, duration: i, clickable: O, moveInAnimeAble: $=!0, placement: Te="left"} = n;
    let we = null
      , Re = null;
    function Ye(ii) {
        return typeof ii == "string"
    }
    W(()=>{
        we = window.setTimeout(()=>{
            bt()
        }
        , i != null ? i : 4e3)
    }
    );
    const _t = H(()=>Te === "left")
      , Jt = H(()=>O && wi(n.onClick))
      , bt = ()=>{
        we && window.clearTimeout(we),
        Re && window.clearTimeout(Re),
        we = null,
        y(!0),
        Re = window.setTimeout(()=>{
            var ii;
            (ii = n.onClose) == null || ii.call(n)
        }
        , 100)
    }
      , ai = ()=>{
        var ii;
        !Jt() || ((ii = n.onClick) == null || ii.call(n))
    }
    ;
    return R(()=>{
        we && window.clearTimeout(we),
        Re && window.clearTimeout(Re),
        we = null,
        Re = null
    }
    ),
    (()=>{
        const ii = er.cloneNode(!0)
          , da = ii.firstChild;
        return p(ii, (()=>{
            const aa = V(()=>!!(ve && _t()), !0);
            return ()=>aa() && (()=>{
                const Ta = Ai.cloneNode(!0);
                return Ta.$$touchend = bt,
                Ta.$$click = bt,
                ee(Ta, "src", Si),
                S(Ta, {
                    [`${ye}-message__icon`]: !0,
                    [`${ye}-message__icon-h5`]: ie,
                    [`${ye}-message__icon-left`]: !0
                }),
                Ta
            }
            )()
        }
        )(), da),
        da.$$touchend = ai,
        da.$$click = ai,
        p(da, (()=>{
            const aa = V(()=>!!Ye(ae), !0);
            return ()=>aa() ? ae : _(se, {
                each: ae,
                children: Ta=>(()=>{
                    const fa = tr.cloneNode(!0);
                    return p(fa, ()=>Ta.content),
                    D(He=>S(fa, {
                        [`${ye}-message__link`]: Ta.type === "link"
                    }, He)),
                    fa
                }
                )()
            })
        }
        )()),
        p(ii, (()=>{
            const aa = V(()=>!!(ve && !_t()), !0);
            return ()=>aa() && (()=>{
                const Ta = Ai.cloneNode(!0);
                return Ta.$$touchend = bt,
                Ta.$$click = bt,
                ee(Ta, "src", Si),
                S(Ta, {
                    [`${ye}-message__icon`]: !0,
                    [`${ye}-message__icon-h5`]: ie,
                    [`${ye}-message__icon-right`]: !0
                }),
                Ta
            }
            )()
        }
        )(), null),
        D(aa=>{
            const Ta = {
                [`${ye}-message`]: !0,
                [`${ye}-message--h5`]: ie,
                [`${ye}-message--move-in`]: $,
                [`${ye}-message--move-out`]: d()
            }
              , fa = {
                [`${ye}-message__content`]: !0,
                [`${ye}-message__content--h5`]: ie,
                [`${ye}-message__content--closable`]: ve,
                [`${ye}-message__content--feedbackable`]: Jt(),
                [`${ye}-message__content--ellipsis`]: n.ellipsis
            };
            return aa._v$ = S(ii, Ta, aa._v$),
            aa._v$2 = S(da, fa, aa._v$2),
            aa
        }
        , {
            _v$: void 0,
            _v$2: void 0
        }),
        ii
    }
    )()
}
;
Z(["click", "touchend"]);
const Ni = T("<div></div>");
function ir() {}
let kt;
const sr = n=>{
    const {prefix: d} = Ti()
      , [y,ye] = P([])
      , [ve,ie] = P([])
      , ae = O=>{
        y().findIndex($=>$.key === O) > -1 ? ye($=>$.filter(Te=>Te.key !== O)) : ie($=>$.filter(Te=>Te.key !== O))
    }
      , i = (O,$)=>{
        $ === "left" ? ye(()=>O) : ie(()=>O)
    }
    ;
    return kt = O=>{
        const $ = n.h5 && !U$1.isFullscreen ? 1 : 3
          , Te = `${Ys()}${Date.now()}`
          , {overrideKey: we, placement: Re="left"} = O
          , Ye = [].concat(Re === "left" ? y() : ve())
          , _t = {
            key: Te,
            dispose: ()=>{
                var bt;
                ae(Te),
                (bt = O.onClose) == null || bt.call(O)
            }
        }
          , Jt = __spreadProps(__spreadValues({}, O), {
            key: Te,
            h5: n.h5,
            onClose: ()=>{
                var bt;
                ae(Te),
                (bt = O.onClose) == null || bt.call(O)
            }
            ,
            onClick: wi(O.onClick) ? ()=>{
                var bt, ai;
                ae(Te),
                (bt = O.onClick) == null || bt.call(O),
                (ai = O.onClose) == null || ai.call(O)
            }
            : void 0
        });
        if (O.overrideKey) {
            const bt = Ye.findIndex(ai=>ai.key === we);
            if (bt >= 0)
                return Ye.splice(bt, 1, __spreadProps(__spreadValues({}, Jt), {
                    moveInAnimeAble: !1
                })),
                i(Ye, Re),
                ye(()=>Ye),
                _t
        }
        return Ye.length === $ && Ye.shift(),
        i(Ye.concat(Jt), Re),
        _t
    }
    ,
    R(()=>{
        kt = null
    }
    ),
    [(()=>{
        const O = Ni.cloneNode(!0);
        return O.className = `${d}-message-container__left`,
        p(O, _(se, {
            get each() {
                return y()
            },
            children: $=>_(Di, $)
        })),
        D($=>De(O, n.leftStyle, $)),
        O
    }
    )(), (()=>{
        const O = Ni.cloneNode(!0);
        return O.className = `${d}-message-container__right`,
        p(O, _(se, {
            get each() {
                return ve()
            },
            children: $=>_(Di, $)
        })),
        D($=>De(O, n.rightStyle, $)),
        O
    }
    )()]
}
  , rr = {
    info: n=>{
        var d;
        return (d = kt == null ? void 0 : kt(n)) != null ? d : {
            key: "",
            dispose: ir
        }
    }
}
  , Me = rr;
function Ot(n) {
    if (n.__esModule)
        return n;
    var d = Object.defineProperty({}, "__esModule", {
        value: !0
    });
    return Object.keys(n).forEach(function(y) {
        var ye = Object.getOwnPropertyDescriptor(n, y);
        Object.defineProperty(d, y, ye.get ? ye : {
            enumerable: !0,
            get: function() {
                return n[y]
            }
        })
    }),
    d
}
var Mi = {};
(function(n) {
    n.defaults = {},
    n.set = function(d, y, ye) {
        var ve = ye || {}
          , ie = n.defaults
          , ae = ve.expires || ie.expires
          , i = ve.domain || ie.domain
          , O = ve.path !== void 0 ? ve.path : ie.path !== void 0 ? ie.path : "/"
          , $ = ve.secure !== void 0 ? ve.secure : ie.secure
          , Te = ve.httponly !== void 0 ? ve.httponly : ie.httponly
          , we = ve.samesite !== void 0 ? ve.samesite : ie.samesite
          , Re = ae ? new Date(typeof ae == "number" ? new Date().getTime() + ae * 864e5 : ae) : 0;
        document.cookie = d.replace(/[^+#$&^`|]/g, encodeURIComponent).replace("(", "%28").replace(")", "%29") + "=" + y.replace(/[^+#$&/:<-\[\]-}]/g, encodeURIComponent) + (Re && Re.getTime() >= 0 ? ";expires=" + Re.toUTCString() : "") + (i ? ";domain=" + i : "") + (O ? ";path=" + O : "") + ($ ? ";secure" : "") + (Te ? ";httponly" : "") + (we ? ";samesite=" + we : "")
    }
    ,
    n.get = function(d) {
        for (var y = document.cookie.split(";"); y.length; ) {
            var ye = y.pop()
              , ve = ye.indexOf("=");
            ve = ve < 0 ? ye.length : ve;
            var ie = decodeURIComponent(ye.slice(0, ve).replace(/^\s+/, ""));
            if (ie === d)
                return decodeURIComponent(ye.slice(ve + 1))
        }
        return null
    }
    ,
    n.erase = function(d, y) {
        n.set(d, "", {
            expires: -1,
            domain: y && y.domain,
            path: y && y.path,
            secure: 0,
            httponly: 0
        })
    }
    ,
    n.all = function() {
        for (var d = {}, y = document.cookie.split(";"); y.length; ) {
            var ye = y.pop()
              , ve = ye.indexOf("=");
            ve = ve < 0 ? ye.length : ve;
            var ie = decodeURIComponent(ye.slice(0, ve).replace(/^\s+/, ""));
            d[ie] = decodeURIComponent(ye.slice(ve + 1))
        }
        return d
    }
}
)(Mi),
Mi.defaults = {
    expires: 365,
    path: "/",
    domain: ".bilibili.com"
};
function nr() {
    const n = document.createElement("canvas");
    let d, y, ye = "", ve = "";
    try {
        d = n.getContext("webgl2") || n.getContext("webgl") || n.getContext("experimental-webgl"),
        d && (y = d.getExtension("WEBGL_debug_renderer_info"),
        y && (ye = d.getParameter(y.UNMASKED_VENDOR_WEBGL),
        ve = d.getParameter(y.UNMASKED_RENDERER_WEBGL)))
    } catch (ie) {
        console.warn(ie)
    }
    return {
        vendor: ye,
        renderer: ve
    }
}
nr();
function or() {
    const n = document.createElement("canvas");
    let d;
    try {
        d = n.getContext("webgl2") || n.getContext("webgl") || n.getContext("experimental-webgl")
    } catch (y) {}
    return !!d
}
or();
var $t = {
    exports: {}
}, Le = typeof Reflect == "object" ? Reflect : null, Li = Le && typeof Le.apply == "function" ? Le.apply : function(n, d, y) {
    return Function.prototype.apply.call(n, d, y)
}
, et;
Le && typeof Le.ownKeys == "function" ? et = Le.ownKeys : Object.getOwnPropertySymbols ? et = function(n) {
    return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))
}
: et = function(n) {
    return Object.getOwnPropertyNames(n)
}
;
function ar(n) {
    console && console.warn && console.warn(n)
}
var Ci = Number.isNaN || function(n) {
    return n !== n
}
;
function x() {
    x.init.call(this)
}
$t.exports = x,
$t.exports.once = ur,
x.EventEmitter = x,
x.prototype._events = void 0,
x.prototype._eventsCount = 0,
x.prototype._maxListeners = void 0;
var ki = 10;
function tt(n) {
    if (typeof n != "function")
        throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof n)
}
Object.defineProperty(x, "defaultMaxListeners", {
    enumerable: !0,
    get: function() {
        return ki
    },
    set: function(n) {
        if (typeof n != "number" || n < 0 || Ci(n))
            throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + n + ".");
        ki = n
    }
}),
x.init = function() {
    (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = Object.create(null),
    this._eventsCount = 0),
    this._maxListeners = this._maxListeners || void 0
}
,
x.prototype.setMaxListeners = function(n) {
    if (typeof n != "number" || n < 0 || Ci(n))
        throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + ".");
    return this._maxListeners = n,
    this
}
;
function Oi(n) {
    return n._maxListeners === void 0 ? x.defaultMaxListeners : n._maxListeners
}
x.prototype.getMaxListeners = function() {
    return Oi(this)
}
,
x.prototype.emit = function(n) {
    for (var d = [], y = 1; y < arguments.length; y++)
        d.push(arguments[y]);
    var ye = n === "error"
      , ve = this._events;
    if (ve !== void 0)
        ye = ye && ve.error === void 0;
    else if (!ye)
        return !1;
    if (ye) {
        var ie;
        if (d.length > 0 && (ie = d[0]),
        ie instanceof Error)
            throw ie;
        var ae = new Error("Unhandled error." + (ie ? " (" + ie.message + ")" : ""));
        throw ae.context = ie,
        ae
    }
    var i = ve[n];
    if (i === void 0)
        return !1;
    if (typeof i == "function")
        Li(i, this, d);
    else
        for (var O = i.length, $ = Vi(i, O), y = 0; y < O; ++y)
            Li($[y], this, d);
    return !0
}
;
function $i(n, d, y, ye) {
    var ve, ie, ae;
    if (tt(y),
    ie = n._events,
    ie === void 0 ? (ie = n._events = Object.create(null),
    n._eventsCount = 0) : (ie.newListener !== void 0 && (n.emit("newListener", d, y.listener ? y.listener : y),
    ie = n._events),
    ae = ie[d]),
    ae === void 0)
        ae = ie[d] = y,
        ++n._eventsCount;
    else if (typeof ae == "function" ? ae = ie[d] = ye ? [y, ae] : [ae, y] : ye ? ae.unshift(y) : ae.push(y),
    ve = Oi(n),
    ve > 0 && ae.length > ve && !ae.warned) {
        ae.warned = !0;
        var i = new Error("Possible EventEmitter memory leak detected. " + ae.length + " " + String(d) + " listeners added. Use emitter.setMaxListeners() to increase limit");
        i.name = "MaxListenersExceededWarning",
        i.emitter = n,
        i.type = d,
        i.count = ae.length,
        ar(i)
    }
    return n
}
x.prototype.addListener = function(n, d) {
    return $i(this, n, d, !1)
}
,
x.prototype.on = x.prototype.addListener,
x.prototype.prependListener = function(n, d) {
    return $i(this, n, d, !0)
}
;
function lr() {
    if (!this.fired)
        return this.target.removeListener(this.type, this.wrapFn),
        this.fired = !0,
        arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments)
}
function xi(n, d, y) {
    var ye = {
        fired: !1,
        wrapFn: void 0,
        target: n,
        type: d,
        listener: y
    }
      , ve = lr.bind(ye);
    return ve.listener = y,
    ye.wrapFn = ve,
    ve
}
x.prototype.once = function(n, d) {
    return tt(d),
    this.on(n, xi(this, n, d)),
    this
}
,
x.prototype.prependOnceListener = function(n, d) {
    return tt(d),
    this.prependListener(n, xi(this, n, d)),
    this
}
,
x.prototype.removeListener = function(n, d) {
    var y, ye, ve, ie, ae;
    if (tt(d),
    ye = this._events,
    ye === void 0)
        return this;
    if (y = ye[n],
    y === void 0)
        return this;
    if (y === d || y.listener === d)
        --this._eventsCount === 0 ? this._events = Object.create(null) : (delete ye[n],
        ye.removeListener && this.emit("removeListener", n, y.listener || d));
    else if (typeof y != "function") {
        for (ve = -1,
        ie = y.length - 1; ie >= 0; ie--)
            if (y[ie] === d || y[ie].listener === d) {
                ae = y[ie].listener,
                ve = ie;
                break
            }
        if (ve < 0)
            return this;
        ve === 0 ? y.shift() : dr(y, ve),
        y.length === 1 && (ye[n] = y[0]),
        ye.removeListener !== void 0 && this.emit("removeListener", n, ae || d)
    }
    return this
}
,
x.prototype.off = x.prototype.removeListener,
x.prototype.removeAllListeners = function(n) {
    var d, y, ye;
    if (y = this._events,
    y === void 0)
        return this;
    if (y.removeListener === void 0)
        return arguments.length === 0 ? (this._events = Object.create(null),
        this._eventsCount = 0) : y[n] !== void 0 && (--this._eventsCount === 0 ? this._events = Object.create(null) : delete y[n]),
        this;
    if (arguments.length === 0) {
        var ve = Object.keys(y), ie;
        for (ye = 0; ye < ve.length; ++ye)
            ie = ve[ye],
            ie !== "removeListener" && this.removeAllListeners(ie);
        return this.removeAllListeners("removeListener"),
        this._events = Object.create(null),
        this._eventsCount = 0,
        this
    }
    if (d = y[n],
    typeof d == "function")
        this.removeListener(n, d);
    else if (d !== void 0)
        for (ye = d.length - 1; ye >= 0; ye--)
            this.removeListener(n, d[ye]);
    return this
}
;
function Pi(n, d, y) {
    var ye = n._events;
    if (ye === void 0)
        return [];
    var ve = ye[d];
    return ve === void 0 ? [] : typeof ve == "function" ? y ? [ve.listener || ve] : [ve] : y ? cr(ve) : Vi(ve, ve.length)
}
x.prototype.listeners = function(n) {
    return Pi(this, n, !0)
}
,
x.prototype.rawListeners = function(n) {
    return Pi(this, n, !1)
}
,
x.listenerCount = function(n, d) {
    return typeof n.listenerCount == "function" ? n.listenerCount(d) : Ri.call(n, d)
}
,
x.prototype.listenerCount = Ri;
function Ri(n) {
    var d = this._events;
    if (d !== void 0) {
        var y = d[n];
        if (typeof y == "function")
            return 1;
        if (y !== void 0)
            return y.length
    }
    return 0
}
x.prototype.eventNames = function() {
    return this._eventsCount > 0 ? et(this._events) : []
}
;
function Vi(n, d) {
    for (var y = new Array(d), ye = 0; ye < d; ++ye)
        y[ye] = n[ye];
    return y
}
function dr(n, d) {
    for (; d + 1 < n.length; d++)
        n[d] = n[d + 1];
    n.pop()
}
function cr(n) {
    for (var d = new Array(n.length), y = 0; y < d.length; ++y)
        d[y] = n[y].listener || n[y];
    return d
}
function ur(n, d) {
    return new Promise(function(y, ye) {
        function ve(ae) {
            n.removeListener(d, ie),
            ye(ae)
        }
        function ie() {
            typeof n.removeListener == "function" && n.removeListener("error", ve),
            y([].slice.call(arguments))
        }
        Ui(n, d, ie, {
            once: !0
        }),
        d !== "error" && hr(n, ve, {
            once: !0
        })
    }
    )
}
function hr(n, d, y) {
    typeof n.on == "function" && Ui(n, "error", d, y)
}
function Ui(n, d, y, ye) {
    if (typeof n.on == "function")
        ye.once ? n.once(d, y) : n.on(d, y);
    else if (typeof n.addEventListener == "function")
        n.addEventListener(d, function ve(ie) {
            ye.once && n.removeEventListener(d, ve),
            y(ie)
        });
    else
        throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof n)
}
var fr = $t.exports;
new fr;
function xt(...n) {}
var Bi = {
    exports: {}
}
  , Pt = {
    exports: {}
};
(function() {
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
      , d = {
        rotl: function(y, ye) {
            return y << ye | y >>> 32 - ye
        },
        rotr: function(y, ye) {
            return y << 32 - ye | y >>> ye
        },
        endian: function(y) {
            if (y.constructor == Number)
                return d.rotl(y, 8) & 16711935 | d.rotl(y, 24) & 4278255360;
            for (var ye = 0; ye < y.length; ye++)
                y[ye] = d.endian(y[ye]);
            return y
        },
        randomBytes: function(y) {
            for (var ye = []; y > 0; y--)
                ye.push(Math.floor(Math.random() * 256));
            return ye
        },
        bytesToWords: function(y) {
            for (var ye = [], ve = 0, ie = 0; ve < y.length; ve++,
            ie += 8)
                ye[ie >>> 5] |= y[ve] << 24 - ie % 32;
            return ye
        },
        wordsToBytes: function(y) {
            for (var ye = [], ve = 0; ve < y.length * 32; ve += 8)
                ye.push(y[ve >>> 5] >>> 24 - ve % 32 & 255);
            return ye
        },
        bytesToHex: function(y) {
            for (var ye = [], ve = 0; ve < y.length; ve++)
                ye.push((y[ve] >>> 4).toString(16)),
                ye.push((y[ve] & 15).toString(16));
            return ye.join("")
        },
        hexToBytes: function(y) {
            for (var ye = [], ve = 0; ve < y.length; ve += 2)
                ye.push(parseInt(y.substr(ve, 2), 16));
            return ye
        },
        bytesToBase64: function(y) {
            for (var ye = [], ve = 0; ve < y.length; ve += 3)
                for (var ie = y[ve] << 16 | y[ve + 1] << 8 | y[ve + 2], ae = 0; ae < 4; ae++)
                    ve * 8 + ae * 6 <= y.length * 8 ? ye.push(n.charAt(ie >>> 6 * (3 - ae) & 63)) : ye.push("=");
            return ye.join("")
        },
        base64ToBytes: function(y) {
            y = y.replace(/[^A-Z0-9+\/]/ig, "");
            for (var ye = [], ve = 0, ie = 0; ve < y.length; ie = ++ve % 4)
                ie != 0 && ye.push((n.indexOf(y.charAt(ve - 1)) & Math.pow(2, -2 * ie + 8) - 1) << ie * 2 | n.indexOf(y.charAt(ve)) >>> 6 - ie * 2);
            return ye
        }
    };
    Pt.exports = d
}
)();
var gr = Pt.exports
  , pr = Object.freeze(Tt({
    __proto__: null,
    [Symbol.toStringTag]: "Module",
    default: gr
}, [Pt.exports]))
  , mr = Ot(pr)
  , Rt = {
    utf8: {
        stringToBytes: function(n) {
            return Rt.bin.stringToBytes(unescape(encodeURIComponent(n)))
        },
        bytesToString: function(n) {
            return decodeURIComponent(escape(Rt.bin.bytesToString(n)))
        }
    },
    bin: {
        stringToBytes: function(n) {
            for (var d = [], y = 0; y < n.length; y++)
                d.push(n.charCodeAt(y) & 255);
            return d
        },
        bytesToString: function(n) {
            for (var d = [], y = 0; y < n.length; y++)
                d.push(String.fromCharCode(n[y]));
            return d.join("")
        }
    }
}
  , zi = Rt
  , yr = Object.freeze(Tt({
    __proto__: null,
    [Symbol.toStringTag]: "Module",
    default: zi
}, [zi]))
  , ji = Ot(yr);
/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/
var Fi = function(n) {
    return n != null && (Gi(n) || Er(n) || !!n._isBuffer)
};
function Gi(n) {
    return !!n.constructor && typeof n.constructor.isBuffer == "function" && n.constructor.isBuffer(n)
}
function Er(n) {
    return typeof n.readFloatLE == "function" && typeof n.slice == "function" && Gi(n.slice(0, 0))
}
var _r = Object.freeze(Tt({
    __proto__: null,
    [Symbol.toStringTag]: "Module",
    default: Fi
}, [Fi]))
  , vr = Ot(_r);
(function() {
    var n = mr
      , d = ji.utf8
      , y = vr
      , ye = ji.bin
      , ve = function(ie, ae) {
        ie.constructor == String ? ae && ae.encoding === "binary" ? ie = ye.stringToBytes(ie) : ie = d.stringToBytes(ie) : y(ie) ? ie = Array.prototype.slice.call(ie, 0) : !Array.isArray(ie) && ie.constructor !== Uint8Array && (ie = ie.toString());
        for (var i = n.bytesToWords(ie), O = ie.length * 8, $ = 1732584193, Te = -271733879, we = -1732584194, Re = 271733878, Ye = 0; Ye < i.length; Ye++)
            i[Ye] = (i[Ye] << 8 | i[Ye] >>> 24) & 16711935 | (i[Ye] << 24 | i[Ye] >>> 8) & 4278255360;
        i[O >>> 5] |= 128 << O % 32,
        i[(O + 64 >>> 9 << 4) + 14] = O;
        for (var _t = ve._ff, Jt = ve._gg, bt = ve._hh, ai = ve._ii, Ye = 0; Ye < i.length; Ye += 16) {
            var ii = $
              , da = Te
              , aa = we
              , Ta = Re;
            $ = _t($, Te, we, Re, i[Ye + 0], 7, -680876936),
            Re = _t(Re, $, Te, we, i[Ye + 1], 12, -389564586),
            we = _t(we, Re, $, Te, i[Ye + 2], 17, 606105819),
            Te = _t(Te, we, Re, $, i[Ye + 3], 22, -1044525330),
            $ = _t($, Te, we, Re, i[Ye + 4], 7, -176418897),
            Re = _t(Re, $, Te, we, i[Ye + 5], 12, 1200080426),
            we = _t(we, Re, $, Te, i[Ye + 6], 17, -1473231341),
            Te = _t(Te, we, Re, $, i[Ye + 7], 22, -45705983),
            $ = _t($, Te, we, Re, i[Ye + 8], 7, 1770035416),
            Re = _t(Re, $, Te, we, i[Ye + 9], 12, -1958414417),
            we = _t(we, Re, $, Te, i[Ye + 10], 17, -42063),
            Te = _t(Te, we, Re, $, i[Ye + 11], 22, -1990404162),
            $ = _t($, Te, we, Re, i[Ye + 12], 7, 1804603682),
            Re = _t(Re, $, Te, we, i[Ye + 13], 12, -40341101),
            we = _t(we, Re, $, Te, i[Ye + 14], 17, -1502002290),
            Te = _t(Te, we, Re, $, i[Ye + 15], 22, 1236535329),
            $ = Jt($, Te, we, Re, i[Ye + 1], 5, -165796510),
            Re = Jt(Re, $, Te, we, i[Ye + 6], 9, -1069501632),
            we = Jt(we, Re, $, Te, i[Ye + 11], 14, 643717713),
            Te = Jt(Te, we, Re, $, i[Ye + 0], 20, -373897302),
            $ = Jt($, Te, we, Re, i[Ye + 5], 5, -701558691),
            Re = Jt(Re, $, Te, we, i[Ye + 10], 9, 38016083),
            we = Jt(we, Re, $, Te, i[Ye + 15], 14, -660478335),
            Te = Jt(Te, we, Re, $, i[Ye + 4], 20, -405537848),
            $ = Jt($, Te, we, Re, i[Ye + 9], 5, 568446438),
            Re = Jt(Re, $, Te, we, i[Ye + 14], 9, -1019803690),
            we = Jt(we, Re, $, Te, i[Ye + 3], 14, -187363961),
            Te = Jt(Te, we, Re, $, i[Ye + 8], 20, 1163531501),
            $ = Jt($, Te, we, Re, i[Ye + 13], 5, -1444681467),
            Re = Jt(Re, $, Te, we, i[Ye + 2], 9, -51403784),
            we = Jt(we, Re, $, Te, i[Ye + 7], 14, 1735328473),
            Te = Jt(Te, we, Re, $, i[Ye + 12], 20, -1926607734),
            $ = bt($, Te, we, Re, i[Ye + 5], 4, -378558),
            Re = bt(Re, $, Te, we, i[Ye + 8], 11, -2022574463),
            we = bt(we, Re, $, Te, i[Ye + 11], 16, 1839030562),
            Te = bt(Te, we, Re, $, i[Ye + 14], 23, -35309556),
            $ = bt($, Te, we, Re, i[Ye + 1], 4, -1530992060),
            Re = bt(Re, $, Te, we, i[Ye + 4], 11, 1272893353),
            we = bt(we, Re, $, Te, i[Ye + 7], 16, -155497632),
            Te = bt(Te, we, Re, $, i[Ye + 10], 23, -1094730640),
            $ = bt($, Te, we, Re, i[Ye + 13], 4, 681279174),
            Re = bt(Re, $, Te, we, i[Ye + 0], 11, -358537222),
            we = bt(we, Re, $, Te, i[Ye + 3], 16, -722521979),
            Te = bt(Te, we, Re, $, i[Ye + 6], 23, 76029189),
            $ = bt($, Te, we, Re, i[Ye + 9], 4, -640364487),
            Re = bt(Re, $, Te, we, i[Ye + 12], 11, -421815835),
            we = bt(we, Re, $, Te, i[Ye + 15], 16, 530742520),
            Te = bt(Te, we, Re, $, i[Ye + 2], 23, -995338651),
            $ = ai($, Te, we, Re, i[Ye + 0], 6, -198630844),
            Re = ai(Re, $, Te, we, i[Ye + 7], 10, 1126891415),
            we = ai(we, Re, $, Te, i[Ye + 14], 15, -1416354905),
            Te = ai(Te, we, Re, $, i[Ye + 5], 21, -57434055),
            $ = ai($, Te, we, Re, i[Ye + 12], 6, 1700485571),
            Re = ai(Re, $, Te, we, i[Ye + 3], 10, -1894986606),
            we = ai(we, Re, $, Te, i[Ye + 10], 15, -1051523),
            Te = ai(Te, we, Re, $, i[Ye + 1], 21, -2054922799),
            $ = ai($, Te, we, Re, i[Ye + 8], 6, 1873313359),
            Re = ai(Re, $, Te, we, i[Ye + 15], 10, -30611744),
            we = ai(we, Re, $, Te, i[Ye + 6], 15, -1560198380),
            Te = ai(Te, we, Re, $, i[Ye + 13], 21, 1309151649),
            $ = ai($, Te, we, Re, i[Ye + 4], 6, -145523070),
            Re = ai(Re, $, Te, we, i[Ye + 11], 10, -1120210379),
            we = ai(we, Re, $, Te, i[Ye + 2], 15, 718787259),
            Te = ai(Te, we, Re, $, i[Ye + 9], 21, -343485551),
            $ = $ + ii >>> 0,
            Te = Te + da >>> 0,
            we = we + aa >>> 0,
            Re = Re + Ta >>> 0
        }
        return n.endian([$, Te, we, Re])
    };
    ve._ff = function(ie, ae, i, O, $, Te, we) {
        var Re = ie + (ae & i | ~ae & O) + ($ >>> 0) + we;
        return (Re << Te | Re >>> 32 - Te) + ae
    }
    ,
    ve._gg = function(ie, ae, i, O, $, Te, we) {
        var Re = ie + (ae & O | i & ~O) + ($ >>> 0) + we;
        return (Re << Te | Re >>> 32 - Te) + ae
    }
    ,
    ve._hh = function(ie, ae, i, O, $, Te, we) {
        var Re = ie + (ae ^ i ^ O) + ($ >>> 0) + we;
        return (Re << Te | Re >>> 32 - Te) + ae
    }
    ,
    ve._ii = function(ie, ae, i, O, $, Te, we) {
        var Re = ie + (i ^ (ae | ~O)) + ($ >>> 0) + we;
        return (Re << Te | Re >>> 32 - Te) + ae
    }
    ,
    ve._blocksize = 16,
    ve._digestsize = 16,
    Bi.exports = function(ie, ae) {
        if (ie == null)
            throw new Error("Illegal argument " + ie);
        var i = n.wordsToBytes(ve(ie, ae));
        return ae && ae.asBytes ? i : ae && ae.asString ? ye.bytesToString(i) : n.bytesToHex(i)
    }
}
)();
var Ir = Bi.exports;
function Hi() {
    return Ir(String(it("buvid3") || Math.floor(Math.random() * 1e5).toString(16)) + +new Date)
}
function Vt(n) {
    n == null && (n = 0);
    let d;
    return n = Math.ceil(n) >> 0,
    d = ("0" + n % 60).slice(-2),
    d = Math.floor(n / 60) + ":" + d,
    d.length < 5 && (d = "0" + d),
    d
}
function Qi(n) {
    return "#" + ("00000" + n.toString(16)).slice(-6)
}
function Yi(n) {
    return n.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2f;").replace(/\n/g, "<br>")
}
function it(n) {
    const d = "";
    if (n == null)
        return d;
    const y = document.cookie.split(";")
      , ye = decodeURIComponent(n);
    for (let ve = 0; ve < y.length; ve++) {
        const [ie,ae] = y[ve].trim().split("=");
        if (decodeURIComponent(ie) === ye)
            return decodeURIComponent(ae)
    }
    return d
}
function br(n, d, y=365) {
    const ye = new Date
      , ve = encodeURIComponent(n)
      , ie = encodeURIComponent(d);
    ye.setTime(ye.getTime() + y * 24 * 60 * 60 * 1e3),
    document.cookie = `${ve}=${ie}; expires=${ye.toUTCString()}; path=/; domain=.bilibili.com`
}
function Tr(n) {
    return window.localStorage && localStorage.getItem ? localStorage.getItem(n) : it(n)
}
function wr(n, d) {
    if (window.localStorage && localStorage.setItem)
        try {
            return localStorage.setItem(n, d)
        } catch (y) {}
    else
        return br(n, d)
}
const je = {
    get version() {
        const n = navigator.userAgent.toLowerCase()
          , d = /(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.test(n) || /(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.test(n)
          , y = /(chrome)[ /]([\w.]+)/.exec(n) || ""
          , ye = {
            browser: y[5] || y[3] || y[1] || "",
            version: y[4] || y[2] || "0"
        };
        let ve = 0;
        return ye.browser && (ve = parseInt(ye.version, 10)),
        {
            browser: ye.browser,
            version: ve,
            linux: /Linux/i.test(n),
            tesla: /Tesla/i.test(n),
            webKit: /AppleWebKit/i.test(n),
            gecko: /Gecko/i.test(n) && !/KHTML/i.test(n),
            trident: /Trident/i.test(n),
            presto: /Presto/i.test(n),
            mobile: /AppleWebKit.*Mobile.*/i.test(n),
            iOS: /Mac OS X[\s_\-/](\d+[.\-_]\d+[.\-_]?\d*)/i.test(n),
            iPhone: /iPhone/i.test(n),
            iPad: /iPad/i.test(n) || navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1,
            webApp: !/Safari/i.test(n),
            android: /Android/i.test(n),
            windowsPhone: /Windows Phone/i.test(n),
            microMessenger: /MicroMessenger/i.test(n),
            microWorkMessenger: /wxwork/i.test(n),
            wx: /MicroMessenger/i.test(n) && !/wxwork/i.test(n),
            mqq: /MQQBrowser/i.test(n) || /MicroMessenger/i.test(n) || /MMWEBSDK/i.test(n) || /WeChat/i.test(n),
            vivo: /VivoBrowser/i.test(n),
            msie: /msie [\w.]+/i.test(n),
            edge: /edge/i.test(n),
            edgeBuild16299: /(\s|^)edge\/16.16299(\s|$)/i.test(n),
            safari: d,
            safariSupportMSE: d && /Version\/1\d/i.test(n)
        }
    }
};
function Sr(n, d) {
    let y = !0;
    return (...ye)=>{
        y && (n(...ye),
        y = !1,
        setTimeout(()=>{
            y = !0
        }
        , d))
    }
}
function Ee(n, d, y) {
    if (!n)
        return;
    n.style.transform = y.includes("bottom") ? "translate(-50%, 100%)" : "translateX(-50%)";
    const ye = n.getBoundingClientRect()
      , ve = d.getBoundingClientRect();
    switch (y) {
    case "bottom-end":
    case "top-end":
        {
            const ie = ye.right
              , ae = ve.right
              , i = Math.floor(Math.abs(ie - ae))
              , O = Math.floor(ye.width / 2)
              , $ = O + 16 + i
              , Te = O + 16 - i;
            if (ie >= ae) {
                n.style.transform = y === "bottom-end" ? `translate(-${$}px, 100%)` : `translateX(-${$}px)`;
                return
            }
            if (ie < ae && i < 16) {
                n.style.transform = y === "bottom-end" ? `translate(-${Te}px, 100%)` : `translateX(-${Te}px)`;
                return
            }
            break
        }
    case "bottom-start":
    case "top-start":
        {
            const ie = ye.left
              , ae = ve.left
              , i = Math.floor(Math.abs(ie - ae))
              , O = Math.floor(ye.width / 2);
            if (ie <= ae) {
                const $ = O - i - 16;
                n.style.transform = y === "bottom-start" ? `translate(-${$}px, 100%)` : `translateX(-${$}px)`;
                return
            }
            if (ie > ae && i < 16) {
                const $ = O + i - 16;
                n.style.transform = y === "bottom-start" ? `translate(-${$}px, 100%)` : `translateX(-${$}px)`;
                return
            }
            break
        }
    }
}
const Ut = n=>typeof n < "u"
  , Ce = {
    hashManage: {
        prependHash: "!",
        _change(n, d) {
            let y = location.hash, ye = [], ve = "", ie = 0, ae;
            const i = {};
            y && (y = y.substring(1),
            this.prependHash && (y = y.replace(new RegExp(`^${this.prependHash.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")}`), ""))),
            ye = y.split("&");
            for (let O = 0; O < ye.length; O++) {
                const $ = ye[O].split("=")[0]
                  , Te = ye[O].split("=")[1];
                $ && (i[$] = decodeURIComponent(Te))
            }
            if (typeof n == "object") {
                ae = Object.keys(n).length;
                for (let O = 0; O < ae; O++) {
                    const $ = n[ae[O]];
                    $ ? i[ae[O]] = encodeURIComponent($) : $ === !1 && delete i[ae[O]]
                }
            } else if (d)
                i[n] = encodeURIComponent("" + d);
            else if (d === !1)
                delete i[n];
            else
                return typeof n > "u" ? i : i[n] || null;
            ae = Object.keys(i);
            for (let O = 0; O < ae.length; O++)
                ie !== 0 ? ve += "&" : ve += this.prependHash,
                ve += `${ae[O]}=${i[ae[O]]}`,
                ie += 1;
            return location.hash = ve,
            i
        },
        get(n) {
            return this._change(n, null)
        },
        set(n, d) {
            return this._change(n, d)
        },
        clear() {
            location.hash = ""
        }
    },
    isUndefined(n) {
        return typeof n > "u"
    },
    cookie: {
        get: function(n) {
            const d = {}
              , y = document.cookie ? document.cookie.split("; ") : [];
            for (let ye = 0; ye < y.length; ye++) {
                const ve = y[ye].split("=");
                let ie = ve.slice(1).join("=");
                ie.charAt(0) === '"' && (ie = ie.slice(1, -1));
                try {
                    const ae = this.decode(ve[0]);
                    if (ie = this.decode(ie),
                    d[ae] = ie,
                    n === ae)
                        break
                } catch (ae) {
                    console.warn(ae)
                }
            }
            return d[n]
        },
        decode: function(n) {
            return n.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
        },
        set: function(n, d, y=365) {
            const ye = new Date;
            ye.setTime(ye.getTime() + y * 24 * 60 * 60 * 1e3),
            document.cookie = `${n}=${escape("" + d)};expires=${ye.toUTCString()}; path=/; domain=.bilibili.com`
        },
        delete: function(n) {
            this.set(n, "", -1)
        }
    },
    ChatGetSettings(n) {
        return this.localStorage._support ? this.localStorage.getItem(n) : this.cookie.get(n)
    },
    ChatSaveSettings(n, d, y) {
        return this.localStorage._support ? this.localStorage.setItem(n, d) : this.cookie.set(n, d, y)
    },
    ChatRemoveSettings(n) {
        return this.localStorage._support ? this.localStorage.removeItem(n) : this.cookie.delete(n)
    },
    localStorage: {
        _support: (()=>{
            try {
                return !!(window.localStorage && typeof window.localStorage == "object")
            } catch (n) {
                return !1
            }
        }
        )(),
        getItem(n) {
            return this._support ? window.localStorage.getItem(n) : null
        },
        setItem(n, d) {
            this._support && window.localStorage.setItem(n, "" + d)
        },
        removeItem(n) {
            window.localStorage.removeItem(n)
        }
    },
    loadLocalStorage(n) {
        const d = ["bilibililover", "defaulth5", "firstentergraytest", "bilibili_player_settings"];
        this._iframe = document.createElement("iframe"),
        this._iframe.style.cssText = "position:absolute;width:1px;height:1px;left:-9999px;",
        this._iframe.src = "//www.bilibili.com/blackboard/iframemessage.html",
        document.body.appendChild(this._iframe),
        this._iframe.addEventListener && this._iframe.addEventListener("load", ()=>{
            try {
                for (let y = 0; y < d.length; y++)
                    this._iframe && this._iframe.contentWindow && window.localStorage.setItem(d[y], this._iframe.contentWindow.localStorage.getItem(d[y]))
            } catch (y) {}
            clearTimeout(this.storageTimer),
            n()
        }
        ),
        this.storageTimer = window.setTimeout(()=>{
            n()
        }
        , 500)
    },
    getLocalStorage(n) {
        if (this._iframe)
            try {
                return this._iframe.contentWindow && this._iframe.contentWindow.localStorage.getItem(n)
            } catch (d) {}
        else
            try {
                return this.ChatGetSettings(n)
            } catch (d) {}
        return null
    },
    setLocalStorage(n, d) {
        try {
            this.ChatSaveSettings(n, d)
        } catch (y) {}
        if (this._iframe)
            try {
                this._iframe.contentWindow && this._iframe.contentWindow.localStorage.setItem(n, "" + d)
            } catch (y) {}
    },
    removeLocalStorage(n) {
        try {
            this.ChatRemoveSettings(n)
        } catch (d) {}
        if (this._iframe)
            try {
                this._iframe.contentWindow && this._iframe.contentWindow.localStorage.removeItem(n)
            } catch (d) {}
    },
    GetUrlValue(n) {
        const d = new RegExp(`(^|&)${n}=([^&]*)(&|$)`,"i")
          , y = window.location.search.substr(1).match(d);
        if (y != null)
            try {
                return decodeURIComponent(y[2])
            } catch (ye) {
                return null
            }
        return null
    },
    getIPCrc(n) {
        const d = new Ar;
        d.reset(),
        d.update(n),
        this.cookie.set("HTML5PlayerCRC32", "" + d.finish())
    },
    getHiddenProp() {
        const n = ["webkit", "moz", "ms", "o"];
        if ("hidden"in document)
            return "hidden";
        for (let d = 0; d < n.length; d++)
            if (`${n[d]}Hidden`in document)
                return `${n[d]}Hidden`;
        return null
    },
    isDocumentHidden() {
        const n = this._getHiddenProp && this._getHiddenProp();
        return n ? document[n] : !1
    },
    cloneDeep(n, d) {
        if (n === null || typeof n != "object")
            return n;
        const y = Array.isArray(n) ? [] : {};
        for (const ye in n)
            if (Object.prototype.hasOwnProperty.call(n, ye)) {
                const ve = n[ye];
                d && typeof ve == "object" ? y[ye] = this.cloneDeep(ve, d) : y[ye] = ve
            }
        return y
    },
    loadScript: (n,d)=>{
        const y = d || window
          , ye = y.document.createElement("script");
        return ye.onload = function() {
            n.success && n.success()
        }
        ,
        ye.onerror = ()=>{
            n.error && n.error()
        }
        ,
        ye.src = n.url,
        y.document.head.appendChild(ye),
        ye
    }
    ,
    parseConfig(n, d, y) {
        switch (d) {
        case "has_danmaku":
            n.hasDanmaku = y ? y === "false" ? "" : !0 : "";
            break;
        case "urlparam":
            n.extra_params = y ? decodeURIComponent(y) : "",
            n[d] = y ? y + encodeURIComponent("&season_type=") + Ce.GetUrlValue("season_type") : "";
            break;
        case "p":
            n[d] = +y || 1;
            break;
        case "page":
            n.p = +y || 1;
            break;
        case "epid":
            n.episodeId = Number(y);
            break;
        case "danmaku":
            n.danmaku = y === "0" ? "" : !0;
            break;
        default:
            n[d] = y;
            break
        }
    },
    defaultSearch(n, d=!1) {
        let y = [];
        const ye = {}
          , ve = window.location.search;
        if (ve.indexOf("?") !== -1) {
            const ae = ve.slice(1).split("&");
            ae && y.push(...ae),
            d && (y = y.filter(i=>!/(t|dmid)=/.test(i)))
        }
        if (n) {
            const ae = n.split("&");
            y.push(...ae)
        }
        let ie;
        return y.forEach(ae=>{
            ie = ae.split("="),
            Ce.parseConfig(ye, ie[0], ie[1])
        }
        ),
        ye
    },
    objToStr(n) {
        let d = "";
        for (const y in n)
            d += `${y}=${n[y]}&`;
        return d.slice(0, -1)
    },
    ajax(n) {
        return new Promise(function(d, y) {
            const ye = n.method ? n.method.toUpperCase() : "GET"
              , ve = !!n.async
              , ie = new XMLHttpRequest
              , ae = n.data ? Ce.objToStr(n.data) : "";
            if (ie.withCredentials = n.withCredentials || !1,
            ye === "POST")
                ie.open(ye, n.url, ve),
                ie.setRequestHeader("Content-type", "application/x-www-form-urlencoded"),
                ie.send(ae);
            else if (ye === "GET") {
                const i = `${n.url}?${ae}`;
                ie.open(ye, i, ve),
                ie.send()
            } else
                ie.open(ye, n.url),
                ie.send();
            ie.addEventListener("load", ()=>{
                d(ie.response)
            }
            ),
            ie.addEventListener("error", ()=>{
                y()
            }
            ),
            ie.addEventListener("abort", ()=>{
                y()
            }
            )
        }
        )
    }
};
class Ar {
    constructor() {
        this.crc32Table = this.makeTable(),
        this.value = 0
    }
    makeTable() {
        const d = [];
        for (let y = 0; y < 256; y++) {
            let ye = y;
            for (let ve = 0; ve < 8; ve++)
                (ye & 1) === 1 ? ye = ye >>> 1 ^ 3988292384 : ye >>>= 1;
            d[y] = ye >>> 0
        }
        return d
    }
    updateBytes(d, y) {
        let ye = ~d;
        const ve = y.length;
        for (let ie = 0; ie < ve; ie++)
            ye = this.crc32Table[ye & 255 ^ y[ie]] ^ ye >>> 8;
        return ~ye >>> 0
    }
    updateStr(d, y) {
        let ye = d ^ -1;
        for (let ve = 0, ie = y.length, ae, i; ve < ie; )
            ae = y.charCodeAt(ve += 1),
            ae < 128 ? ye = ye >>> 8 ^ this.crc32Table[(ye ^ ae) & 255] : ae < 2048 ? (ye = ye >>> 8 ^ this.crc32Table[(ye ^ (192 | ae >> 6 & 31)) & 255],
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (128 | ae & 63)) & 255]) : ae >= 55296 && ae < 57344 ? (ae = (ae & 1023) + 64,
            i = y.charCodeAt(ve += 1) & 1023,
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (240 | ae >> 8 & 7)) & 255],
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (128 | ae >> 2 & 63)) & 255],
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (128 | i >> 6 & 15 | (ae & 3) << 4)) & 255],
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (128 | i & 63)) & 255]) : (ye = ye >>> 8 ^ this.crc32Table[(ye ^ (224 | ae >> 12 & 15)) & 255],
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (128 | ae >> 6 & 63)) & 255],
            ye = ye >>> 8 ^ this.crc32Table[(ye ^ (128 | ae & 63)) & 255]);
        return (ye ^ -1) >>> 0
    }
    reset() {
        this.value = 0
    }
    update(d) {
        typeof d == "string" ? this.value = this.updateStr(this.value, d) : d instanceof Uint8Array || d.constructor.toString().indexOf("Uint8Array") !== -1 ? this.value = this.updateBytes(this.value, d) : (d instanceof ArrayBuffer || d.constructor.toString().indexOf("ArrayBuffer") !== -1) && (this.value = this.updateBytes(this.value, new Uint8Array(d,0,d.byteLength)))
    }
    finish() {
        return this.value
    }
}
const Dr = ()=>{
    Ls.interceptors.request.use(function(n) {
        return (n.method === "post" || n.method === "POST") && n.data && !n.data.csrf && Object.assign(n.data, {
            csrf: it("bili_jct")
        }),
        n
    })
}
;
function Nr(n, d) {
    var y;
    if (!n)
        return "";
    if (typeof n == "string")
        return Wi(n);
    const ye = (y = n.dash.video.find(ve=>ve.id === d)) == null ? void 0 : y.baseUrl;
    return Wi(ye)
}
function Wi(n) {
    if (!n)
        return "";
    const {host: d} = new URL(n);
    return d
}
class l {
}
l.UI_NORMAL = 0,
l.UI_WIDE = 1,
l.UI_WEB_FULL = 2,
l.UI_FULL = 3,
l.UI_MINI = 4,
l.V_IDEL = 0,
l.V_READY = 1,
l.V_BUFF = 2,
l.V_PLAY = 3,
l.V_PAUSE = 4,
l.V_COMPLETE = 5,
l.videoDesc = {
    0: "空闲状态",
    1: "加载完毕",
    2: "加载中",
    3: "播放中",
    4: "暂停",
    5: "播放完毕"
},
l.DM_OFF = !1,
l.DM_ON = !0,
l.USER_UNLOGIN = 0,
l.USER_LIMITED = 1,
l.USER_REGISTERED = 2,
l.USER_NORMAL = 3,
l.USER_VIP = 4,
l.USER_ADVANCED = 5,
l.SEND_POOL_NORMAL = [],
l.SEND_POOL_ADMIN = [1, 1],
l.SEND_FONT_SIZE_UNLOGIN = [0, 0, 0, 0, 0, 0, 0],
l.SEND_FONT_SIZE_LIMITED = [0, 0, 1, 1, 0, 0, 0],
l.SEND_FONT_SIZE_REGISTERED = [0, 0, 1, 1, 0, 0, 0],
l.SEND_FONT_SIZE_NORMAL = [0, 0, 1, 1, 0, 0, 0],
l.SEND_FONT_SIZE_VIP = [0, 1, 1, 1, 1, 0, 0],
l.SEND_FONT_SIZE_ADVANCED = [1, 1, 1, 1, 1, 1, 1],
l.SEND_FONT_SIZE_ADMIN = [0, 0, 1, 1, 1, 0, 0],
l.SEND_MODE_UNLOGIN = [0, 0, 0, 0],
l.SEND_MODE_LIMITED = [1, -2, -2, 0],
l.SEND_MODE_REGISTERED = [1, -2, -2, 0],
l.SEND_MODE_NORMAL = [1, -2, -2, 0],
l.SEND_MODE_VIP = [1, 1, 1, 1],
l.SEND_MODE_ADVANCED = [1, 1, 1, 1],
l.SEND_MODE_LEVEL_LOW = [1, -2, -2, 0],
l.SEND_MODE_LEVEL_TWO = [1, -2, -2, 0],
l.SEND_MODE_LEVEL_NORMAL = [1, 1, 1, 0],
l.SEND_COLOR_UNLOGIN = 0,
l.SEND_COLOR_LEVEL_LOW = 1,
l.SEND_COLOR_NORMAL = 2,
l.SEND_STATUS_UNLOGIN = 0,
l.SEND_STATUS_LEVEL_LOW = 1,
l.SEND_STATUS_MORAL_LOW = 2,
l.SEND_STATUS_DISABLED_WORDS = 3,
l.SEND_STATUS_LIMITED = 4,
l.SEND_STATUS_NORMAL = 5,
l.SEND_STATUS_TYPING = 6,
l.SEND_STATUS_BEYOND_WORDS = 7,
l.SEND_STATUS_SENDING = 8,
l.SEND_STATUS_SENT = 9,
l.SEND_STATUS_FREQUENTLY = 10,
l.SEND_STATUS_BLOCKING = 11,
l.SEND_STATUS_BLOCKED = 12,
l.SEND_STATUS_CLOSED = 13,
l.SEND_STATUS_UPDATE = 14,
l.SEND_ANSWER_STATUS_IN = 15,
l.SEND_STATUS_CANNOT_BUY = 16,
l.SEND_INPUT_UNLOGIN = [0, 1e5],
l.SEND_INPUT_LIMITED = [20, 1e4],
l.SEND_INPUT_REGISTERED = [20, 1e4],
l.SEND_INPUT_NORMAL = [100, 5e3],
l.SEND_INPUT_VIP = [100, 1e3],
l.SEND_INPUT_ADVANCED = [100, 1e3],
l.PLAYER_ERROR = 1,
l.PLAYER_NETWORK_ERROR = 1101,
l.PLAYER_FORM_ERROR = 1103,
l.PLAYER_ANALYZE_ERROR = 1104,
l.PLAYURL_ERROR = 2,
l.PLAYURL_NETWORK_ERROR = 2101,
l.PLAYURL_FORM_ERROR = 2103,
l.PLAYURL_RESOLVE_ERROR = 2104,
l.PLAYURL_BANGUMI_NETWORK_ERROR = 2108,
l.PLAYURL_BANGUMI_FORM_ERROR = 2110,
l.PLAYURL_BANGUMI_RESOLVE_ERROR = 2111,
l.VIDEO_ERROR = 3,
l.VIDEO_URL_ERROR = 3001,
l.VIDEO_ANALYZE_ERROR = 3002,
l.VIDEO_PLAY_ERROR = 3104,
l.NETWORK_EXCEPTION = 3111,
l.NETWORK_STATUS_CODE_INVALID = 3112,
l.NETWORK_UNRECOVERABLE_EARLY_EOF = 3113,
l.NETWORK_RECOVERED_EARLY_EOF = 3114,
l.MEDIA_MSE_ERROR = 3121,
l.MEDIA_FORMAT_ERROR = 3122,
l.MEDIA_FORMAT_UNSUPPORTED = 3123,
l.MEDIA_CODEC_UNSUPPORTED = 3124,
l.ABNORMAL_SEGMENT_BYTELENGTH = 3125,
l.EVENT = {
    VIDEO_MEDIA_ENTER: "video_media_enter",
    VIDEO_MEDIA_PLAY: "video_media_play",
    VIDEO_MEDIA_PLAY_SUCCESS: "video_media_play_success",
    VIDEO_MEDIA_FIRST_PLAY_SUCCESS: "video_media_first_play_success",
    VIDEO_MEDIA_PLAY_FAIL: "video_media_play_fail",
    VIDEO_MEDIA_PLAYING: "video_media_playing",
    VIDEO_MEDIA_CANPLAY: "video_media_canplay",
    VIDEO_MEDIA_PAUSE: "video_media_pause",
    VIDEO_MEDIA_SEEK: "video_media_seek",
    VIDEO_MEDIA_SEEKING: "video_media_seeking",
    VIDEO_MEDIA_SEEKED: "video_media_seeked",
    VIDEO_MEDIA_SEEK_END: "video_media_seek_end",
    VIDEO_MEDIA_TIME: "video_media_time",
    VIDEO_MEDIA_FRAME: "video_media_frame",
    VIDEO_MEDIA_ERROR: "video_media_error",
    VIDEO_MEDIA_BUFFER: "video_media_buffer",
    VIDEO_MEDIA_BUFFER_END: "video_media_buffer_end",
    VIDEO_MEDIA_BUFFER_FULL: "video_media_buffer_full",
    VIDEO_MEDIA_LOADLAG: "video_media_loadlag",
    VIDEO_MEDIA_ENDED: "video_media_ended",
    VIDEO_MEDIA_VOLUME: "video_media_volume",
    VIDEO_MEDIA_MUTE: "video_media_mute",
    VIDEO_MEDIA_ATTACHED: "video_media_attached",
    VIDEO_PLAYER_LOAD: "video_player_load",
    VIDEO_PLAYER_LOADED: "video_player_loaded",
    VIDEO_PLAYURL_LOAD: "video_playurl_load",
    VIDEO_PLAYURL_LOADED: "video_playurl_loaded",
    VIDEO_METADATA_LOAD: "video_media_load",
    VIDEO_METADATA_LOADED: "video_media_loaded",
    VIDEO_QUALITY_CHANGE: "video_quality_change",
    VIDEO_DANMAKU_LOAD: "video_danmaku_load",
    VIDEO_DANMAKU_LOADED: "video_danmaku_loaded",
    VIDEO_PAGELIST_LOADED: "video_pagelist_loaded",
    VIDEO_WEBSOCKET_LINK: "video_websocket_link",
    VIDEO_WEBSOCKET_LINKED: "video_websocket_linked",
    VIDEO_WEBSOCKET_ERROR: "video_websocket_error",
    VIDEO_WEBSOCKET_END: "video_websocket_end",
    VIDEO_INITIALIZING: "video_initializing",
    VIDEO_INITIALIZED: "video_initialized",
    VIDEO_SCROLL: "video_scroll",
    VIDEO_RESIZE: "video_resize",
    VIDEO_PLAYER_RESIZE: "video_player_resize",
    VIDEO_PROGRESSBAR_RESIZE: "video_progressbar_resize",
    VIDEO_REFULLSCREEN: "video_refullscreen",
    VIDEO_FULLSCREEN_CLICK: "video_fullscreen_click",
    VIDEO_FULLSCREEN_MODE_CHANGED: "video_fullscreen_mode_changed",
    VIDEO_FULLSCREEN_MODE_CHANGED_OUTER: "video_fullscreen_mode_changed_outer",
    VIDEO_WIDE_SCREEN_CLICK: "video_wide_screen_click",
    VIDEO_MOUSEMOVE: "video_mousemove",
    VIDEO_HEARTBEAT: "video_heartbeat",
    VIDEO_CONTROLBAR: "video_controlbar",
    VIDEO_PROGRESS_UPDATE: "video_progress_update",
    VIDEO_BEFORE_DESTROY: "video_before_destroy",
    VIDEO_DESTROY: "video_destroy",
    VIDEO_LOG: "video_log",
    VIDEO_LOG_UPDATE: "video_log_update",
    VIDEO_LOG_CLOSE: "video_log_close",
    VIDEO_PROMOTE_INIT: "video_promote_init",
    VIDEO_PRELOAD_ERROR: "video_preload_error",
    VIDEO_SUBTITLE_CHANGE: "video_subtitle_change",
    VIDEO_PANEL_HOVER: "video_panel_hover",
    VIDEO_GUIDE_ATTENTION_POS_UPDATE: "video_guide_attention_pos_update",
    VIDEO_RATE_CHANGE: "video_rate_change",
    VIDEO_MIRROR: "video_mirror",
    VIDEO_SIZE_RESIZE: "video_size_resize",
    DASH_PLAYER_ERROR: "dash_player_error",
    INTERACTIVE_VIDEO_ENDED: "interactive_video_ended",
    INTERACTIVE_VIDEO_COUNTDOWN_START: "interactive_video_countdown_start",
    PLAYER_RELOAD: "player_reload",
    PLAYER_RELOADED: "player_reloaded",
    VIDEO_MEDIA_DURATION_CHANGE: "video_media_duration_change",
    VIDEO_DANMAKU_STATUS_CHANGED: "video_danmaku_status_changed",
    VIDEO_REQUEST_NEXT_EPISODE: "video_request_next_episode",
    VIDEO_CLICK_REPORT: "video_click_report",
    VIDEO_CLICK_CC_REPORT: "video_click_cc_report",
    VIDEO_CHANGE_QUALITY_SUCCESS: "video-change-quality-success",
    VIDEO_CHANGE_QUALITY_FAIL: "video-change-quality-fail",
    RECORD_TIME_VISIBLE: "record-time-visible",
    RECORD_TIME_HIDDEN: "record-time-hidden",
    VOLUME_CHANGE: "volume-change",
    SET_VOLUME: "set-volume",
    MUTED_CHANGE: "muted-change",
    SET_VIDEO_FOCUS: "set-video-focus",
    DANMAKU_VISIBLE_CHANGED: "danmaku-visible-changed",
    NEED_LOGIN: "need-login",
    MUTE_BUTTON_SHOW: "player_mute_button_show",
    MUTE_BUTTON_CLICK: "player_mute_button_click",
    SPEED_FLOATING_LAYER_SHOW: "player_speed_floating_show",
    SPEED_FLOATING_LAYER_CLICK: "player_speed_switch_click",
    QUALITY_FLOATING_LAYER_SHOW: "player_quality_floating_show",
    QUALITY_FLOATING_LAYER_CLICK: "player_quality_switch_click",
    CAPTION_SETTING_LAYER_SHOW: "player_caption_setting_show",
    CAPTION_SETTING_LAYER_CLICK: "player_caption_setting_click",
    CAPTION_SETTING_CLOSE_CLICK: "player_caption_setting_close_click",
    DANMAKU_SWITCH_CLICK: "player_danmaku_switch_click",
    DANMAKU_SEND_CLICK: "player_danmaku_send_click",
    KEYBOARD_MUTE: "player_keyboard_mute",
    KEYBOARD_SPEED: "player_keyboard_speed",
    KEYBOARD_FULLSCREEN: "player_keyboard_fullscreen",
    SKIP_OP_ED_SWITCH_CHANGE: "player_skip_op_ed_change",
    AD_INIT_REQUEST: "ad_init_request",
    AD_PREMIUM_BTN_CLICK: "ad_premium_btn_click",
    AD_VIDEO_CLICK: "ad_video_click",
    AD_VIDEO_SHOW: "ad_video_show",
    AD_ERROR: "ad_error",
    ASS_INIT_SUCCESS: "ass_init_success",
    ASS_INIT_FAIL: "ass_init_fail"
},
l.TRACK = {
    OP: "001111",
    EVENT: "001114",
    AUDIO: "001156",
    MISAKA: 200002,
    QUALITYMONITOR: "002879"
};
const Zi = "018044";
class Mr {
    getMediaSource() {
        return self.MediaSource || self.WebKitMediaSource
    }
    getSourceBuffer() {
        return self.SourceBuffer || self.WebKitSourceBuffer
    }
    get isNativeSupported() {
        const d = document.createElement("video");
        return !!(d.canPlayType("application/vnd.apple.mpegurl") || d.canPlayType('video/mp2t; codecs="avc1.42E01E,mp4a.40.2"'))
    }
    get isMseSupported() {
        const d = this.getMediaSource();
        if (!d)
            return !1;
        const y = this.getSourceBuffer()
          , ye = d && typeof d.isTypeSupported == "function" && d.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')
          , ve = !y || y.prototype && typeof y.prototype.appendBuffer == "function" && typeof y.prototype.remove == "function";
        return !!ye && !!ve
    }
}
const qi = new Mr
  , Lr = /\/((player\.es)|@bilibili-intl_player)\.(\w+\.)?js(\?.*)?$/
  , Ki = "player-mobile";
var ce = (n=>(n[n.enter_s = 0] = "enter_s",
n[n.enter_e = 1] = "enter_e",
n[n.init_s = 2] = "init_s",
n[n.init_e = 3] = "init_e",
n[n.playurl_s = 4] = "playurl_s",
n[n.playurl_e = 5] = "playurl_e",
n[n.meta_s = 6] = "meta_s",
n[n.meta_e = 7] = "meta_e",
n[n.frame = 8] = "frame",
n[n.canplay = 9] = "canplay",
n[n.reload_s = 10] = "reload_s",
n[n.first_play = 11] = "first_play",
n))(ce || {});
class Cr {
    constructor(d) {
        this.player = d,
        this.reset()
    }
    setStageTiming(d, y) {
        if (d === 10 && this.reset(),
        this.stageTiming[d])
            return !1;
        this.stageTiming[d] = y != null ? y : performance.now(),
        this.perfUp(d)
    }
    reset() {
        this.stageTiming = {
            [0]: NaN,
            [1]: NaN,
            [2]: NaN,
            [3]: NaN,
            [10]: NaN,
            [4]: NaN,
            [5]: NaN,
            [6]: NaN,
            [7]: NaN,
            [8]: NaN,
            [9]: NaN,
            [11]: NaN
        }
    }
    perfUp(d) {
        var y;
        const ye = (y = this.player) == null ? void 0 : y.track;
        if (!(ye != null && ye.trackInfoPush))
            return;
        const ve = !!this.stageTiming[10];
        switch (d) {
        case 7:
            this.recordEntryPerf(),
            ve || ye.trackInfoPush("mb_enter", JSON.stringify(this.initInfo("enter"))),
            ye.trackInfoPush("mb_meta", JSON.stringify(this.initInfo("meta", ve)));
            break;
        case 9:
            ye.trackInfoPush("mb_canplay", JSON.stringify(this.initInfo("canplay", ve)));
            break;
        case 11:
            this.recordEntryPerf(),
            ye.trackInfoPush("mb_first_play", JSON.stringify(this.initInfo("first_play", ve)));
            break
        }
    }
    initInfo(d, y) {
        const ye = this.stageTiming[2]
          , ve = (ae,i=ye)=>this.toFixed(this.stageTiming[ae] - i, 2)
          , ie = {
            reload: y ? 1 : 0
        };
        return y || (ie.enter_s = ve(0, 0),
        ie.enter_e = ve(1, 0),
        ie.init_s = this.toFixed(ye, 2)),
        d === "enter" || (ie.init_e = ve(3),
        ie.playurl_s = ve(4),
        ie.playurl_e = ve(5),
        ie.meta_s = ve(6),
        ie.meta_e = ve(7),
        d === "meta") || (ie.frame = ve(8) || 0,
        ie.canplay = ve(9),
        d === "canplay") || (ie.first_play = ve(11),
        d === "first_play") ? ie : {}
    }
    recordEntryPerf() {
        const d = this.perfFilterLoadTime(Lr);
        d && (this.stageTiming[0] = d.requestStart,
        this.stageTiming[1] = d.requestStart + d.duration)
    }
    perfFilterLoadTime(d) {
        const y = this.perfCalcLoadTimes();
        for (const ye of y)
            if (d.test(ye.name))
                return ye;
        return null
    }
    perfCalcLoadTimes() {
        const d = [];
        if (self.performance == null)
            return d;
        const y = performance.getEntriesByType("resource");
        if (y == null || y.length <= 0)
            return d;
        for (const ye of y) {
            const ve = ye.redirectEnd - ye.redirectStart
              , ie = ye.domainLookupEnd - ye.domainLookupStart
              , ae = ye.connectEnd - ye.connectStart
              , i = ye.secureConnectionStart > 0 ? ye.connectEnd - ye.secureConnectionStart : 0
              , O = ye.responseEnd - ye.responseStart
              , $ = ye.fetchStart > 0 ? ye.responseEnd - ye.fetchStart : 0;
            ye.requestStart > 0 && ye.responseEnd - ye.requestStart;
            const Te = ye.startTime > 0 ? ye.responseEnd - ye.startTime : 0;
            d.push({
                name: ye.name,
                duration: ye.duration || Te || $,
                requestStart: ye.startTime || ye.fetchStart,
                entryType: ye.entryType,
                initiatorType: ye.initiatorType,
                nextHopProtocol: ye.nextHopProtocol,
                decodedBodySize: ye.decodedBodySize,
                transferSize: ye.transferSize,
                redirectTime: ve,
                dnsTime: ie,
                tcpTime: ae,
                sslTime: i,
                responseTime: O
            })
        }
        return d
    }
    toFixed(d, y) {
        return typeof d != "number" || isNaN(d) ? d : Math.round(__pow(10, y) * d) / __pow(10, y)
    }
    getMarkTimeByName(d) {
        const y = performance.getEntriesByName(d, "mark")
          , ye = Array.isArray(y) && y[y.length - 1];
        return ye != null && ye.startTime ? ye.startTime : 0
    }
    getFirstFrameTime() {
        const d = Math.floor(this.stageTiming[7])
          , y = this.getMarkTimeByName("PlayerNavigationStart")
          , ye = Math.floor(Math.max(d - Number(y), 0));
        return y ? ye < 2e4 ? ye : Math.max(d - Math.floor(this.stageTiming[2]), 0) : d
    }
}
const kr = ()=>{
    performance.mark("PlayerNavigationStart")
}
;
var Bt = (n=>(n.DANMAKU = "danmaku",
n))(Bt || {});
class Or {
    constructor(d) {
        this.seek = {
            start: null,
            total: 0
        },
        this.trackInfoList = [],
        this.inited = !1,
        this.loadState = !1,
        this.player = d,
        this.rules = ["ts", "player_version", "web_version", "screen_width", "screen_height", "screen_dpi", "platform", "spm_id", "browser_language", "s_locale", "media_type", "season_id", "episode_id", "aid", "player_params", "session_id", "cdn", "current_time", "current_quality", "current_lang", "duration", "life_time", "error_data", "url", "realtime", "ready_state", "event_id", "event_param"]
    }
    init() {
        if (this.inited)
            return;
        this.inited = !0,
        this.firstClick = !1,
        this.destroyed = !1,
        this.trackInfoPush("enter", document.referrer);
        const d = {
            native: qi.isNativeSupported,
            mse: qi.isMseSupported
        };
        this.trackInfoPush("checkhls", JSON.stringify(d)),
        this.player.bind(l.EVENT.VIDEO_MEDIA_SEEK, ()=>{
            this.seek.start === null && (this.seek.start = this.player.currentTime())
        }
        ),
        this.player.bind(l.EVENT.VIDEO_MEDIA_SEEKED, ()=>{
            this.seek.start !== null && (this.seek.total += this.player.currentTime() - this.seek.start,
            this.seek.start = null),
            this.nextRestart && (this.nextRestart = !1)
        }
        ),
        this.player.bind(l.EVENT.VIDEO_BEFORE_DESTROY, ()=>{
            var ye, ve, ie, ae;
            if (this.player.core.type === "DASH") {
                this.cdnBandWidthTimeId && window.clearInterval(this.cdnBandWidthTimeId);
                const i = (ye = this.player.core.typedInfo.player) == null ? void 0 : ye.getVideoInfo();
                this.trackInfoPush("cdn_bandwidth_info", JSON.stringify({
                    cdn: ((ve = this.player.core.typedInfo.player) == null ? void 0 : ve.getCDNInfo(!0)) || {},
                    vcid: i.mediaInfo.videoCodecID,
                    acid: i.mediaInfo.audioCodecID
                })),
                this.trackInfoPush("quit", JSON.stringify({
                    video_url: ((ie = this.player.core.typedInfo.player) == null ? void 0 : ie.getCurrentPlayURLFor("video")) || "",
                    audio_url: ((ae = this.player.core.typedInfo.player) == null ? void 0 : ae.getCurrentPlayURLFor("audio")) || "",
                    buffer: this.player.getBufferRate() * this.player.duration() + "",
                    vcid: i.mediaInfo.videoCodecID
                }))
            } else
                this.trackInfoPush("quit", JSON.stringify({
                    video_url: this.player.config.readyVideoUrl,
                    audio_url: "",
                    buffer: this.player.getBufferRate() * this.player.duration() + "",
                    vcid: ""
                }))
        }
        ),
        this.player.bind(l.EVENT.VIDEO_DESTROY, ()=>{
            this.destroy()
        }
        ),
        this.player.bind(l.EVENT.PLAYER_RELOAD, ()=>{
            this.reset()
        }
        );
        let y = !1;
        this.player.bind(l.EVENT.VIDEO_METADATA_LOADED, ()=>{
            var ye;
            y || (y = !0,
            this.player.reloadTime ? (this.trackInfoPush("reload_time", +new Date - this.player.reloadTime),
            this.player.reloadTime = 0) : (this.frameTime = +new Date - this.player.createdTime,
            this.loadedTime = this.frameTime,
            window.performance && window.performance.timing && window.performance.timing.navigationStart && (this.loadedTime = +new Date - window.performance.timing.navigationStart),
            this.trackInfoPush("loaded_time", this.loadedTime),
            this.trackInfoPush("frame_time", this.frameTime),
            this.firstClickTime && this.trackInfoPush("first_waiting_time", Math.max(this.loadedTime - this.firstClickTime, 0))));
            const ve = this.player.perf.getFirstFrameTime();
            if (this.trackInfoPush("first_frame_time", ve),
            this.player.core.type === "DASH") {
                const ie = (ye = this.player.core.typedInfo.player) == null ? void 0 : ye.getVideoInfo();
                this.cdnBandWidthTimeId && window.clearInterval(this.cdnBandWidthTimeId),
                this.cdnBandWidthTimeId = window.setInterval(()=>{
                    var ae;
                    this.trackInfoPush("cdn_bandwidth_info", JSON.stringify({
                        cdn: ((ae = this.player.core.typedInfo.player) == null ? void 0 : ae.getCDNInfo(!0)) || {},
                        vcid: ie.mediaInfo.videoCodecID,
                        acid: ie.mediaInfo.audioCodecID
                    }))
                }
                , 5 * 60 * 1e3)
            }
        }
        ),
        this.player.bind(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, ()=>{
            this.trackInfoPush("browser_fullscreen")
        }
        )
    }
    view() {
        !this.firstClick && !this.destroyed && (this.firstClick = !0,
        this.firstClickTime = +new Date - this.player.createdTime,
        this.player.perf.setStageTiming(ce.first_play),
        this.pageReport("click", "playFirstTime", {
            area: this.player.controller.firstClickArea
        }),
        this.pageCustomReport("playFirstTime", window.bsource || ""),
        this.trackInfoPush("first_play", window.bsource || ""),
        this.loadedTime && this.trackInfoPush("first_waiting_time", Math.max(this.loadedTime - this.firstClickTime, 0)))
    }
    sendService(d=Zi, y, ye="", ve="", ie, ae) {
        var i, O, $, Te;
        const we = this.player;
        let Re = Math.floor((we.currentTime() || 0) - this.seek.total);
        Re = Math.max(Re, 0);
        const {web_version: Ye, season_id: _t, episode_id: Jt, aid: bt, platform: ai, s_locale: ii, spm_id: da} = we.config.extraInfo
          , aa = ((O = (i = we.config.subtitle) == null ? void 0 : i.list) != null ? O : []).find(ga=>ga.key === we.subtitleLang.value())
          , Ta = Nr(we.config.readyVideoUrl, we.videoQuality.value())
          , fa = window.screen.width * window.devicePixelRatio
          , He = window.screen.height * window.devicePixelRatio
          , Zt = we.video ? Math.floor(we.currentTime()) : 0
          , si = {
            ts: ie,
            player_version: "0.26.9",
            web_version: Ye,
            screen_width: screen.width,
            screen_height: screen.height,
            screen_dpi: `${fa}*${He}`,
            spm_id: da,
            browser_language: navigator.language,
            s_locale: ii,
            media_type: ($ = we.core) == null ? void 0 : $.type,
            current_time: Zt,
            current_quality: we.videoQuality.value(),
            current_lang: aa ? JSON.stringify({
                key: aa.key,
                url: aa.url
            }) : "",
            duration: we.duration(),
            season_id: _t,
            episode_id: Jt,
            aid: bt,
            player_params: JSON.stringify({
                isMute: we.isMute(),
                volume: (Te = we.video) == null ? void 0 : Te.volume
            }),
            session_id: we.session,
            cdn: Ta,
            platform: ai,
            life_time: 0,
            error_data: "",
            realtime: Re,
            ready_state: ae,
            url: ve,
            event_id: y,
            event_param: ye
        };
        this.player.reporter.sendCustom(si, {
            logId: d,
            rules: this.rules
        })
    }
    startTrackReportTask() {
        let d;
        if (this.trackInfoList.length > 0) {
            switch (d = this.trackInfoList.shift(),
            d.name) {
            case "loaded_time":
            case "reload_time":
                d.url || (d.url = this.player.getPlayurl());
                break
            }
            this.send(d.name, d.params, d.url, Zi, d.ctime, d.readyState)
        }
    }
    loadTrackUp(d, y) {
        if (this.inited && (d && (this.loadState = !0),
        this.loadState)) {
            if (y) {
                for (; this.trackInfoList.length > 0; )
                    this.startTrackReportTask();
                return
            }
            this.upTimer || (this.startTrackReportTask(),
            this.upTimer = window.setTimeout(()=>{
                this.upTimer = 0,
                this.loadTrackUp()
            }
            , 100))
        }
    }
    send(d, y, ye, ve, ie, ae) {
        if (d === "video_error") {
            if (this.videoErrorSymbol)
                return;
            this.videoErrorSymbol = !0
        }
        if (d === "quit") {
            if (this.videoQuitSymbol)
                return;
            this.videoQuitSymbol = !0
        }
        this.sendService(ve, d, y, ye, ie, ae)
    }
    trackInfoPush(d, y, ye) {
        var ve;
        if (!((ve = this.player.config.extraInfo.reportable) == null || ve))
            return;
        let ie = {
            ctime: +new Date,
            readyState: this.player.video ? this.player.video.readyState : 0
        };
        typeof y == "object" ? (ie = Object.assign(ie, y),
        this.trackInfoList.push({
            name: d,
            url: ie.url,
            ctime: ie.ctime,
            readyState: ie.readyState
        })) : (ie = Object.assign(ie, ye),
        this.trackInfoList.push({
            name: d,
            params: y,
            url: ie.url,
            ctime: ie.ctime,
            readyState: ie.readyState
        })),
        d === "quit" ? this.loadTrackUp(void 0, !0) : this.loadTrackUp()
    }
    pageReport(d, y, ye) {
        if (!(["pv", "click", "show"].indexOf(d) < 0) && window.reportConfig && window[window.reportConfig.msgObjects]) {
            (!ye || typeof ye == "object") && (ye = Object.assign(__spreadValues({
                screenStatus: this.player.state.mode === l.UI_NORMAL ? "half" : "full",
                playStatus: this.player.video && !this.player.video.paused ? "play" : "pause",
                fromTime: this.player.currentTime() || 0,
                avid: this.player.config.aid,
                cid: this.player.config.cid
            }, window.commonReportMsg || {}), ye),
            ye = JSON.stringify(ye));
            const ve = window[window.reportConfig.msgObjects];
            ve[d] = {
                event: y,
                value: ye
            },
            window.reportObserver && window.reportObserver.forceCommit()
        }
    }
    pageCustomReport(d, y) {
        if (window.reportConfig && window[window.reportConfig.msgObjects]) {
            const ye = window[window.reportConfig.msgObjects];
            ye[d] = y,
            window.reportObserver && window.reportObserver.forceCommit()
        }
    }
    destroy() {
        this.inited = !1,
        this.destroyed = !0,
        this.cdnBandWidthTimeId && window.clearInterval(this.cdnBandWidthTimeId),
        this.heartbeatId && clearInterval(this.heartbeatId),
        this.upTimer && clearTimeout(this.upTimer)
    }
    reset() {
        this.firstClick = !1,
        this.heartbeatId && clearInterval(this.heartbeatId),
        this.seek = {
            start: null,
            total: 0
        }
    }
}
class $r {
    constructor(d) {
        this.events = {}
    }
    on(d, y) {
        typeof y == "function" && (this.events[d] || (this.events[d] = []),
        this.events[d].push(y))
    }
    off(d, y) {
        if (typeof y == "function" && this.events[d])
            if (!y)
                this.events[d] = [];
            else {
                const ye = this.events[d].indexOf(y);
                ye > -1 && this.events[d].splice(ye, 1)
            }
    }
    one(d, y) {
        if (typeof y == "function") {
            this.events[d] || (this.events[d] = []);
            const ye = ve=>{
                y(ve),
                this.off(d, ye)
            }
            ;
            this.on(d, ye)
        }
    }
    trigger(d, y) {
        this.events[d] && this.events[d].length && [...this.events[d]].forEach(ye=>{
            ye(y)
        }
        )
    }
    destroy() {
        this.events = {}
    }
}
const Ji = Symbol("store-raw")
  , st = Symbol("store-node")
  , xr = Symbol("store-name");
function Xi(n, d) {
    let y = n[Ie];
    if (!y) {
        Object.defineProperty(n, Ie, {
            value: y = new Proxy(n,Vr)
        });
        const ye = Object.keys(n)
          , ve = Object.getOwnPropertyDescriptors(n);
        for (let ie = 0, ae = ye.length; ie < ae; ie++) {
            const i = ye[ie];
            if (ve[i].get) {
                const O = ve[i].get.bind(y);
                Object.defineProperty(n, i, {
                    get: O
                })
            }
        }
    }
    return y
}
function rt(n) {
    return n != null && typeof n == "object" && (n[Ie] || !n.__proto__ || n.__proto__ === Object.prototype || Array.isArray(n))
}
function nt(n, d=new Set) {
    let y, ye, ve, ie;
    if (y = n != null && n[Ji])
        return y;
    if (!rt(n) || d.has(n))
        return n;
    if (Array.isArray(n)) {
        Object.isFrozen(n) ? n = n.slice(0) : d.add(n);
        for (let ae = 0, i = n.length; ae < i; ae++)
            ve = n[ae],
            (ye = nt(ve, d)) !== ve && (n[ae] = ye)
    } else {
        Object.isFrozen(n) ? n = Object.assign({}, n) : d.add(n);
        const ae = Object.keys(n)
          , i = Object.getOwnPropertyDescriptors(n);
        for (let O = 0, $ = ae.length; O < $; O++)
            ie = ae[O],
            !i[ie].get && (ve = n[ie],
            (ye = nt(ve, d)) !== ve && (n[ie] = ye))
    }
    return n
}
function ot(n) {
    let d = n[st];
    return d || Object.defineProperty(n, st, {
        value: d = {}
    }),
    d
}
function Pr(n, d) {
    const y = Reflect.getOwnPropertyDescriptor(n, d);
    return !y || y.get || !y.configurable || d === Ie || d === st || d === xr || (delete y.value,
    delete y.writable,
    y.get = ()=>n[Ie][d]),
    y
}
function Rr(n) {
    if (hi()) {
        const d = ot(n);
        (d._ || (d._ = zt()))()
    }
    return Reflect.ownKeys(n)
}
function zt() {
    const [n,d] = P(void 0, {
        equals: !1,
        internal: !0
    });
    return n.$ = d,
    n
}
const Vr = {
    get(n, d, y) {
        if (d === Ji)
            return n;
        if (d === Ie)
            return y;
        const ye = n[d];
        if (d === st || d === "__proto__")
            return ye;
        const ve = rt(ye);
        if (hi() && (typeof ye != "function" || n.hasOwnProperty(d))) {
            let ie, ae;
            ve && (ie = ot(ye)) && (ae = ie._ || (ie._ = zt()),
            ae()),
            ie = ot(n),
            ae = ie[d] || (ie[d] = zt()),
            ae()
        }
        return ve ? Xi(ye) : ye
    },
    set() {
        return !0
    },
    deleteProperty() {
        return !0
    },
    ownKeys: Rr,
    getOwnPropertyDescriptor: Pr
};
function es(n, d, y) {
    if (n[d] === y)
        return;
    const ye = Array.isArray(n)
      , ve = n.length
      , ie = y === void 0
      , ae = ye || ie === d in n;
    ie ? delete n[d] : n[d] = y;
    let i = ot(n), O;
    (O = i[d]) && O.$(),
    ye && n.length !== ve && (O = i.length) && O.$(),
    ae && (O = i._) && O.$()
}
function Ur(n, d) {
    const y = Object.keys(d);
    for (let ye = 0; ye < y.length; ye += 1) {
        const ve = y[ye];
        es(n, ve, d[ve])
    }
}
function Fe(n, d, y=[]) {
    let ye, ve = n;
    if (d.length > 1) {
        ye = d.shift();
        const ae = typeof ye
          , i = Array.isArray(n);
        if (Array.isArray(ye)) {
            for (let O = 0; O < ye.length; O++)
                Fe(n, [ye[O]].concat(d), y);
            return
        } else if (i && ae === "function") {
            for (let O = 0; O < n.length; O++)
                ye(n[O], O) && Fe(n, [O].concat(d), y);
            return
        } else if (i && ae === "object") {
            const {from: O=0, to: $=n.length - 1, by: Te=1} = ye;
            for (let we = O; we <= $; we += Te)
                Fe(n, [we].concat(d), y);
            return
        } else if (d.length > 1) {
            Fe(n[ye], d, [ye].concat(y));
            return
        }
        ve = n[ye],
        y = [ye].concat(y)
    }
    let ie = d[0];
    typeof ie == "function" && (ie = ie(ve, y),
    ie === ve) || ye === void 0 && ie == null || (ie = nt(ie),
    ye === void 0 || rt(ve) && rt(ie) && !Array.isArray(ie) ? Ur(ve, ie) : es(n, ye, ie))
}
function Br(n, d) {
    const y = nt(n || {})
      , ye = Xi(y);
    function ve(...ie) {
        ui(()=>Fe(y, ie))
    }
    return [ye, ve]
}
const zr = ()=>{
    const n = document.body.scrollTop || document.documentElement.scrollTop;
    document.body.style.setProperty("position", "fixed"),
    document.body.style.setProperty("top", `-${n}px`),
    document.body.style.setProperty("overflow", "hidden")
}
  , jr = ()=>{
    const n = document.body.style.top;
    document.body.style.setProperty("position", ""),
    document.body.style.setProperty("top", ""),
    document.body.style.setProperty("overflow", ""),
    document.body.scrollTop = document.documentElement.scrollTop = -parseInt(n)
}
;
var Fr = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YnRuX3BsYXk8L3RpdGxlPgogICAgPGcgaWQ9ImJ0bl9wbGF5IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iaWNvbi0vLTQ0cHgtLy13ZWJfcGxheSI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNiIgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48L3JlY3Q+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04LjEwNjI1MTg1LDIuMzMzODA0NjggTDE5LjE1MDU1NTMsOS42NjY1NDcxOCBDMjAuNTMwODc2NywxMC41ODI5OTYyIDIwLjkwNjkxOTYsMTIuNDQ0ODk2NSAxOS45OTA0NzA1LDEzLjgyNTIxNzkgQzE5Ljc2OTI3NywxNC4xNTgzNzEzIDE5LjQ4MzcwODcsMTQuNDQzOTM5NiAxOS4xNTA1NTUzLDE0LjY2NTEzMzEgTDguMTA2MjUxODUsMjEuOTk3ODc1NiBDNy4xODYwMzc1OSwyMi42MDg4NDE3IDUuOTQ0NzcwNzEsMjIuMzU4MTQ2NCA1LjMzMzgwNDY4LDIxLjQzNzkzMjIgQzUuMTE2MTE1NDEsMjEuMTEwMDU2NyA1LDIwLjcyNTI0MjIgNSwyMC4zMzE2ODAzIEw1LDQgQzUsMi44OTU0MzA1IDUuODk1NDMwNSwyIDcsMiBDNy4zOTM1NjE4NiwyIDcuNzc4Mzc2MzksMi4xMTYxMTU0MSA4LjEwNjI1MTg1LDIuMzMzODA0NjggWiIgaWQ9IuW9oueKtue7k+WQiOWkh+S7vSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"
  , Gr = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YnRuX3BhdXNlPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjAiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PC9yZWN0PgogICAgPC9kZWZzPgogICAgPGcgaWQ9ImJ0bl9wYXVzZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Imljb24vNDRweC9wYXVzZSI+CiAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgPHVzZSBpZD0iciIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjUsMyBDNy42MDQ1Njk1LDMgOC41LDMuODk1NDMwNSA4LjUsNSBMOC41LDE5IEM4LjUsMjAuMTA0NTY5NSA3LjYwNDU2OTUsMjEgNi41LDIxIEM1LjM5NTQzMDUsMjEgNC41LDIwLjEwNDU2OTUgNC41LDE5IEw0LjUsNSBDNC41LDMuODk1NDMwNSA1LjM5NTQzMDUsMyA2LjUsMyBaIE0xNy41LDMgQzE4LjYwNDU2OTUsMyAxOS41LDMuODk1NDMwNSAxOS41LDUgTDE5LjUsMTkgQzE5LjUsMjAuMTA0NTY5NSAxOC42MDQ1Njk1LDIxIDE3LjUsMjEgQzE2LjM5NTQzMDUsMjEgMTUuNSwyMC4xMDQ1Njk1IDE1LjUsMTkgTDE1LjUsNSBDMTUuNSwzLjg5NTQzMDUgMTYuMzk1NDMwNSwzIDE3LjUsMyBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="
  , ts = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTIwcHgiIGhlaWdodD0iMTIwcHgiIHZpZXdCb3g9IjAgMCAxMjAgMTIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPmljb25fOTZweF9wYXVzZTwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNNjAsMTIgQzg2LjUwOTY2OCwxMiAxMDgsMzMuNDkwMzMyIDEwOCw2MCBDMTA4LDg2LjUwOTY2OCA4Ni41MDk2NjgsMTA4IDYwLDEwOCBDMzMuNDkwMzMyLDEwOCAxMiw4Ni41MDk2NjggMTIsNjAgQzEyLDMzLjQ5MDMzMiAzMy40OTAzMzIsMTIgNjAsMTIgWiBNNjAuNSwxNiBDMzUuOTIzMzI4NiwxNiAxNiwzNS45MjMzMjg2IDE2LDYwLjUgQzE2LDg1LjA3NjY3MTQgMzUuOTIzMzI4NiwxMDUgNjAuNSwxMDUgQzg1LjA3NjY3MTQsMTA1IDEwNSw4NS4wNzY2NzE0IDEwNSw2MC41IEMxMDUsMzUuOTIzMzI4NiA4NS4wNzY2NzE0LDE2IDYwLjUsMTYgWiBNNTAsMzkuNTAzMTMzMSBDNTEuMDk0NzUwMywzOS41MDMxMzMxIDUyLjE2ODYzNywzOS44MDI2NTEzIDUzLjEwNTM1Nyw0MC4zNjkyNDk3IEw3NC4yNDIxNDkyLDUzLjE1NDM2NDIgQzc4LjAyMjYzNjUsNTUuNDQxMDg1OSA3OS4yMzM1NzI3LDYwLjM1OTUzMDYgNzYuOTQ2ODUwOSw2NC4xNDAwMTc5IEM3Ni4yNzcyNTAyLDY1LjI0NzAyNSA3NS4zNDkxNTYzLDY2LjE3NTExODkgNzQuMjQyMTQ5Miw2Ni44NDQ3MTk3IEw1My4xMDUzNTcsNzkuNjI5ODM0MSBDNTAuMjY5OTkxNSw4MS4zNDQ4NzU0IDQ2LjU4MTE1OCw4MC40MzY2NzMyIDQ0Ljg2NjExNjcsNzcuNjAxMzA3OCBDNDQuMjk5NTE4Myw3Ni42NjQ1ODc4IDQ0LDc1LjU5MDcwMSA0NCw3NC40OTU5NTA4IEw0NCw0NS41MDMxMzMxIEM0NCw0Mi4xODk0MjQ2IDQ2LjY4NjI5MTUsMzkuNTAzMTMzMSA1MCwzOS41MDMxMzMxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii0yMS45JSIgeT0iLTIxLjklIiB3aWR0aD0iMTQzLjglIiBoZWlnaHQ9IjE0My44JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI2IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjMgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Imljb25fOTZweF9wYXVzZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Imljb25fOTZweF93ZWJfcGxheSI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJwbGF5OTZweGJnIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCI+PC9yZWN0PgogICAgICAgICAgICA8ZyBpZD0i5b2i54q257uT5ZCIIj4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0yKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="
  , Hr = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDRweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNDQgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+QDF4aWNvbi80NHB4L2Nsb3NlPC90aXRsZT4KICAgIDxnIGlkPSJpY29uLzQ0cHgvY2xvc2UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCI+PC9yZWN0PgogICAgICAgIDxwYXRoIGQ9Ik0xNi4wODA0NDkyLDE1LjEzMjgyMDkgTDE2LjE1NjQyNzIsMTUuMTk4NDExNSBMMjIsMjEuMDQxNjc3NCBMMjcuODQzNTcyOCwxNS4xOTg0MTE1IEMyOC4xMDgxMjE1LDE0LjkzMzg2MjggMjguNTM3MDM5OCwxNC45MzM4NjI4IDI4LjgwMTU4ODUsMTUuMTk4NDExNSBDMjkuMDQyMDg3MywxNS40Mzg5MTA0IDI5LjA2Mzk1MDgsMTUuODE1MjUxOCAyOC44NjcxNzkxLDE2LjA4MDQ0OTIgTDI4LjgwMTU4ODUsMTYuMTU2NDI3MiBMMjIuOTU4MzIyNiwyMiBMMjguODAxNTg4NSwyNy44NDM1NzI4IEMyOS4wNjYxMzcyLDI4LjEwODEyMTUgMjkuMDY2MTM3MiwyOC41MzcwMzk4IDI4LjgwMTU4ODUsMjguODAxNTg4NSBDMjguNTYxMDg5NiwyOS4wNDIwODczIDI4LjE4NDc0ODIsMjkuMDYzOTUwOCAyNy45MTk1NTA4LDI4Ljg2NzE3OTEgTDI3Ljg0MzU3MjgsMjguODAxNTg4NSBMMjIsMjIuOTU4MzIyNiBMMTYuMTU2NDI3MiwyOC44MDE1ODg1IEMxNS44OTE4Nzg1LDI5LjA2NjEzNzIgMTUuNDYyOTYwMiwyOS4wNjYxMzcyIDE1LjE5ODQxMTUsMjguODAxNTg4NSBDMTQuOTU3OTEyNywyOC41NjEwODk2IDE0LjkzNjA0OTIsMjguMTg0NzQ4MiAxNS4xMzI4MjA5LDI3LjkxOTU1MDggTDE1LjE5ODQxMTUsMjcuODQzNTcyOCBMMjEuMDQxNjc3NCwyMiBMMTUuMTk4NDExNSwxNi4xNTY0MjcyIEMxNC45MzM4NjI4LDE1Ljg5MTg3ODUgMTQuOTMzODYyOCwxNS40NjI5NjAyIDE1LjE5ODQxMTUsMTUuMTk4NDExNSBDMTUuNDEyMTg4MywxNC45ODQ2MzQ4IDE1LjczMzI5NzQsMTQuOTQzNjA2OSAxNS45ODgyNzI0LDE1LjA3NTMyOCBMMTYuMDgwNDQ5MiwxNS4xMzI4MjA5IFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="
  , Qr = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbiAvIDQ4cHggLyBwYXVzZTwvdGl0bGU+CiAgICA8ZyBpZD0iaWNvbi0vLTQ4cHgtLy1wYXVzZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHJlY3QgaWQ9IjQ4YmciIHg9IjAiIHk9IjAiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PC9yZWN0PgogICAgICAgIDxwYXRoIGQ9Ik0yNCwwIEMzNy4yNTQ4MzQsMCA0OCwxMC43NDUxNjYgNDgsMjQgQzQ4LDM3LjI1NDgzNCAzNy4yNTQ4MzQsNDggMjQsNDggQzEwLjc0NTE2Niw0OCAwLDM3LjI1NDgzNCAwLDI0IEMwLDEwLjc0NTE2NiAxMC43NDUxNjYsMCAyNCwwIFogTTI0LDIgQzExLjg0OTczNTUsMiAyLDExLjg0OTczNTUgMiwyNCBDMiwzNi4xNTAyNjQ1IDExLjg0OTczNTUsNDYgMjQsNDYgQzM2LjE1MDI2NDUsNDYgNDYsMzYuMTUwMjY0NSA0NiwyNCBDNDYsMTEuODQ5NzM1NSAzNi4xNTAyNjQ1LDIgMjQsMiBaIE0xNy41LDE0IEMxOC44ODA3MTE5LDE0IDIwLDE1LjExOTI4ODEgMjAsMTYuNSBMMjAsMzEuNSBDMjAsMzIuODgwNzExOSAxOC44ODA3MTE5LDM0IDE3LjUsMzQgQzE2LjExOTI4ODEsMzQgMTUsMzIuODgwNzExOSAxNSwzMS41IEwxNSwxNi41IEMxNSwxNS4xMTkyODgxIDE2LjExOTI4ODEsMTQgMTcuNSwxNCBaIE0zMC41LDE0IEMzMS44ODA3MTE5LDE0IDMzLDE1LjExOTI4ODEgMzMsMTYuNSBMMzMsMzEuNSBDMzMsMzIuODgwNzExOSAzMS44ODA3MTE5LDM0IDMwLjUsMzQgQzI5LjExOTI4ODEsMzQgMjgsMzIuODgwNzExOSAyOCwzMS41IEwyOCwxNi41IEMyOCwxNS4xMTkyODgxIDI5LjExOTI4ODEsMTQgMzAuNSwxNCBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="
  , is = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbiAvIDQ4cHggLyBwbGF5PC90aXRsZT4KICAgIDxnIGlkPSJpY29uLS8tNDhweC0vLXBsYXkiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IGlkPSJwbGF5ODhweGJnIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMjQsMCBDMzcuMjU0ODM0LDAgNDgsMTAuNzQ1MTY2IDQ4LDI0IEM0OCwzNy4yNTQ4MzQgMzcuMjU0ODM0LDQ4IDI0LDQ4IEMxMC43NDUxNjYsNDggMCwzNy4yNTQ4MzQgMCwyNCBDMCwxMC43NDUxNjYgMTAuNzQ1MTY2LDAgMjQsMCBaIE0yNCwyIEMxMS44NDk3MzU1LDIgMiwxMS44NDk3MzU1IDIsMjQgQzIsMzYuMTUwMjY0NSAxMS44NDk3MzU1LDQ2IDI0LDQ2IEMzNi4xNTAyNjQ1LDQ2IDQ2LDM2LjE1MDI2NDUgNDYsMjQgQzQ2LDExLjg0OTczNTUgMzYuMTUwMjY0NSwyIDI0LDIgWiBNMjAsMTMuNzQ5NTkwMyBDMjAuODE0Mjc4MiwxMy43NDk1OTAzIDIxLjYwOTE2MjcsMTMuOTk4MTA0NyAyMi4yNzg0MzE1LDE0LjQ2MTkyNCBMMzIuMDE4Mjg2LDIxLjIxMTg3NjUgQzMzLjgzNDAxNCwyMi40NzAyMTk1IDM0LjI4NTg2MzgsMjQuOTYyMjQ2NCAzMy4wMjc1MjA4LDI2Ljc3Nzk3NDMgQzMyLjc1NDMzMzksMjcuMTcyMTY5OCAzMi40MTI0ODE0LDI3LjUxNDAyMjMgMzIuMDE4Mjg2LDI3Ljc4NzIwOTEgTDIyLjI3ODQzMTUsMzQuNTM3MTYxNiBDMjAuNDYyNzAzNiwzNS43OTU1MDQ2IDE3Ljk3MDY3NjcsMzUuMzQzNjU0OCAxNi43MTIzMzM3LDMzLjUyNzkyNjkgQzE2LjI0ODUxNDQsMzIuODU4NjU4MSAxNiwzMi4wNjM3NzM2IDE2LDMxLjI0OTQ5NTMgTDE2LDE3Ljc0OTU5MDMgQzE2LDE1LjU0MDQ1MTMgMTcuNzkwODYxLDEzLjc0OTU5MDMgMjAsMTMuNzQ5NTkwMyBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="
  , jt = (n=>(n.MuteNoticeKey = "mute-notice-time",
n))(jt || {});
const ss = n=>({
    set: d=>{
        const y = typeof d != "string" ? JSON.stringify(d) : d;
        window.localStorage.setItem(n, y)
    }
    ,
    get: ()=>window.localStorage.getItem(n)
})
  , ke = ()=>{
    const [n,d] = P(!1)
      , y = Vs();
    let ye = null
      , ve = null;
    const ie = (i,O=!1)=>{
        if (i)
            ae(!0),
            ye = setTimeout(()=>{
                fi(y, ()=>{
                    d(!0)
                }
                )
            }
            , 300);
        else {
            if (O) {
                ye && clearTimeout(ye),
                ve && (clearTimeout(ve),
                ve = null),
                d(!1);
                return
            }
            ve = setTimeout(()=>{
                fi(y, ()=>{
                    ae()
                }
                )
            }
            , 300)
        }
    }
      , ae = i=>{
        ye && clearTimeout(ye),
        ve && (clearTimeout(ve),
        ve = null,
        i || d(!1))
    }
    ;
    return R(()=>{
        ye && (ye = null,
        clearTimeout(ye)),
        ve && (ve = null,
        clearTimeout(ve))
    }
    ),
    [n, ie]
}
  , Yr = T('<div class="ip-tooltip"><div class="ip-tooltip--placeholder"></div><div></div></div>')
  , at = n=>{
    const [d,y] = ke()
      , ye = ()=>{
        n.isH5 || y(!0)
    }
      , ve = ()=>{
        n.isH5 || y(!1)
    }
    ;
    return (()=>{
        const ie = Yr.cloneNode(!0)
          , ae = ie.firstChild
          , i = ae.nextSibling;
        ie.addEventListener("mouseleave", ve),
        ie.addEventListener("mouseenter", ye),
        p(ae, ()=>n.renderPlaceHolder());
        const O = n.ref;
        return typeof O == "function" ? O(i) : n.ref = i,
        p(i, ()=>n.children),
        D($=>{
            const Te = d()
              , we = n.isH5
              , Re = {
                "ip-tooltip--wrap": !0,
                "ip-tooltip--wrap-ellipsis": n.ellipsis,
                [`ip-tooltip--wrap-${n.direction}`]: !0
            };
            return Te !== $._v$ && ie.classList.toggle("show", $._v$ = Te),
            we !== $._v$2 && ie.classList.toggle("ip-tooltip-h5", $._v$2 = we),
            $._v$3 = S(i, Re, $._v$3),
            $
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0
        }),
        ie
    }
    )()
}
  , Wr = T('<div class="ip-next-episode"></div>')
  , rs = function(n) {
    let d;
    const y = n.player;
    W(()=>{
        !n.hasNext || (setTimeout(()=>{
            ye()
        }
        , 0),
        window.addEventListener("resize", ye))
    }
    ),
    R(()=>{
        !n.hasNext || window.removeEventListener("resize", ye)
    }
    );
    const ye = debounce(50, ()=>{
        Ee(d, y.template.display, "top-start")
    }
    )
      , ve = {
        direction: "top",
        isH5: n.isH5,
        ellipsis: !0,
        renderPlaceHolder: ()=>(()=>{
            const ie = Wr.cloneNode(!0);
            return te(ie, "click", n.onClick, !0),
            D(ae=>{
                const i = n.isH5
                  , O = n.disabled;
                return i !== ae._v$ && ie.classList.toggle("ip-next-episode-h5", ae._v$ = i),
                O !== ae._v$2 && ie.classList.toggle("disabled", ae._v$2 = O),
                ae
            }
            , {
                _v$: void 0,
                _v$2: void 0
            }),
            ie
        }
        )()
    };
    return n.hasNext ? _(at, de(ve, {
        ref(ie) {
            const ae = d;
            typeof ae == "function" ? ae(ie) : d = ie
        },
        get children() {
            return n.tip
        }
    })) : null
};
Z(["click"]);
const Zr = T('<div class="ip-dropdown"><div class="ip-dropdown--placeholder"></div><div class="ip-dropdown--wrap"><div class="ip-dropdown--content"></div></div></div>')
  , Ge = n=>{
    const d = {
        width: "auto"
    }
      , [y,ye] = P(0)
      , ve = debounce(50, ()=>{
        const O = document.querySelector(".player-mobile-display");
        if (!O)
            return;
        const {height: $} = O.getBoundingClientRect()
          , Te = 16 + (window.innerWidth >= 1920 ? 82 : 64);
        ye(()=>$ - Te)
    }
    )
      , ie = H(()=>({
        "max-height": y() > 0 ? `${y()}px` : "fit-content"
    }));
    W(()=>{
        n.isH5 || (setTimeout(()=>{
            ve()
        }
        , 0),
        window.addEventListener("resize", ve))
    }
    ),
    R(()=>{
        n.isH5 || window.removeEventListener("resize", ve)
    }
    );
    const ae = ()=>{
        n.isH5 || n.show()
    }
      , i = ()=>{
        n.isH5 || n.hide()
    }
    ;
    return (()=>{
        const O = Zr.cloneNode(!0)
          , $ = O.firstChild
          , Te = $.nextSibling
          , we = Te.firstChild;
        O.addEventListener("mouseleave", ()=>{
            i()
        }
        ),
        O.addEventListener("mouseenter", ()=>{
            ae()
        }
        ),
        p($, ()=>n.renderPlaceHolder());
        const Re = n.ref;
        return typeof Re == "function" ? Re(Te) : n.ref = Te,
        De(we, d),
        p(we, ()=>n.children),
        D(Ye=>{
            const _t = n.visible
              , Jt = n.isH5
              , bt = ie();
            return _t !== Ye._v$ && O.classList.toggle("show", Ye._v$ = _t),
            Jt !== Ye._v$2 && O.classList.toggle("ip-dropdown-h5", Ye._v$2 = Jt),
            Ye._v$3 = De(Te, bt, Ye._v$3),
            Ye
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0
        }),
        O
    }
    )()
}
  , qr = T('<div class="ip-speedList-placeholder"></div>')
  , Kr = T('<ul class="ip-speedList"></ul>')
  , Jr = T("<div>Loading...</div>")
  , Xr = T("<li>X</li>")
  , en = ["0.5", "0.75", "1.0", "1.25", "1.5", "2.0"].reverse()
  , ns = n=>{
    var d;
    let y;
    const ye = n.player
      , [ve,ie] = P("")
      , [ae,i] = ke();
    pe(()=>{
        ie(`${n.speed}X`)
    }
    );
    const O = (d = n.rateList) != null ? d : en;
    W(()=>{
        n.isH5 || (setTimeout(()=>{
            $()
        }
        , 0),
        window.addEventListener("resize", $))
    }
    );
    const $ = debounce(50, ()=>{
        Ee(y, ye.template.display, "top-end")
    }
    );
    R(()=>{
        n.isH5 || window.removeEventListener("resize", $)
    }
    );
    const Te = Ye=>{
        i(!1, !0),
        n.onSpeedChange(Ye)
    }
      , we = ()=>{
        !n.isH5 || n.onShowDrawer()
    }
      , Re = {
        isH5: n.isH5,
        hide: ()=>{
            i(!1)
        }
        ,
        show: ()=>{
            n.isH5 || (i(!0),
            ae() || ye.trigger(l.EVENT.SPEED_FLOATING_LAYER_SHOW))
        }
        ,
        renderPlaceHolder: ()=>(()=>{
            const Ye = qr.cloneNode(!0);
            return Ye.$$touchend = we,
            p(Ye, ve),
            Ye
        }
        )()
    };
    return _(Ge, de(Re, {
        ref(Ye) {
            const _t = y;
            typeof _t == "function" ? _t(Ye) : y = Ye
        },
        get visible() {
            return ae()
        },
        get children() {
            const Ye = Kr.cloneNode(!0);
            return p(Ye, _(se, {
                each: O,
                get fallback() {
                    return Jr.cloneNode(!0)
                },
                children: _t=>(()=>{
                    const Jt = Xr.cloneNode(!0)
                      , bt = Jt.firstChild;
                    return Jt.$$click = ()=>{
                        Te(_t)
                    }
                    ,
                    p(Jt, _t, bt),
                    D(()=>Jt.className = `ip-speedList--item ${_t === n.speed ? " active" : ""}`),
                    Jt
                }
                )()
            })),
            Ye
        }
    }))
}
;
Z(["touchend", "click"]);
const C = {
    playTip: "Play(space)",
    pauseTip: "Pause(space)",
    fullscreenTip: "Full Screen(f)",
    closeFullscreenTip: "Exit full screen(f)",
    closeSubtitle: "Closed",
    wideScreenTip: "Theater Mode",
    closeWideSceenTip: "Exit Theater Mode",
    nextEpTip: "Next episode",
    nextEpTooltip: "Next episode(shift+n)",
    report: "Report",
    ccReport: "Subtitle feedback",
    speed: "speed",
    quality: "quality",
    ccTitle: "subtitle",
    changingQuality: "changing quality...",
    changeQualitySuccess: "change quality success",
    changeQualityFail: "change quality fail",
    skipTo: "Skip to",
    emptySubtitleTip: "No subtitles available",
    cancel: "cancel",
    tapToUnmute: "Tap to unmute(m)",
    danmakuSend: "Send",
    danmakuOn: "Flying Comment On",
    danmakuOff: "Flying Comment Off",
    danmakuPlaceholder: "Tap here and send flying comment",
    danmakuFequently: "Flying comments are sent too frequently",
    danmakuClosedToast: "Flying comments are disabled",
    danmakuSwitchOffToast: "Failed to send. Flying comment is off.",
    skipLabel: "Skip the Intro/Outro",
    skipingOp: "Skipping the intro",
    skipedOp: "Intro skipped",
    skipingEd: "Skipping the outro",
    skipedEd: "Outro skipped",
    adsPremiumBtn: "Premium skip ads"
}
  , tn = T('<div class="ip-subtitle-icon--disabled"></div>')
  , sn = T('<div class="ip-subtitle-icon"></div>')
  , os = T("<li></li>")
  , rn = T('<ul class="ip-subtitle"></ul>')
  , nn = T("<div>Loading...</div>")
  , on = T('<li class="ip-subtitle--item ip-subtitle--item__feedback"></li>')
  , as = n=>{
    let d, y;
    const ye = n.player
      , [ve,ie] = ke();
    W(()=>{
        n.isH5 || (setTimeout(()=>{
            O()
        }
        , 0),
        window.addEventListener("resize", O),
        ye.bind(l.EVENT.VIDEO_CONTROLBAR, we))
    }
    );
    const ae = H(()=>n.list.length === 0)
      , i = ()=>{
        var Jt;
        return ((Jt = n.player.config.i18n) == null ? void 0 : Jt.closeSubtitle) || C.closeSubtitle
    }
      , O = debounce(50, ()=>{
        const Jt = ae() ? y : d;
        Ee(Jt, ye.template.display, "top-end")
    }
    )
      , $ = ()=>{
        !n.isH5 || n.onShowDrawer()
    }
      , Te = ()=>{
        n.onCCReport()
    }
      , we = Jt=>{
        Jt.show || ie(!1)
    }
    ;
    R(()=>{
        n.isH5 || (window.removeEventListener("resize", O),
        ye.unbind(l.EVENT.VIDEO_CONTROLBAR, we))
    }
    );
    const Re = {
        direction: "top",
        renderPlaceHolder: ()=>tn.cloneNode(!0)
    }
      , Ye = {
        isH5: n.isH5,
        hide: ()=>{
            ie(!1)
        }
        ,
        show: ()=>{
            n.isH5 || (ie(!0),
            ve() || ye.trigger(l.EVENT.CAPTION_SETTING_LAYER_SHOW))
        }
        ,
        renderPlaceHolder: ()=>(()=>{
            const Jt = sn.cloneNode(!0);
            return Jt.$$touchend = $,
            D(()=>Jt.classList.toggle("ip-subtitle-icon-h5", n.isH5)),
            Jt
        }
        )()
    }
      , _t = (Jt,bt)=>{
        n.onClick({
            lang: Jt,
            url: bt
        })
    }
    ;
    return _(_i, {
        get children() {
            return [_(Je, {
                get when() {
                    return ae()
                },
                get children() {
                    return _(at, de(Re, {
                        ref(Jt) {
                            const bt = y;
                            typeof bt == "function" ? bt(Jt) : y = Jt
                        },
                        get children() {
                            var Jt, bt;
                            return (bt = (Jt = ye.config.i18n) == null ? void 0 : Jt.emptySubtitleTip) != null ? bt : C.emptySubtitleTip
                        }
                    }))
                }
            }), _(Je, {
                get when() {
                    return !ae()
                },
                get children() {
                    return _(Ge, de(Ye, {
                        get visible() {
                            return ve()
                        },
                        ref(Jt) {
                            const bt = d;
                            typeof bt == "function" ? bt(Jt) : d = Jt
                        },
                        get children() {
                            const Jt = rn.cloneNode(!0);
                            return p(Jt, _(Q, {
                                get when() {
                                    return n.closeable
                                },
                                get children() {
                                    const bt = os.cloneNode(!0);
                                    return bt.$$click = ()=>n.onClose(),
                                    p(bt, i),
                                    D(()=>bt.className = `ip-subtitle--item ${n.closed ? " active" : ""}`),
                                    bt
                                }
                            }), null),
                            p(Jt, _(se, {
                                get each() {
                                    return n.list
                                },
                                get fallback() {
                                    return nn.cloneNode(!0)
                                },
                                children: bt=>(()=>{
                                    const ai = os.cloneNode(!0);
                                    return ai.$$click = ()=>{
                                        _t(bt.key, bt.url)
                                    }
                                    ,
                                    p(ai, ()=>bt.title),
                                    D(()=>ai.className = `ip-subtitle--item ${bt.key === n.lang && !n.closed ? " active" : ""}`),
                                    ai
                                }
                                )()
                            }), null),
                            p(Jt, (()=>{
                                const bt = V(()=>!!n.feedbackable, !0);
                                return ()=>bt() && (()=>{
                                    const ai = on.cloneNode(!0);
                                    return ai.$$click = ()=>{
                                        Te()
                                    }
                                    ,
                                    p(ai, ()=>{
                                        var ii, da;
                                        return (da = (ii = ye.config.i18n) == null ? void 0 : ii.ccReport) != null ? da : C.ccReport
                                    }
                                    ),
                                    ai
                                }
                                )()
                            }
                            )(), null),
                            Jt
                        }
                    }))
                }
            })]
        }
    })
}
;
Z(["touchend", "click"]);
const an = T('<span class="ip-quality-placeholder"></span>')
  , ln = T('<ul class="ip-quality"></ul>')
  , dn = T("<div>Loading...</div>")
  , cn = T('<li><span class="ip-quality-item--label"></span><span></span></li>')
  , ls = n=>{
    let d;
    const y = n.player
      , [ye,ve] = ke()
      , [ie,ae] = P("");
    W(()=>{
        n.isH5 || (setTimeout(()=>{
            i()
        }
        , 0),
        window.addEventListener("resize", i))
    }
    );
    const i = debounce(50, ()=>{
        Ee(d, y.template.display, "top-end")
    }
    )
      , O = ()=>{
        !n.isH5 || (n == null || n.onShowDrawer())
    }
    ;
    R(()=>{
        n.isH5 || window.removeEventListener("resize", i)
    }
    );
    const $ = {
        isH5: n.isH5,
        hide: ()=>{
            ve(!1)
        }
        ,
        show: ()=>{
            n.isH5 || (ve(!0),
            ye() || y.trigger(l.EVENT.QUALITY_FLOATING_LAYER_SHOW))
        }
        ,
        renderPlaceHolder: ()=>(()=>{
            const we = an.cloneNode(!0);
            return we.$$touchend = O,
            p(we, ie),
            we
        }
        )()
    };
    ci(me(()=>n.quality, we=>{
        ae(()=>{
            var Re;
            return (Re = n.qualityList.find(Ye=>Ye.value === we)) == null ? void 0 : Re.label
        }
        )
    }
    ));
    const Te = (we,Re)=>{
        ve(!1),
        n.onClick(we, Re)
    }
    ;
    return _(Ge, de($, {
        get visible() {
            return ye()
        },
        ref(we) {
            const Re = d;
            typeof Re == "function" ? Re(we) : d = we
        },
        get children() {
            const we = ln.cloneNode(!0);
            return p(we, _(se, {
                get each() {
                    return n.qualityList
                },
                get fallback() {
                    return dn.cloneNode(!0)
                },
                children: Re=>(()=>{
                    const Ye = cn.cloneNode(!0)
                      , _t = Ye.firstChild
                      , Jt = _t.nextSibling;
                    return Ye.$$click = ()=>{
                        Te(Re.value, Re.tagType)
                    }
                    ,
                    p(_t, ()=>Re.label),
                    D(bt=>{
                        const ai = `ip-quality--item ${Re.value === n.quality ? " active" : ""}`
                          , ii = !!Re.tag
                          , da = Re.tagType === "premium"
                          , aa = Re.tagType === "normal";
                        return ai !== bt._v$ && (Ye.className = bt._v$ = ai),
                        ii !== bt._v$2 && Jt.classList.toggle("ip-quality-tag", bt._v$2 = ii),
                        da !== bt._v$3 && Jt.classList.toggle("ip-quality-tag--premium", bt._v$3 = da),
                        aa !== bt._v$4 && Jt.classList.toggle("ip-quality-tag--login", bt._v$4 = aa),
                        bt
                    }
                    , {
                        _v$: void 0,
                        _v$2: void 0,
                        _v$3: void 0,
                        _v$4: void 0
                    }),
                    Ye
                }
                )()
            })),
            we
        }
    }))
}
;
Z(["touchend", "click"]);
const un = T('<div class="IpDrawer-mask"></div>')
  , hn = T('<div class="IpDrawer"></div>')
  , fn = T('<div class="IpDrawer-outer__mask"></div>')
  , gn = T('<div class="IpDrawer-outer"><section class="IpDrawer-outer__content"></section><div class="IpDrawer-outer__btns"></div></div>')
  , Ft = n=>{
    const d = y=>{
        y.cancelable && y.preventDefault(),
        setTimeout(()=>{
            n.onClose()
        }
        , 200)
    }
    ;
    return _(_i, {
        get children() {
            return [_(Je, {
                get when() {
                    return n.type === "inner"
                },
                get children() {
                    return [_(Q, {
                        get when() {
                            return n.visible
                        },
                        get children() {
                            const y = un.cloneNode(!0);
                            return y.$$touchend = d,
                            y.$$mouseup = d,
                            y
                        }
                    }), (()=>{
                        const y = hn.cloneNode(!0);
                        return p(y, ()=>n.children),
                        D(ye=>{
                            const ve = !n.visible
                              , ie = `${n.maxHeight}px`;
                            return ve !== ye._v$ && y.classList.toggle("IpDrawer--hidden", ye._v$ = ve),
                            ie !== ye._v$2 && y.style.setProperty("max-height", ye._v$2 = ie),
                            ye
                        }
                        , {
                            _v$: void 0,
                            _v$2: void 0
                        }),
                        y
                    }
                    )()]
                }
            }), _(Je, {
                get when() {
                    return n.type === "outer"
                },
                get children() {
                    return _(Xs, {
                        get mount() {
                            return document.body
                        },
                        get children() {
                            return [(()=>{
                                const y = fn.cloneNode(!0);
                                return y.$$touchend = d,
                                D(()=>y.classList.toggle("IpDrawer-outer__mask--active", n.visible)),
                                y
                            }
                            )(), (()=>{
                                const y = gn.cloneNode(!0)
                                  , ye = y.firstChild
                                  , ve = ye.nextSibling;
                                return p(ye, ()=>n.children),
                                ve.$$touchend = d,
                                p(ve, ()=>n.cancelText || C.cancel),
                                D(()=>y.classList.toggle("IpDrawer-outer--active", n.visible)),
                                y
                            }
                            )()]
                        }
                    })
                }
            })]
        }
    })
}
;
Z(["mouseup", "touchend"]);
const pn = T('<div class="IpDialog"><div class="IpDialog__header"><span class="IpDialog__header-title"></span><span class="IpDialog__header-close"></span></div><div class="IpDialog__content"></div></div>')
  , mn = T('<div class="IpDialog-mask"></div>')
  , Gt = n=>{
    const d = y=>{
        y.cancelable && y.preventDefault(),
        n.onClose()
    }
    ;
    return [V((()=>{
        const y = V(()=>!!n.visible, !0);
        return ()=>y() && (()=>{
            const ye = mn.cloneNode(!0);
            return ye.$$touchend = d,
            ye.$$mousedown = d,
            ye
        }
        )()
    }
    )()), (()=>{
        const y = pn.cloneNode(!0)
          , ye = y.firstChild
          , ve = ye.firstChild
          , ie = ve.nextSibling
          , ae = ye.nextSibling;
        return p(ve, ()=>n.title),
        ie.$$touchend = d,
        ie.$$mousedown = d,
        p(ae, ()=>n.children),
        D(()=>y.classList.toggle("IpDialog--hidden", !n.visible)),
        y
    }
    )()]
}
;
Z(["mousedown", "touchend"]);
const Ht = ()=>{
    const [n,d] = P(!1);
    return {
        touchMoveFlag: n,
        setTouchMoveFlag: d,
        setFlag: ()=>{
            n() || d(!0)
        }
    }
}
  , yn = T("<div></div>")
  , En = T('<main class="ip-speedList-mobile-dialog__container"><div class="ip-speedList-mobile-dialog__content"></div></main>')
  , ds = T("<div>Loading...</div>")
  , cs = T("<p>X</p>")
  , _n = ["0.5", "0.75", "1.0", "1.25", "1.5", "2.0"].reverse()
  , vn = n=>{
    var d;
    const y = (d = n.rateList) != null ? d : _n
      , [ye,ve] = P("")
      , {touchMoveFlag: ie, setFlag: ae, setTouchMoveFlag: i} = Ht();
    pe(me(()=>n.visible, we=>{
        var Re;
        if (!we) {
            ve("");
            return
        }
        [0, 180].includes((Re = window.orientation) != null ? Re : 0) ? ve("drawer") : ve("dialog")
    }
    )),
    W(()=>{
        window.addEventListener("resize", $),
        document.addEventListener("fullscreenchange", O),
        document.addEventListener("webkitendfullscreen", O)
    }
    );
    const O = ()=>{
        n.onClose()
    }
      , $ = ()=>{
        var we, Re;
        if (ye()) {
            if ([0, 180].includes((we = window.orientation) != null ? we : 0)) {
                ve("drawer");
                return
            }
            if ([90, -90].includes((Re = window.orientation) != null ? Re : 0)) {
                ve("dialog");
                return
            }
        }
    }
      , Te = we=>{
        if (ie()) {
            i(!1);
            return
        }
        n.onSpeedChange(we),
        n.onClose()
    }
    ;
    return R(()=>{
        window.removeEventListener("resize", $),
        document.removeEventListener("fullscreenchange", O),
        document.removeEventListener("webkitendfullscreen", O)
    }
    ),
    [_(Ft, {
        get visible() {
            return ye() === "drawer"
        },
        maxHeight: 252,
        get type() {
            return n.drawerType
        },
        get onClose() {
            return n.onClose
        },
        get children() {
            const we = yn.cloneNode(!0);
            return p(we, _(se, {
                each: y,
                get fallback() {
                    return ds.cloneNode(!0)
                },
                children: Re=>(()=>{
                    const Ye = cs.cloneNode(!0)
                      , _t = Ye.firstChild;
                    return Ye.$$touchend = ()=>{
                        Te(Re)
                    }
                    ,
                    te(Ye, "touchmove", ae, !0),
                    p(Ye, Re, _t),
                    D(Jt=>S(Ye, {
                        ["ip-speedList-mobile--item"]: !0,
                        ["ip-speedList-mobile--item-drawer"]: !0,
                        [`ip-speedList-mobile--item-drawer--${n.drawerType}`]: !0,
                        active: Re === n.speed
                    }, Jt)),
                    Ye
                }
                )()
            })),
            we
        }
    }), _(Gt, {
        get title() {
            return n.title
        },
        get visible() {
            return ye() === "dialog"
        },
        get onClose() {
            return n.onClose
        },
        get children() {
            const we = En.cloneNode(!0)
              , Re = we.firstChild;
            return p(Re, _(se, {
                each: y,
                get fallback() {
                    return ds.cloneNode(!0)
                },
                children: Ye=>(()=>{
                    const _t = cs.cloneNode(!0)
                      , Jt = _t.firstChild;
                    return _t.$$touchend = ()=>{
                        Te(Ye)
                    }
                    ,
                    te(_t, "touchmove", ae, !0),
                    p(_t, Ye, Jt),
                    D(bt=>S(_t, {
                        ["ip-speedList-mobile--item"]: !0,
                        ["ip-speedList-mobile--item-dialog"]: !0,
                        active: Ye === n.speed
                    }, bt)),
                    _t
                }
                )()
            })),
            we
        }
    })]
}
;
Z(["touchmove", "touchend"]);
const Oe = T("<p></p>")
  , In = T("<div></div>")
  , bn = T('<main class="ip-subtitle-mobile-dialog__container"><div class="ip-subtitle-mobile-dialog__content"></div></main>')
  , us = T("<div>Loading...</div>")
  , Tn = n=>{
    const [d,y] = P("")
      , {touchMoveFlag: ye, setFlag: ve, setTouchMoveFlag: ie} = Ht();
    pe(me(()=>n.visible, Re=>{
        var Ye;
        if (!Re) {
            y("");
            return
        }
        [0, 180].includes((Ye = window.orientation) != null ? Ye : 0) ? y("drawer") : y("dialog")
    }
    )),
    W(()=>{
        window.addEventListener("resize", i),
        document.removeEventListener("fullscreenchange", ae),
        document.removeEventListener("webkitendfullscreen", ae)
    }
    );
    const ae = ()=>{
        n.onClose()
    }
      , i = ()=>{
        var Re, Ye;
        if (d()) {
            if ([0, 180].includes((Re = window.orientation) != null ? Re : 0)) {
                y("drawer");
                return
            }
            if ([90, -90].includes((Ye = window.orientation) != null ? Ye : 0)) {
                y("dialog");
                return
            }
        }
    }
      , O = (Re,Ye)=>{
        if (ye()) {
            ie(!1);
            return
        }
        n.onClick({
            lang: Re,
            url: Ye
        }),
        n.onClose()
    }
      , $ = ()=>{
        if (ye()) {
            ie(!1);
            return
        }
        n.onCloseSubtitle(),
        n.onClose()
    }
      , Te = ()=>{
        n.onCCReport()
    }
      , we = ()=>{
        var Re;
        return ((Re = n.player.config.i18n) == null ? void 0 : Re.closeSubtitle) || C.closeSubtitle
    }
    ;
    return R(()=>{
        window.removeEventListener("resize", i),
        document.removeEventListener("fullscreenchange", ae),
        document.removeEventListener("webkitendfullscreen", ae)
    }
    ),
    [_(Ft, {
        get type() {
            return n.drawerType
        },
        get visible() {
            return d() === "drawer"
        },
        maxHeight: 252,
        get onClose() {
            return n.onClose
        },
        get children() {
            const Re = In.cloneNode(!0);
            return p(Re, _(Q, {
                get when() {
                    return n.closeable
                },
                get children() {
                    const Ye = Oe.cloneNode(!0);
                    return te(Ye, "touchmove", ve, !0),
                    Ye.$$touchend = $,
                    p(Ye, we),
                    D(_t=>S(Ye, {
                        ["ip-subtitle-mobile--item"]: !0,
                        ["ip-subtitle-mobile--item-drawer"]: !0,
                        [`ip-subtitle-mobile--item-drawer--${n.drawerType}`]: !0,
                        active: n.closed
                    }, _t)),
                    Ye
                }
            }), null),
            p(Re, _(se, {
                get each() {
                    return n.list
                },
                get fallback() {
                    return us.cloneNode(!0)
                },
                children: Ye=>(()=>{
                    const _t = Oe.cloneNode(!0);
                    return te(_t, "touchmove", ve, !0),
                    _t.$$touchend = ()=>{
                        O(Ye.key, Ye.url)
                    }
                    ,
                    p(_t, ()=>Ye.title),
                    D(Jt=>S(_t, {
                        ["ip-subtitle-mobile--item"]: !0,
                        ["ip-subtitle-mobile--item-drawer"]: !0,
                        [`ip-subtitle-mobile--item-drawer--${n.drawerType}`]: !0,
                        active: Ye.key === n.lang && !n.closed
                    }, Jt)),
                    _t
                }
                )()
            }), null),
            p(Re, _(Q, {
                get when() {
                    return n.feedbackable
                },
                get children() {
                    const Ye = Oe.cloneNode(!0);
                    return Ye.$$click = ()=>{
                        Te()
                    }
                    ,
                    p(Ye, ()=>{
                        var _t, Jt;
                        return (Jt = (_t = n.player.config.i18n) == null ? void 0 : _t.ccReport) != null ? Jt : C.ccReport
                    }
                    ),
                    D(_t=>S(Ye, {
                        "ip-subtitle-mobile--item": !0,
                        "ip-subtitle-mobile--item-drawer": !0,
                        "ip-subtitle-mobile--item-drawer-feedback": !0,
                        [`ip-subtitle-mobile--item-drawer--${n.drawerType}`]: !0
                    }, _t)),
                    Ye
                }
            }), null),
            Re
        }
    }), _(Gt, {
        get title() {
            return n.title
        },
        get visible() {
            return d() === "dialog"
        },
        get onClose() {
            return n.onClose
        },
        get children() {
            const Re = bn.cloneNode(!0)
              , Ye = Re.firstChild;
            return p(Ye, _(Q, {
                get when() {
                    return n.closeable
                },
                get children() {
                    const _t = Oe.cloneNode(!0);
                    return te(_t, "touchmove", ve, !0),
                    _t.$$touchend = $,
                    p(_t, we),
                    D(Jt=>S(_t, {
                        ["ip-subtitle-mobile--item"]: !0,
                        ["ip-subtitle-mobile--item-dialog"]: !0,
                        active: n.closed
                    }, Jt)),
                    _t
                }
            }), null),
            p(Ye, _(se, {
                get each() {
                    return n.list
                },
                get fallback() {
                    return us.cloneNode(!0)
                },
                children: _t=>(()=>{
                    const Jt = Oe.cloneNode(!0);
                    return te(Jt, "touchmove", ve, !0),
                    Jt.$$touchend = ()=>{
                        O(_t.key, _t.url)
                    }
                    ,
                    p(Jt, ()=>_t.title),
                    D(bt=>S(Jt, {
                        ["ip-subtitle-mobile--item"]: !0,
                        ["ip-subtitle-mobile--item-dialog"]: !0,
                        active: _t.key === n.lang && !n.closed
                    }, bt)),
                    Jt
                }
                )()
            }), null),
            p(Re, _(Q, {
                get when() {
                    return n.feedbackable
                },
                get children() {
                    const _t = Oe.cloneNode(!0);
                    return te(_t, "touchmove", ve, !0),
                    _t.$$touchend = ()=>{
                        Te()
                    }
                    ,
                    S(_t, {
                        ["ip-subtitle-mobile--item"]: !0,
                        ["ip-subtitle-mobile--item-dialog"]: !0,
                        ["ip-subtitle-mobile--item-dialog-feedback"]: !0
                    }),
                    p(_t, ()=>{
                        var Jt, bt;
                        return (bt = (Jt = n.player.config.i18n) == null ? void 0 : Jt.ccReport) != null ? bt : C.ccReport
                    }
                    ),
                    _t
                }
            }), null),
            Re
        }
    })]
}
;
Z(["touchend", "touchmove", "click"]);
const wn = T("<div></div>")
  , Sn = T('<main class="ip-quality-mobile-dialog__container"><div class="ip-quality-mobile-dialog__content"></div></main>')
  , hs = T("<div>Loading...</div>")
  , fs = T('<p><span class="ip-quality-mobile-item--label"></span><span></span></p>')
  , An = n=>{
    const [d,y] = P("")
      , {touchMoveFlag: ye, setFlag: ve, setTouchMoveFlag: ie} = Ht();
    W(()=>{
        window.addEventListener("resize", i),
        document.addEventListener("fullscreenchange", ae),
        document.addEventListener("webkitendfullscreen", ae)
    }
    );
    const ae = ()=>{
        n.onClose()
    }
    ;
    pe(me(()=>n.visible, $=>{
        var Te;
        if (!$) {
            y("");
            return
        }
        [0, 180].includes((Te = window.orientation) != null ? Te : 0) ? y("drawer") : y("dialog")
    }
    ));
    const i = ()=>{
        var $, Te;
        if (d()) {
            if ([0, 180].includes(($ = window.orientation) != null ? $ : 0)) {
                y("drawer");
                return
            }
            if ([90, -90].includes((Te = window.orientation) != null ? Te : 0)) {
                y("dialog");
                return
            }
        }
    }
      , O = ($,Te)=>{
        if (ye()) {
            ie(!1);
            return
        }
        n.onClose(),
        n.onClick($, Te)
    }
    ;
    return R(()=>{
        document.removeEventListener("fullscreenchange", ae),
        document.removeEventListener("webkitendfullscreen", ae),
        window.removeEventListener("resize", i)
    }
    ),
    [_(Ft, {
        get type() {
            return n.drawerType
        },
        get visible() {
            return d() === "drawer"
        },
        maxHeight: 252,
        get onClose() {
            return n.onClose
        },
        get children() {
            const $ = wn.cloneNode(!0);
            return p($, _(se, {
                get each() {
                    return n.qualityList
                },
                get fallback() {
                    return hs.cloneNode(!0)
                },
                children: Te=>(()=>{
                    const we = fs.cloneNode(!0)
                      , Re = we.firstChild
                      , Ye = Re.nextSibling;
                    return we.$$touchend = ()=>{
                        O(Te.value, Te.tagType)
                    }
                    ,
                    te(we, "touchmove", ve, !0),
                    p(Re, ()=>Te.label),
                    D(_t=>{
                        const Jt = {
                            ["ip-quality-mobile--item"]: !0,
                            ["ip-quality-mobile--item-drawer"]: !0,
                            [`ip-quality-mobile--item-drawer--${n.drawerType}`]: !0,
                            active: Te.value === n.quality
                        }
                          , bt = !!Te.tag
                          , ai = Te.tagType === "premium"
                          , ii = Te.tagType === "normal";
                        return _t._v$ = S(we, Jt, _t._v$),
                        bt !== _t._v$2 && Ye.classList.toggle("ip-quality-mobile-tag", _t._v$2 = bt),
                        ai !== _t._v$3 && Ye.classList.toggle("ip-quality-mobile-tag--premium", _t._v$3 = ai),
                        ii !== _t._v$4 && Ye.classList.toggle("ip-quality-mobile-tag--login", _t._v$4 = ii),
                        _t
                    }
                    , {
                        _v$: void 0,
                        _v$2: void 0,
                        _v$3: void 0,
                        _v$4: void 0
                    }),
                    we
                }
                )()
            })),
            $
        }
    }), _(Gt, {
        get title() {
            return n.title
        },
        get visible() {
            return d() === "dialog"
        },
        get onClose() {
            return n.onClose
        },
        get children() {
            const $ = Sn.cloneNode(!0)
              , Te = $.firstChild;
            return p(Te, _(se, {
                get each() {
                    return n.qualityList
                },
                get fallback() {
                    return hs.cloneNode(!0)
                },
                children: we=>(()=>{
                    const Re = fs.cloneNode(!0)
                      , Ye = Re.firstChild
                      , _t = Ye.nextSibling;
                    return Re.$$touchend = ()=>{
                        O(we.value, we.tagType)
                    }
                    ,
                    te(Re, "touchmove", ve, !0),
                    p(Ye, ()=>we.label),
                    D(Jt=>{
                        const bt = {
                            ["ip-quality-mobile--item"]: !0,
                            ["ip-quality-mobile--item-dialog"]: !0,
                            active: we.value === n.quality
                        }
                          , ai = !!we.tag
                          , ii = we.tagType === "premium"
                          , da = we.tagType === "normal";
                        return Jt._v$5 = S(Re, bt, Jt._v$5),
                        ai !== Jt._v$6 && _t.classList.toggle("ip-quality-mobile-tag", Jt._v$6 = ai),
                        ii !== Jt._v$7 && _t.classList.toggle("ip-quality-mobile-tag--premium", Jt._v$7 = ii),
                        da !== Jt._v$8 && _t.classList.toggle("ip-quality-mobile-tag--login", Jt._v$8 = da),
                        Jt
                    }
                    , {
                        _v$5: void 0,
                        _v$6: void 0,
                        _v$7: void 0,
                        _v$8: void 0
                    }),
                    Re
                }
                )()
            })),
            $
        }
    })]
}
;
Z(["touchmove", "touchend"]);
function lt() {
    const n = document.activeElement;
    return Array.from(n.classList).map(d=>(d != null ? d : "").toString()).some(d=>d.includes(Ki))
}
const Dn = T("<img>")
  , Nn = T("<div><span></span></div>")
  , Mn = n=>{
    const d = H(()=>clsx(["ip-toast", `ip-toast--${n.position}`, `ip-toast--${n.direction}`]));
    return (()=>{
        const y = Nn.cloneNode(!0)
          , ye = y.firstChild;
        return p(y, _(Q, {
            get when() {
                return n.icon
            },
            get children() {
                const ve = Dn.cloneNode(!0);
                return D(ie=>{
                    var ae;
                    const i = n.icon
                      , O = (ae = n.imgStyle) != null ? ae : {};
                    return i !== ie._v$ && ee(ve, "src", ie._v$ = i),
                    ie._v$2 = De(ve, O, ie._v$2),
                    ie
                }
                , {
                    _v$: void 0,
                    _v$2: void 0
                }),
                ve
            }
        }), ye),
        p(ye, ()=>n.msg),
        D(()=>y.className = d()),
        y
    }
    )()
}
  , ue = {
    show: ()=>{}
}
  , Ln = {
    vol: {
        position: "top",
        direction: "ltr",
        icon: "//p.bstarstatic.com/fe-lib/images/web/volume.png"
    },
    mute: {
        position: "top",
        direction: "ltr",
        icon: "//p.bstarstatic.com/fe-lib/images/web/mute.png"
    },
    forward: {
        position: "right",
        direction: "ttb",
        icon: "//p.bstarstatic.com/fe-lib/images/web/forward.png"
    },
    longForward: {
        position: "right",
        direction: "ttb",
        icon: "//p.bstarstatic.com/fe-lib/images/web/speed-animation.gif",
        imgStyle: {
            transform: "rotate(180deg)"
        }
    },
    backward: {
        position: "left",
        direction: "ttb",
        icon: "//p.bstarstatic.com/fe-lib/images/web/forward.png",
        imgStyle: {
            transform: "rotate(180deg)"
        }
    },
    longBackward: {
        position: "left",
        direction: "ttb",
        icon: "//p.bstarstatic.com/fe-lib/images/web/speed-animation.gif"
    }
}
  , Cn = ()=>{
    let n;
    const [d,y] = P(!1)
      , [ye,ve] = P({
        msg: ""
    })
      , ie = H(()=>__spreadValues(__spreadValues({}, Ln[ye().type]), ye()));
    pe(me(ye, (i,O)=>{
        ae(),
        i.type === "longBackward" && O.type === "longBackward" || i.type === "longForward" && O.type === "longForward" || i.type === "mute" && (O.type === "mute" || O.type === "vol") || i.type === "vol" && (O.type === "vol" || O.type === "mute") ? (y(!0),
        n = window.setTimeout(()=>{
            y(!1)
        }
        , 500)) : (y(!1),
        setTimeout(()=>{
            y(!0)
        }
        , 100),
        n = window.setTimeout(()=>{
            y(!1)
        }
        , 500))
    }
    )),
    ue.show = i=>{
        ve(i)
    }
    ;
    const ae = ()=>{
        n && window.clearTimeout(n),
        n = null
    }
    ;
    return R(()=>{
        ae()
    }
    ),
    _(Q, {
        get when() {
            return d()
        },
        get children() {
            return _(Mn, de(ie))
        }
    })
}
;
var re = (n=>(n.space = "Space",
n.f = "KeyF",
n.left = "ArrowLeft",
n.right = "ArrowRight",
n.up = "ArrowUp",
n.down = "ArrowDown",
n.m = "KeyM",
n.n = "KeyN",
n.period = "Period",
n.comma = "Comma",
n))(re || {});
const kn = T('<div class="ip-volume-icon"></div>')
  , On = T('<div class="ip-volume-wrap"><div class="ip-volume-wrap--value"></div><div class="ip-volume-wrap--slider"></div></div>');
var he;
(function(n) {
    n[n.start = 0] = "start",
    n[n.moving = 1] = "moving",
    n[n.mouseMove = 2] = "mouseMove"
}
)(he || (he = {}));
const $n = n=>{
    let d, y, ye = !1;
    const [ve,ie] = P(n.vol)
      , [ae,i] = P((n.vol * 100).toFixed(0))
      , [O,$] = P(n.vol || .66)
      , [Te,we] = ke()
      , [Re,Ye] = P(he.start)
      , _t = ()=>{
        ve() <= 0 && n.player.trigger("player_mute_button_show")
    }
      , Jt = ({show: aa})=>{
        !aa && Te() && we(!1)
    }
    ;
    W(()=>{
        d = new Bt$1(document.querySelector(".ip-volume-wrap--slider"),{
            value: n.vol,
            vertical: !0,
            pure: !0,
            trackBreadth: 4,
            thumbWidth: 16,
            thumbHeight: 16
        }),
        d.on("move", aa=>{
            var Ta;
            !((Ta = n.player) != null && Ta.video) || (Re() === he.start && Ye(he.moving),
            ie(aa.value),
            n.player.video.volume = aa.value,
            n.player.video.muted = aa.value <= 0,
            n.player.trigger(l.EVENT.VOLUME_CHANGE, aa.value))
        }
        ),
        d.on("end", ()=>{
            Ye(he.start)
        }
        ),
        n.player.bind(l.EVENT.SET_VOLUME, bt),
        n.player.bind(l.EVENT.MUTED_CHANGE, ai),
        n.player.bind(l.EVENT.VIDEO_CONTROLBAR, Jt),
        window.addEventListener("keydown", ii)
    }
    ),
    ci(me(ve, aa=>{
        const Ta = (aa * 100).toFixed(0);
        i(()=>Ta),
        $(()=>aa > 0 ? aa : O()),
        _t(),
        ye && (ye = !1,
        ue.show({
            msg: `${Ta}%`,
            type: aa > 0 ? "vol" : "mute"
        }))
    }
    ));
    const bt = aa=>{
        d.value(aa)
    }
      , ai = aa=>{
        n.player.trigger(l.EVENT.SET_VOLUME, aa ? 0 : O())
    }
      , ii = aa=>{
        var Ta, fa, He;
        const {code: Zt} = aa;
        let si = ve();
        if (lt())
            switch (y && window.clearTimeout(y),
            y = window.setTimeout(()=>{
                Ye(he.start)
            }
            , 500),
            aa.cancelable && aa.preventDefault(),
            Zt) {
            case re.up:
                {
                    let ga = (Ta = n.player.video) != null && Ta.muted ? 5 : Math.floor(si * 100 + 5);
                    ga = ga >= 100 ? 100 : ga,
                    si = ga / 100,
                    d.value(si),
                    ue.show({
                        msg: `${ga}%`,
                        type: si > 0 ? "vol" : "mute"
                    });
                    break
                }
            case re.down:
                {
                    if ((fa = n.player.video) != null && fa.muted) {
                        ue.show({
                            msg: "0%",
                            type: "mute"
                        });
                        return
                    }
                    let ga = Math.floor(si * 100 - 5);
                    ga = ga <= 0 ? 0 : ga,
                    si = ga / 100,
                    d.value(si),
                    ue.show({
                        msg: `${ga}%`,
                        type: si > 0 ? "vol" : "mute"
                    });
                    break
                }
            case re.m:
                ye = !0,
                n.player.trigger(l.EVENT.KEYBOARD_MUTE, ve() <= 0 ? 1 : 0),
                ai(!((He = n.player.video) != null && He.muted));
                break
            }
    }
    ;
    R(()=>{
        d.destroy(),
        d = null,
        y && window.clearTimeout(y),
        y = null,
        n.player.unbind(l.EVENT.VOLUME_CHANGE, bt),
        n.player.unbind(l.EVENT.MUTED_CHANGE, ai),
        n.player.unbind(l.EVENT.VIDEO_CONTROLBAR, Jt),
        window.removeEventListener("keydown", ii)
    }
    );
    const da = aa=>{
        aa.preventDefault(),
        Ye(he.mouseMove),
        ve() > 0 ? d.value(0) : d.value(O()),
        Ye(he.start)
    }
    ;
    return _(Ge, de({
        hide: ()=>{
            Re() !== he.moving && we(!1)
        }
        ,
        show: ()=>{
            we(!0)
        }
        ,
        renderPlaceHolder: ()=>(()=>{
            const aa = kn.cloneNode(!0);
            return aa.$$click = Ta=>{
                n.player.trigger(l.EVENT.MUTE_BUTTON_CLICK, ve() <= 0 ? 1 : 0),
                da(Ta)
            }
            ,
            D(Ta=>{
                const fa = ve() > 0
                  , He = ve() <= 0;
                return fa !== Ta._v$ && aa.classList.toggle("ip-volume-icon--loud", Ta._v$ = fa),
                He !== Ta._v$2 && aa.classList.toggle("ip-volume-icon--mute", Ta._v$2 = He),
                Ta
            }
            , {
                _v$: void 0,
                _v$2: void 0
            }),
            aa
        }
        )()
    }, {
        get visible() {
            return Te()
        },
        get children() {
            const aa = On.cloneNode(!0)
              , Ta = aa.firstChild;
            return p(Ta, ae),
            aa
        }
    }))
}
;
Z(["click"]);
const xn = T("<div><span></span><span>/</span><span></span></div>")
  , gs = n=>{
    const d = n.prefix;
    return (()=>{
        const y = xn.cloneNode(!0)
          , ye = y.firstChild
          , ve = ye.nextSibling
          , ie = ve.nextSibling;
        return S(y, {
            [`${d}-control-btn`]: !0,
            [`${d}-control-btn-progress-time`]: !0
        }),
        p(ye, ()=>n.currentTime),
        p(ie, ()=>n.totalTime),
        D(ae=>{
            const i = n.visible ? "flex" : "none"
              , O = {
                [`${d}-control-text`]: !0,
                [`${d}-control-text--${n.size}`]: !0,
                [`${d}-time-current-text`]: !0
            }
              , $ = {
                [`${d}-control-text`]: !0,
                [`${d}-control-text--${n.size}`]: !0,
                [`${d}-control-text-separator`]: !0
            }
              , Te = {
                [`${d}-control-text`]: !0,
                [`${d}-control-text--${n.size}`]: !0,
                [`${d}-time-total-text`]: !0
            };
            return i !== ae._v$ && y.style.setProperty("display", ae._v$ = i),
            ae._v$2 = S(ye, O, ae._v$2),
            ae._v$3 = S(ve, $, ae._v$3),
            ae._v$4 = S(ie, Te, ae._v$4),
            ae
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0,
            _v$4: void 0
        }),
        y
    }
    )()
}
  , Pn = T('<div class="ip-widescreen-button"></div>')
  , Rn = function(n) {
    let d;
    const y = n.player
      , ye = O=>{
        var $, Te;
        return O ? ($ = y.config.i18n.closeWideSceenTip) != null ? $ : C.closeWideSceenTip : (Te = y.config.i18n.wideScreenTip) != null ? Te : C.wideScreenTip
    }
      , [ve,ie] = P(ye(n.isWideScreen));
    W(()=>{
        setTimeout(()=>{
            ae()
        }
        , 0),
        window.addEventListener("resize", ae)
    }
    ),
    R(()=>{
        window.removeEventListener("resize", ae)
    }
    );
    const ae = debounce(50, ()=>{
        Ee(d, y.template.display, "top-end")
    }
    );
    pe(me(()=>n.isWideScreen, O=>{
        const $ = ye(O);
        ie($),
        setTimeout(()=>{
            ae()
        }
        , 0)
    }
    , {
        defer: !0
    }));
    const i = {
        direction: "top",
        isH5: n.isH5,
        ellipsis: !0,
        renderPlaceHolder: ()=>(()=>{
            const O = Pn.cloneNode(!0);
            return te(O, "click", n.onClick, !0),
            D($=>{
                const Te = n.isWideScreen
                  , we = n.isH5;
                return Te !== $._v$ && O.classList.toggle("ip-widescreen-button-quit", $._v$ = Te),
                we !== $._v$2 && O.classList.toggle("ip-widescreen-button-h5", $._v$2 = we),
                $
            }
            , {
                _v$: void 0,
                _v$2: void 0
            }),
            O
        }
        )()
    };
    return _(at, de(i, {
        ref(O) {
            const $ = d;
            typeof $ == "function" ? $(O) : d = O
        },
        get children() {
            return ve()
        }
    }))
};
Z(["click"]);
const Vn = T('<div class="mute-notification__text"></div>')
  , Un = T('<div class="mute-notification"><div class="mute-notification__icon"></div></div>')
  , Bn = n=>{
    let d = null;
    const [y,ye] = P(!0);
    return pe(me(()=>n.visible, ve=>{
        ve ? n.isH5 ? d = window.setTimeout(()=>{
            ye(!1)
        }
        , 3e3) : d = window.setTimeout(()=>{
            n.onClose()
        }
        , 5e3) : d && window.clearTimeout(d)
    }
    )),
    R(()=>{
        d && window.clearTimeout(d)
    }
    ),
    _(Q, {
        get when() {
            return n.visible
        },
        get children() {
            const ve = Un.cloneNode(!0);
            return ve.firstChild,
            te(ve, "touchend", n.onClick, !0),
            te(ve, "mousedown", n.onClick, !0),
            p(ve, _(Q, {
                get when() {
                    return y()
                },
                get children() {
                    const ie = Vn.cloneNode(!0);
                    return p(ie, ()=>n.text),
                    ie
                }
            }), null),
            D(ie=>{
                const ae = n.isH5
                  , i = n.fullscreen;
                return ae !== ie._v$ && ve.classList.toggle("mute-notification--mobile", ie._v$ = ae),
                i !== ie._v$2 && ve.classList.toggle("mute-notification--fullscreen", ie._v$2 = i),
                ie
            }
            , {
                _v$: void 0,
                _v$2: void 0
            }),
            ve
        }
    })
}
;
Z(["mousedown", "touchend"]);
const zn = T('<img class="bstar-danmaku__icon">')
  , jn = n=>{
    let d;
    const y = ()=>{
        n.onClick()
    }
    ;
    W(()=>{
        setTimeout(()=>{
            ye()
        }
        , 0),
        window.addEventListener("resize", ye)
    }
    ),
    R(()=>{
        window.removeEventListener("resize", ye)
    }
    );
    const ye = debounce(50, ()=>{
        Ee(d, n.player.template.display, "top-start")
    }
    );
    return _(at, de({
        direction: "top",
        isH5: !1,
        ellipsis: !0,
        renderPlaceHolder: ()=>(()=>{
            const ve = zn.cloneNode(!0);
            return ve.$$click = y,
            D(()=>ee(ve, "src", n.url)),
            ve
        }
        )()
    }, {
        ref(ve) {
            const ie = d;
            typeof ie == "function" ? ie(ve) : d = ve
        },
        get children() {
            return n.tip
        }
    }))
}
;
Z(["click"]);
var Fn = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAADw0lEQVRYCe1XTUhUURQ+d5zSKPpVk8gW2SKMIhKSWoQERVGmSUZUJFGLBm3RIqI2JRRFtAlJMnURFJEuxBQRoyjCgqhoEdGPORr414+YWE42M7fvTO86792Z55t0dOWBM/eec79z7jfn/rz3iKZlugITq4BwCpdSLgLG7YSLcXxYCDEYIzYMA4kU6A1oJzTe0oGEldDk8Ixj9ADMgvZAJ1u+YoK1OhXLkgGQCMBr6EqohN6CPoH6oPGQGUiSAz0I5bnfQ9dhGX+hjRQQOmwqS1EkIj4ebZ4DtlkBLDcIeW1BcRrAPF5jripzSpfZQH+5YX/U/JNhthlJ083JdUK6bcbGu897lMWyj6eSwL/pHX4dCWGdN0PboL0O2o7xQjUf+gVQvsdUXBf6p9W4XRvLDbwDwRl2CTT/Pti1hq8A7TJt/Ajsi4ZPHXXLzR0LoUtI0A+dbySya0YwUGka5Grwxp1t+HjP1Bh9bkqhnPcqG1EFJW2BsrREBUyB03EPTQEHyxSxLJklYDxG3jW5MSgpRwpKFZL6sXats1LpUe1eEdDzORLC8jEmFzpHC/4BuxnPId47UQVE0kGkOhCkLSEAmKjLx/eFXuRdl0X1x8Rbc7DlUjL2Dgffx0RbGQjfBTRnuB9FLgN3Koqf8stllj9ADzE2N9q44fudIKigvkQ0KUwse4j/QbQqcLk/qETm9niTTERVbsI3FhkOSUSS6sIquVDFOxJCBW4DzG+NaZomY6xaJTK3HV46ISWtMvvMfSFoSLjoCtrvWMM0n4/Oq3FHQgzExEPQPk0HVBK9BZk9uk/ZITIJtK2hWJyE7xX7zfiYCKlksbbYmCtGsYJeuly0HY/QdkXmnke07iqT50Dk32YnSimskPM4Rj9l34xES0YTjqODkxRUYSDnT3PTgz4/5QQkLW3wiGdMBoCzChNq/RS6AvQKPTZAmThdmywB/2GAxDsFRxWyu//Q3cVu6m0ssSEjqKu2WAxxjF6hOvh4g/EXQSNIlaJlktFOGdwh6cTe4jspLJLuwNgw6pC0u2eEmnPLZDcqw+/TFsFSMj4k+DNWAYmd8DAxnawVGLZ+opsJUp+Vq7BGJgz30VPY65XPrgUBb5KL1qgK6UvGJ6oRwdnQ53ZJND9/qagnemiIHwliJhXhn3drWIsJMgPkokOKDA9GVMgcgWrxK8dqaJLZr/VxesQnzRcy95fLBYNBKsNdE/FlAbLNSQl0tNYjusyxYxIyAyfSz6+QGQGcMjxYU/GA7Xe7qLXOI95MJOd07HQF7CrwF/9UQTQQMGYzAAAAAElFTkSuQmCC"
  , Gn = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAAC30lEQVRYCe2Xu2tUQRTGd32gYPCtAUELX9gIEquIyCLY+GgCgqAQRMF/QUtBUUsJpDCmiAiCFjaCIZUiCoKFhQhqTAwYFBUlIhoUs/4+d+5m7tyZvbPZzVZ74NuZc853zpyd1723UGhLewYam4FiXni5XF4DZ1EeL9L/q1gsfo/kztIoYh24BiZAs+UdCQfA2tkRa/Qg7gYfwHzLZwbY5ZaSWjIISyA8BztAGdwEj8A0aIYsJkkJnAAa+xXoYhl/0maFgk5a09KbZTTH4oxzPJgVYr8paDxIapKDccbNWNftlAtshf5mo79x7POhjpqkG+3kbkGubnOb3dcelaT2cSsLqAyf85tbEOu8H4yCjzkYw380GY9+D9A9lsRN0j+X+ENtzA18iOAtoQSO/Rj6HWProd3k+E+hXzK25Kinbu6Ygi6T4CtYaRKFmt84BiynZkMbd5mxac/cNn0154HyXpXiFaZ0BEhGvIQWGHP3UAtqSA0Rs2SpgLkozPge4kpgPdAyPQYPeGT8pU1JbkEkE+cI6EhFFgpT6MMk1d7xCrG69AbBAQ/hGf5e4l96fBUThMwewnYRhORKKBkBemuYCgUa+zTtQTtHzB7SP/DNgqb7tZ0s6TOI3hqGwPLEFmjFG4S/2uvHkZkhEbF3gE4HwWsA3llQj/TXVZCXXMNIJdof9cinJF3MkiXcetqthnyfdjvQTe9iG7YbQKJX5hXquKfsi4zIhkoz598ZE6mT2QkS3U1on9zMFaC9csbM8wztPjc6Vif2ickT27xPcrszdBfHBaAvgntk0/PmIfCdMsz/ZYK7RHeSLbdQum1DTl98v1DEYfAn9q/B+wFST3X0heApiBG9tthLly0MQheITaji9ZWSEtmA3oFqyTece+3Aoq24fci6a3aCpa7P0sdYsreWXu0SvwqlD/i+LIaxnyZ2shpAp2ZBNrGRPoXpyJdA9eFKIS8aydmObc9AaAb+AQdFpViEoMPuAAAAAElFTkSuQmCC";
const Hn = T('<div class="ip-danmaku-bar"><div class="ip-danmaku-bar__main"><input type="text" class="ip-danmaku-bar__input"><div class="ip-danmaku-bar__suffix"></div><button class="ip-danmaku-bar__btn"></button></div></div>')
  , Qn = n=>{
    let d = null;
    const [y,ye] = P("")
      , [ve,ie] = P(!1)
      , ae = 300;
    W(()=>{
        n.player.bind(l.EVENT.VIDEO_CONTROLBAR, Jt)
    }
    );
    const i = ()=>y().length
      , O = ()=>i() > ae ? `${i()}/${ae}` : ""
      , $ = ()=>!n.player.config.danmakuConfig.on
      , Te = ()=>i() > ae || !i() || $()
      , we = ()=>n.danmakuVisible ? Fn : Gn
      , Re = ()=>{
        var da, aa, Ta, fa;
        return n.danmakuVisible ? (aa = (da = n.player.config.i18n) == null ? void 0 : da.danmakuOff) != null ? aa : C.danmakuOff : (fa = (Ta = n.player.config.i18n) == null ? void 0 : Ta.danmakuOn) != null ? fa : C.danmakuOn
    }
      , Ye = da=>{
        const {value: aa} = da.target;
        ye(aa)
    }
      , _t = ()=>{
        var da, aa;
        if (n.player.trigger(l.EVENT.DANMAKU_SEND_CLICK),
        n.danmakuVisible || n.player.danmaku.setVisible(!0),
        ve()) {
            fe.message.info({
                msg: (aa = (da = n.player.config.i18n) == null ? void 0 : da.danmakuFequently) != null ? aa : C.danmakuFequently
            });
            return
        }
        ie(!0),
        n.player.danmaku.sendDanmaku({
            text: y()
        }),
        ye(""),
        setTimeout(()=>{
            ie(!1)
        }
        , 5e3)
    }
      , Jt = da=>{
        da.show || bt()
    }
      , bt = ()=>{
        var da;
        d == null || d.blur(),
        (da = n.player.template.wrap) == null || da.focus()
    }
      , ai = ()=>{
        var da, aa;
        if ($()) {
            fe.message.info({
                msg: (aa = (da = n.player.config.i18n) == null ? void 0 : da.danmakuClosedToast) != null ? aa : C.danmakuClosedToast
            });
            return
        }
        n.player.trigger(l.EVENT.DANMAKU_SWITCH_CLICK, !n.danmakuVisible),
        n.player.danmaku.setVisible(!n.danmakuVisible)
    }
      , ii = da=>{
        const {code: aa} = da;
        aa === "Enter" && (Te() || (_t(),
        bt()))
    }
    ;
    return R(()=>{
        n.player.unbind(l.EVENT.VIDEO_CONTROLBAR, Jt)
    }
    ),
    (()=>{
        const da = Hn.cloneNode(!0)
          , aa = da.firstChild
          , Ta = aa.firstChild
          , fa = Ta.nextSibling
          , He = fa.nextSibling;
        p(da, _(jn, {
            get url() {
                return we()
            },
            get tip() {
                return Re()
            },
            get player() {
                return n.player
            },
            onClick: ai
        }), aa),
        Ta.$$keyup = ii,
        Ta.$$input = Ye;
        const Zt = d;
        return typeof Zt == "function" ? Zt(Ta) : d = Ta,
        p(fa, O),
        He.$$click = _t,
        p(He, ()=>{
            var si, ga;
            return (ga = (si = n.player.config.i18n) == null ? void 0 : si.danmakuSend) != null ? ga : C.danmakuSend
        }
        ),
        D(si=>{
            var ga, ba;
            const Ca = y()
              , za = (ba = (ga = n.player.config.i18n) == null ? void 0 : ga.danmakuPlaceholder) != null ? ba : C.danmakuPlaceholder
              , Ms = $()
              , Pa = Te();
            return Ca !== si._v$ && (Ta.value = si._v$ = Ca),
            za !== si._v$2 && ee(Ta, "placeholder", si._v$2 = za),
            Ms !== si._v$3 && (Ta.disabled = si._v$3 = Ms),
            Pa !== si._v$4 && (He.disabled = si._v$4 = Pa),
            si
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0,
            _v$4: void 0
        }),
        da
    }
    )()
}
;
Z(["input", "keyup", "click"]);
const Yn = ()=>__async(globalThis, null, function*() {
    if (!window.ResizeObserver) {
        const {ResizeObserver: n} = yield __vitePreload(()=>import("./resize-observer-971c2dd7.js"), []);
        window.ResizeObserver = n
    }
})
  , Wn = ()=>{
    const [n,d] = P(U$1.isFullscreen);
    W(()=>{
        document.addEventListener("resize", y),
        document.addEventListener("fullscreenchange", y),
        document.addEventListener("webkitendfullscreen", y)
    }
    ),
    R(()=>{
        document.removeEventListener("resize", y),
        document.removeEventListener("fullscreenchange", y),
        document.removeEventListener("webkitendfullscreen", y)
    }
    );
    const y = ()=>{
        d(()=>U$1.isFullscreen)
    }
    ;
    return n
}
  , Zn = T('<div class="ip-watermark__text"></div>')
  , qn = T('<div><img alt="logo" fetchpriority="high"></div>')
  , Kn = n=>{
    let d = null;
    const [y,ye] = P(2)
      , ve = Wn()
      , ie = O=>{
        const {contentRect: $} = O[0]
          , {height: Te} = $;
        ye(()=>Te / 1080 * 2)
    }
    ;
    W(()=>__async(globalThis, null, function*() {
        n.isMobile || (yield Yn(),
        ResizeObserver && (d = new ResizeObserver(ie),
        n.player.template.videoWrp && (d == null || d.observe(n.player.template.videoWrp))))
    }));
    const ae = H(()=>({
        "--unit": `${y()}px`
    }))
      , i = H(()=>clsx({
        "ip-watermark": !0,
        "ip-watermark--mobile": n.isMobile,
        "ip-watermark--fullscreen": ve()
    }));
    return R(()=>{
        d == null || d.disconnect()
    }
    ),
    (()=>{
        const O = qn.cloneNode(!0)
          , $ = O.firstChild;
        return p(O, _(Q, {
            get when() {
                return n.text
            },
            get children() {
                const Te = Zn.cloneNode(!0);
                return p(Te, ()=>n.text),
                Te
            }
        }), null),
        D(Te=>{
            const we = i()
              , Re = ae()
              , Ye = n.image;
            return we !== Te._v$ && (O.className = Te._v$ = we),
            Te._v$2 = De(O, Re, Te._v$2),
            Ye !== Te._v$3 && ee($, "src", Te._v$3 = Ye),
            Te
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0
        }),
        O
    }
    )()
}
  , Jn = T('<div><div class="ip-checkbox__switch"></div></div>')
  , Xn = n=>{
    const d = H(()=>{
        var ye;
        return clsx(["ip-checkbox", {
            "ip-checkbox--active": n.value,
            "ip-checkbox--disabled": (ye = n.disabled) != null ? ye : !1
        }])
    }
    )
      , y = ()=>{
        n.disabled || n.onChange(!n.value)
    }
    ;
    return (()=>{
        const ye = Jn.cloneNode(!0)
          , ve = ye.firstChild;
        return p(ye, ()=>n.label, ve),
        ve.$$click = y,
        D(()=>ye.className = d()),
        ye
    }
    )()
}
;
Z(["click"]);
const eo = T('<div class="ip-setting__icon"></div>')
  , to = T('<div class="ip-setting"></div>')
  , io = n=>{
    let d;
    const y = n.player
      , [ye,ve] = ke();
    W(()=>{
        n.isH5 || (setTimeout(()=>{
            ie()
        }
        , 0),
        window.addEventListener("resize", ie),
        n.player.bind(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, ie))
    }
    );
    const ie = debounce(10, ()=>{
        Ee(d, y.template.display, "top-end")
    }
    );
    R(()=>{
        n.isH5 || (window.removeEventListener("resize", ie),
        n.player.unbind(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, ie))
    }
    );
    const ae = {
        isH5: n.isH5,
        hide: ()=>{
            ve(!1)
        }
        ,
        show: ()=>{
            n.isH5 || ve(!0)
        }
        ,
        renderPlaceHolder: ()=>eo.cloneNode(!0)
    }
      , i = H(()=>{
        var O;
        return n.player.skipController.skipSwitch.value() && !((O = n.player.config.skip) != null && O.disabled)
    }
    );
    return _(Ge, de(ae, {
        get visible() {
            return ye()
        },
        ref(O) {
            const $ = d;
            typeof $ == "function" ? $(O) : d = O
        },
        get children() {
            const O = to.cloneNode(!0);
            return p(O, _(Xn, {
                get value() {
                    return i()
                },
                get label() {
                    var $, Te;
                    return (Te = ($ = n.player.config.i18n) == null ? void 0 : $.skipLabel) != null ? Te : C.skipLabel
                },
                get disabled() {
                    var $, Te;
                    return (Te = ($ = n.player.config.skip) == null ? void 0 : $.disabled) != null ? Te : !1
                },
                onChange: $=>n.player.skipController.changeSkipSwitch($)
            })),
            O
        }
    }))
}
  , Y = T("<div></div>")
  , so = T('<div style="display:none"><div></div><div></div><div><div></div></div><div></div></div>')
  , ro = T('<div tabindex="-1"><div><div></div><div><div></div><div><div><div></div></div><div><div></div><div><div></div></div><div><div></div><div></div></div></div><div></div><div></div><div></div><div><img alt="preview icon"><div><div></div></div></div><div></div><div><img alt="pause icon"></div></div></div></div></div>')
  , no = T('<div><img alt="close icon"><h3></h3></div>')
  , oo = T("<div><i></i></div>")
  , ao = T('<div><div></div><img alt="pause icon"><img alt="play icon"></div>')
  , lo = T("<div><div>fullscreen</div><i></i></div>")
  , co = T('<div><img alt="play icon"><img alt="pause icon"></div>')
  , uo = n=>{
    var d, y, ye;
    let ve = null
      , ie = {};
    const ae = n.prefix
      , i = n.config
      , O = n.player
      , $ = i.isH5
      , Te = i.autoplay && !O.adTagUrls.length
      , [we,Re] = Br({
        speed: "1.0",
        messageLeftStyle: {
            "z-index": 6,
            left: $ ? "4px" : "0px"
        },
        messageRightStyle: {
            "z-index": 6,
            right: $ ? "4px" : "0px"
        },
        dialogType: "",
        isFullScreen: U$1.isFullscreen,
        movePauseIconFlag: !1,
        wideScreenBtnVisible: window.innerWidth >= 1e3,
        UIMode: O.state.mode,
        muteNotificationVisible: !1,
        unmuteText: (d = O.config.i18n.tapToUnmute) != null ? d : C.tapToUnmute,
        controlBarVisible: !1,
        danmakuVisible: (ye = (y = i.danmakuConfig) == null ? void 0 : y.defaultVisible) != null ? ye : !1,
        get speedText() {
            return `${this.speed}X`
        }
    });
    W(()=>{
        $ && window.addEventListener("orientationchange", ii),
        window.addEventListener("resize", Jt),
        bt(),
        O.bind(l.EVENT.VIDEO_MEDIA_FIRST_PLAY_SUCCESS, Ms),
        O.bind(l.EVENT.SET_VIDEO_FOCUS, bt),
        O.bind(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, ai),
        O.bind(l.EVENT.VIDEO_CONTROLBAR, _t),
        O.bind(l.EVENT.DANMAKU_VISIBLE_CHANGED, Ye)
    }
    );
    const Ye = Pa=>{
        Re({
            danmakuVisible: Pa
        })
    }
      , _t = Pa=>{
        const Ua = Pa.show;
        Re({
            controlBarVisible: Ua,
            messageLeftStyle: __spreadProps(__spreadValues({}, we.messageLeftStyle), {
                top: $ || Ua ? "0px" : "-62px"
            }),
            messageRightStyle: __spreadProps(__spreadValues({}, we.messageRightStyle), {
                top: $ || Ua ? "0px" : "-62px"
            })
        })
    }
      , Jt = debounce(100, ()=>{
        Re({
            wideScreenBtnVisible: window.innerWidth >= 1e3
        })
    }
    )
      , bt = ()=>{
        ve == null || ve.focus()
    }
      , ai = ({mode: Pa})=>{
        const Ua = O.isFullScreen();
        Re({
            isFullScreen: Ua,
            UIMode: Pa
        }),
        Ua || setTimeout(()=>{
            bt()
        }
        , 0)
    }
    ;
    R(()=>{
        $ && window.removeEventListener("orientationchange", ii),
        ve = null,
        Object.values(ie).forEach(Pa=>{
            Pa && window.clearTimeout(Pa)
        }
        ),
        ie = {},
        window.removeEventListener("resize", Jt),
        O.unbind(l.EVENT.VIDEO_MEDIA_FIRST_PLAY_SUCCESS, Ms),
        O.unbind(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, ai),
        O.unbind(l.EVENT.SET_VIDEO_FOCUS, bt),
        O.unbind(l.EVENT.VIDEO_CONTROLBAR, _t),
        O.unbind(l.EVENT.DANMAKU_VISIBLE_CHANGED, Ye)
    }
    ),
    pe(me(()=>we.dialogType, Pa=>{
        var Ua;
        if ($)
            if (Pa) {
                O.template.csIn(!1),
                O.template.toggleH5Mask(!0);
                const Wa = (Ua = window.orientation) != null ? Ua : 0;
                if (zr(),
                [90, -90].includes(Wa)) {
                    Re({
                        movePauseIconFlag: !0
                    });
                    return
                }
                if ([0, 180].includes(Wa)) {
                    Re({
                        movePauseIconFlag: !1
                    });
                    return
                }
            } else
                jr(),
                O.template.csIn(!0),
                Re({
                    movePauseIconFlag: !1
                })
    }
    , {
        defer: !0
    }));
    const ii = ()=>{
        var Pa;
        const Ua = (Pa = window.orientation) != null ? Pa : 0;
        [90, -90].includes(Ua) && we.dialogType ? Re({
            movePauseIconFlag: !0
        }) : Re({
            movePauseIconFlag: !1
        })
    }
      , da = Pa=>{
        Pa.cancelable && Pa.preventDefault(),
        O.exitFullScreen(),
        O.trigger(l.EVENT.VIDEO_FULLSCREEN_CLICK, !0)
    }
      , aa = ()=>{
        O.trigger(l.EVENT.VIDEO_WIDE_SCREEN_CLICK, O.state.mode === l.UI_WIDE),
        O.state.mode !== l.UI_WIDE ? O.mode(l.UI_WIDE) : O.mode(l.UI_NORMAL)
    }
      , Ta = Pa=>{
        O.setSpeedRate(Pa),
        O.trigger(l.EVENT.SPEED_FLOATING_LAYER_CLICK, Pa)
    }
      , fa = Pa=>{
        O.setCCVisible(!0),
        O.trigger(l.EVENT.CAPTION_SETTING_CLOSE_CLICK, !0),
        O.trigger(l.EVENT.CAPTION_SETTING_LAYER_CLICK, Pa)
    }
      , He = ()=>{
        O.ccClosed.value() || (O.setCCVisible(!1),
        O.trigger(l.EVENT.CAPTION_SETTING_CLOSE_CLICK, !1))
    }
      , Zt = Pa=>{
        O.changeQuality(Pa)
    }
      , si = Pa=>{
        $ || (ie.displayDom && clearTimeout(ie.displayDom),
        ie.displayDom = window.setTimeout(()=>{
            var Ua, Wa;
            Pa.stopPropagation(),
            (Wa = (Ua = O.controller) == null ? void 0 : Ua.touchShow) == null || Wa.call(Ua, Pa)
        }
        , 300))
    }
      , ga = Pa=>__async(globalThis, null, function*() {
        try {
            if ($ || (O.trigger(l.EVENT.VIDEO_FULLSCREEN_CLICK, U$1.isFullscreen),
            ie.displayDom && clearTimeout(ie.displayDom),
            ie.playMaskDom && clearTimeout(ie.playMaskDom),
            ![O.template.playMask, O.template.playMaskPauseIcon, O.template.display].includes(Pa.target)))
                return;
            O.isFullScreen() ? O.exitFullScreen() : O.mode(l.UI_FULL)
        } catch (Ua) {}
    })
      , ba = Pa=>{
        $ || (ie.playMaskDom && clearTimeout(ie.playMaskDom),
        ie.playMaskDom = window.setTimeout(()=>{
            Pa.stopPropagation(),
            O.track.pageReport("click", "playCenterPlay", {
                status: "on"
            }),
            O.play()
        }
        , 300))
    }
      , Ca = H(()=>we.isFullScreen ? "inner" : "outer")
      , za = ()=>{
        O.setMute(!1).then(()=>{
            Re({
                muteNotificationVisible: !1
            })
        }
        ).catch(()=>{}
        )
    }
      , Ms = ()=>{
        if (!(!(O != null && O.video) || (i.history > 0 && O.seek(i.history),
        !(O.video.muted || O.video.volume === 0) && (O.video.volume = O.defaultVolume,
        O.video.muted = O.defaultVolume <= 0,
        O.defaultVolume > 0)))) {
            if (O.setVolume(0),
            !$) {
                let Pa = Number(ss(jt.MuteNoticeKey).get()) || 0;
                if (Pa >= 3)
                    return;
                ++Pa,
                ss(jt.MuteNoticeKey).set(Pa)
            }
            Re({
                muteNotificationVisible: !0
            })
        }
    }
    ;
    return (()=>{
        const Pa = ro.cloneNode(!0)
          , Ua = Pa.firstChild
          , Wa = Ua.firstChild
          , Ka = Wa.nextSibling
          , Ns = Ka.firstChild
          , pl = Ns.nextSibling
          , el = pl.firstChild
          , wl = el.firstChild
          , fu = el.nextSibling
          , vl = fu.firstChild
          , kl = vl.nextSibling
          , Xl = kl.firstChild
          , uu = kl.nextSibling
          , tu = uu.firstChild
          , Ps = tu.nextSibling
          , $s = fu.nextSibling
          , nl = $s.nextSibling
          , Ll = nl.nextSibling
          , Nl = Ll.nextSibling
          , Gl = Nl.firstChild
          , vu = Gl.nextSibling
          , Cu = vu.firstChild
          , Ru = Nl.nextSibling
          , Yu = Ru.nextSibling
          , nd = Yu.firstChild
          , qu = ve;
        return typeof qu == "function" ? qu(Pa) : ve = Pa,
        Pa.className = `${ae}`,
        Ua.className = `${ae}-area`,
        Wa.className = `${ae}-dummy`,
        Ns.className = `${ae}-video-wrap`,
        p(Ns, (()=>{
            const ml = V(()=>!!i.developer, !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return Fa.className = `${ae}-video-developer`,
                Fa
            }
            )()
        }
        )()),
        pl.$$mousedown = si,
        pl.$$dblclick = ga,
        S(pl, {
            [`${ae}-display`]: !0,
            [`${ae}-control-bar-hide`]: !0
        }),
        p(el, (()=>{
            const ml = V(()=>!!(we.isFullScreen && $), !0);
            return ()=>ml() && (()=>{
                const Fa = no.cloneNode(!0)
                  , Za = Fa.firstChild
                  , $a = Za.nextSibling;
                return Fa.className = `${ae}-top-bar-left`,
                Za.$$touchstart = da,
                ee(Za, "src", Hr),
                Za.className = `${ae}-icon`,
                p($a, ()=>i.title),
                Fa
            }
            )()
        }
        )(), wl),
        wl.className = `${ae}-top-bar-right`,
        p(wl, (()=>{
            const ml = V(()=>!!(i.hasSpeedButton && $ && !we.isFullScreen), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-top-bar-btn`]: !0,
                    [`${ae}-control-btn-speed-h5`]: !0,
                    ["ph-8"]: !0
                }),
                p(Fa, _(ns, {
                    isH5: $,
                    player: O,
                    get speed() {
                        return O.speed.value()
                    },
                    get rateList() {
                        return i.rateList
                    },
                    onSpeedChange: Za=>{
                        Ta(Za)
                    }
                    ,
                    onShowDrawer: ()=>{
                        !i.beforeClickItem("speed") || setTimeout(()=>{
                            Re({
                                dialogType: "speed"
                            }),
                            O.trigger(l.EVENT.SPEED_FLOATING_LAYER_SHOW)
                        }
                        , 400)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(wl, (()=>{
            const ml = V(()=>!!(i.hasQualityButton && $ && !we.isFullScreen), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-top-bar-btn`]: !0,
                    [`${ae}-control-btn-qualities-h5`]: !0,
                    ["ph-8"]: !0
                }),
                p(Fa, _(ls, {
                    isH5: $,
                    player: O,
                    get quality() {
                        return O.videoQuality.value()
                    },
                    get qualityList() {
                        return O.qualityList.value()
                    },
                    onClick: (Za,$a)=>{
                        Zt(Za)
                    }
                    ,
                    onShowDrawer: ()=>{
                        !i.beforeClickItem("quality") || setTimeout(()=>{
                            Re({
                                dialogType: "quality"
                            }),
                            O.trigger(l.EVENT.QUALITY_FLOATING_LAYER_SHOW)
                        }
                        , 400)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(wl, (()=>{
            const ml = V(()=>!!(i.subtitle && $ && !we.isFullScreen), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-top-bar-btn`]: !0,
                    [`${ae}-control-btn-subtitle-h5`]: !0
                }),
                p(Fa, _(as, {
                    isH5: !0,
                    player: O,
                    get closed() {
                        return O.ccClosed.value()
                    },
                    get lang() {
                        return O.subtitleLang.value()
                    },
                    get closeable() {
                        return i.subtitle.closeable
                    },
                    get list() {
                        var Za;
                        return (Za = i.subtitle.list) != null ? Za : []
                    },
                    onClose: He,
                    get feedbackable() {
                        return i.subtitle.feedbackable
                    },
                    onClick: Za=>{
                        fa(Za)
                    }
                    ,
                    onCCReport: ()=>{
                        O.trigger(l.EVENT.VIDEO_CLICK_CC_REPORT)
                    }
                    ,
                    onShowDrawer: ()=>{
                        !i.beforeClickItem("subtitle") || setTimeout(()=>{
                            Re({
                                dialogType: "subtitle"
                            }),
                            O.trigger(l.EVENT.CAPTION_SETTING_LAYER_SHOW)
                        }
                        , 400)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        S(vl, {
            [`${ae}-control-bar-top`]: !0
        }),
        p(vl, _(gs, {
            get visible() {
                return $ && !we.isFullScreen
            },
            get prefix() {
                return O.prefix
            },
            get currentTime() {
                return O.currentTimeText.value()
            },
            get totalTime() {
                return O.durationText.value()
            },
            size: "mini"
        })),
        p(kl, _(sr, {
            h5: $,
            get leftStyle() {
                return we.messageLeftStyle
            },
            get rightStyle() {
                return we.messageRightStyle
            }
        }), Xl),
        p(kl, (()=>{
            const ml = V(()=>!!(i.hasNextEpisodeButton && $ && !we.isFullScreen), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-control-btn-next-episode`]: !0
                }),
                p(Fa, _(rs, {
                    isH5: $,
                    hasNext: !0,
                    player: O,
                    get tip() {
                        var Za, $a;
                        return ($a = (Za = i.i18n) == null ? void 0 : Za.nextEpTooltip) != null ? $a : C.nextEpTooltip
                    },
                    get disabled() {
                        return !i.hasNext
                    },
                    onClick: ()=>{
                        !i.beforeClickItem("ep") || O.trigger(l.EVENT.VIDEO_REQUEST_NEXT_EPISODE, !1)
                    }
                })),
                Fa
            }
            )()
        }
        )(), Xl),
        Xl.className = `${ae}-control-slider`,
        p(kl, (()=>{
            const ml = V(()=>!!(!i.noFullScreenButton && $), !0);
            return ()=>ml() && (()=>{
                const Fa = oo.cloneNode(!0)
                  , Za = Fa.firstChild;
                return S(Za, {
                    [`${ae}-icon ${ae}-icon-fullscreen`]: !0
                }),
                D($a=>S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-btn-fullscreen`]: !0,
                    [`${ae}-btn-fullscreen-h5`]: !0,
                    [`${ae}-btn-fullscreen-h5--hidden`]: we.isFullScreen,
                    [`${ae}-active`]: !0
                }, $a)),
                Fa
            }
            )()
        }
        )(), null),
        S(tu, {
            [`${ae}-control-bar-left`]: !0
        }),
        p(tu, (()=>{
            const ml = V(()=>!i.isH5, !0);
            return ()=>ml() && (()=>{
                const Fa = ao.cloneNode(!0)
                  , Za = Fa.firstChild
                  , $a = Za.nextSibling
                  , ja = $a.nextSibling;
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-state-icon`]: !0
                }),
                Za.className = `${ae}-state-icon-tooltip`,
                $a.className = `${ae}-icon ${ae}-pause-icon`,
                ee($a, "src", Fr),
                ee(ja, "src", Gr),
                S(ja, {
                    [`${ae}-icon`]: !0,
                    [`${ae}-play-icon`]: !0,
                    [`${ae}-active`]: !0
                }),
                Fa
            }
            )()
        }
        )(), null),
        p(tu, (()=>{
            const ml = V(()=>!!(i.hasNextEpisodeButton && !($ && !we.isFullScreen)), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-control-btn-next-episode`]: !0
                }),
                p(Fa, _(rs, {
                    isH5: $,
                    hasNext: !0,
                    player: O,
                    get tip() {
                        var Za, $a;
                        return ($a = (Za = i.i18n) == null ? void 0 : Za.nextEpTooltip) != null ? $a : C.nextEpTooltip
                    },
                    get disabled() {
                        return !i.hasNext
                    },
                    onClick: ()=>{
                        !i.beforeClickItem("ep") || O.trigger(l.EVENT.VIDEO_REQUEST_NEXT_EPISODE, !1)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(tu, (()=>{
            const ml = V(()=>!!(i.hasVolButton && !$), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-control-btn-vol`]: !0
                }),
                p(Fa, _($n, {
                    get vol() {
                        return O.defaultVolume
                    },
                    player: O
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(tu, _(gs, {
            get visible() {
                return !($ && !we.isFullScreen)
            },
            get prefix() {
                return O.prefix
            },
            get currentTime() {
                return O.currentTimeText.value()
            },
            get totalTime() {
                return O.durationText.value()
            },
            size: "normal"
        }), null),
        p(Ps, _(Q, {
            get when() {
                return !$ && we.isFullScreen
            },
            get children() {
                return _(Qn, {
                    get danmakuVisible() {
                        return we.danmakuVisible
                    },
                    player: O
                })
            }
        }), null),
        p(Ps, (()=>{
            const ml = V(()=>!!i.hasSpeedButton, !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-right-control-btn`]: !0,
                    [`${ae}-control-btn-speed`]: !0
                }),
                p(Fa, _(ns, {
                    isH5: $,
                    player: O,
                    get speed() {
                        return O.speed.value()
                    },
                    get rateList() {
                        return i.rateList
                    },
                    onSpeedChange: Za=>{
                        Ta(Za)
                    }
                    ,
                    onShowDrawer: ()=>{
                        !i.beforeClickItem("speed") || setTimeout(()=>{
                            Re({
                                dialogType: "speed"
                            }),
                            O.trigger(l.EVENT.SPEED_FLOATING_LAYER_SHOW)
                        }
                        , 400)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(Ps, (()=>{
            const ml = V(()=>!!i.hasQualityButton, !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-right-control-btn`]: !0,
                    [`${ae}-control-btn-qualities`]: !0
                }),
                p(Fa, _(ls, {
                    isH5: $,
                    player: O,
                    get quality() {
                        return O.videoQuality.value()
                    },
                    get qualityList() {
                        return O.qualityList.value()
                    },
                    onClick: (Za,$a)=>{
                        Zt(Za)
                    }
                    ,
                    onShowDrawer: ()=>{
                        !i.beforeClickItem("quality") || setTimeout(()=>{
                            Re({
                                dialogType: "quality"
                            }),
                            O.trigger(l.EVENT.QUALITY_FLOATING_LAYER_SHOW)
                        }
                        , 400)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(Ps, (()=>{
            const ml = V(()=>!!i.subtitle, !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-control-btn-subtitle`]: !0
                }),
                p(Fa, _(as, {
                    isH5: $,
                    player: O,
                    get closeable() {
                        var Za;
                        return (Za = i.subtitle) == null ? void 0 : Za.closeable
                    },
                    get feedbackable() {
                        var Za;
                        return (Za = i.subtitle) == null ? void 0 : Za.feedbackable
                    },
                    get lang() {
                        return O.subtitleLang.value()
                    },
                    get list() {
                        var Za, $a;
                        return ($a = (Za = i.subtitle) == null ? void 0 : Za.list) != null ? $a : []
                    },
                    get closed() {
                        return O.ccClosed.value()
                    },
                    onClick: Za=>{
                        fa(Za)
                    }
                    ,
                    onClose: He,
                    onCCReport: ()=>{
                        O.trigger(l.EVENT.VIDEO_CLICK_CC_REPORT)
                    }
                    ,
                    onShowDrawer: ()=>{
                        !i.beforeClickItem("subtitle") || setTimeout(()=>{
                            Re({
                                dialogType: "subtitle"
                            }),
                            O.trigger(l.EVENT.CAPTION_SETTING_LAYER_SHOW)
                        }
                        , 400)
                    }
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(Ps, (()=>{
            const ml = V(()=>!!(i.skip && !$), !0);
            return ()=>ml() && (()=>{
                const Fa = Y.cloneNode(!0);
                return S(Fa, {
                    [`${ae}-control-btn`]: !0
                }),
                p(Fa, _(io, {
                    isH5: $,
                    player: O
                })),
                Fa
            }
            )()
        }
        )(), null),
        p(Ps, _(Q, {
            get when() {
                return we.wideScreenBtnVisible && we.UIMode !== l.UI_FULL && !$ && i.wideScreen
            },
            get children() {
                const ml = Y.cloneNode(!0);
                return ml.className = `${ae}-control-btn`,
                p(ml, _(Rn, {
                    isH5: $,
                    player: O,
                    get isWideScreen() {
                        return we.UIMode === l.UI_WIDE
                    },
                    onClick: ()=>{
                        aa()
                    }
                })),
                ml
            }
        }), null),
        p(Ps, (()=>{
            const ml = V(()=>!i.noFullScreenButton && !($ && we.isFullScreen), !0);
            return ()=>ml() && (()=>{
                const Fa = lo.cloneNode(!0)
                  , Za = Fa.firstChild
                  , $a = Za.nextSibling;
                return S(Fa, {
                    [`${ae}-control-btn`]: !0,
                    [`${ae}-btn-fullscreen`]: !0,
                    [`${ae}-active`]: !0
                }),
                Za.className = `${ae}-btn-fullscreen-tooltip`,
                $a.className = `${ae}-icon ${ae}-icon-fullscreen`,
                Fa
            }
            )()
        }
        )(), null),
        $s.className = `${ae}-ass-subtitle`,
        nl.className = `${ae}-subtitle`,
        Ll.className = `${ae}-danmaku-container`,
        p(pl, _(Q, {
            get when() {
                var ml, Fa;
                return !!((Fa = (ml = i.ad) == null ? void 0 : ml.adTagUrl) != null && Fa.length)
            },
            get children() {
                const ml = so.cloneNode(!0)
                  , Fa = ml.firstChild
                  , Za = Fa.nextSibling
                  , $a = Za.nextSibling
                  , ja = $a.firstChild
                  , Ba = $a.nextSibling;
                return Fa.className = `${ae}-ad-wrap`,
                Za.className = `${ae}-ad-loading`,
                p(ml, _(Q, {
                    get when() {
                        return !i.noFullScreenButton && $ && we.UIMode === l.UI_FULL
                    },
                    get children() {
                        const rl = Y.cloneNode(!0);
                        return rl.className = `${ae}-ad-fullscreen`,
                        rl
                    }
                }), $a),
                $a.className = `${ae}-ad-bar`,
                p($a, _(Q, {
                    get when() {
                        return !i.noFullScreenButton && (!$ || $ && we.UIMode !== l.UI_FULL)
                    },
                    get children() {
                        const rl = Y.cloneNode(!0);
                        return rl.className = `${ae}-ad-fullscreen`,
                        rl
                    }
                }), ja),
                p($a, _(Q, {
                    get when() {
                        return i.wideScreen && we.wideScreenBtnVisible && !$
                    },
                    get children() {
                        const rl = Y.cloneNode(!0);
                        return rl.className = `${ae}-ad-widescreen`,
                        rl
                    }
                }), ja),
                ja.className = `${ae}-ad-remaining`,
                Ba.className = `${ae}-ad-premium-btn`,
                D(rl=>S(ml, {
                    [`${ae}-ad-container`]: !0,
                    h5: $,
                    fullscreen: we.isFullScreen,
                    widescreen: we.UIMode === l.UI_WIDE
                }, rl)),
                ml
            }
        }), Nl),
        Nl.className = `${ae}-load-layer`,
        Nl.style.setProperty("display", Te ? "none" : "block"),
        ee(Gl, "src", $ ? is : ts),
        S(Gl, {
            ["player-icon icon-preview"]: !0,
            "icon-preview-h5": $
        }),
        vu.className = `${ae}-video-tips`,
        p(vu, (()=>{
            const ml = V(()=>!i.hideCoverInfo, !0);
            return ()=>ml() && [(()=>{
                const Fa = Y.cloneNode(!0);
                return Fa.className = `${ae}-view-count`,
                Fa
            }
            )(), (()=>{
                const Fa = Y.cloneNode(!0);
                return Fa.className = `${ae}-danmu-count`,
                Fa
            }
            )(), (()=>{
                const Fa = Y.cloneNode(!0);
                return Fa.className = `${ae}-video-pubdate`,
                Fa
            }
            )()]
        }
        )(), Cu),
        Cu.className = `${ae}-video-time`,
        S(Ru, {
            [`${ae}-buff-tips`]: !0,
            [`${ae}-active`]: !!Te
        }),
        p(Ru, _(Ot$1, {
            size: "small"
        })),
        Yu.$$mousedown = ba,
        Yu.className = `${ae}-play-mask`,
        ee(nd, "src", ts),
        nd.className = `${ae}-play-mask-pause-icon`,
        p(pl, $ && (()=>{
            const ml = co.cloneNode(!0)
              , Fa = ml.firstChild
              , Za = Fa.nextSibling;
            return ee(Fa, "src", is),
            ee(Za, "src", Qr),
            D($a=>{
                const ja = {
                    [`${ae}-play-h5-mask`]: !0,
                    [`${ae}-play-h5-mask--bottom`]: we.movePauseIconFlag
                }
                  , Ba = {
                    [`${ae}-play-h5-mask-icon`]: !0,
                    [`${ae}-play-h5-mask-play-icon`]: !0,
                    [`${ae}-play-h5-mask-icon--bottom`]: we.movePauseIconFlag
                }
                  , rl = {
                    [`${ae}-play-h5-mask-icon`]: !0,
                    [`${ae}-play-h5-mask-pause-icon`]: !0,
                    [`${ae}-play-h5-mask-icon--active`]: !0,
                    [`${ae}-play-h5-mask-icon--bottom`]: we.movePauseIconFlag
                };
                return $a._v$9 = S(ml, ja, $a._v$9),
                $a._v$10 = S(Fa, Ba, $a._v$10),
                $a._v$11 = S(Za, rl, $a._v$11),
                $a
            }
            , {
                _v$9: void 0,
                _v$10: void 0,
                _v$11: void 0
            }),
            ml
        }
        )(), null),
        p(pl, _(Bn, {
            isH5: $,
            get visible() {
                return we.muteNotificationVisible
            },
            get fullscreen() {
                return we.isFullScreen
            },
            get text() {
                return we.unmuteText
            },
            onClick: za,
            onClose: ()=>{
                Re({
                    muteNotificationVisible: !1
                })
            }
        }), null),
        p(pl, _(Q, {
            get when() {
                return !!i.watermark
            },
            get children() {
                return _(Kn, {
                    get image() {
                        var ml;
                        return (ml = i.watermark) == null ? void 0 : ml.image
                    },
                    get text() {
                        var ml, Fa;
                        return (Fa = (ml = i.watermark) == null ? void 0 : ml.text) != null ? Fa : ""
                    },
                    player: O,
                    isMobile: $
                })
            }
        }), null),
        p(pl, _(Cn, {}), null),
        p(pl, _(vn, {
            get speed() {
                return O.speed.value()
            },
            get rateList() {
                return i.rateList
            },
            get title() {
                var ml, Fa;
                return (Fa = (ml = i.i18n) == null ? void 0 : ml.speed) != null ? Fa : C.speed
            },
            get drawerType() {
                return Ca()
            },
            get visible() {
                return we.dialogType === "speed"
            },
            onSpeedChange: ml=>{
                Ta(ml)
            }
            ,
            onClose: ()=>{
                Re({
                    dialogType: ""
                })
            }
        }), null),
        p(pl, _(Q, {
            get when() {
                return i.subtitle
            },
            get children() {
                return _(Tn, {
                    get drawerType() {
                        return Ca()
                    },
                    get closed() {
                        return O.ccClosed.value()
                    },
                    get lang() {
                        return O.subtitleLang.value()
                    },
                    player: O,
                    get feedbackable() {
                        var ml;
                        return ((ml = i.subtitle) == null ? void 0 : ml.feedbackable) || !1
                    },
                    get closeable() {
                        var ml;
                        return ((ml = i.subtitle) == null ? void 0 : ml.closeable) || !1
                    },
                    get list() {
                        var ml;
                        return ((ml = i.subtitle) == null ? void 0 : ml.list) || []
                    },
                    get title() {
                        var ml, Fa;
                        return (Fa = (ml = i.i18n) == null ? void 0 : ml.ccTitle) != null ? Fa : C.ccTitle
                    },
                    get visible() {
                        return we.dialogType === "subtitle"
                    },
                    onCloseSubtitle: He,
                    onCCReport: ()=>{
                        O.trigger(l.EVENT.VIDEO_CLICK_CC_REPORT),
                        Re({
                            dialogType: ""
                        })
                    }
                    ,
                    onClick: ml=>{
                        fa(ml)
                    }
                    ,
                    onClose: ()=>{
                        Re({
                            dialogType: ""
                        })
                    }
                })
            }
        }), null),
        p(pl, _(An, {
            get drawerType() {
                return Ca()
            },
            get visible() {
                return we.dialogType === "quality"
            },
            get title() {
                var ml, Fa;
                return (Fa = (ml = i.i18n) == null ? void 0 : ml.quality) != null ? Fa : C.quality
            },
            get quality() {
                return O.videoQuality.value()
            },
            get qualityList() {
                return O.qualityList.value()
            },
            onClick: (ml,Fa)=>{
                Zt(ml)
            }
            ,
            onClose: ()=>{
                Re({
                    dialogType: ""
                })
            }
        }), null),
        D(ml=>{
            const Fa = {
                [`${ae}-box`]: !0,
                [`${ae}-autoplay`]: Te,
                [`${ae}-box-callAppMode`]: i.callAppMode
            }
              , Za = {
                [`${ae}-top-bar`]: !0,
                [`${ae}-top-bar--hidden`]: !0,
                [`${ae}-top-bar-h5`]: $,
                [`${ae}-top-bar-fullscreen`]: we.isFullScreen
            }
              , $a = {
                [`${ae}-control-bar`]: !0,
                [`${ae}-control-bar-h5`]: $,
                [`${ae}-control-bar-fullscreen`]: we.isFullScreen
            }
              , ja = {
                [`${ae}-control-bar-middle`]: !0,
                [`${ae}-control-bar-middle--h5`]: $,
                [`${ae}-control-bar-middle-fullscreen`]: we.isFullScreen
            }
              , Ba = !$ || $ && i.hasNextEpisodeButton && !we.isFullScreen ? "0px" : "12px"
              , rl = {
                [`${ae}-control-bar-bottom`]: !0,
                [`${ae}-control-bar-bottom-h5`]: $,
                [`${ae}-control-bar-bottom--hidden`]: $ && !we.isFullScreen
            }
              , Xa = $ && we.isFullScreen && !i.hasNextEpisodeButton ? "16px" : "0px"
              , Cs = {
                [`${ae}-control-bar-right`]: !0,
                [`${ae}-control-bar-right-h5`]: $,
                [`${ae}-control-bar-right-nowrap`]: i.hideDanmakuButton
            };
            return ml._v$ = S(Ka, Fa, ml._v$),
            ml._v$2 = S(el, Za, ml._v$2),
            ml._v$3 = S(fu, $a, ml._v$3),
            ml._v$4 = S(kl, ja, ml._v$4),
            Ba !== ml._v$5 && kl.style.setProperty("padding-left", ml._v$5 = Ba),
            ml._v$6 = S(uu, rl, ml._v$6),
            Xa !== ml._v$7 && uu.style.setProperty("padding-left", ml._v$7 = Xa),
            ml._v$8 = S(Ps, Cs, ml._v$8),
            ml
        }
        , {
            _v$: void 0,
            _v$2: void 0,
            _v$3: void 0,
            _v$4: void 0,
            _v$5: void 0,
            _v$6: void 0,
            _v$7: void 0,
            _v$8: void 0
        }),
        Pa
    }
    )()
}
  , ho = (n,d)=>Zs(()=>_(uo, n), d);
Z(["dblclick", "mousedown", "touchstart"]);
class fo {
    constructor(d) {
        this.togglePlayMask = y=>{
            y ? this.playMask.classList.add(`${this.player.prefix}-active`) : this.playMask.classList.remove(`${this.player.prefix}-active`)
        }
        ,
        this.toggleH5StateIcon = y=>{
            const ye = this.player.prefix;
            y ? (this.player.template.playH5MaskPlayIcon.classList.add(`${ye}-play-h5-mask-icon--active`),
            this.player.template.playH5MaskPauseIcon.classList.remove(`${ye}-play-h5-mask-icon--active`)) : (this.player.template.playH5MaskPlayIcon.classList.remove(`${ye}-play-h5-mask-icon--active`),
            this.player.template.playH5MaskPauseIcon.classList.add(`${ye}-play-h5-mask-icon--active`))
        }
        ,
        this.player = d,
        this.prefix = this.player.prefix,
        this.init()
    }
    attachTemplate() {
        const d = this.player.container
          , y = {
            prefix: this.prefix,
            config: this.player.config,
            player: this.player
        };
        this.dispose = ho(y, d)
    }
    init() {
        const d = this.prefix
          , y = this.player
          , ye = y.container;
        return this.attachTemplate(),
        this.container = ye,
        this.wrap = this.container.querySelector(`.${d}`),
        this.area = this.container.querySelector(`.${d}-area`),
        this.videoWrp = this.container.querySelector(`.${d}-video-wrap`),
        this.videoWrpDeveloper = this.container.querySelector(`.${d}-video-developer`),
        this.videoTips = this.container.querySelector(`.${d}-video-tips`),
        this.videoTime = this.container.querySelector(`.${d}-video-time`),
        this.viewCount = this.container.querySelector(`.${d}-view-count`),
        this.danmuCount = this.container.querySelector(`.${d}-danmu-count`),
        this.videoPubDate = this.container.querySelector(`.${d}-video-pubdate`),
        this.loadLayer = this.container.querySelector(`.${d}-load-layer`),
        this.controlBar = this.container.querySelector(`.${d}-control-bar`),
        this.display = this.container.querySelector(`.${d}-display`),
        this.topBar = this.container.querySelector(`.${d}-top-bar`),
        this.stateIcon = this.container.querySelector(`.${d}-state-icon`),
        this.stateIconToolTip = this.container.querySelector(`.${d}-state-icon-tooltip`),
        this.contorlSlider = this.container.querySelector(`.${d}-control-slider`),
        this.timeCurrent = this.container.querySelector(`.${d}-time-current-text`),
        this.timeTotal = this.container.querySelector(`.${d}-time-total-text`),
        this.subtitle = this.container.querySelector(`.${d}-subtitle`),
        this.assSubtitle = this.container.querySelector(`.${d}-ass-subtitle`),
        this.danmakuContainer = this.container.querySelector(`.${d}-danmaku-container`),
        this.btnDanamku = this.container.querySelector(`.${d}-btn-comment`),
        this.btnWidescreen = this.container.querySelector(`.${d}-btn-fullscreen`),
        this.btnVol = this.container.querySelector(`.${d}-control-btn-vol`),
        this.bufferTips = this.container.querySelector(`.${d}-buff-tips`),
        this.controlBarRight = this.container.querySelector(`.${d}-control-bar-right`),
        this.btnSpeed = this.container.querySelector(`.${d}-control-btn-speed`),
        this.btnSpeedH5 = this.container.querySelector(`.${d}-control-btn-speed-h5`),
        this.btnSubtitle = this.container.querySelector(`.${d}-control-btn-subtitle`),
        this.btnSubtitleH5 = this.container.querySelector(`.${d}-control-btn-subtitle-h5`),
        this.btnQuality = this.container.querySelector(`.${d}-control-btn-qualities`),
        this.btnQualityH5 = this.container.querySelector(`.${d}-control-btn-qualities-h5`),
        this.btnReport = this.container.querySelector(`.${d}-top-bar-report-btn`),
        this.btnNextEpisode = this.container.querySelector(`.${d}-control-btn-next-episode`),
        this.playMask = this.container.querySelector(`.${d}-play-mask`),
        this.playMaskPauseIcon = this.container.querySelector(`.${d}-play-mask-pause-icon`),
        this.playH5Mask = this.container.querySelector(`.${d}-play-h5-mask`),
        this.playH5MaskPlayIcon = this.container.querySelector(`.${d}-play-h5-mask-play-icon`),
        this.playH5MaskPauseIcon = this.container.querySelector(`.${d}-play-h5-mask-pause-icon`),
        this.playIcon = this.container.querySelector(`.${d}-play-icon`),
        this.pauseIcon = this.container.querySelector(`.${d}-pause-icon`),
        this.fullscreenIcon = this.container.querySelector(`.${d}-icon-fullscreen`),
        this.fullscreenToolTip = this.container.querySelector(`.${d}-btn-fullscreen-tooltip`),
        this.adsContainer = this.container.querySelector(`.${d}-ad-container`),
        this.adsWrap = this.container.querySelector(`.${d}-ad-wrap`),
        this.adsFullscreen = this.container.querySelector(`.${d}-ad-fullscreen`),
        this.adsWidescreen = this.container.querySelector(`.${d}-ad-widescreen`),
        this.adsRemaining = this.container.querySelector(`.${d}-ad-remaining`),
        this.adsPremiumBtn = this.container.querySelector(`.${d}-ad-premium-btn`),
        this.adsLoading = this.container.querySelector(`.${d}-ad-loading`),
        y.bind(l.EVENT.VIDEO_DESTROY, (ve,ie)=>{
            this.destroy()
        }
        ),
        this
    }
    csIn(d) {
        const y = this.player.config.isH5;
        this.player.trigger(l.EVENT.VIDEO_CONTROLBAR, {
            show: d
        }),
        d ? (this.display.classList.remove(`${this.prefix}-control-bar-hide`),
        this.display.style.setProperty("cursor", "auto")) : (this.display.classList.add(`${this.prefix}-control-bar-hide`),
        this.display.style.setProperty("cursor", "none")),
        this.toggleTopBar(d),
        y && this.toggleH5Mask(d)
    }
    toggleTopBar(d) {
        d ? this.topBar.classList.remove(`${this.prefix}-top-bar--hidden`) : this.topBar.classList.add(`${this.prefix}-top-bar--hidden`)
    }
    toggleH5Mask(d) {
        d ? this.player.template.playH5Mask.classList.add(`${this.player.prefix}-active`) : this.player.template.playH5Mask.classList.remove(`${this.player.prefix}-active`)
    }
    toggleCsIn() {
        return this.display.classList.contains(`${this.prefix}-control-bar-hide`) ? (this.csIn(!0),
        !0) : (this.csIn(!1),
        !1)
    }
    isControllerVisible() {
        return !this.display.classList.contains(`${this.prefix}-control-bar-hide`)
    }
    destroy(d) {
        this.dispose(),
        d && this.container.remove()
    }
}
const ps = {
    mask: 18,
    stroke: 24
};
class go {
    constructor(d) {
        this.positionFix = {
            x: 0,
            y: 0
        },
        this.fading = [],
        this.resizeFont = ()=>{
            let y = 1;
            this.style.scale && (y = this.container.clientWidth / 840);
            const ye = Math.max((this.style.fontSize || ps[this.options.theme || "stroke"]) * y, 12);
            this.elementGroup.group[0].style.fontSize = `${ye}px`,
            this.elementGroup.group[1].style.fontSize = `${ye}px`
        }
        ,
        this.options = d,
        this.container = this.options.container,
        this.style = {
            fontSize: ps[this.options.theme || "stroke"],
            color: 16777215,
            backgroundOpacity: this.options.theme === "stroke" ? 0 : .6,
            textShadow: this.options.theme === "stroke" ? ["2px 0 0 #000", "-2px 0 0 #000", "0 2px 0 #000", "0 -2px 0 #000", "1px 1px 0 #000", "-1px -1px 0 #000", "1px -1px 0 #000", "-1px 1px 0 #000"].join(",") : "",
            position: "bc",
            bilingual: !1,
            scale: !0,
            fade: !1,
            fontWeight: this.options.theme === "stroke" ? 700 : 400
        },
        this.debouceResizeFont = debounce(50, this.resizeFont),
        this.init()
    }
    init() {
        this.container.insertAdjacentHTML("beforeend", `
            <div class="subtitle-position subtitle-position-bc">
                <div class="subtitle-wrap">
                    <div class="subtitle-group"></div>
                    <div class="subtitle-group second"></div>
                </div>
            </div>`),
        this.element = {
            position: this.container.querySelector(".subtitle-position"),
            wrap: this.container.querySelector(".subtitle-wrap")
        },
        this.elementGroup = {
            group: this.container.querySelectorAll(".subtitle-group")
        },
        this.container.style.color = this.style.color !== void 0 ? Qi(this.style.color) : null,
        this.debouceResizeFont()
    }
    draw(d, y=0) {
        this.fading.forEach(ae=>{
            ae.remove()
        }
        );
        const ye = this.style.backgroundOpacity !== void 0 ? this.style.backgroundOpacity : .4
          , ve = document.createRange()
          , ie = ve.createContextualFragment.bind(ve);
        d.ele = ie(`<span class="subtitle-item-text" style="background: rgba(0,0,0,${ye}); ${this.style.fade ? "display: none;" : ""}; text-shadow: ${this.style.textShadow};"> ${Yi(d.content) || ""}</span>`),
        this.elementGroup.group[y].insertAdjacentHTML("beforeend", `
            <span class="subtitle-item-text" style="background: rgba(0,0,0,${ye}); ${this.style.fade ? "display: none;" : ""}; text-shadow: ${this.style.textShadow}; font-weight: ${this.style.fontWeight};"> ${Yi(d.content) || ""}</span>`),
        d.ele = this.elementGroup.group[y].lastElementChild,
        this.style.fade && (d.ele.style.transition = "opacity 0.2s",
        d.ele.style.opacity = "1"),
        this.updateRule(),
        clearTimeout(this.changeTimer),
        this.changeTimer = this.mouseIsDown && window.setTimeout(()=>{
            this.positionEnd = this.updatePosition({
                x: this.positionEnd.x,
                y: this.positionEnd.y
            }),
            this.move(this.positionEnd)
        }
        , 200)
    }
    clear(d=0) {
        this.elementGroup.group[d].innerHTML = ""
    }
    wipe(d, y) {
        var ye, ve;
        this.style.fade && y ? (this.fading.push(d.ele),
        d.ele.style.transition = "opacity 0.2s",
        d.ele.style.opacity = "0",
        setTimeout(()=>{
            var ie, ae;
            this.fading.splice(this.fading.indexOf(d == null ? void 0 : d.ele), 1),
            (ae = (ie = d == null ? void 0 : d.ele) == null ? void 0 : ie.parentNode) == null || ae.removeChild(d == null ? void 0 : d.ele)
        }
        , 200)) : (ve = (ye = d == null ? void 0 : d.ele) == null ? void 0 : ye.parentNode) == null || ve.removeChild(d == null ? void 0 : d.ele)
    }
    setStyle(d) {
        this.container.style.color = d.color !== void 0 ? Qi(d.color) : null;
        const y = this.container.querySelector(".subtitle-item-text");
        d.textShadow !== void 0 && (this.style.textShadow = d.textShadow,
        y.style.setProperty("text-shadow", d.textShadow)),
        d.fontSize !== void 0 && (this.style.fontSize = d.fontSize,
        this.debouceResizeFont()),
        d.fontWeight !== void 0 && (this.style.fontWeight = d.fontWeight),
        d.backgroundOpacity !== void 0 && (this.style.backgroundOpacity = d.backgroundOpacity,
        y.style.setProperty("background", `rgba(0,0,0,${d.backgroundOpacity})`)),
        d.position && (this.isCenter = !1,
        this.style.position = d.position,
        this.setPosition(this.style.position)),
        d.bilingual !== void 0 && (this.style.bilingual = d.bilingual),
        d.scale !== void 0 && (this.style.scale = d.scale,
        this.debouceResizeFont()),
        d.fade !== void 0 && (this.style.fade = d.fade)
    }
    setPosition(d) {
        this.element.position.removeAttribute("style"),
        this.element.position.classList.remove("subtitle-position-bl"),
        this.element.position.classList.remove("subtitle-position-bc"),
        this.element.position.classList.remove("subtitle-position-br"),
        this.element.position.classList.remove("subtitle-position-tl"),
        this.element.position.classList.remove("subtitle-position-tc"),
        this.element.position.classList.remove("subtitle-position-tr"),
        d && this.element.position.classList.add(`subtitle-position-${d}`)
    }
    subtitleChange(d=!1) {
        this.positionEnd && (this.isCenter || d) && (this.positionEnd = this.updatePosition({
            x: this.positionEnd.x,
            y: this.positionEnd.y
        }),
        this.move(this.positionEnd))
    }
    updateScreen(d) {
        this.isFullscreen = d,
        this.resizePosition()
    }
    resizePosition() {
        this.resizeTimer && clearTimeout(this.resizeTimer),
        this.resizeTimer = window.setTimeout(()=>{
            this.updateRule(),
            this.isBottomCenter ? (this.setPosition("bc"),
            this.element.position.classList.remove("subtitle-position-changed")) : this.subtitleChange()
        }
        , 200)
    }
    bindEvents() {
        const d = ye=>{
            clearTimeout(this.changeTimer),
            this.positionEnd = this.updatePosition({
                x: ye.clientX - this.positionStart.x + this.positionFix.x,
                y: ye.clientY - this.positionStart.y + this.positionFix.y
            }),
            this.move(this.positionEnd)
        }
          , y = ye=>{
            clearTimeout(this.changeTimer),
            this.positionFix = this.positionEnd,
            this.mouseIsDown = !1,
            this.positionFix && this.mouseUp(),
            document.removeEventListener("mouseup", y),
            document.removeEventListener("mousemove", d)
        }
        ;
        this.element.wrap.addEventListener("mousedown", ye=>{
            ye.button === 0 && (this.mouseIsDown = !0,
            this.positionStart = {
                x: ye.clientX,
                y: ye.clientY
            },
            this.updateRule(),
            this.mouseDown(),
            this.updateRule(),
            document.addEventListener("mousemove", d),
            document.addEventListener("mouseup", y))
        }
        )
    }
    mouseUp() {
        const d = this.moveRule.width * .9
          , y = this.moveRule.subtitleH
          , ye = this.moveRule.width * .25
          , ve = this.moveRule.width * .75
          , ie = this.moveRule.height * .75
          , ae = this.moveRule.subtitleX
          , i = this.positionFix.x + d / 2
          , O = this.positionFix.y + y / 2
          , $ = we=>{
            we.top = "auto",
            we.bottom = 100 - (this.positionFix.y + y) * 100 / this.moveRule.height + "%"
        }
        ;
        let Te = {};
        this.isBottomCenter = !1,
        i < ye ? (Te = {
            transform: "",
            textAlign: "left",
            left: (this.positionFix.x + ae) * 100 / this.moveRule.width + "%",
            top: this.positionFix.y * 100 / this.moveRule.height + "%"
        },
        O > ie && $(Te),
        this.isCenter = !1) : i > ve ? (Te = {
            transform: "",
            textAlign: "right",
            left: "auto",
            right: 100 - (i + this.moveRule.subtitleW / 2) * 100 / this.moveRule.width + "%",
            top: this.positionFix.y * 100 / this.moveRule.height + "%"
        },
        O > ie && $(Te),
        this.isCenter = !1) : (this.isCenter = !0,
        O > ie && ($(Te),
        Te.left = this.positionFix.x,
        Te.transform = "",
        this.isCenter = !1,
        this.isBottomCenter = !0)),
        Object.keys(Te).forEach(we=>{
            this.element.position.style[we] = Te[we]
        }
        )
    }
    mouseDown() {
        const d = this.moveRule.width * .9
          , y = this.moveRule.subtitleW
          , ye = this.moveRule.subtitleX;
        this.positionFix = {
            x: this.element.position.offsetLeft + y / 2 - d / 2 + ye,
            y: this.element.position.offsetTop
        },
        this.setPosition("changed"),
        this.move(this.positionFix)
    }
    move(d) {
        this.element.position.style.transform = `translate(${d.x}px, ${d.y}px)`
    }
    updateRule() {
        const d = this.container.getBoundingClientRect()
          , y = this.element.wrap.getBoundingClientRect()
          , ye = this.isFullscreen ? 54 : 44;
        this.moveRule = {
            width: d.width,
            height: d.height,
            top: d.height * .05,
            left: d.width * .05,
            bottom: d.height - ye,
            right: d.width * .95,
            subtitleX: this.element.wrap.offsetTop,
            subtitleH: y.height,
            subtitleW: y.width
        }
    }
    updatePosition(d) {
        const y = this.moveRule;
        return d.x + y.subtitleX < y.left && (d.x = y.left - y.subtitleX),
        d.x + y.subtitleW + y.subtitleX > y.right && (d.x = y.right - y.subtitleW - y.subtitleX),
        d.y < y.top && (d.y = y.top),
        d.y + y.subtitleH > y.bottom && (d.y = y.bottom - y.subtitleH),
        d
    }
    resize() {
        this.debouceResizeFont()
    }
    resetPosition() {
        this.positionFix = {
            x: 0,
            y: 0
        },
        this.element.position.style.transform = "",
        this.element.position.classList.remove("subtitle-position-changed")
    }
}
class ms {
    constructor(d, y) {
        this.showing = [],
        this.subtitleItems = [],
        this.options = d,
        this.subtitle = y,
        this.render = d.render,
        this.showing = [],
        this.index = 0,
        window.requestAnimationFrame(()=>{
            this.frame()
        }
        )
    }
    frame() {
        if (window.requestAnimationFrame(()=>{
            this.frame()
        }
        ),
        !this.subtitle.paused && this.subtitle.visibleStatus && this.subtitleItems.length) {
            const d = this.options.time();
            let y = this.subtitleItems[this.index];
            for (let ye = 0; ye < this.showing.length; ye++)
                this.showing[ye].to < d && this.wipe(this.showing[ye]);
            for (; y && y.from <= d; )
                y.to > d && this.draw(y),
                this.index++,
                y = this.subtitleItems[this.index]
        }
    }
    draw(d) {
        this.showing.push(d),
        this.render.draw(d, this.options.group),
        this.render.subtitleChange(),
        this.subtitle.player.trigger(l.EVENT.VIDEO_SUBTITLE_CHANGE)
    }
    wipe(d, y=!0) {
        const ye = this.showing.indexOf(d);
        ye > -1 && (this.showing.splice(ye, 1),
        this.render.wipe(d, y),
        this.subtitle.player.trigger(l.EVENT.VIDEO_SUBTITLE_CHANGE))
    }
    refresh() {
        this.render.clear(this.options.group),
        this.showing = [],
        this.subtitle.player.trigger(l.EVENT.VIDEO_SUBTITLE_CHANGE),
        this.index = this.subtitleItems.length;
        for (let d = 0; d < this.subtitleItems.length; d++)
            if (this.options.time() <= this.subtitleItems[d].from) {
                this.index = d;
                break
            }
        for (let d = 0; d < this.index; d++) {
            const y = this.options.time();
            this.subtitleItems[d].from <= y && this.subtitleItems[d].to > y && this.draw(this.subtitleItems[d])
        }
    }
    update(d) {
        this.subtitleItems = d.body,
        this.refresh()
    }
    clear() {
        this.render.clear(this.options.group),
        this.subtitleItems = [],
        this.showing = [],
        this.subtitle.player.trigger(l.EVENT.VIDEO_SUBTITLE_CHANGE)
    }
    resize() {
        this.render.resize()
    }
    destroy() {
        this.clear()
    }
}
class po {
    constructor(d, y) {
        this.visibleStatus = !0,
        this.data = {},
        this.inited = !1,
        this.handleAssInitSuccess = ()=>{
            var ve;
            const ie = (this.player.config.subtitle.list || []).find(ae=>ae.key === this.player.subtitleLang.value()).assUrl || "";
            !ie || ((ve = this.player.ass) == null || ve.render(ie).then(()=>{
                this.player.subtitle.visible(!1)
            }
            ).catch(()=>{
                this.player.subtitle.visible(!0)
            }
            ))
        }
        ;
        const ye = {};
        this.options = Object.assign(ye, d),
        this.player = y,
        this.paused = this.player.video && this.player.video.paused,
        this.init()
    }
    static convertData(d) {
        const y = d.body.map(ye=>({
            from: ye.from,
            to: ye.to,
            location: ye.location,
            content: ye.content
        }));
        return {
            fontSize: d.font_size,
            fontColor: d.font_color,
            backgroundAlpha: d.background_alpha,
            backgroundColor: d.background_color,
            stroke: d.Stroke,
            body: y
        }
    }
    load(d) {
        const {data: y, group: ye, onSuccess: ve} = d;
        this.update(y, ye),
        ve == null || ve(),
        this.isRendered || (this.isRendered = !0,
        this.visible(!this.player.ccClosed.value()))
    }
    update(d, y=0) {
        !(d != null && d.body) || (this.isClosed = !1,
        d.body = d.body.sort((ye,ve)=>ye.from - ve.from),
        y === 0 ? this.manager.update(d) : y === 1 && this.secondManager.update(d))
    }
    play() {
        this.paused = !1
    }
    pause() {
        this.paused = !0
    }
    visible(d) {
        d !== this.visibleStatus && (d ? this.visibleStatus = !0 : (this.visibleStatus = !1,
        this.clear()))
    }
    changeBilingual(d) {
        d.double ? this.load(d) : this.secondManager.destroy()
    }
    init() {
        var d;
        this.inited || (this.visibleStatus = !0,
        this.render = new go({
            container: this.options.container,
            theme: ((d = this.player.config.subtitle) == null ? void 0 : d.theme) || "stroke"
        }),
        this.manager = new ms({
            time: this.options.time,
            render: this.render,
            group: 0
        },this),
        this.secondManager = new ms({
            time: this.options.time,
            render: this.render,
            group: 1
        },this),
        this.bindEvents(),
        this.inited = !0)
    }
    bindEvents() {
        this.player.bind(l.EVENT.ASS_INIT_SUCCESS, this.handleAssInitSuccess),
        this.player.bind(l.EVENT.VIDEO_MEDIA_PLAY_SUCCESS, ()=>{
            this.play()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_MEDIA_PAUSE, ()=>{
            this.pause()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_MEDIA_SEEK, ()=>{
            this.pause()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_MEDIA_SEEKED, ()=>{
            this.refresh(),
            this.play()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_MEDIA_ENDED, ()=>{
            this.refresh()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_PLAYER_RESIZE, ()=>{
            let d = !1;
            (this.player.container.classList.contains("mode-fullscreen") || this.player.container.classList.contains("mode-webfullscreen")) && (d = !0),
            this.render && this.render.updateScreen(d),
            this.render && this.render.resize()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_DESTROY, ()=>{
            this.destroy()
        }
        )
    }
    refresh() {
        this.manager.refresh(),
        this.secondManager.refresh()
    }
    resize() {
        this.manager.resize(),
        this.secondManager.resize()
    }
    clear() {
        this.isClosed = !0,
        this.manager.clear(),
        this.secondManager.clear()
    }
    destroy() {
        this.pause(),
        this.manager && this.manager.destroy(),
        this.secondManager && this.secondManager.destroy(),
        this.player.unbind(l.EVENT.ASS_INIT_SUCCESS, this.handleAssInitSuccess),
        this.options.container.innerHTML = "",
        this.data = {}
    }
    setStyle(d) {
        this.render.setStyle(d)
    }
    resetPosition() {
        this.render.resetPosition()
    }
}
var Qt = (n=>(n[n.UGC = 0] = "UGC",
n[n.OGV = 1] = "OGV",
n))(Qt || {})
  , ys = (n=>(n[n.SRT = 0] = "SRT",
n[n.ASS = 1] = "ASS",
n))(ys || {});
class mo {
    constructor(d, y) {
        this.player = d,
        this.config = y,
        this.init = ()=>__async(this, null, function*() {
            try {
                this.chronosView = yield this.core.init({
                    mountElement: this.config.container
                }),
                this.chronosView.on(EVENT_NAME.ERROR, this.handleChronosError),
                this.client = yield this.chronosView.createDFMClient(),
                this.bindPlayerEvents(),
                this.canPlayAss = !0,
                this.player.trigger(l.EVENT.ASS_INIT_SUCCESS)
            } catch (ye) {
                this.canPlayAss = !1,
                this.player.trigger(l.EVENT.ASS_INIT_FAIL)
            }
        }),
        this.handleChronosError = ye=>{
            ye && this.player.track.trackInfoPush("chronos_error", JSON.stringify(ye))
        }
        ,
        this.render = (ye,ve={})=>{
            var ie;
            const {oid: ae, aid: i, s_locale: O} = this.player.config.extraInfo;
            if (!this.client)
                return Promise.reject("client not inited");
            const $ = performance.now();
            return this.client.renderSubtitle({
                locale: O,
                lang: "English",
                assUrl: ye,
                video_id: ae,
                subtitle_type: ys.ASS,
                video_type: i ? Qt.UGC : Qt.OGV,
                config: __spreadProps(__spreadValues({}, ve), {
                    subtitle_config: {
                        has_background: ((ie = this.player.config.subtitle) == null ? void 0 : ie.theme) === "mask"
                    }
                })
            }).then(()=>{
                this.player.ccType = "ass",
                this.player.subtitle.visible(!1),
                this.player.getState() === l.V_PLAY ? this.play() : this.pause(),
                console.log(performance.now() - $),
                this.sync(),
                this.isRenderred ? this.show() : (this.isRenderred = !0,
                this.player.ccClosed.value() ? this.hide() : this.show())
            }
            )
        }
        ,
        this.bindPlayerEvents = ()=>{
            this.player.bind(l.EVENT.VIDEO_MEDIA_PAUSE, this.pause),
            this.player.bind(l.EVENT.VIDEO_MEDIA_PLAYING, this.play),
            this.player.bind(l.EVENT.VIDEO_RATE_CHANGE, this.sync),
            this.player.bind(l.EVENT.VIDEO_MEDIA_TIME, this.sync),
            this.player.bind(l.EVENT.VIDEO_MEDIA_ENDED, this.sync),
            this.player.bind(l.EVENT.VIDEO_DESTROY, this.dispose),
            this.disposeList.push(()=>{
                this.player.unbind(l.EVENT.VIDEO_MEDIA_PAUSE, this.pause),
                this.player.unbind(l.EVENT.VIDEO_MEDIA_PLAYING, this.play),
                this.player.unbind(l.EVENT.VIDEO_RATE_CHANGE, this.sync),
                this.player.unbind(l.EVENT.VIDEO_MEDIA_TIME, this.sync),
                this.player.unbind(l.EVENT.VIDEO_MEDIA_ENDED, this.sync)
            }
            )
        }
        ,
        this.pause = ()=>{
            var ye;
            (ye = this.client) == null || ye.pause(this.currentTimeMill ? this.currentTimeMill : .01)
        }
        ,
        this.play = ()=>{
            var ye;
            (ye = this.client) == null || ye.play(this.currentTimeMill ? this.currentTimeMill : .01, Number(this.player.speed.value()))
        }
        ,
        this.hide = ()=>{
            var ye;
            (ye = this.chronosView) == null || ye.hide()
        }
        ,
        this.show = ()=>{
            var ye;
            (ye = this.chronosView) == null || ye.show()
        }
        ,
        this.sync = ()=>{
            var ye, ve, ie;
            if (!((ye = this.player) != null && ye.video))
                return;
            const ae = this.player.video.playbackRate;
            this.player.getState() === l.V_PLAY ? (ve = this.client) == null || ve.play(this.currentTimeMill ? this.currentTimeMill : .01, ae) : (ie = this.client) == null || ie.pause(this.currentTimeMill ? this.currentTimeMill : .01)
        }
        ,
        this.dispose = ()=>{
            var ye;
            this.chronosView.off(EVENT_NAME.ERROR),
            (ye = this.chronosView) == null || ye.destroy(),
            this.client = null,
            this.disposeList.forEach(ve=>ve()),
            this.disposeList = []
        }
        ,
        this.core = Chronos(),
        this.chronosView = null,
        this.canPlayAss = !1,
        this.isRenderred = !1,
        this.client = null,
        this.disposeList = [],
        this.init()
    }
    get assCompatible() {
        return this.canPlayAss
    }
    get currentTimeMill() {
        return this.player.currentTime() * 1e3
    }
}
const yo = n=>{
    const {env: d, locale: y, platform: ye, baseUrl: ve} = n
      , ie = ft$1(d)
      , ae = ve || `${ie.apiUrl}/dm/web/`
      , i = (O,$)=>__async(globalThis, null, function*() {
        const Te = yield fetch(`${ae}${O}`, $);
        switch (Te.headers.get("Content-Type")) {
        case "application/octet-stream":
            {
                if (!Te.ok)
                    throw new Error("fetch not ok");
                return Te.arrayBuffer()
            }
        default:
            {
                const {code: we, message: Re, data: Ye} = yield Te.json();
                if (we !== 0)
                    throw new ar$1(we,Re);
                return Ye
            }
        }
    });
    return {
        get: (O,$)=>{
            var Te;
            const we = new URLSearchParams(__spreadValues({
                s_locale: (Te = ne$1.get(y)) != null ? Te : "en",
                platform: ye
            }, $));
            return i(`${O}?${we.toString()}`, {
                credentials: "include"
            })
        }
        ,
        post: (O,$,Te)=>{
            var we;
            const Re = new URLSearchParams(__spreadValues({
                s_locale: (we = ne$1.get(y)) != null ? we : "en",
                platform: ye
            }, Te));
            return i(`${O}?${Re.toString()}`, {
                method: "POST",
                credentials: "include",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify($ != null ? $ : {})
            })
        }
        ,
        postForm: (O,$,Te)=>{
            var we;
            const Re = new URLSearchParams(__spreadValues({
                s_locale: (we = ne$1.get(y)) != null ? we : "en",
                platform: ye
            }, Te));
            return i(`${O}?${Re.toString()}`, {
                method: "POST",
                credentials: "include",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: new URLSearchParams($ != null ? $ : {})
            })
        }
    }
}
  , Eo = n=>n ? n.split(";").map(d=>{
    const y = d.trim()
      , ye = y.indexOf("=");
    return [y.slice(0, ye), y.slice(ye + 1)]
}
).reduce((d,[y,ye])=>__spreadProps(__spreadValues({}, d), {
    [y]: ye
}), {}) : {}
  , _o = {
    bilibili: {
        nested: {
            community: {
                nested: {
                    service: {
                        nested: {
                            dm: {
                                nested: {
                                    v1: {
                                        nested: {
                                            DmWebViewReply: {
                                                fields: {
                                                    state: {
                                                        type: "int32",
                                                        id: 1
                                                    },
                                                    text: {
                                                        type: "string",
                                                        id: 2
                                                    },
                                                    textSide: {
                                                        type: "string",
                                                        id: 3
                                                    },
                                                    dmSge: {
                                                        type: "DmSegConfig",
                                                        id: 4
                                                    },
                                                    flag: {
                                                        type: "DanmakuFlagConfig",
                                                        id: 5
                                                    },
                                                    specialDms: {
                                                        rule: "repeated",
                                                        type: "string",
                                                        id: 6
                                                    },
                                                    checkBox: {
                                                        type: "bool",
                                                        id: 7
                                                    },
                                                    count: {
                                                        type: "int64",
                                                        id: 8
                                                    },
                                                    commandDms: {
                                                        rule: "repeated",
                                                        type: "CommandDm",
                                                        id: 9
                                                    },
                                                    dmSetting: {
                                                        type: "DanmuWebPlayerConfig",
                                                        id: 10
                                                    }
                                                }
                                            },
                                            CommandDm: {
                                                fields: {
                                                    id: {
                                                        type: "int64",
                                                        id: 1
                                                    },
                                                    oid: {
                                                        type: "int64",
                                                        id: 2
                                                    },
                                                    mid: {
                                                        type: "int64",
                                                        id: 3
                                                    },
                                                    command: {
                                                        type: "string",
                                                        id: 4
                                                    },
                                                    content: {
                                                        type: "string",
                                                        id: 5
                                                    },
                                                    progress: {
                                                        type: "int32",
                                                        id: 6
                                                    },
                                                    ctime: {
                                                        type: "string",
                                                        id: 7
                                                    },
                                                    mtime: {
                                                        type: "string",
                                                        id: 8
                                                    },
                                                    extra: {
                                                        type: "string",
                                                        id: 9
                                                    },
                                                    idStr: {
                                                        type: "string",
                                                        id: 10
                                                    }
                                                }
                                            },
                                            DmSegConfig: {
                                                fields: {
                                                    pageSize: {
                                                        type: "int64",
                                                        id: 1
                                                    },
                                                    total: {
                                                        type: "int64",
                                                        id: 2
                                                    }
                                                }
                                            },
                                            DanmakuFlagConfig: {
                                                fields: {
                                                    recFlag: {
                                                        type: "int32",
                                                        id: 1
                                                    },
                                                    recText: {
                                                        type: "string",
                                                        id: 2
                                                    },
                                                    recSwitch: {
                                                        type: "int32",
                                                        id: 3
                                                    }
                                                }
                                            },
                                            DmSegMobileReply: {
                                                fields: {
                                                    elems: {
                                                        rule: "repeated",
                                                        type: "DanmakuElem",
                                                        id: 1
                                                    }
                                                }
                                            },
                                            DanmakuElem: {
                                                fields: {
                                                    id: {
                                                        type: "int64",
                                                        id: 1
                                                    },
                                                    progress: {
                                                        type: "int32",
                                                        id: 2
                                                    },
                                                    mode: {
                                                        type: "int32",
                                                        id: 3
                                                    },
                                                    fontsize: {
                                                        type: "int32",
                                                        id: 4
                                                    },
                                                    color: {
                                                        type: "uint32",
                                                        id: 5
                                                    },
                                                    mid_hash: {
                                                        type: "string",
                                                        id: 6
                                                    },
                                                    content: {
                                                        type: "string",
                                                        id: 7
                                                    },
                                                    ctime: {
                                                        type: "int64",
                                                        id: 8
                                                    },
                                                    weight: {
                                                        type: "int32",
                                                        id: 9
                                                    },
                                                    action: {
                                                        type: "string",
                                                        id: 10
                                                    },
                                                    pool: {
                                                        type: "int32",
                                                        id: 11
                                                    },
                                                    id_str: {
                                                        type: "string",
                                                        id: 12
                                                    }
                                                }
                                            },
                                            DanmuWebPlayerConfig: {
                                                fields: {
                                                    dmSwitch: {
                                                        type: "bool",
                                                        id: 1
                                                    },
                                                    aiSwitch: {
                                                        type: "bool",
                                                        id: 2
                                                    },
                                                    aiLevel: {
                                                        type: "int32",
                                                        id: 3
                                                    },
                                                    blocktop: {
                                                        type: "bool",
                                                        id: 4
                                                    },
                                                    blockscroll: {
                                                        type: "bool",
                                                        id: 5
                                                    },
                                                    blockbottom: {
                                                        type: "bool",
                                                        id: 6
                                                    },
                                                    blockcolor: {
                                                        type: "bool",
                                                        id: 7
                                                    },
                                                    blockspecial: {
                                                        type: "bool",
                                                        id: 8
                                                    },
                                                    preventshade: {
                                                        type: "bool",
                                                        id: 9
                                                    },
                                                    dmask: {
                                                        type: "bool",
                                                        id: 10
                                                    },
                                                    opacity: {
                                                        type: "float",
                                                        id: 11
                                                    },
                                                    dmarea: {
                                                        type: "int32",
                                                        id: 12
                                                    },
                                                    speedplus: {
                                                        type: "float",
                                                        id: 13
                                                    },
                                                    fontsize: {
                                                        type: "float",
                                                        id: 14
                                                    },
                                                    screensync: {
                                                        type: "bool",
                                                        id: 15
                                                    },
                                                    speedsync: {
                                                        type: "bool",
                                                        id: 16
                                                    },
                                                    fontfamily: {
                                                        type: "string",
                                                        id: 17
                                                    },
                                                    bold: {
                                                        type: "bool",
                                                        id: 18
                                                    },
                                                    fontborder: {
                                                        type: "int32",
                                                        id: 19
                                                    },
                                                    drawType: {
                                                        type: "string",
                                                        id: 20
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
};
var vo = {
    nested: _o
};
const Io = ()=>({
    api: n=>{
        window.__bl && window.__bl.api(n)
    }
});
class bo {
    constructor(d) {
        this.player = d,
        this.config = this.player.config,
        this.api = yo({
            env: this.config.extraInfo.env,
            locale: this.config.extraInfo.s_locale,
            platform: "web"
        }),
        this.mediaType = this.config.extraInfo.mediaType === "ugc" ? 1 : 2,
        this.arms = Io()
    }
    queryDanmakuList(d) {
        return __async(this, null, function*() {
            var y;
            const ye = Date.now();
            try {
                const ve = yield this.api.get("list", {
                    oid: this.config.extraInfo.oid,
                    type: this.mediaType,
                    segment_index: d
                })
                  , ie = protobufjs.Root.fromJSON(vo).lookupType("bilibili.community.service.dm.v1.DmSegMobileReply")
                  , ae = (y = ie.toObject(ie.decode(new Uint8Array(ve))).elems) != null ? y : [];
                return this.arms.api({
                    api: "dm-web-list",
                    time: Date.now() - ye,
                    success: !0,
                    begin: ye
                }),
                ae
            } catch (ve) {
                throw ve instanceof ar$1 && this.arms.api({
                    api: "dm-web-list",
                    time: Date.now() - ye,
                    success: !1,
                    msg: ve.message,
                    code: ve.code,
                    begin: ye
                }),
                ve
            }
        })
    }
    addDanmaku(d) {
        return __async(this, null, function*() {
            const y = Eo(document.cookie).bili_jct;
            return this.api.postForm("add", __spreadProps(__spreadValues({}, d), {
                type: this.mediaType,
                oid: this.config.extraInfo.oid,
                plat: 1
            }), {
                csrf: y
            })
        })
    }
    dispose() {}
}
function Es(n, d=3) {
    return __async(this, null, function*() {
        if (d === 1)
            return yield n();
        try {
            return yield n()
        } catch (y) {
            return yield Es(n, d - 1)
        }
    })
}
class To extends l$2 {
    constructor(d) {
        var y, ye, ve, ie, ae;
        const {extraInfo: i, danmakuConfig: O} = d.config;
        super({
            container: document.querySelector(`.${d.prefix}-danmaku-container`),
            bold: !0,
            duration: (y = O.duration) != null ? y : 7,
            danmakuNumber: (ye = O.number) != null ? ye : 80,
            danmakuArea: (ve = O.area) != null ? ve : 25,
            fontBorder: 2,
            fontFamily: "SimHei, 'Microsoft JhengHei'",
            fontSize: 1,
            opacity: .75,
            preventShade: !1,
            speedPlus: (ie = O.speed) != null ? ie : 1,
            speedSync: !1,
            videoSpeed: 1,
            visible: (ae = O.defaultVisible) != null ? ae : !1,
            isRecycling: !0,
            timeSyncFunc: ()=>this.player.video ? this.player.video.currentTime * 1e3 : 0,
            env: i.env,
            locale: i.s_locale,
            platform: "web"
        }),
        this.pageSize = 360,
        this.danmakuList = [],
        this.danmakuLoadingList = [],
        this.init = ()=>__async(this, null, function*() {
            this.danmakuConfig.on && this.loadDanmakuDataWithRetry(1),
            this.player.bind(l.EVENT.VIDEO_MEDIA_SEEKED, this.handleSeek),
            this.player.bind(l.EVENT.VIDEO_MEDIA_PLAY_SUCCESS, this.handlePlay),
            this.player.bind(l.EVENT.VIDEO_PROGRESS_UPDATE, this.handleTimeUpdate),
            this.player.bind(l.EVENT.VIDEO_MEDIA_PAUSE, this.handlePause),
            this.player.bind(l.EVENT.VIDEO_PLAYER_RESIZE, this.handleResize)
        }),
        this.loadDanmakuData = $=>__async(this, null, function*() {
            if (!this.visible)
                return;
            const Te = yield this.api.queryDanmakuList($)
              , we = Date.now()
              , Re = Te.map(Ye=>{
                var _t, Jt, bt, ai, ii;
                return {
                    stime: typeof Ye.progress > "u" ? -1 : Math.floor(+Ye.progress / 1e3),
                    dmid: (_t = Ye.id_str) != null ? _t : `${we}`,
                    date: (Jt = Ye.state) != null ? Jt : we,
                    mode: (bt = Ye.mode) != null ? bt : o.Normal,
                    color: (ai = parseInt(Ye.color)) != null ? ai : 16777215,
                    duration: 7,
                    uhash: (ii = Ye.mid_hash) != null ? ii : "",
                    pool: +Ye.pool,
                    size: +Ye.fontsize,
                    text: Ye.content
                }
            }
            );
            this.danmakuList[$] = Re,
            Re.forEach(Ye=>this.addTimely(Ye))
        }),
        this.loadDanmakuDataWithRetry = $=>__async(this, null, function*() {
            this.danmakuLoadingList[$] = !0;
            try {
                yield Es(()=>this.loadDanmakuData($))
            } catch (Te) {
                this.danmakuList[$] = [],
                this.player.track.trackInfoPush("warning", JSON.stringify({
                    type: Bt.DANMAKU,
                    msg: `query danmaku error: ${Te instanceof ar$1 ? Te.message : ""}`
                }))
            } finally {
                this.danmakuLoadingList[$] = !1
            }
        }),
        this.handleSeek = $=>{
            this.seek($.time)
        }
        ,
        this.handleTimeUpdate = $=>__async(this, null, function*() {
            var Te, we;
            const Re = (we = (Te = this.player.video) == null ? void 0 : Te.duration) != null ? we : 0
              , Ye = $.currentTime;
            if (isNaN(Ye) || Ye - Re > -1 || !this.danmakuConfig.on)
                return;
            const _t = Math.floor(Ye / this.pageSize) + 1;
            this.danmakuList[_t] ? Ye % this.pageSize > this.pageSize - 5 && this.handleTimeUpdate({
                currentTime: Ye + 10
            }) : this.danmakuLoadingList[_t] || this.loadDanmakuDataWithRetry(_t)
        }),
        this.handlePause = ()=>{
            this.pause()
        }
        ,
        this.handleResize = ()=>{
            this.resize()
        }
        ,
        this.handlePlay = ()=>{
            this.play()
        }
        ,
        this.api = new bo(d),
        this.player = d,
        this.danmakuConfig = O,
        this.init()
    }
    sendDanmaku(d) {
        var y, ye, ve, ie, ae, i, O, $, Te, we, Re, Ye, _t, Jt;
        if (!d.text)
            return;
        if (!this.player.config.checkLogin()) {
            this.player.trigger(l.EVENT.NEED_LOGIN);
            return
        }
        const bt = Date.now()
          , ai = (y = this.player.video) == null ? void 0 : y.currentTime
          , ii = ai && isNaN(ai) ? 0 : ai
          , da = (ye = this.player.duration()) != null ? ye : 0
          , aa = !isNaN(da) && ii + .1 >= da ? da - .1 : ii + .1
          , Ta = __spreadProps(__spreadValues({}, d), {
            stime: (ve = d.stime) != null ? ve : aa,
            dmid: (ie = d.dmid) != null ? ie : `${bt}`,
            date: (ae = d.date) != null ? ae : bt,
            mode: (i = d.mode) != null ? i : o.Normal,
            color: (O = d.color) != null ? O : 16777215,
            duration: ($ = d.duration) != null ? $ : 7,
            uhash: (Te = d.uhash) != null ? Te : "",
            pool: (we = d.pool) != null ? we : 0,
            size: (Re = this.player.config.danmakuConfig.fontSize) != null ? Re : 25,
            text: d.text,
            border: !0,
            borderColor: parseInt("4C93FF", 16),
            divClassName: "bstar-danmaku--myself"
        });
        this.addTimely(Ta);
        const fa = {
            color: (Ye = d.color) != null ? Ye : 16777215,
            fontsize: (_t = this.player.config.danmakuConfig.fontSize) != null ? _t : 25,
            msg: d.text,
            mode: (Jt = d.mode) != null ? Jt : o.Normal,
            progress: Math.floor(ii * 1e3)
        };
        this.api.addDanmaku(fa).catch(He=>{
            He instanceof ar$1 && (fe.message.info({
                msg: He.message
            }),
            this.player.track.trackInfoPush("warning", JSON.stringify({
                type: Bt.DANMAKU,
                msg: `send danmaku error: ${He.message}`
            })))
        }
        )
    }
    setVisible(d) {
        this.visible = d,
        this.player.trigger(l.EVENT.DANMAKU_VISIBLE_CHANGED, d)
    }
    dispose() {
        this.player.unbind(l.EVENT.VIDEO_MEDIA_SEEKED, this.handleSeek),
        this.player.unbind(l.EVENT.VIDEO_MEDIA_PLAY_SUCCESS, this.handlePlay),
        this.player.unbind(l.EVENT.VIDEO_PROGRESS_UPDATE, this.handleTimeUpdate),
        this.player.unbind(l.EVENT.VIDEO_MEDIA_PAUSE, this.handlePause),
        this.player.unbind(l.EVENT.VIDEO_PLAYER_RESIZE, this.handleResize),
        this.api.dispose(),
        this.destroy()
    }
}
var oe = (n=>(n.AdInit = "AdInit",
n.AdLoaded = "AdLoaded",
n.AdStarted = "AdStarted",
n.AdSkipped = "AdSkipped",
n.AdPlay = "AdPlay",
n.AdPause = "AdPause",
n.AdFirstLoadStart = "AdFirstLoadStart",
n))(oe || {})
  , $e = (n=>(n.AdLoaded2AdInit = "AdLoaded2AdInit",
n.AdStarted2AdInit = "AdStarted2AdInit",
n.AdStarted2AdFirstLoadStart = "AdStarted2AdFirstLoadStart",
n))($e || {});
class wo {
    constructor(d) {
        this.player = d,
        this.mark = y=>{
            window.performance && performance.mark(y)
        }
        ,
        this.measure = (y,ye,ve)=>{
            window.performance && performance.measure(y, ye, ve)
        }
        ,
        this.getMarkBy = y=>{
            if (window.performance)
                return performance.getEntriesByType("mark").find(ye=>ye.name === y)
        }
        ,
        this.getMeasureBy = y=>{
            if (window.performance)
                return performance.getEntriesByType("measure").find(ye=>ye.name === y)
        }
    }
}
const So = n=>{
    var d, y;
    const ye = typeof window < "u";
    if (!n && !ye)
        return {
            inBrowser: ye
        };
    const ve = n != null ? n : window.navigator.userAgent;
    return {
        inBrowser: ye,
        isAndroid: ve.includes("Android") || ve.includes("Adr"),
        isiOS: /iPad|iPhone|iPod/.test(ve),
        isSafari: ve.includes("Safari") && !ve.includes("Chrome"),
        isChrome: ve.includes("Chrome"),
        isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ve),
        isInApp: /bstar_[a|i]/i.test(ve),
        safariVersion: (y = (d = ve.match(/[v|V]ersion\/([\w|.]+)/)) == null ? void 0 : d[1]) != null ? y : "0"
    }
}
;
class Ao {
    constructor(d, y) {
        var ye, ve, ie;
        this.player = d,
        this.config = y,
        this.connectionOffset = 0,
        this.adsLoaded = !1,
        this.defaultTimeout = 8e3,
        this.defaultLoadSDKTimeout = 3e3,
        this.firstFetchTs = 0,
        this.initializeIMA = ()=>__async(this, null, function*() {
            this.env = So(),
            this.player.perfV2.mark(oe.AdInit),
            this.show();
            try {
                this.ima = yield Promise.race([c(), new Promise((ae,i)=>{
                    setTimeout(()=>{
                        i(`[ima] load ima sdk timeout in ${this.defaultLoadSDKTimeout}`)
                    }
                    , this.defaultLoadSDKTimeout)
                }
                )]),
                this.initTemplate(),
                this.ima.settings.setLocale(this.player.config.extraInfo.s_locale),
                this.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.env.isiOS),
                this.adDisplayContainer = new this.ima.AdDisplayContainer(this.player.template.adsWrap,this.player.video),
                this.player.template.adsFullscreen.addEventListener("click", this.handleClickFullscreen),
                this.adsLoader = new this.ima.AdsLoader(this.adDisplayContainer),
                this.bindPlayerEvents(),
                this.adsRenderingSettings = new this.ima.AdsRenderingSettings,
                this.adsRenderingSettings.uiElements = [this.ima.UiElements.COUNTDOWN],
                this.adsRenderingSettings.enablePreloading = !this.env.isiOS,
                this.bindAdsEvents(),
                this.player.adTagUrls.forEach(ae=>this.requestAds(ae))
            } catch (ae) {
                console.log("SDK could not be loaded. Check your ad blocker!", ae),
                this.player.track.trackInfoPush("ad_error", JSON.stringify(ae)),
                this.player.startAutoPlay(),
                this.hide()
            }
        }),
        this.initTemplate = ()=>{
            var ae, i;
            this.hidePremiumBtn ? this.player.template.adsPremiumBtn.style.display = "none" : (this.player.template.adsPremiumBtn.innerHTML = (i = (ae = this.player.config.i18n) == null ? void 0 : ae.adsPremiumBtn) != null ? i : C.adsPremiumBtn,
            this.player.template.adsPremiumBtn.addEventListener("click", ()=>{
                this.adsManager.pause(),
                this.player.trigger(l.EVENT.AD_PREMIUM_BTN_CLICK)
            }
            )),
            this.player.template.adsContainer.addEventListener("click", O=>{
                const $ = O.target.classList;
                $.contains("player-mobile-ad-fullscreen") ? this.toggleFullscreen() : $.contains("player-mobile-ad-widescreen") && this.toggleWidescreen()
            }
            , !0)
        }
        ,
        this.hide = ()=>{
            this.toggleAdLoading(!1),
            this.player.template.adsContainer.style.setProperty("display", "none")
        }
        ,
        this.show = ()=>{
            this.toggleAdLoading(!0),
            this.player.template.adsContainer.style.setProperty("display", "block")
        }
        ,
        this.bindPlayerEvents = ()=>{
            this.player.bind(l.EVENT.VIDEO_MEDIA_PLAYING, this.handlePlaying),
            this.player.bind(l.EVENT.VIDEO_MEDIA_ENDED, this.handleEnd),
            this.disposeList.push(()=>{
                this.player.unbind(l.EVENT.VIDEO_MEDIA_PLAYING, this.handlePlaying),
                this.player.unbind(l.EVENT.VIDEO_MEDIA_ENDED, this.handleEnd)
            }
            )
        }
        ,
        this.handleResize = ()=>{
            if (this.adsManager && this.player.video) {
                const [ae,i] = this.videoRect;
                this.adsManager.resize(ae, i, U$1.isFullscreen ? this.ima.ViewMode.FULLSCREEN : this.ima.ViewMode.NORMAL)
            }
        }
        ,
        this.requestAds = ae=>{
            this.adsRequest = new this.ima.AdsRequest,
            this.adsRequest.adTagUrl = ae;
            const [i,O] = this.videoRect;
            this.adsRequest.linearAdSlotWidth = i,
            this.adsRequest.linearAdSlotHeight = O,
            this.adsRequest.nonLinearAdSlotWidth = i,
            this.adsRequest.nonLinearAdSlotHeight = O / 3,
            this.adsRequest.setAdWillPlayMuted(this.env.isiOS ? !0 : this.player.autoPlayMap.inlineAutoPlay ? !1 : this.player.autoPlayMap.inlineMutedAutoPlay),
            this.adsLoader.requestAds(this.adsRequest)
        }
        ,
        this.handleClickFullscreen = ae=>{
            this.toggleFullscreen()
        }
        ,
        this.bindAdsEvents = ()=>{
            this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this.onAdsManagerLoaded, !1),
            this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError, !1),
            window.addEventListener("resize", this.debounceResize),
            window.addEventListener("fullscreenchange", this.debounceResize),
            this.disposeList.push(()=>{
                this.adsLoader.removeEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this.onAdsManagerLoaded, !1),
                this.adsLoader.removeEventListener(this.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError, !1),
                window.removeEventListener("resize", this.debounceResize),
                window.removeEventListener("fullscreenchange", this.debounceResize)
            }
            )
        }
        ,
        this.onAdsManagerLoaded = ae=>{
            this.adsRenderingSettings.loadVideoTimeout = this.resolvedTagNum === 0 ? this.startWaitTimeout : this.middleWaitTimeout,
            this.adsManagers.push(ae.getAdsManager(this.player.video, this.adsRenderingSettings)),
            this.resolvedTagNum === 0 && (this.player.autoPlayMap.inlineAutoPlay || this.player.autoPlayMap.inlineMutedAutoPlay) && (this.player.perfV2.mark(oe.AdFirstLoadStart),
            this.player.startAutoPlay()),
            this.connectionOffset++,
            this.resolvedTagNum++
        }
        ,
        this.addAdsManagerListeners = ()=>{
            this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED, this.adLoaded),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.STARTED, this.onAdStarted),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.RESUMED, this.onAdResumed),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.PAUSED, this.onAdPaused),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.SKIPPED, this.onAdSkipped),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.AD_BUFFERING, this.onAdBuffer),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.CLICK, this.onAdClick),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.VIDEO_CLICKED, this.onAdVideoClick),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.LOG, this.adLog),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.COMPLETE, this.onAdComplete),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.AD_PROGRESS, this.onAdProgress),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this.onContentPauseRequested),
            this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this.onContentResumeRequested),
            this.disposeList.push(()=>{
                this.adsManager.removeEventListener(this.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.LOADED, this.adLoaded),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.STARTED, this.onAdStarted),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.RESUMED, this.onAdResumed),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.PAUSED, this.onAdPaused),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.SKIPPED, this.onAdSkipped),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.AD_BUFFERING, this.onAdBuffer),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.CLICK, this.onAdClick),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.VIDEO_CLICKED, this.onAdVideoClick),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.LOG, this.adLog),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.COMPLETE, this.onAdComplete),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.AD_PROGRESS, this.onAdProgress),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this.onContentPauseRequested),
                this.adsManager.removeEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this.onContentResumeRequested)
            }
            )
        }
        ,
        this.onAdComplete = ()=>{
            this.adState = "completed",
            this.coNextAd()
        }
        ,
        this.onAdError = ae=>{
            const i = ae.getError();
            if (this.player.track.trackInfoPush("ad_error", JSON.stringify(ae.getError())),
            this.player.trigger(l.EVENT.AD_ERROR, JSON.stringify({
                code: i.getErrorCode(),
                message: i.message,
                type: i.getType
            })),
            i.getType() === this.ima.AdError.Type.AD_LOAD) {
                if (this.rejectedTagNum++,
                ++this.connectionOffset < this.player.adTagUrls.length)
                    return;
                this.adsManagers.length === 0 && (this.adState === "idel" && this.player.perfV2.getMarkBy(oe.AdFirstLoadStart) ? (this.disposeTimeout && window.clearTimeout(this.disposeTimeout),
                this.disposeTimeout = window.setTimeout(()=>{
                    var O;
                    if (console.log("first frame error", (O = this.player.perfV2.getMeasureBy($e.AdStarted2AdFirstLoadStart)) == null ? void 0 : O.duration),
                    this.adState !== "idel") {
                        this.disposeTimeout && window.clearTimeout(this.disposeTimeout);
                        return
                    }
                    this.hide(),
                    this.dispose(),
                    this.player.play()
                }
                , this.startWaitTimeout)) : (this.hide(),
                this.dispose(),
                this.player.play()))
            } else
                this.adsManager.destroy(),
                this.coNextAd()
        }
        ,
        this.onAdPaused = ae=>{
            this.adState = "paused"
        }
        ,
        this.onAdClick = ae=>{
            window.focus(),
            this.resume(),
            this.player.trigger(l.EVENT.AD_VIDEO_CLICK, JSON.stringify(this.getAdTrackInfo(ae, "ads")))
        }
        ,
        this.onAdProgress = ae=>{
            const i = Math.floor(this.adsManager.getRemainingTime())
              , O = (i % 60).toString().padStart(2, "0")
              , $ = Math.floor(i / 60)
              , Te = `Ad ${this.currentIndex}/${this.resolvedTagNum}: (${$}:${O})`;
            this.player.template.adsRemaining.innerHTML = Te
        }
        ,
        this.adLog = ae=>{
            ae.getAdData()
        }
        ,
        this.onAdVideoClick = ae=>{
            window.focus(),
            this.resume(),
            this.player.trigger(l.EVENT.AD_VIDEO_CLICK, JSON.stringify(this.getAdTrackInfo(ae, "video")))
        }
        ,
        this.onAdResumed = ae=>{
            this.adState = "play"
        }
        ,
        this.onAdBuffer = ae=>{
            this.adState = "buffer"
        }
        ,
        this.getAdTrackInfo = (ae,i)=>{
            const O = ae.getAd();
            return {
                session_id: this.player.session,
                ad_source: O.getAdvertiserName(),
                ad_unit_id: O.getAdId(),
                ad_index: this.currentIndex,
                title: O.getTitle(),
                click_type: i
            }
        }
        ,
        this.onAdStarted = ae=>{
            this.adState = "play",
            this.adsManager.getVolume() === 0 && this.player.autoPlayMap.inlineAutoPlay && this.adsManager.setVolume(.66),
            this.currentIndex++,
            this.toggleAdLoading(!1),
            this.player.trigger(l.EVENT.AD_VIDEO_SHOW, JSON.stringify(this.getAdTrackInfo(ae))),
            this.player.perfV2.mark(oe.AdStarted),
            this.player.perfV2.getMeasureBy($e.AdStarted2AdFirstLoadStart) || (this.player.perfV2.measure($e.AdStarted2AdFirstLoadStart, oe.AdFirstLoadStart, oe.AdStarted),
            console.log("first frame", this.player.perfV2.getMeasureBy($e.AdStarted2AdFirstLoadStart).duration))
        }
        ,
        this.coNextAd = ()=>{
            this.adsManagers.length > 0 ? this.startAd() : (this.adState = "completed",
            this.hide(),
            this.dispose(),
            this.player.play())
        }
        ,
        this.onAdSkipped = ae=>{
            this.coNextAd(),
            this.player.perfV2.mark(oe.AdSkipped)
        }
        ,
        this.adLoaded = ae=>{
            this.player.perfV2.mark(oe.AdLoaded),
            this.player.perfV2.measure($e.AdLoaded2AdInit, oe.AdInit, oe.AdLoaded)
        }
        ,
        this.onContentPauseRequested = ()=>{
            this.show(),
            this.player.pause()
        }
        ,
        this.onContentResumeRequested = ()=>{
            this.currentIndex < this.resolvedTagNum ? this.toggleAdLoading(!0) : this.hide(),
            this.player.play()
        }
        ,
        this.handlePlaying = ae=>{
            this.loadAds(ae)
        }
        ,
        this.handleEnd = ()=>{
            this.adsLoader.contentComplete()
        }
        ,
        this.loadAds = ae=>__async(this, null, function*() {
            this.adsLoaded || (ae.preventDefault(),
            this.player.video && (this.adDisplayContainer.initialize(),
            this.adsLoaded = !0,
            this.startAd()))
        }),
        this.startAd = ()=>{
            const [ae,i] = this.videoRect;
            if (this.adsManagers.length) {
                this.adsManager = this.adsManagers.shift(),
                this.addAdsManagerListeners();
                try {
                    this.adsManager.init(ae, i, U$1.isFullscreen ? this.ima.ViewMode.FULLSCREEN : this.ima.ViewMode.NORMAL),
                    this.adsManager.start()
                } catch (O) {
                    console.log("AdsManager could not be started", O),
                    this.player.track.trackInfoPush("ad_error", JSON.stringify(O)),
                    this.hide()
                }
            }
        }
        ,
        this.toggleFullscreen = ()=>__async(this, null, function*() {
            this.player.trigger(l.EVENT.VIDEO_FULLSCREEN_CLICK, U$1.isFullscreen),
            U$1.isFullscreen ? this.player.mode(l.UI_NORMAL) : this.player.mode(l.UI_FULL)
        }),
        this.toggleWidescreen = ()=>__async(this, null, function*() {
            this.player.trigger(l.EVENT.VIDEO_WIDE_SCREEN_CLICK, this.player.state.mode === l.UI_WIDE),
            this.player.state.mode !== l.UI_WIDE ? this.player.mode(l.UI_WIDE) : this.player.mode(l.UI_NORMAL),
            this.debounceResize()
        }),
        this.toggleAdLoading = ae=>{
            this.player.template.adsLoading.classList.toggle("loading", ae != null ? ae : !this.adLoaded)
        }
        ,
        this.getState = ()=>this.adState,
        this.pause = ()=>{
            var ae;
            (ae = this.adsManager) == null || ae.pause()
        }
        ,
        this.resume = ()=>{
            var ae;
            (ae = this.adsManager) == null || ae.resume()
        }
        ,
        this.dispose = ()=>{
            var ae, i, O;
            this.disposeTimeout && window.clearTimeout(this.disposeTimeout),
            this.disposeTimeout = null,
            this.disposeList.forEach($=>$()),
            this.hide(),
            (ae = this.adsManager) == null || ae.destroy(),
            (i = this.adsLoader) == null || i.destroy(),
            (O = this.adDisplayContainer) == null || O.destroy()
        }
        ,
        this.adState = "idel",
        this.resolvedTagNum = 0,
        this.rejectedTagNum = 0,
        this.currentIndex = 0,
        this.disposeList = [],
        this.adsManagers = [],
        this.adsManager = null,
        this.hidePremiumBtn = (ye = y.hidePremiumBtn) != null ? ye : !1,
        this.startWaitTimeout = (ve = y.startWaitTimeout) != null ? ve : this.defaultTimeout,
        this.middleWaitTimeout = (ie = y.middleWaitTimeout) != null ? ie : this.defaultTimeout,
        this.debounceResize = debounce(100, this.handleResize),
        this.initializeIMA()
    }
    get VERSION() {
        var d;
        return ((d = this.adsLoader) == null ? void 0 : d.getVersion()) || ""
    }
    get videoRect() {
        var d, y;
        const ye = this.player.template.videoWrp.getBoundingClientRect()
          , ve = (d = ye.width) != null ? d : 0
          , ie = (y = ye.height) != null ? y : 0;
        return [ve, ie]
    }
}
class Do {
    constructor(d) {
        this.player = d,
        this.init = ()=>{
            window.addEventListener("keydown", this.handleKeyDown)
        }
        ,
        this.handleKeyDown = y=>{
            const {code: ye} = y;
            if (this.player.video && lt() && !this.player.config.isH5)
                switch (y.cancelable && y.preventDefault(),
                ye) {
                case re.space:
                    this.handleSpace();
                    break;
                case re.left:
                    this.handleBackward(y);
                    break;
                case re.right:
                    this.handleForward(y);
                    break;
                case re.f:
                    this.handleFullscreen();
                    break;
                case re.n:
                    {
                        y.shiftKey && this.handleNextEp();
                        break
                    }
                case re.period:
                case re.comma:
                    {
                        y.shiftKey && this.handleSpeed(ye === re.period);
                        break
                    }
                }
        }
        ,
        this.handleNextEp = ()=>{
            !this.player.config.hasNext || this.player.trigger(l.EVENT.VIDEO_REQUEST_NEXT_EPISODE, !0)
        }
        ,
        this.handleFullscreen = ()=>{
            var y, ye;
            this.player.isFullScreen() ? (this.player.exitFullScreen(),
            this.player.trigger(l.EVENT.KEYBOARD_FULLSCREEN, !0)) : ((ye = (y = this.player.controller) == null ? void 0 : y.fullscreenButton) == null || ye.onVideoMode(l.UI_FULL),
            this.player.trigger(l.EVENT.KEYBOARD_FULLSCREEN, !1))
        }
        ,
        this.handleSpeed = y=>{
            const ye = y ? -1 : 1;
            let ve = this.player.config.rateList.indexOf(this.player.speed.value()) + ye;
            if (ve = ve < 0 ? 0 : ve >= this.player.config.rateList.length - 1 ? this.player.config.rateList.length - 1 : ve,
            ve > -1) {
                const ie = this.player.config.rateList[ve];
                this.player.setSpeedRate(ie),
                this.player.trigger(l.EVENT.KEYBOARD_SPEED, ie),
                ue.show({
                    msg: `${ie}X`,
                    type: y ? "forward" : "backward"
                })
            }
        }
        ,
        this.handleForward = throttle(400, y=>{
            const {repeat: ye} = y
              , ve = this.player
              , ie = ve.currentTime() + ve.config.seekTime;
            ve.seek(Math.min(ie, ve.duration()), {
                userEvent: !0
            }),
            ye ? ue.show({
                msg: "10s",
                type: "longForward"
            }) : ue.show({
                msg: "10s",
                type: "forward"
            })
        }
        ),
        this.handleBackward = throttle(400, y=>{
            const {repeat: ye} = y
              , ve = this.player
              , ie = Math.max(0, ve.currentTime() - ve.config.seekTime);
            ve.seek(ie, {
                autoSeek: !0,
                userEvent: !0
            }),
            ye ? ue.show({
                msg: "10s",
                type: "longBackward"
            }) : ue.show({
                msg: "10s",
                type: "backward"
            })
        }
        ),
        this.handleSpace = ()=>{
            const y = this.player;
            y.getState() === l.V_PLAY ? y.pause() : (y.play(),
            y.template.csIn(!1))
        }
        ,
        this.init()
    }
    destroy() {
        window.removeEventListener("keydown", this.handleKeyDown)
    }
}
let dt = {}
  , ct = {};
function No(n, d) {
    let y = n.length - 2;
    for (let ye = 0; ye < n.length - 1; ye++)
        if (d >= n[ye] && d < n[ye + 1]) {
            y = ye - 1;
            break
        }
    return y
}
function Mo(n, d) {
    const y = Math.floor(d / 100)
      , ye = n[y];
    return n[y] ? ye : null
}
function Lo(n, d=160, y=90) {
    return {
        imgX: -(n % 100 % 10) * d,
        imgY: -Math.floor(n % 100 / 10) * y
    }
}
function Co(n) {
    const d = new Image;
    return d.setAttribute("crossOrigin", "anonymous"),
    d.src = n,
    new Promise((y,ye)=>{
        d.onload = ()=>y(d),
        d.onerror = ()=>ye()
    }
    )
}
function ko(n, d) {
    const y = document.createElement("canvas");
    return y.width = d.width,
    y.height = d.height,
    y.getContext("2d").drawImage(n.img, -n.x, -n.y, n.width, n.height, 0, 0, d.width, d.height),
    y.toDataURL("image/jpeg")
}
function Oo(n, d) {
    return __async(this, null, function*() {
        const y = No(d.indexMap, n);
        if (ct[y])
            return ct[y];
        const ye = Mo(d.images, y)
          , ve = Lo(y);
        try {
            let ie = null;
            dt[ye] ? ie = dt[ye] : (ie = yield Co(ye),
            dt[ye] = ie);
            const ae = ko({
                img: ie,
                x: ve.imgX,
                y: ve.imgY,
                width: d.size.xSize,
                height: d.size.ySize
            }, {
                width: d.size.xSize,
                height: d.size.ySize
            });
            return ct[y] = ae,
            ae
        } catch (ie) {
            return null
        }
    })
}
function $o() {
    dt = {},
    ct = {}
}
function _s(n) {
    const d = Math.floor(n / 3600)
      , y = n - d * 3600
      , ye = Math.floor(y / 60)
      , ve = Math.floor(y % 60);
    return {
        hour: d ? Yt(2, d) : "",
        minute: ye ? Yt(2, ye) : "",
        second: ve ? Yt(2, ve) : ""
    }
}
function Yt(n=1, d) {
    if (isNaN(Number(d)))
        return String(d);
    const y = /-/.test(String(d));
    let ye = String(d).replace("-", "");
    for (; ye.length < n; )
        ye = "0" + ye;
    return y ? `-${ye}` : ye
}
function xo(n) {
    const {hour: d, minute: y} = _s(n);
    return d ? "hour" : y ? "minute" : "second"
}
function Po(n, d) {
    if (!n || typeof n != "number")
        return d === "hour" ? "00:00:00" : d === "minute" ? "00:00" : "00";
    const {hour: y, minute: ye, second: ve} = _s(n);
    if (!y && !ye && !d)
        return ve;
    const ie = d === "hour" ? y ? `${y}:` : "00:" : y && `${y}:`
      , ae = d === "minute" || d === "hour" ? `${ye || "00"}:` : y || ve ? `${ye || "00"}:` : "00";
    return `${ie}${d === "second" ? "" : ae}${ve || "00"}`
}
class Ro {
    constructor(d) {
        this.disableUpdate = !1,
        this.resize = debounce(200, ()=>{
            this.slider && this.slider.resize();
            const ve = this.player.template.container.getBoundingClientRect();
            this.slider.setPreviewContainerPosition(ve.x, ve.width)
        }
        ),
        this.slider = new Bt$1(d.container,{
            videoProgress: !0,
            autohideThumb: !1,
            trackBreadth: 2,
            thumbWidth: 18,
            thumbHeight: 18,
            thumbCenter: !0,
            showTooltip: !0,
            previewFrame: !!d.player.config.previewData,
            formatTooltip(ve) {
                var ie;
                const ae = ((ie = d.player) == null ? void 0 : ie.duration()) || 0
                  , i = Number((ae * ve + .5 > ae ? ae : ve * ae).toFixed(0))
                  , O = xo(ae);
                return Po(i, O === "second" ? "minute" : O)
            }
        }),
        this.player = d.player;
        const y = this.player.template.container.getBoundingClientRect();
        this.slider.setPreviewContainerPosition(y.x, y.width);
        let ye = 0;
        this.slider.on("start", ()=>{
            this.disableUpdate = !0
        }
        ),
        this.slider.on("move", ve=>{
            this.player.trigger(l.EVENT.VIDEO_MEDIA_SEEKING, {
                time: ve.value * this.player.duration()
            }),
            d.onMove(ve.value * this.player.duration()),
            this.disableUpdate && ye++
        }
        ),
        this.slider.on("change", ve=>{
            if (this.player.video && ve.manual) {
                const ie = this.player.duration() * ve.value;
                this.player.track.pageReport("click", "progressBar", {
                    toTime: ie,
                    way: ye > 1 ? "drag" : "click"
                }),
                this.player.seek(ie, {
                    userEvent: !0
                })
            }
        }
        ),
        d.player.config.previewData && this.slider.on("preview-change", ve=>__async(this, null, function*() {
            const {value: ie} = ve
              , ae = this.player.duration()
              , i = yield Oo(ie * ae, d.player.config.previewData);
            this.slider.setPreviewImg(i)
        })),
        this.slider.on("end", ()=>{
            this.disableUpdate = !1,
            ye = 0
        }
        ),
        this.player.bind(l.EVENT.VIDEO_RESIZE, ()=>{
            this.resize()
        }
        ),
        this.player.bind(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, ()=>{
            this.resize()
        }
        )
    }
    move(d) {
        this.slider.move(d)
    }
    updateVideoTime(d, y) {
        this.disableUpdate || (this.player.trigger(l.EVENT.VIDEO_PROGRESS_UPDATE, {
            currentTime: d
        }),
        this.slider.value(d / y))
    }
    setBufferValue(d) {
        this.slider.bufferValue(d)
    }
    setRotate(d) {
        this.slider.setRotate(d)
    }
    destroy() {
        $o()
    }
}
class Vo {
    constructor(d) {
        if (this.container = d.container,
        this.player = d.player,
        this.isH5 = d.player.config.isH5,
        this.playIcon = this.player.template.playIcon,
        this.pauseIcon = this.player.template.pauseIcon,
        this.stateIconToolTip = this.player.template.stateIconToolTip,
        this.isH5) {
            this.player.template.playH5Mask.addEventListener("touchstart", y=>{
                y.cancelable && y.preventDefault();
                const ye = this.player.state.video_state;
                if (!this.player.template.isControllerVisible()) {
                    this.player.template.csIn(!0);
                    return
                }
                [l.V_PAUSE, l.V_COMPLETE].includes(ye) ? this.play("playCenterPlay", "play_screen") : ye === l.V_PLAY && this.pause("pauseCenterPlay", "pause_screen")
            }
            );
            return
        }
        this.player.template.playMask.addEventListener("touchstart", y=>{
            y.cancelable && y.preventDefault(),
            this.play("playCenterPlay", "play_screen")
        }
        ),
        this.playIcon.addEventListener("mousedown", y=>{
            y.stopPropagation(),
            this.pause("playButton", "pause_button")
        }
        ),
        this.pauseIcon.addEventListener("mousedown", y=>{
            y.stopPropagation(),
            this.play("playButton", "play_button")
        }
        )
    }
    pause(d, y) {
        this.player.track.pageReport("click", d, {
            status: "off"
        }),
        this.player.track.trackInfoPush(y),
        this.player.pause()
    }
    play(d, y) {
        this.player.track.pageReport("click", d, {
            status: "on"
        }),
        this.player.track.trackInfoPush(y),
        this.player.play()
    }
    setState(d) {
        var y, ye, ve, ie, ae, i;
        if (this.player.prefix,
        d === "play") {
            if (this.isH5) {
                this.player.template.toggleH5StateIcon(!1);
                return
            }
            this.player.template.playMask.classList.remove(`${this.player.prefix}-active`),
            this.stateIconToolTip.innerHTML = (ye = (y = this.player.config.i18n) == null ? void 0 : y.pauseTip) != null ? ye : C.pauseTip,
            this.playIcon.classList.add(`${this.player.prefix}-active`),
            this.pauseIcon.classList.remove(`${this.player.prefix}-active`)
        } else if (d === "pause") {
            if (this.isH5) {
                this.player.disableUX && this.player.template.toggleH5Mask(!1),
                this.player.template.toggleH5StateIcon(!0);
                return
            }
            this.stateIconToolTip.innerHTML = (ie = (ve = this.player.config.i18n) == null ? void 0 : ve.playTip) != null ? ie : C.playTip,
            this.playIcon.classList.remove(`${this.player.prefix}-active`),
            this.pauseIcon.classList.add(`${this.player.prefix}-active`),
            this.player.template.togglePlayMask(!this.player.disableUX)
        } else {
            if (this.isH5) {
                this.player.template.toggleH5StateIcon(!0);
                return
            }
            this.player.template.playMask.classList.remove(`${this.player.prefix}-active`),
            this.stateIconToolTip.innerHTML = (i = (ae = this.player.config.i18n) == null ? void 0 : ae.pauseTip) != null ? i : C.pauseTip,
            this.playIcon.classList.add(`${this.player.prefix}-active`),
            this.pauseIcon.classList.remove(`${this.player.prefix}-active`)
        }
    }
}
class Uo {
    constructor(d) {
        this.handleFullscreenChange = ()=>{
            this.setState(!U$1.isFullscreen),
            !this.isManualExitFullscreen && !U$1.isFullscreen && this.exitFullScreen(),
            this.isManualExitFullscreen = !1
        }
        ,
        this.calc = debounce(50, ()=>{
            Ee(this.fullscreenToolTip, this.player.template.display, "top-end")
        }
        ),
        this.container = d.container,
        this.player = d.player,
        this.fullType = "web",
        this.isManualExitFullscreen = !1,
        this.fullscreenIcon = this.player.template.fullscreenIcon,
        this.fullscreenToolTip = this.player.template.fullscreenToolTip,
        this.lastMode = this.player.config.uiMode,
        U$1.raw && U$1.isEnabled && (this.fullType = "element"),
        U$1.isFullscreen ? this.setState(!1) : this.setState(!0),
        this.fullType === "web" && window !== window.parent && (document.createElement("video").webkitEnterFullscreen ? this.fullType = "video" : this.container.style.display = "none"),
        this.fullType === "element" && window === window.parent && je.version.mqq && (this.fullType = "web"),
        this.fullType === "element" && je.version.vivo && (this.fullType = "web"),
        window !== window.parent && navigator.userAgent.match("Android") && navigator.userAgent.match("BiliApp") && (this.container.style.display = "none"),
        this.container.addEventListener("touchstart", y=>{
            y.cancelable && y.preventDefault(),
            this.player.trigger(l.EVENT.VIDEO_FULLSCREEN_CLICK, U$1.isFullscreen),
            this.player.state.mode === l.UI_FULL ? (this.player.track.pageReport("click", "fullScreen", {
                status: "off"
            }),
            this.manualExitFullscreen()) : (this.player.track.pageReport("click", "fullScreen", {
                status: "on"
            }),
            this.fullType === "web" ? this.onVideoMode(l.UI_WEB_FULL) : this.onVideoMode(l.UI_FULL))
        }
        ),
        this.container.addEventListener("mousedown", y=>{
            y.stopPropagation(),
            this.player.trigger(l.EVENT.VIDEO_FULLSCREEN_CLICK, U$1.isFullscreen),
            this.player.state.mode === l.UI_FULL ? (this.player.track.pageReport("click", "fullScreen", {
                status: "off"
            }),
            this.manualExitFullscreen()) : (this.player.track.pageReport("click", "fullScreen", {
                status: "on"
            }),
            this.fullType === "web" ? this.onVideoMode(l.UI_WEB_FULL) : this.onVideoMode(l.UI_FULL))
        }
        ),
        this.fullType === "element" ? document.addEventListener("fullscreenchange", this.handleFullscreenChange, !1) : this.fullType === "video" && this.player.bind(l.EVENT.VIDEO_MEDIA_ATTACHED, (y,ye)=>{
            this.player.video.addEventListener("webkitendfullscreen", ()=>{
                this.onVideoMode(l.UI_NORMAL)
            }
            , !1)
        }
        ),
        this.calc(),
        window.addEventListener("resize", this.calc),
        this.onVideoMode(this.player.config.uiMode, !0)
    }
    setState(d) {
        var y, ye, ve, ie;
        d ? (this.container.classList.add(`${this.player.prefix}-active`),
        this.fullscreenIcon.classList.remove(`${this.player.prefix}-icon-fullscreen-quit`),
        this.fullscreenToolTip && (this.fullscreenToolTip.innerText = (ye = (y = this.player.config.i18n) == null ? void 0 : y.fullscreenTip) != null ? ye : C.fullscreenTip)) : (this.container.classList.remove(`${this.player.prefix}-active`),
        this.fullscreenIcon.classList.add(`${this.player.prefix}-icon-fullscreen-quit`),
        this.fullscreenToolTip && (this.fullscreenToolTip.innerText = (ie = (ve = this.player.config.i18n) == null ? void 0 : ve.closeFullscreenTip) != null ? ie : C.closeFullscreenTip)),
        this.timer && clearTimeout(this.timer),
        this.timer = window.setTimeout(()=>{
            var ae, i;
            const O = (ae = this.player.template) == null ? void 0 : ae.area.clientWidth
              , $ = (i = this.player.template) == null ? void 0 : i.area.clientHeight;
            (this.player.controller.lastWidth !== O || this.player.controller.lastHeight !== $) && (this.player.controller.lastWidth = O,
            this.player.controller.lastHeight = $,
            this.player.trigger(l.EVENT.VIDEO_PLAYER_RESIZE))
        }
        , 50)
    }
    toString(d) {
        return `${d}`
    }
    manualExitFullscreen() {
        this.isManualExitFullscreen = !0,
        this.exitFullScreen()
    }
    exitFullScreen() {
        (this.lastMode === l.UI_FULL || this.lastMode === l.UI_WEB_FULL && this.player.state.mode === l.UI_WEB_FULL) && (this.lastMode = l.UI_NORMAL),
        this.lastMode !== l.UI_FULL && this.onVideoMode(this.lastMode)
    }
    setMode(d) {
        this.player.template.container.setAttribute("data-ui-mode", this.toString(d))
    }
    onVideoMode(d, y=!1) {
        return __async(this, null, function*() {
            try {
                if (this.lastMode = this.player.state.mode,
                this.player.state.mode === d && !y)
                    return;
                this.player.state.mode = d,
                d === l.UI_NORMAL ? (this.setState(!0),
                this.player.template.area.classList.remove(`${this.player.prefix}-wide`),
                this.fullType === "element" && U$1.element ? (yield U$1.exit(),
                this.setMode(l.UI_NORMAL)) : this.setMode(l.UI_NORMAL)) : d === l.UI_WIDE ? (this.setState(!0),
                this.player.template.area.classList.remove(`${this.player.prefix}-wide`),
                this.fullType === "element" && U$1.element ? (yield U$1.exit(),
                this.setMode(l.UI_WIDE)) : this.setMode(l.UI_WIDE)) : d === l.UI_WEB_FULL ? (this.setState(!0),
                this.setMode(l.UI_WEB_FULL),
                this.player.template.area.classList.add(`${this.player.prefix}-wide`)) : d === l.UI_FULL && (this.setState(!1),
                this.fullType === "element" ? (yield U$1.request(this.player.container),
                this.setMode(l.UI_FULL)) : this.fullType === "video" && this.player.video.webkitEnterFullscreen()),
                setTimeout(()=>{
                    this.player.trigger(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED_OUTER, {
                        mode: d
                    })
                }
                , 0),
                setTimeout(()=>{
                    this.player.trigger(l.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED, {
                        mode: d
                    }),
                    this.calc()
                }
                , 100)
            } catch (ye) {
                this.player.state.mode = this.lastMode
            }
        })
    }
    destroy() {
        window.removeEventListener("resize", this.calc),
        document.removeEventListener("fullscreenchange", this.handleFullscreenChange)
    }
}
class Bo {
    constructor(d) {
        if (this.firstClickArea = "other",
        this.controlBarTime = 0,
        this.showRealVideoPicture = ()=>{
            this.realVideoPictureShown || (this.realVideoPictureShown = !0,
            this.player.video && (this.player.video.style.display = "block"),
            this.player.template.loadLayer.style.display = "none")
        }
        ,
        this.firstPlay = ()=>{
            !this.player || (this.startButton.setState("play"),
            this.player.danmaku && this.player.danmaku.play(),
            !this.player.isPlayed && (this.player.isPlayed = !0,
            this.showRealVideoPicture(),
            this.player.template.csIn(!0),
            this.player.state.video_state === l.V_PLAY && (this.player.controller.controlBarTime = window.setTimeout(()=>{
                this.player.template.csIn(!1)
            }
            , 3e3)),
            this.player.setSpeedRate(this.player.speed.value()),
            this.player.trigger(l.EVENT.VIDEO_MEDIA_FIRST_PLAY_SUCCESS),
            this.player.config.developer && this.player.loadDeveloper("_onVideoPlayFirstSuccess"),
            setTimeout(()=>{
                this.showLastPlaytime()
            }
            , 600)))
        }
        ,
        this.player = d,
        this.destroyed = !1,
        this.player.config.developer) {
            const ve = ["wx", "microWorkMessenger", "mqq", "microMessenger", "android", "iPhone", "windowsPhone", "webApp"];
            let ie = "";
            for (const ae of ve)
                if (je.version[ae]) {
                    ie = ae;
                    break
                }
            this.player.loadDeveloper(ie, "mode")
        }
        this.progressBar = new Ro({
            container: this.player.template.contorlSlider,
            player: this.player,
            onMove: ve=>{
                this.player.currentTimeText.setValue(Vt(ve))
            }
        }),
        this.startButton = new Vo({
            container: this.player.template.stateIcon,
            player: this.player
        }),
        this.player.config.noFullScreenButton || (this.fullscreenButton = new Uo({
            container: this.player.template.btnWidescreen,
            player: this.player
        })),
        this.initRecordTime();
        let y = 0;
        const ye = ()=>{
            this.destroyed || (setTimeout(()=>{
                d.trigger(l.EVENT.VIDEO_RESIZE, d.state.mode)
            }
            ),
            clearTimeout(y),
            y = window.setTimeout(()=>{
                var ve, ie;
                const ae = (ve = this.player.template) == null ? void 0 : ve.area.clientWidth
                  , i = (ie = this.player.template) == null ? void 0 : ie.area.clientHeight;
                (this.lastWidth !== ae || this.lastHeight !== i) && (this.lastWidth = ae,
                this.lastHeight = i,
                d.trigger(l.EVENT.VIDEO_PLAYER_RESIZE))
            }
            , 50))
        }
        ;
        window.addEventListener("resize", ()=>{
            ye()
        }
        ),
        window.addEventListener("orientationchange", ()=>{
            ye()
        }
        ),
        this.keyBoard = new Do(this.player),
        this.player.config.isH5 ? this.player.template.display.addEventListener("touchstart", ve=>{
            this.touchShow(ve)
        }
        ) : (this.player.template.display.addEventListener("mousemove", ve=>{
            if (this.toggleControlBar(ve, !0),
            ve.target !== this.player.template.display) {
                clearTimeout(this.player.controller.controlBarTime);
                return
            }
            this.controlBarTime = window.setTimeout(()=>{
                !lt() || this.player.template.csIn(!1)
            }
            , 3e3)
        }
        ),
        this.player.template.display.addEventListener("mouseenter", ve=>{
            if (ve.stopPropagation(),
            this.showSettingBarDisabled) {
                this.player.template.toggleTopBar(!0);
                return
            }
            this.player.template.csIn(!0)
        }
        ),
        this.player.template.display.addEventListener("mouseleave", ve=>{
            ve.stopPropagation(),
            this.player.template.csIn(!1)
        }
        )),
        this.player.bind(l.EVENT.VIDEO_MEDIA_ATTACHED, (ve,ie)=>{
            this.player.template.loadLayer.addEventListener("touchend", ae=>{
                var i, O;
                ae.cancelable && ae.preventDefault(),
                (O = (i = ae.target) == null ? void 0 : i.classList) != null && O.contains("icon-preview") && (this.firstClickArea = "playCenterPlay"),
                this.player.play()
            }
            ),
            this.player.template.loadLayer.addEventListener("mousedown", ae=>{
                var i, O;
                ae.stopPropagation(),
                (O = (i = ae.target) == null ? void 0 : i.classList) != null && O.contains("icon-preview") && (this.firstClickArea = "playCenterPlay"),
                this.player.play()
            }
            )
        }
        ),
        this.player.bind(l.EVENT.VIDEO_DESTROY, ()=>{
            this.destroy()
        }
        )
    }
    get showSettingBarDisabled() {
        const d = this.player.state.video_state;
        return [l.V_IDEL, l.V_READY].includes(d) || !this.player.isPlayed && d === l.V_PAUSE
    }
    toggleControlBar(d, y) {
        clearTimeout(this.controlBarTime),
        d.target === this.player.template.display && (this.showSettingBarDisabled || this.player.template.csIn(y))
    }
    touchShow(d) {
        if (clearTimeout(this.controlBarTime),
        this.controlBarTime = window.setTimeout(()=>{
            !lt() || this.player.template.csIn(!1)
        }
        , 3e3),
        d.target === this.player.template.display) {
            if (this.player.disableUX && this.player.state.video_state === l.V_PAUSE) {
                this.player.play();
                return
            }
            if (d.type === "touchstart") {
                if (!this.player.template.isControllerVisible()) {
                    this.player.template.csIn(!0);
                    return
                }
                this.player.state.video_state === l.V_PLAY && this.player.pause()
            }
            d.type === "mousedown" && (this.player.template.toggleCsIn(),
            this.player.state.video_state === l.V_PLAY && this.player.pause())
        }
    }
    showLastPlaytime() {
        var d, y;
        if (this.lastplaytime && this.lastplaytime >= 1 && !this.firstShowLastPlaytime) {
            this.firstShowLastPlaytime = !0;
            const ye = this.player.config;
            fe.message.info({
                msg: [{
                    content: `${(y = (d = ye.i18n) == null ? void 0 : d.skipTo) != null ? y : C.skipTo} `,
                    type: "text"
                }, {
                    content: Vt(this.lastplaytime),
                    type: "link"
                }],
                onClose: ()=>{
                    this.player.trigger(l.EVENT.RECORD_TIME_HIDDEN)
                }
                ,
                onClick: ()=>{
                    this.player.seek(this.lastplaytime, {
                        userEvent: !0
                    })
                }
                ,
                duration: 8e3
            }),
            this.player.trigger(l.EVENT.RECORD_TIME_VISIBLE),
            this.player.track.pageReport("show", "timeReminder")
        }
    }
    initRecordTime() {
        var d;
        try {
            this.recordData = JSON.parse(Tr("last_play_time_record") || "{}");
            let ve = 0;
            const ie = {};
            for (const ae in this.recordData)
                ve++,
                this.recordData[ae].ct && (ie[this.recordData[ae].ct] = ae);
            if (ve > 30)
                for (const ae in ie) {
                    delete this.recordData[ie[ae]];
                    break
                }
        } catch (ve) {
            this.recordData = {}
        }
        let y = 0
          , ye = 0;
        this.player.config.lastPlayTimeRecordName ? this.recordName = this.player.config.lastPlayTimeRecordName : this.player.config.bvid ? this.recordName = `bvid_ ${this.player.config.bvid}_play_ ${this.player.config.cid}` : this.player.config.aid && (this.recordName = `aid_ ${this.player.config.aid}_play_ ${this.player.config.cid}`),
        this.recordName && (this.recordTimer = window.setInterval(()=>{
            this.player.video && (y = Number(this.player.currentTime()) || 0,
            Math.abs(y - ye) > 0 && (this.recordData[this.recordName] = {
                t: y,
                ct: +new Date
            },
            wr("last_play_time_record", JSON.stringify(this.recordData)),
            ye = y))
        }
        , 1e3),
        this.lastplaytime = (d = this.recordData[this.recordName]) == null ? void 0 : d.t)
    }
    repeatPlay() {
        setTimeout(()=>{
            this.player.seek(0),
            this.player.play()
        }
        )
    }
    setState(d) {
        this.player.disableUX && d !== l.V_PAUSE && (this.player.disableUX = !1),
        this.player.config.developer && this.player.loadDeveloper(`_setState: ${d}`);
        const y = this.player;
        y.state.video_state = d,
        d === l.V_READY && this.lastState === l.V_PLAY && y.danmaku && y.danmaku.play(),
        d === l.V_BUFF ? this._onVideoBuff() : this.player.template.bufferTips.classList.remove(`${this.player.prefix}-active`),
        d === l.V_PLAY && (this.lastState === l.V_COMPLETE ? (this.lastState = d,
        y.currentTime().toFixed(2) === y.duration().toFixed(2) ? y.pause() : this._onVideoPlay()) : !this.lastState || this.lastState === l.V_PAUSE ? (this.lastState = d,
        this._onVideoPlay()) : this._onVideoPlay()),
        d === l.V_PAUSE && (this._onVideoPause(),
        this.lastState = d),
        d === l.V_COMPLETE && (this.lastState = d,
        this._onVideoEnded())
    }
    _onVideoBuff() {
        var d;
        this.player.config.developer && this.player.loadDeveloper("_onVideoBuff..."),
        this.startButton.setState("play"),
        this.player.template.bufferTips.classList.add(`${this.player.prefix}-active`),
        this.player.danmaku && this.player.danmaku.pause(),
        (d = this.player.ass) != null && d.assCompatible && this.player.ass.pause()
    }
    _onVideoPlay() {
        var d;
        this.player.config.developer && this.player.loadDeveloper("_onVideoPlay");
        const y = ve=>{
            console.log(ve);
            const ie = {
                autoplayMode: this.player.config.autoplayMode,
                isMute: this.player.isMute()
            };
            if (this.player.trigger(l.EVENT.VIDEO_MEDIA_PLAY_FAIL, __spreadProps(__spreadValues({
                autoplay: this.player.config.autoplay
            }, ie), {
                name: ve == null ? void 0 : ve.name,
                message: ve == null ? void 0 : ve.message,
                err: ve
            })),
            ve.name === "AbortError")
                if (this.player.config.developer && this.player.loadDeveloper("_onVideoPlayAbort"),
                this.player.isPlayed)
                    this._onVideoPause(!0);
                else if (!this.player.isMute() && this.player.config.autoplayMode === "auto") {
                    this.player.config.developer && this.player.loadDeveloper("_setMuteTryPlay...AbortError"),
                    this.player.setMute(!0).then(()=>{
                        this.player.play()
                    }
                    ).catch(()=>{}
                    );
                    return
                } else
                    this.player.template.loadLayer.style.display = "block",
                    this.player.video && (this.player.video.style.display = "none"),
                    this.player.template.csIn(!1);
            else
                this.player.isPlayed || (this.player.template.loadLayer.style.display = "block",
                this.player.video.style.display = "none",
                this.player.template.csIn(!1));
            if (ve && ve.name === "NotAllowedError")
                if (this.player.config.developer && this.player.loadDeveloper("_NotAllowedError"),
                this.player.track.trackInfoPush("browser_forbid_autoplay", JSON.stringify(ie)),
                this.player.template.loadLayer.style.display = "block",
                this.player.template.csIn(!1),
                !this.player.isMute() && this.player.config.autoplayMode === "auto") {
                    this.player.setMute(!0).then(()=>{
                        this.player.play()
                    }
                    ).catch(ae=>{}
                    );
                    return
                } else
                    this.player.setMute(!1).then(()=>{}
                    ).catch(ae=>{}
                    );
            if (this.player.video && this.player.video.readyState <= l.V_READY)
                return this.lastState = this.player.video.readyState,
                this.player.state.video_state = this.player.video.readyState,
                this.player.pause(),
                !0;
            this.player.state.video_state === l.V_PLAY && this.player.pause()
        }
          , ye = (d = this.player.video) == null ? void 0 : d.play();
        ye ? ye.then(()=>{
            setTimeout(()=>{
                var ve;
                if ((ve = this.player.video) != null && ve.paused) {
                    const ie = new Error;
                    ie.name = "NotAllowedError",
                    y(ie)
                } else
                    this.firstPlay(),
                    this.player.trigger(l.EVENT.VIDEO_MEDIA_PLAY_SUCCESS),
                    this.player.config.developer && this.player.loadDeveloper("_onVideoPlaySuccess")
            }
            , 0)
        }
        ).catch(ve=>{
            this.player.config.developer && this.player.loadDeveloper("_onVidePlayedPromiseCatch"),
            y(ve)
        }
        ).finally(()=>{
            this.player.template.bufferTips.classList.remove(`${this.player.prefix}-active`)
        }
        ) : this.firstPlay()
    }
    _onVideoPause(d=!1) {
        this.player.config.developer && this.player.loadDeveloper("_onVideoPause"),
        (this.player.isPlayed || d) && (this.startButton.setState("pause"),
        this.player.template.csIn(!this.player.disableUX)),
        this.player.video && this.player.video.pause(),
        this.player.danmaku && this.player.danmaku.pause()
    }
    _onVideoEnded() {
        this.player.config.developer && this.player.loadDeveloper("_onVideoEnded"),
        this.player.trigger(l.EVENT.VIDEO_MEDIA_ENDED),
        this.player.config.loop ? this.repeatPlay() : this._onVideoPause()
    }
    getLastState() {
        return this.lastState
    }
    setMode(d) {
        this.fullscreenButton.onVideoMode(d)
    }
    destroy() {
        var d, y;
        this.destroyed = !0,
        window.clearInterval(this.recordTimer),
        window.clearTimeout(this.hideRecordTimer),
        window.clearTimeout(this.controlBarTime),
        this.keyBoard.destroy(),
        (d = this.fullscreenButton) == null || d.destroy(),
        (y = this.progressBar) == null || y.destroy()
    }
}
class vs {
    constructor(d) {
        this.player = d,
        this.video = d.video || document.createElement("video"),
        this.video.setAttribute("webkit-playsinline", ""),
        this.video.setAttribute("playsinline", ""),
        this.video.preload = "metadata",
        this.video.crossOrigin = "anonymous"
    }
}
class zo extends vs {
    constructor(d, y) {
        super(d),
        this.player = d,
        this.url = y,
        this.type = "NATIVE",
        this.load()
    }
    get typedInfo() {
        return {
            type: this.type,
            video: this.video,
            hasPrefetchData: !1
        }
    }
    load() {
        this.video.src = this.url
    }
    destroy() {
        this.video.src = ""
    }
}
class jo extends vs {
    constructor(d, y) {
        super(d),
        this.player = d,
        this.url = y,
        this.type = "DASH",
        this.onDashPlayerError = ye=>{
            this.player.trigger(l.EVENT.VIDEO_MEDIA_ERROR, ye.code),
            this.player.track && this.player.track.trackInfoPush("dash_error", JSON.stringify(ye != null ? ye : {}))
        }
        ,
        this.onDashPlayerQualityRequested = ye=>{
            console.log("quality change requested", ye)
        }
        ,
        this.onDashPlayerQualityRendered = ye=>{
            console.log("quality change rendered", ye)
        }
        ,
        this.load()
    }
    get typedInfo() {
        return {
            type: this.type,
            video: this.video,
            player: this.dashPlayer,
            hasPrefetchData: !1
        }
    }
    load() {
        const d = this.player.videoQuality.value() >= Ts ? this.player.videoQuality.value() : Wo
          , y = this.player.getAudioQualityByVideo(d);
        this.dashPlayer = new ne(this.video,{
            enableHEVC: this.player.config.dashConfig.enableHEVC,
            isAutoPlay: !1,
            isDynamic: !1,
            abrStrategy: ne.STRING.ABR_DYNAMIC,
            stableBufferTime: 20,
            defaultVideoQuality: d,
            defaultAudioQuality: y
        }),
        this.dashPlayer.initialize(this.url).then(()=>{}
        ).catch(()=>{
            this.player.trigger(l.EVENT.VIDEO_MEDIA_ERROR, 4e3)
        }
        ),
        window.dashPlayer = this.dashPlayer,
        this.dashPlayer.on(ne.EVENTS.ERROR, this.onDashPlayerError),
        this.dashPlayer.on(ne.EVENTS.QUALITY_CHANGE_REQUESTED, this.onDashPlayerQualityRequested),
        this.dashPlayer.on(ne.EVENTS.QUALITY_CHANGE_RENDERED, this.onDashPlayerQualityRendered)
    }
    clearInteraction() {
        !this.dashPlayer.getCorePlayer() || (this.dashPlayer.off(ne.EVENTS.ERROR, this.onDashPlayerError),
        this.dashPlayer.off(ne.EVENTS.QUALITY_CHANGE_REQUESTED, this.onDashPlayerQualityRequested),
        this.dashPlayer.off(ne.EVENTS.QUALITY_CHANGE_RENDERED, this.onDashPlayerQualityRendered))
    }
    destroy() {
        this.clearInteraction(),
        this.dashPlayer.destroy()
    }
}
const Fo = {
    isHEVCTypeSupported: ()=>ne.isHEVCTypeSupported(),
    isAV1TypeSupported: ()=>ne.isAV1TypeSupported(),
    isBwpHEVCPrefSupported: ()=>ne.isBwpHEVCPrefSupported()
};
class Go {
    constructor(d) {
        var y, ye, ve, ie, ae, i;
        this.player = d,
        this.init = ()=>{
            this.player.bind(l.EVENT.VIDEO_MEDIA_SEEK, this.handleSeek),
            this.player.bind(l.EVENT.VIDEO_MEDIA_SEEK_END, this.handleSeekEnd),
            this.player.bind(l.EVENT.VIDEO_MEDIA_TIME, this.handleTimeUpdate)
        }
        ,
        this.handleSeek = O=>{
            const {userEvent: $} = O;
            this.isSeekByUser = $
        }
        ,
        this.handleTimeUpdate = ()=>{
            var O, $, Te, we, Re;
            if ((O = this.config.skip) != null && O.disabled || !this.skipSwitch.value())
                return;
            const Ye = this.player.currentTime();
            this.opSkipState === "idel" && this.opSkipInfo && (this.opSkipInfo.start - Ye <= 3 && this.opSkipInfo.start - Ye >= 0 || Ye >= this.opSkipInfo.start && Ye < this.opSkipInfo.end && (this.isSeekByUser || this.config.history === 0)) && (this.opSkipState = "invoke",
            fe.message.info({
                msg: (Te = ($ = this.config.i18n) == null ? void 0 : $.skipingOp) != null ? Te : C.skipingOp
            }),
            this.player.seek(this.opSkipInfo.end, {
                userEvent: !1
            })),
            this.edSkipState === "idel" && this.edSkipInfo && (this.edSkipInfo.start - Ye <= 3 && this.edSkipInfo.start - Ye >= 0 || Ye >= this.edSkipInfo.start && Ye < this.edSkipInfo.end && this.isSeekByUser) && (this.edSkipState = "invoke",
            fe.message.info({
                msg: (Re = (we = this.config.i18n) == null ? void 0 : we.skipingEd) != null ? Re : C.skipingEd
            }),
            this.player.seek(this.edSkipInfo.end, {
                userEvent: !1
            }))
        }
        ,
        this.handleSeekEnd = ()=>{
            var O, $, Te, we;
            if (this.isSeekByUser = !1,
            this.opSkipState === "invoke") {
                this.opSkipState = "invoked",
                fe.message.info({
                    msg: ($ = (O = this.config.i18n) == null ? void 0 : O.skipedOp) != null ? $ : C.skipedOp
                });
                return
            }
            if (this.edSkipState === "invoke") {
                if (this.edSkipState = "invoked",
                this.edSkipInfo.end >= this.player.duration())
                    return;
                fe.message.info({
                    msg: (we = (Te = this.config.i18n) == null ? void 0 : Te.skipedEd) != null ? we : C.skipedEd
                })
            }
        }
        ,
        this.changeSkipSwitch = O=>{
            this.skipSwitch.setValue(O),
            this.player.trigger(l.EVENT.SKIP_OP_ED_SWITCH_CHANGE, {
                v: O,
                pv: !O
            })
        }
        ,
        this.dispose = ()=>{
            this.player.unbind(l.EVENT.VIDEO_MEDIA_SEEK, this.handleSeek),
            this.player.unbind(l.EVENT.VIDEO_MEDIA_SEEK_END, this.handleSeekEnd),
            this.player.unbind(l.EVENT.VIDEO_MEDIA_TIME, this.handleTimeUpdate)
        }
        ,
        this.config = d.config,
        this.skipSwitch = _e((ye = (y = this.config.skip) == null ? void 0 : y.on) != null ? ye : !1),
        this.opSkipInfo = (ie = (ve = this.config.skip) == null ? void 0 : ve.op) != null ? ie : null,
        this.edSkipInfo = (i = (ae = this.config.skip) == null ? void 0 : ae.ed) != null ? i : null,
        this.opSkipState = "idel",
        this.edSkipState = "idel",
        this.init()
    }
}
const Is = Object.freeze({
    name: "@bilibili-intl/player",
    version: "0.26.9",
    revision: "d663d3b",
    lastCompiled: ""
});
function Ho(n) {
    n = n || new Date;
    const d = -n.getTimezoneOffset()
      , y = d >= 0 ? "+" : "-"
      , ye = ve=>(ve < 10 ? "0" : "") + ve;
    return n.getFullYear() + "-" + ye(n.getMonth() + 1) + "-" + ye(n.getDate()) + "T" + ye(n.getHours()) + ":" + ye(n.getMinutes()) + ":" + ye(n.getSeconds()) + y + ye(Math.floor(Math.abs(d) / 60)) + ":" + ye(Math.abs(d) % 60)
}
const Qo = ()=>__async(globalThis, null, function*() {
    const n = {
        inlineAutoPlay: !1,
        inlineMutedAutoPlay: !1
    };
    try {
        const d = yield Promise.all([index.video({
            inline: !0,
            timeout: 500
        }), index.video({
            inline: !0,
            muted: !0,
            timeout: 500
        })]);
        console.log(d),
        n.inlineAutoPlay = d[0].result,
        n.inlineMutedAutoPlay = d[1].result
    } catch (d) {
        console.log("auto play detect", d)
    }
    return n
});
class Yo {
    constructor() {
        this.details = {
            vendor: "",
            renderer: ""
        },
        this.detected = !1,
        this.getGpuInfo = ()=>{
            if (this.detected)
                return this.details;
            const d = document.createElement("canvas");
            try {
                const y = d.getContext("webgl2") || d.getContext("webgl") || d.getContext("experimental-webgl");
                if (y) {
                    const ye = y.getExtension("WEBGL_debug_renderer_info");
                    ye && (this.details.vendor = y.getParameter(ye.UNMASKED_VENDOR_WEBGL),
                    this.details.renderer = y.getParameter(ye.UNMASKED_RENDERER_WEBGL))
                }
            } catch (y) {
                console.warn(y)
            } finally {
                this.detected = !0
            }
            return this.details
        }
    }
    get vendor() {
        return this.getGpuInfo().vendor
    }
    get renderer() {
        return this.getGpuInfo().renderer
    }
}
const bs = new Yo;
function _e(n) {
    const [d,y] = P(n);
    return {
        value: d,
        setValue: y
    }
}
const Ts = 6
  , Wo = 0;
function Zo(n) {
    return Array.isArray(n) ? n : [n]
}
class fe {
    constructor(d) {
        var y, ye, ve, ie, ae;
        this.prefix = Ki,
        this.destroyed = !1,
        this.initialized = !1,
        this.isPlayed = !1,
        this.disableUX = !1,
        this.shownPlayNextToast = !1,
        this.invokeOnVideoSeek = [],
        this.autoPlayMap = {
            inlineAutoPlay: !1,
            inlineMutedAutoPlay: !1
        },
        this.retryTime = 3,
        this.savedCurrentTime = 0,
        this.freezePause = !1,
        this.metadataloadedTimer = 0,
        this.explicitSeek = !1,
        this._init = (i,O)=>{
            this.track = new Or(this),
            i && this.getVideoData(),
            this.destroyed = !1,
            this.timerChecker = null,
            this.state = Object.assign({
                video_state: l.V_IDEL,
                danmaku: this.config.danmaku && this.config.hasDanmaku ? l.DM_ON : l.DM_OFF,
                mode: this.config.uiMode,
                video_type: 2
            }, i),
            this.loadTemplate(),
            this.bind(l.EVENT.VIDEO_MEDIA_SEEK, ()=>{
                this.invokeOnVideoSeek.forEach($=>$())
            }
            ),
            O && (this.session = Hi()),
            window.addEventListener("unload", ()=>{
                this.destroy()
            }
            ),
            window.MutationObserver && (this.observer = new window.MutationObserver($=>{
                for (let Te = 0; Te < $.length; Te++) {
                    const we = $[Te].removedNodes;
                    for (let Re = 0; Re < we.length; Re++)
                        if (we[Re] === this.template.wrap) {
                            this.destroy();
                            break
                        }
                }
            }
            ),
            this.observer.observe(this.container, {
                attributes: !1,
                childList: !0,
                subtree: !1
            }))
        }
        ,
        this.metadataloadedCallback = ()=>{
            clearTimeout(this.metadataloadedTimer),
            this.unbind(l.EVENT.VIDEO_METADATA_LOADED, this.metadataloadedCallback),
            this.config.hasDanmaku && this.loadDanmaku(),
            this.subtitle = new po({
                container: this.template.subtitle,
                time: ()=>this.currentTime() || 0
            },this),
            this.ass = new mo(this,{
                container: this.template.assSubtitle
            }),
            this.track && this.track.loadTrackUp(!0),
            this.template.danmakuContainer.insertAdjacentHTML("beforeend", `<div class="${this.prefix}-test-danmaku" style="opacity: 0; user-select: none; position: absolute; white-space: pre; pointer-events: none; perspective: 500px; display: inline-block; will-change: transform; font-size: 17px; transition: transform 3s linear 0s; left: 300px;">test</div>`),
            this.hasAd || this.startAutoPlay()
        }
        ,
        this.startAutoPlay = ()=>{
            this.relayPlay ? this.play() : this.config.autoplay && (this.config.autoplayMode === "muted" ? this.setMute(!0).then(()=>{
                this.play()
            }
            ).catch(i=>{}
            ) : this.play())
        }
        ,
        this.loadSubtitle = i=>__async(this, null, function*() {
            return new Promise((O,$)=>{
                var Te, we;
                const {lang: Re, ass: Ye, srt: _t} = i;
                if (!Ye && !_t) {
                    $("neither ass nor srt is found");
                    return
                }
                Ye && ((Te = this.ass) != null && Te.assCompatible) ? (we = this.ass) == null || we.render(Ye).then(()=>{
                    this.subtitleLang.setValue(Re),
                    O(Re)
                }
                ).catch(Jt=>{
                    console.log(Jt),
                    $(`ass render error: ${Jt}`),
                    _t && this.loadSrtSubtitle(Re, _t).then(O)
                }
                ) : _t && this.loadSrtSubtitle(Re, _t).then(O)
            }
            )
        }),
        this.setCCVisible = i=>{
            var O, $, Te;
            i ? this.ccType === "ass" ? (i ? (O = this.ass) == null || O.show() : ($ = this.ass) == null || $.hide(),
            this.subtitle.visible(!1)) : this.subtitle.visible(i) : ((Te = this.ass) == null || Te.hide(),
            this.subtitle.visible(!1)),
            this.ccClosed.setValue(!i)
        }
        ,
        this.loadSrtSubtitle = (i,O)=>new Promise($=>{
            this.subtitle.load({
                data: JSON.parse(JSON.stringify(O)),
                group: 0,
                onSuccess: ()=>{
                    var Te;
                    this.subtitleLang.setValue(i),
                    this.ccType = "srt",
                    (Te = this.ass) == null || Te.hide(),
                    this.subtitle.visible(!0),
                    $(i)
                }
            })
        }
        ),
        this._showNextEpToast = ()=>{
            var i, O, $, Te;
            if (this.config.isH5)
                return;
            const we = Number((i = this.currentTime()) != null ? i : 0)
              , Re = Number((O = this.duration()) != null ? O : 0);
            if (isNaN(we) || isNaN(Re) || Re <= 0 || we <= 0)
                return;
            const Ye = Re - we;
            if (this.config.playMode === "playNextOnEnd" && !this.shownPlayNextToast && this.config.hasNext && Ye <= 5) {
                this.shownPlayNextToast = !0;
                const {dispose: _t} = Me.info({
                    msg: (Te = ($ = this.config.i18n) == null ? void 0 : $.nextEpTip) != null ? Te : C.nextEpTip,
                    duration: 5e3,
                    closable: !0,
                    placement: "right",
                    ellipsis: !0
                });
                this.invokeOnVideoSeek.push(_t)
            }
        }
        ,
        this.setMute = i=>this.config.isH5 ? this.video ? (this.video.muted = i,
        this.video.volume = i ? 0 : this.video.volume || .66,
        Promise.resolve(!0)) : Promise.reject("video is null") : new Promise((O,$)=>{
            this.video ? (this.trigger(l.EVENT.MUTED_CHANGE, i),
            this.video.muted = i,
            O(!0)) : this.bind(l.EVENT.VIDEO_MEDIA_ATTACHED, ()=>{
                this.video ? (this.trigger(l.EVENT.MUTED_CHANGE, i),
                this.video.muted = i,
                O(!0)) : $("video is null")
            }
            )
        }
        ),
        this.getActualVideoQuality = i=>__async(this, null, function*() {
            var O;
            const $ = yield this.core.typedInfo.player.getQualityList("video");
            return i >= Ts ? i : (O = $.find(Te=>Te.id === `${i}`)) == null ? void 0 : O.qualityIndex
        }),
        this._switchVideoQuality = i=>__async(this, null, function*() {
            var O;
            try {
                if (this.core.type === "DASH") {
                    const $ = yield this.getActualVideoQuality(i);
                    if (!Ut($))
                        throw new Error("");
                    const Te = yield this.core.typedInfo.player.setQualityFor("video", $);
                    return this.config.isH5 || this.setAudioQualityByVideo(i),
                    Te
                } else {
                    const $ = (O = this.qualityList.value().find(Te=>Te.value === i)) == null ? void 0 : O.url;
                    if (!$)
                        return;
                    this.savedCurrentTime = this.currentTime() || this.savedCurrentTime,
                    this.load({
                        mediaDataSource: {
                            type: "mp4",
                            url: $
                        }
                    })
                }
            } catch ($) {
                throw new Error($ == null ? void 0 : $.message)
            }
        }),
        this.changeQuality = i=>__async(this, null, function*() {
            var O, $, Te, we, Re, Ye;
            const _t = this.videoQuality.value()
              , Jt = this.video.currentTime;
            if (this.trigger(l.EVENT.QUALITY_FLOATING_LAYER_CLICK, i),
            !this.config.onQualityChange({
                quality: i,
                time: Jt
            }) || i === _t)
                return;
            const {key: bt} = Me.info({
                msg: ($ = (O = this.config.i18n) == null ? void 0 : O.changingQuality) != null ? $ : C.changingQuality
            });
            try {
                yield this._switchVideoQuality(i),
                this.videoQuality.setValue(i),
                Me.info({
                    msg: (we = (Te = this.config.i18n) == null ? void 0 : Te.changeQualitySuccess) != null ? we : C.changeQualitySuccess,
                    overrideKey: bt
                })
            } catch (ai) {
                Me.info({
                    msg: (Ye = (Re = this.config.i18n) == null ? void 0 : Re.changeQualityFail) != null ? Ye : C.changeQualityFail,
                    overrideKey: bt
                })
            }
        }),
        this.getAudioQualityIndexByVideo = i=>__async(this, null, function*() {
            var O;
            const $ = this.getAudioQualityByVideo(i);
            return (O = (yield this.core.typedInfo.player.getQualityList("audio")).find(Te=>Te.id === `${$}`)) == null ? void 0 : O.qualityIndex
        }),
        this.setAudioQualityByVideo = i=>__async(this, null, function*() {
            if (this.core.type === "DASH")
                try {
                    const O = yield this.getAudioQualityIndexByVideo(i);
                    if (!Ut(O))
                        return;
                    yield this.core.typedInfo.player.setQualityFor("audio", O)
                } catch (O) {}
        }),
        this.switchSource = (i,O,$)=>__async(this, null, function*() {
            if (this.core.type === "DASH") {
                const Te = this.currentTime() + .1;
                try {
                    yield this.core.typedInfo.player.switchSource(i, O, $)
                } catch (we) {
                    return Promise.reject(we)
                }
                this.seek(Te <= this.duration() ? Te : this.duration(), {
                    autoSeek: !1,
                    seekEndPause: !0
                })
            } else
                return Promise.reject("switchSource is not supported")
        }),
        this.updateQuliatyList = (i,O)=>{
            this.qualityList.setValue(i),
            Ut(O) && this.changeQuality(O)
        }
        ,
        this.getFormatedLog = ()=>{
            const i = ["*******************Config Statring*******************", `${JSON.stringify(this.config)}`, "*******************Config End*******************"]
              , O = ["*******************Metadata Statring*******************", ...Object.keys(this.runtimeMetadata).map(Te=>`${Te}: ${this.runtimeMetadata[Te]}`), "*******************Metadata End*******************"].join(`
`)
              , $ = this.core.type === "DASH" ? this.core.typedInfo.player.getLogHistory().log : "";
            return $ ? [i, O, $].join(`

`) : [i, O].join(`

`)
        }
        ,
        this.setSetting = (i,O)=>{
            var $;
            try {
                switch (i) {
                case "skip":
                    {
                        ($ = this.skipController) == null || $.changeSkipSwitch(O);
                        break
                    }
                default:
                    break
                }
            } catch (Te) {
                throw new Error(Te)
            }
        }
        ,
        this.createdTime = +Date.now(),
        this.perf = new Cr(this),
        this.perfV2 = new wo(this),
        this.reporter = Ut$1({
            autoSendPv: !1,
            logId: {
                pv: "",
                click: "",
                expose: ""
            }
        }),
        this.perf.setStageTiming(ce.init_s),
        this.config = d,
        this.adTagUrls = Zo(((y = this.config.ad) == null ? void 0 : y.adTagUrl) || []).filter(i=>i),
        this.videoQuality = _e(this.config.quality || 16),
        this.subtitleLang = _e(this.config.defaultLang),
        this.speed = _e((ye = this.config.defaultRate) != null ? ye : "1.0"),
        this.durationText = _e("00:00"),
        this.currentTimeText = _e("00:00"),
        this.qualityList = _e((ve = this.config.qualityList) != null ? ve : []),
        this.ccClosed = _e(((ie = this.config.subtitle) == null ? void 0 : ie.closed) || !1),
        this.defaultVolume = (ae = this.config.defaultVolume) != null ? ae : .66,
        this.container = this.config.element,
        this.showNextEpToast = Sr(this._showNextEpToast, 300);
        try {
            this.window = window.parent && window.parent.document ? window.parent : window,
            this.iframe = window.frameElement
        } catch (i) {
            this.window = window
        }
        this.session = Hi(),
        this.buvid = it("buvid3"),
        this.events = new $r(this),
        Qo().then(i=>{
            this.autoPlayMap = Object.freeze(i),
            this.getVideoData(),
            this._beforeInit(),
            this._init(),
            typeof this.config.beforeplay == "function" && this.config.beforeplay()
        }
        )
    }
    get hasAd() {
        var d, y;
        return (((y = (d = this.config.ad) == null ? void 0 : d.adTagUrl) == null ? void 0 : y.length) || 0) > 0
    }
    _beforeInit() {
        this.pid = new Date().getTime() * 1e3 + Math.floor(Math.random() * (999 - 100 + 1)) + 100,
        Dr()
    }
    getVideoData() {
        setTimeout(()=>{
            this.load({
                mediaDataSource: {
                    type: "mp4",
                    url: this.config.readyVideoUrl
                }
            })
        }
        , 0)
    }
    loadTemplate() {
        this.config.skip && (this.skipController = new Go(this)),
        this.template = new fo(this),
        this.track.init(),
        this.controller = new Bo(this),
        this.hasAd && (this.ad = new Ao(this,__spreadValues({}, this.config.ad)))
    }
    one(d, y) {
        this.events.one(d, y)
    }
    bind(d, y) {
        this.events.on(d, y)
    }
    unbind(d, y) {
        this.events.off(d, y)
    }
    trigger(d, y) {
        this.events.trigger(d, y)
    }
    option(d, y) {
        if (d) {
            if (typeof y > "u")
                return this.config[d];
            this.config[d] = y
        } else
            return !1
    }
    load(d) {
        typeof d.mediaDataSource.url == "string" ? this.core = new zo(this,d.mediaDataSource.url) : typeof d.mediaDataSource.url == "object" && d.mediaDataSource.url.dash && (this.core = new jo(this,d.mediaDataSource.url.dash)),
        this.video ? this.savedCurrentTime && (this.state.video_state === l.V_PLAY || this.state.video_state === l.V_BUFF ? this.seek(this.savedCurrentTime, {
            autoSeek: !0,
            userEvent: !1
        }) : this.seek(this.savedCurrentTime, {
            autoSeek: !0,
            seekEndPause: !0,
            userEvent: !1
        })) : (this.video = this.core.video,
        this.template.videoWrp.appendChild(this.video),
        this._videoEventListener(this.video),
        this.metadataloadedTimer = window.setTimeout(this.metadataloadedCallback, 3e3),
        this.bind(l.EVENT.VIDEO_METADATA_LOADED, this.metadataloadedCallback),
        this.initialized = !0,
        this.freezePause = !1,
        this.trigger(l.EVENT.VIDEO_INITIALIZED)),
        this.perf.setStageTiming(ce.init_e)
    }
    getTimeOffset() {
        return this.video && Number(this.video.getAttribute("data-offset")) || 0
    }
    loadDanmaku() {
        this.danmaku = new To(this)
    }
    duration(d) {
        if (d = d || this.video,
        d)
            return d.duration
    }
    currentTime(d) {
        if (d = d || this.video,
        d)
            return d.currentTime || 0
    }
    getPlayurl(d) {
        var y;
        if (d = d || this.video,
        d)
            return this.core.type === "DASH" ? ((y = this.core.typedInfo.player) == null ? void 0 : y.getCurrentPlayURLFor("video")) || "" : d.src
    }
    _videoEventListener(d) {
        const y = this.controller;
        let ye = !1
          , ve = 0
          , ie = {};
        const ae = ()=>{
            this.timerChecker = window.setInterval(()=>{
                if (ve === this.currentTime(d)) {
                    if (ye = !0,
                    this.controller.setState(l.V_BUFF),
                    !this.bufferStartTime) {
                        const O = {
                            obLen: this.getBufferRate() * this.duration(),
                            ocTime: this.currentTime()
                        }
                          , $ = this.core.type === "DASH" ? this.core.typedInfo.player : null;
                        $ && Object.assign(O, {
                            vbl: $ == null ? void 0 : $.getBufferLength("video"),
                            abl: $ == null ? void 0 : $.getBufferLength("audio"),
                            vurl: $ == null ? void 0 : $.getCurrentPlayURLFor("video"),
                            aurl: $ == null ? void 0 : $.getCurrentPlayURLFor("audio")
                        }, ($ == null ? void 0 : $.getBufferingInfo()) || {}),
                        ie = O,
                        this.currentTime() ? this.getBufferRate() ? this.currentTime() < this.getBufferRate() * this.duration() - 10 && (this.lagLoad = !0) : this.nullLoad = !0 : this.headLoad = !0,
                        this.track && this.track.trackInfoPush("start_load", JSON.stringify(ie), {
                            url: this.getPlayurl()
                        }),
                        this.bufferStartTime = +new Date
                    }
                } else
                    ve = this.currentTime(d)
            }
            , 500)
        }
        ;
        d.addEventListener("play", O=>{
            this.state.video_state !== l.V_PLAY && !(y.getLastState() === l.V_PAUSE && this.state.video_state === l.V_BUFF) && setTimeout(()=>{
                this.controller.setState(l.V_PLAY)
            }
            ),
            clearInterval(this.timerChecker),
            ae(),
            this.videoSeeking && (this.videoSeeking = !1,
            this.videoSeekingRelay = !0,
            this.trigger(l.EVENT.VIDEO_MEDIA_SEEKED, {
                time: this.currentTime()
            })),
            this.trigger(l.EVENT.VIDEO_MEDIA_PLAYING, O),
            this.track && this.track.view()
        }
        ),
        d.addEventListener("pause", ()=>{
            if (!this.freezePause) {
                const O = this.duration(d);
                this.currentTime() !== O && this.state.video_state !== l.V_PAUSE && !(y.getLastState() === l.V_PLAY && this.state.video_state === l.V_BUFF) && (this.controller.setState(l.V_PAUSE),
                this.trigger(l.EVENT.VIDEO_MEDIA_PAUSE),
                this.controller.setState(l.V_PAUSE)),
                clearInterval(this.timerChecker)
            }
        }
        ),
        d.addEventListener("seeked", ()=>{
            var O;
            const $ = (O = this.controller) == null ? void 0 : O.getLastState();
            if ($ && $ !== l.V_PAUSE && $ !== l.V_COMPLETE) {
                const Te = d.play();
                Te && Te.catch(we=>{
                    this.state.video_state <= l.V_READY && this.pause()
                }
                )
            }
            if ((this.videoSeeking || this.videoSeekingRelay) && (this.videoSeekingRelay || this.trigger(l.EVENT.VIDEO_MEDIA_SEEKED, {
                time: this.currentTime()
            }),
            this.videoSeeking = !1,
            this.videoSeekingRelay = !1,
            this.seekLoad = !1,
            ye && (ye = !1,
            this.controller.setState(this.controller.getLastState()),
            this.bufferStartTime && this.bufferStartTime < +new Date))) {
                if (ie) {
                    const Te = String(+new Date - this.bufferStartTime);
                    ie.bufferTime = Te
                }
                this.track && this.track.trackInfoPush("seek_end_load", JSON.stringify(ie), {
                    url: this.getPlayurl()
                }),
                ie = {},
                this.bufferStartTime = 0
            }
            this.explicitSeek = !1,
            this.trigger(l.EVENT.VIDEO_MEDIA_SEEK_END)
        }
        ),
        d.addEventListener("timeupdate", ()=>{
            var O, $, Te, we, Re;
            if (this.savedCurrentTime = this.currentTime(d) || this.savedCurrentTime,
            this.trigger(l.EVENT.VIDEO_MEDIA_TIME),
            this.trigger(l.EVENT.VIDEO_MEDIA_FRAME),
            ye && ve !== this.currentTime(d) && (ye = !1,
            this.controller.getLastState() !== l.V_COMPLETE && this.controller.setState(this.controller.getLastState()),
            this.bufferStartTime && this.bufferStartTime < +new Date)) {
                if (ie) {
                    const Ye = String(+new Date - this.bufferStartTime);
                    ie.bufferTime = Ye
                }
                this.track && this.track.trackInfoPush(this.seekLoad ? "seek_end_load" : this.lagLoad ? "lag_end_load" : this.headLoad ? "head_end_load" : this.nullLoad ? "null_end_load" : "end_load", JSON.stringify(ie), {
                    url: this.getPlayurl()
                }),
                ie = {},
                this.lagLoad = !1,
                this.headLoad = !1,
                this.nullLoad = !1,
                this.bufferStartTime = 0
            }
            if (this.showNextEpToast(),
            !this.isPlayed && this.explicitSeek) {
                (O = this.controller) == null || O.showRealVideoPicture();
                const Ye = [l.V_IDEL, l.V_READY, l.V_PAUSE].includes(this.getState());
                this.config.isH5 ? ($ = this.template) == null || $.toggleH5StateIcon(Ye) : (Te = this.template) == null || Te.togglePlayMask(Ye)
            }
            (Re = (we = this.controller) == null ? void 0 : we.progressBar) == null || Re.updateVideoTime(this.currentTime(), this.duration())
        }
        );
        const i = ()=>{
            this.perf.setStageTiming(ce.meta_s),
            d.removeEventListener("loadstart", i)
        }
        ;
        d.addEventListener("loadstart", i),
        d.addEventListener("waiting", ()=>{
            this.trigger(l.EVENT.VIDEO_MEDIA_BUFFER)
        }
        ),
        d.addEventListener("canplay", ()=>{
            this.trigger(l.EVENT.VIDEO_MEDIA_BUFFER_END)
        }
        ),
        d.addEventListener("ended", ()=>{
            clearInterval(this.timerChecker),
            this.controller.setState(l.V_COMPLETE)
        }
        ),
        d.addEventListener("canplay", ()=>{
            this.perf.setStageTiming(ce.canplay),
            this.trigger(l.EVENT.VIDEO_MEDIA_CANPLAY)
        }
        ),
        d.addEventListener("loadedmetadata", ()=>{
            this.perf.setStageTiming(ce.meta_e),
            this.retryTime = 3,
            this.trigger(l.EVENT.VIDEO_METADATA_LOADED),
            this.trigger(l.EVENT.VIDEO_MEDIA_BUFFER)
        }
        ),
        d.addEventListener("loadeddata", ()=>{
            this.perf.setStageTiming(ce.frame)
        }
        ),
        d.addEventListener("ratechange", ()=>{
            this.trigger(l.EVENT.VIDEO_RATE_CHANGE)
        }
        ),
        d.addEventListener("error", ()=>{
            this.initialized && (this.retryTime && !this.config.noId ? (this.retryTime--,
            this.freezePause = !0,
            this.getVideoData()) : (this.freezePause = !1,
            this.trigger(l.EVENT.VIDEO_MEDIA_ERROR, l.VIDEO_ERROR),
            this.track && this.track.loadTrackUp(!0),
            this.track && this.track.trackInfoPush("video_error", `from:1,code:${l.VIDEO_ERROR},url:${this.getPlayurl()},videocode:${d.error && d.error.code}`)))
        }
        ),
        d.addEventListener("durationchange", ()=>{
            var O, $;
            this.durationText.setValue(Vt(this.duration())),
            ($ = (O = this.controller) == null ? void 0 : O.progressBar) == null || $.updateVideoTime(this.currentTime(), this.duration()),
            this.trigger(l.EVENT.VIDEO_MEDIA_DURATION_CHANGE)
        }
        ),
        d.addEventListener("progress", ()=>{
            var O, $;
            ($ = (O = this.controller) == null ? void 0 : O.progressBar) == null || $.setBufferValue(this.getBufferRate() || 0)
        }
        ),
        this.trigger(l.EVENT.VIDEO_MEDIA_ATTACHED)
    }
    setVolume(d) {
        if (this.config.isH5) {
            this.video.muted = !(d > 0),
            this.video.volume = d;
            return
        }
        this.trigger(l.EVENT.SET_VOLUME, d)
    }
    pause(d=!1) {
        this.freezePause = !1,
        this.disableUX = d,
        this.video && this.controller.setState(l.V_PAUSE),
        this.trigger(l.EVENT.VIDEO_MEDIA_PAUSE)
    }
    play() {
        var d, y;
        if (this.config.developer && this.loadDeveloper("_actionPlay"),
        this.ad) {
            const ye = this.ad.getState();
            if (console.log(this.ad, ye),
            ye === "play")
                return;
            if (ye === "paused") {
                this.ad.resume();
                return
            }
        }
        if (this.video) {
            this.template.loadLayer.style.display = "none",
            this.isPlayed || (this.config.autoplay || (this.video.style.display = "block"),
            this.template.csIn(!0));
            const ye = this.duration(this.video);
            ye > 0 && this.currentTime() === ye && ((d = this.controller) == null ? void 0 : d.getLastState()) === l.V_COMPLETE && this.seek(0),
            (y = this.controller) == null || y.setState(l.V_PLAY)
        } else
            this.relayPlay = !0;
        this.trigger(l.EVENT.VIDEO_MEDIA_PLAY)
    }
    reload(d) {
        var y;
        this.reloadTime = +Date.now(),
        this.perf.setStageTiming(ce.reload_s),
        this.perf.setStageTiming(ce.init_s),
        this.destroy(),
        this.config = d,
        this.container = this.config.element,
        this.videoQuality.setValue(this.config.quality || 16),
        this.subtitleLang.setValue(this.config.defaultLang),
        this.speed.setValue((y = this.config.defaultRate) != null ? y : "1.0"),
        this.getVideoData(),
        this._beforeInit(),
        this._init(),
        typeof this.config.beforeplay == "function" && this.config.beforeplay()
    }
    seek(d, y) {
        var ye;
        const {autoSeek: ve, seekEndPause: ie, userEvent: ae} = y != null ? y : {};
        !this.video || (ve || (d = Math.min(d, this.duration() - 1)),
        this.trigger(l.EVENT.VIDEO_MEDIA_SEEK, {
            time: d,
            userEvent: ae
        }),
        d < 0 || !Number.isFinite(d)) || (((ye = this.duration()) != null ? ye : 0) - d > 5 && (this.shownPlayNextToast = !1),
        this.videoSeeking = !0,
        this.seekLoad = !0,
        this.video.currentTime = d,
        this.explicitSeek = !0,
        ie ? this.pause() : this.play())
    }
    mode(d) {
        this.controller && this.controller.setMode(d)
    }
    destroy() {
        this.destroyed || (this.trigger(l.EVENT.VIDEO_BEFORE_DESTROY),
        this.observer && this.observer.disconnect(),
        this.timerChecker && clearInterval(this.timerChecker),
        this.core && this.core.destroy(),
        this.video = null,
        this.destroyed = !0,
        this.initialized = !1,
        this.isPlayed = !1,
        this.explicitSeek = !1,
        this.subtitle = null,
        this.ass = null,
        this.danmaku && this.danmaku.dispose(),
        this.skipController && this.skipController.dispose(),
        this.ad && this.ad.dispose(),
        this.controller.destroy(),
        this.trigger(l.EVENT.VIDEO_DESTROY),
        this.events.destroy())
    }
    getBufferRate() {
        if (this.video) {
            const d = this.video.buffered;
            if (d && d.length)
                for (let y = 0; y < d.length; y++) {
                    const ye = d.start(y)
                      , ve = d.end(y)
                      , ie = this.currentTime();
                    if (ye <= ie && ve >= ie)
                        return ve / this.duration()
                }
        }
    }
    isFullScreen() {
        return this.state.mode === l.UI_FULL || this.state.mode === l.UI_WEB_FULL
    }
    exitFullScreen() {
        var d, y;
        (y = (d = this.controller) == null ? void 0 : d.fullscreenButton) == null || y.manualExitFullscreen()
    }
    getWidth() {}
    getHeight() {}
    isMute() {
        return this.video ? this.video.muted : !1
    }
    getState() {
        return this.state.video_state
    }
    getVersion() {}
    stop() {}
    getAudioQualityByVideo(d) {
        var y, ye;
        if (!this.qualityList.value().length)
            return 0;
        const ve = this.qualityList.value().reduce((ie,ae)=>Math.min(ie, ae.audioQuality), this.qualityList.value()[0].audioQuality);
        return this.config.isH5 ? 0 : (ye = (y = this.qualityList.value().find(ie=>ie.value === d)) == null ? void 0 : y.audioQuality) != null ? ye : ve
    }
    setFocus() {
        this.trigger(l.EVENT.SET_VIDEO_FOCUS)
    }
    setSpeedRate(d) {
        !this.video || (this.video.playbackRate = Number(d),
        this.speed.setValue(d))
    }
    loadDeveloper(d, y) {
        if (!this.template)
            return;
        const ye = document.createElement("span");
        ye.innerText = y ? `${y}: ${d}` : d,
        this.template.videoWrpDeveloper.appendChild(ye),
        this.template.videoWrpDeveloper.scrollTop = this.template.videoWrpDeveloper.scrollHeight
    }
    get runtimeMetadata() {
        return {
            version: Is.version,
            revision: Is.revision,
            creationTime: Ho(),
            userAgent: navigator.userAgent,
            cookieEnabled: navigator.cookieEnabled,
            hardwareConcurrency: navigator.hardwareConcurrency,
            maxTouchPoints: navigator.maxTouchPoints,
            devicePixelRatio: window.devicePixelRatio,
            viewport: `width:${window.innerWidth},height:${window.innerHeight}`,
            screen: `width:${screen.width},height:${screen.height},colorDepth:${screen.colorDepth}`,
            gpu: `vendor:${bs.vendor},renderer:${bs.renderer}`,
            frameUrl: document.URL,
            referrer: document.referrer
        }
    }
}
fe.message = Me;
var Wt = (n=>(n[n.Pugv = 0] = "Pugv",
n[n.Editor = 1] = "Editor",
n[n.OgvPre = 2] = "OgvPre",
n[n.OgvPageList = 3] = "OgvPageList",
n[n.OgvExtraParams = 4] = "OgvExtraParams",
n[n.ogvFollowers = 5] = "ogvFollowers",
n[n.Game = 6] = "Game",
n[n.PugvCenter = 7] = "PugvCenter",
n))(Wt || {})
  , ws = (n=>(n.pageList = "pageList",
n.extra = "extra",
n.followers = "followers",
n))(ws || {})
  , Ss = (n=>(n.inited = "inited",
n.enter = "video_media_enter",
n.play = "video_media_play",
n.playing = "video_media_playing",
n.canplay = "video_media_canplay",
n.pause = "video_media_pause",
n.seek = "video_media_seek",
n.seeking = "video_media_seeking",
n.seeked = "video_media_seeked",
n.seekEnd = "video_media_seek_end",
n.time = "video_media_time",
n.error = "video_media_error",
n.buffer = "video_media_buffer",
n.buffered = "video_media_buffer_end",
n.bufferFull = "video_media_buffer_full",
n.loadlag = "video_media_loadlag",
n.ended = "video_media_ended",
n.volume = "video_media_volume",
n.mute = "video_media_mute",
n.attached = "video_media_attached",
n.load = "video_media_load",
n.loaded = "video_media_loaded",
n.playerLoad = "video_player_load",
n.playerLoaded = "video_player_loaded",
n.playurlLoad = "video_playurl_load",
n.playurlLoaded = "video_playurl_loaded",
n.danmakuLoad = "video_danmaku_load",
n.danmakuLoaded = "video_danmaku_loaded",
n.pagelistLoaded = "video_pagelist_loaded",
n.websocketLink = "video_websocket_link",
n.websocketLinked = "video_websocket_linked",
n.websocketError = "video_websocket_error",
n.websocketEnd = "video_websocket_end",
n.initializing = "video_initializing",
n.initialized = "video_initialized",
n.scroll = "video_scroll",
n.resize = "video_resize",
n.playerResize = "video_player_resize",
n.progressbarResize = "video_progressbar_resize",
n.refullscreen = "video_refullscreen",
n.fullscreenChanged = "video_fullscreen_mode_changed",
n.mousemove = "video_mousemove",
n.heartbeat = "video_heartbeat",
n.controlbar = "video_controlbar",
n.beforeDestroy = "video_before_destroy",
n.destroy = "video_destroy",
n.log = "video_log",
n.logUpdate = "video_log_update",
n.logClose = "video_log_close",
n.promoteInit = "video_promote_init",
n.preloadError = "video_preload_error",
n.subtitleChange = "video_subtitle_change",
n.panelHover = "video_panel_hover",
n.guide_attention_pos_update = "video_guide_attention_pos_update",
n.mirror = "video_mirror",
n.videoResize = "video_size_resize",
n.dashError = "dash_player_error",
n.initialCB = "initialCallback",
n.itEnded = "interactive_video_ended",
n.itStart = "interactive_video_countdown_start",
n.playerReload = "player_reload",
n.playerReloaded = "player_reloaded",
n.loadedCB = "loadedCallback",
n.progressUpdate = "video_progress_update",
n.fullwin = "player_fullwin",
n.widewin = "player_widewin",
n.selector = "player_selector",
n.feedBack = "feed_back",
n.flashBirdge = "flash_birdge",
n.heimu = "heimu",
n))(Ss || {});
function qo() {
    return window.bPlayer || (window.bPlayer = {
        get __name__() {
            return "bPlayer"
        },
        get __mode__() {
            return "singleton"
        },
        get metadata() {
            return {
                name: "@bilibili-intl/player",
                version: "0.26.9",
                revision: "d663d3b",
                lastCompiled: ""
            }
        },
        get type() {
            return Wt
        },
        get events() {
            return Ss
        },
        get action() {
            return ws
        }
    }),
    window.bPlayer
}
function Ko(n) {
    return __async(this, null, function*() {
        const {aid: d, bvid: y, episodeId: ye, type: ve, p: ie} = n;
        if (+ve === Wt.Pugv && ye)
            return yield ea(ye);
        if (d || y)
            return yield Jo({
                aid: d,
                bvid: y,
                p: ie
            });
        if (ye)
            return yield Xo(ye)
    })
}
function Jo(n) {
    return __async(this, null, function*() {
        try {
            n.aid || delete n.aid,
            n.bvid || delete n.bvid;
            const d = (n.p || 1) - 1;
            delete n.p;
            const y = yield Ce.ajax({
                data: n,
                method: "GET",
                url: "//api.bilibili.com/x/web-interface/view",
                async: !0,
                withCredentials: !0
            })
              , ye = JSON.parse(y)
              , ve = {};
            if (ye != null && ye.data) {
                window.__INITIAL_STATE__ || (window.__INITIAL_STATE__ = {
                    video: {
                        viewInfo: ye.data
                    }
                });
                const ie = ye.data.pages;
                return ie != null && ie[d] ? ve.cid = ie[d].cid : ve.cid = (ie == null ? void 0 : ie[0].cid) || ye.data.cid,
                ve.aid = n.aid || ye.data.aid,
                ve
            }
        } catch (d) {
            throw new Error(d)
        }
    })
}
function Xo(n) {
    return __async(this, null, function*() {
        try {
            const d = yield Ce.ajax({
                data: {
                    ep_id: n
                },
                method: "GET",
                url: "//api.bilibili.com/pgc/view/web/season",
                async: !0,
                withCredentials: !0
            })
              , y = JSON.parse(d)
              , ye = y && y.result
              , ve = {};
            if (ye) {
                ve.seasonId = ye.season_id,
                ve.seasonType = ye.type;
                const ie = ye.episodes;
                if (Array.isArray(ie)) {
                    for (let i = 0; i < ie.length; i++)
                        if (ie[i].id === n)
                            return ve.cid = ie[i].cid,
                            ve.aid = ie[i].aid,
                            ve.bvid = ie[i].bvid || "",
                            ve
                }
                const ae = ye.section;
                if (Array.isArray(ae))
                    for (let i = 0; i < ae.length; i++) {
                        const O = ae[i].episodes;
                        if (Array.isArray(O)) {
                            for (let $ = 0; $ < O.length; $++)
                                if (O[$].id === n)
                                    return ve.cid = O[$].cid,
                                    ve.aid = O[$].aid,
                                    ve.bvid = O[$].bvid || "",
                                    ve
                        }
                    }
            }
        } catch (d) {
            throw new Error(d)
        }
    })
}
function ea(n) {
    return __async(this, null, function*() {
        try {
            const d = yield Ce.ajax({
                data: {
                    ep_id: n
                },
                method: "GET",
                url: "//api.bilibili.com/pugv/view/web/season",
                async: !0,
                withCredentials: !0
            })
              , y = JSON.parse(d)
              , ye = y && y.data
              , ve = {};
            if (ye) {
                const ie = ye.episodes;
                if (Array.isArray(ie)) {
                    for (let ae = 0; ae < ie.length; ae++)
                        if (ie[ae].id === n)
                            return ve.cid = ie[ae].cid,
                            ve.aid = ie[ae].aid,
                            ve.musth5 = 1,
                            ve.bvid = ie[ae].bvid || "",
                            ve
                }
            }
        } catch (d) {
            throw new Error(d)
        }
    })
}
function As(n) {
    return __async(this, null, function*() {
        if (n == null)
            throw new Error("Input must not be null or undefined");
        let d = {
            get element() {
                var y;
                return (y = n.element) != null ? y : document.getElementById("bilibiliPlayer")
            },
            set element(y) {
                n.element = y
            },
            get auxiliaryWrapClass() {
                return "danmaku-wrap"
            },
            set auxiliaryWrapClass(y) {
                n.auxiliaryWrapClass = y
            },
            get namespace() {
                var y;
                return (y = n.namespace) != null ? y : ".bilibiliplayer"
            },
            set namespace(y) {
                n.namespace = y
            },
            get extraInfo() {
                var y;
                return (y = n.extraInfo) != null ? y : {}
            },
            get storageName() {
                var y;
                return (y = n.storageName) != null ? y : "bilibili_player_settings"
            },
            set storageName(y) {
                n.storageName = y
            },
            get aid() {
                return +n.aid
            },
            set aid(y) {
                n.aid = y
            },
            get uiMode() {
                var y;
                return (y = n.uiMode) != null ? y : l.UI_NORMAL
            },
            get title() {
                var y;
                return (y = n.title) != null ? y : ""
            },
            get checkLogin() {
                return n.checkLogin
            },
            get danmakuConfig() {
                var y;
                return (y = n.danmakuConfig) != null ? y : {
                    on: !0,
                    defaultVisible: !1,
                    speed: 1,
                    duration: 7,
                    area: 25,
                    fontSize: 25,
                    number: 80
                }
            },
            get watermark() {
                return n.watermark
            },
            get cid() {
                return +n.cid
            },
            set cid(y) {
                n.cid = y
            },
            get bvid() {
                return this.show_bv ? n.bvid : ""
            },
            set bvid(y) {
                n.bvid = y
            },
            get show_bv() {
                var y;
                return +((y = n.show_bv) != null ? y : 1)
            },
            set show_bv(y) {
                n.show_bv = y
            },
            get seasonId() {
                return +n.seasonId
            },
            set seasonId(y) {
                n.seasonId = y
            },
            get episodeId() {
                return +n.episodeId
            },
            set episodeId(y) {
                n.episodeId = y
            },
            get quality() {
                return +n.quality || +n.qn
            },
            set quality(y) {
                n.quality = y
            },
            get p() {
                var y;
                return Number((y = n.p) != null ? y : 1)
            },
            set p(y) {
                n.p = y
            },
            get live() {
                return !!n.live
            },
            set live(y) {
                n.live = y
            },
            get hasNext() {
                return !!n.hasNext
            },
            set hasNext(y) {
                n.hasNext = y
            },
            get listLoop() {
                return !!n.listLoop
            },
            set listLoop(y) {
                n.listLoop = y
            },
            get autoplay() {
                return !!n.autoplay
            },
            set autoplay(y) {
                n.autoplay = y
            },
            get autoplayMode() {
                var y;
                return (y = n.autoplayMode) != null ? y : "auto"
            },
            set autoplayMode(y) {
                n.autoplayMode = y
            },
            get playerType() {
                return +n.player_type || 0
            },
            set playerType(y) {
                n.player_type = y
            },
            get seasonType() {
                return +n.seasonType || +n.season_type || 0
            },
            set seasonType(y) {
                n.seasonType = y
            },
            get lastepid() {
                return +n.last_ep_id
            },
            set lastepid(y) {
                n.last_ep_id = y
            },
            get lastplaytime() {
                return +n.lastplaytime
            },
            set lastplaytime(y) {
                n.lastplaytime = y
            },
            get seekTime() {
                var y;
                return (y = n.seekTime) != null ? y : 10
            },
            get enableSSLStream() {
                var y;
                return !!((y = n.enable_ssl_stream) == null || y)
            },
            set enableSSLStream(y) {
                n.enable_ssl_stream = y
            },
            get enableSSLResolve() {
                var y;
                return !!((y = n.enable_ssl_resolve) == null || y)
            },
            set enableSSLResolve(y) {
                n.enable_ssl_resolve = y
            },
            get dev() {
                return !!n.dev
            },
            set dev(y) {
                n.dev = y
            },
            get extra() {
                var y;
                return !!((y = n.extra) == null || y)
            },
            set extra(y) {
                n.extra = y
            },
            get logger() {
                return !!n.logger
            },
            set logger(y) {
                n.logger = y
            },
            get autoShift() {
                return !!n.autoShift
            },
            set autoShift(y) {
                n.autoShift = y
            },
            get playMode() {
                var y;
                return (y = n.playMode) != null ? y : "pauseOnEnd"
            },
            set playMode(y) {
                n.playMode = y
            },
            get watchlater() {
                return n.watchlater === void 0 || n.watchlater === null ? !1 : !!n.watchlater
            },
            set watchlater(y) {
                n.watchlater = y === null ? null : !!y
            },
            get plMax() {
                return +n.pl_max || 0
            },
            set plMax(y) {
                n.pl_max = y
            },
            get beforeplay() {
                var y;
                return (y = n.beforeplay) != null ? y : xt
            },
            set beforeplay(y) {
                n.beforeplay = y
            },
            get afterplay() {
                var y;
                return (y = n.afterplay) != null ? y : xt
            },
            get onQualityChange() {
                var y;
                return (y = n.onQualityChange) != null ? y : xt
            },
            set afterplay(y) {
                n.afterplay = y
            },
            get extraParams() {
                return n.extra_params
            },
            set extraParams(y) {
                n.extra_params = y
            },
            get t() {
                return n.t
            },
            set t(y) {
                n.t = y
            },
            get d() {
                return n.d
            },
            set d(y) {
                n.d = y
            },
            get pb() {
                return !!n.pb
            },
            set pb(y) {
                n.pb = y
            },
            get preAd() {
                return !!n.pre_ad
            },
            set preAd(y) {
                n.pre_ad = y
            },
            get asWide() {
                return !!n.as_wide
            },
            set asWide(y) {
                n.as_wide = y
            },
            get admode() {
                return n.admode
            },
            set admode(y) {
                n.admode = y
            },
            get record() {
                var y;
                return (y = n.record) != null ? y : ""
            },
            set record(y) {
                n.record = y
            },
            get danmaku() {
                var y;
                return !!((y = n.danmaku) == null || y)
            },
            set danmaku(y) {
                n.danmaku = y
            },
            get hasDanmaku() {
                var y;
                return !!((y = n.hasDanmaku) == null || y)
            },
            set hasDanmaku(y) {
                n.hasDanmaku = y
            },
            get skipable() {
                return !!n.skipable
            },
            set skipable(y) {
                n.skipable = y
            },
            get sourcePlayer() {
                return n.sourceplayer
            },
            set sourcePlayer(y) {
                n.sourceplayer = y
            },
            get verticalDanmaku() {
                return !!n.verticalDanmaku
            },
            set verticalDanmaku(y) {
                n.verticalDanmaku = y
            },
            get dashSymbol() {
                return !!n.dashSymbol
            },
            set dashSymbol(y) {
                n.dashSymbol = y
            },
            get inner() {
                return !!n.inner
            },
            set inner(y) {
                n.inner = y
            },
            get upPreview() {
                return !!n.upPreview
            },
            set upPreview(y) {
                n.upPreview = y
            },
            get isAudio() {
                return !!n.isAudio
            },
            set isAudio(y) {
                n.isAudio = y
            },
            get isH5() {
                var y;
                return (y = n.isH5) != null ? y : !1
            },
            set isH5(y) {
                n.val = y
            },
            get lightWeight() {
                return !!n.lightWeight
            },
            set lightWeight(y) {
                n.lightWeight = y
            },
            get gamePlayer() {
                return !!n.gamePlayer
            },
            set gamePlayer(y) {
                n.gamePlayer = y
            },
            get stableController() {
                return !!n.stableController
            },
            set stableController(y) {
                n.stableController = y
            },
            get disableInteractive() {
                return !!n.disableInteractive
            },
            set disableInteractive(y) {
                n.disableInteractive = y
            },
            get interactiveNode() {
                return n.interactiveNode
            },
            set interactiveNode(y) {
                n.interactiveNode = y
            },
            get interactiveTime() {
                return +n.interactiveTime
            },
            set interactiveTime(y) {
                n.interactiveTime = y
            },
            get interactiveGraphId() {
                return +n.interactiveGraphId
            },
            set interactiveGraphId(y) {
                n.interactiveGraphId = y
            },
            get interactivePreview() {
                return !!n.interactivePreview
            },
            set interactivePreview(y) {
                n.interactivePreview = y
            },
            get interactivePersistentDanmaku() {
                return !!n.interactivePersistentDanmaku
            },
            set interactivePersistentDanmaku(y) {
                n.interactivePersistentDanmaku = y
            },
            get musth5() {
                return !!n.musth5
            },
            set musth5(y) {
                n.musth5 = y
            },
            get theme() {
                var y;
                return (y = n.theme) != null ? y : "blue"
            },
            set theme(y) {
                n.theme = y
            },
            get type() {
                return +n.type
            },
            set type(y) {
                n.type = y
            },
            get sub_type() {
                return +n.sub_type
            },
            set sub_type(y) {
                n.sub_type = y
            },
            get touchMode() {
                var y;
                return !!((y = n.touchMode) != null ? y : je.version.iPad || je.version.tesla)
            },
            set touchMode(y) {
                n.touchMode = y
            },
            get noEndPanel() {
                return !!n.noEndPanel
            },
            set noEndPanel(y) {
                n.noEndPanel = y
            },
            get s_from() {
                return +n.s_from
            },
            set s_from(y) {
                n.s_from = y
            },
            get s_to() {
                return +n.s_to
            },
            set s_to(y) {
                n.s_to = y
            },
            get readyDuration() {
                return +n.readyDuration
            },
            set readyDuration(y) {
                n.readyDuration = y
            },
            get readyVideoUrl() {
                return n.readyVideoUrl
            },
            set readyVideoUrl(y) {
                n.readyVideoUrl = y
            },
            get noRecommend() {
                return !!n.noRecommend
            },
            set noRecommend(y) {
                n.noRecommend = y
            },
            get portraitFullScreen() {
                return !!n.portraitFullScreen || !!n.portrait_full_screen
            },
            set portraitFullScreen(y) {
                n.portraitFullScreen = y
            },
            get highQuality() {
                return !!n.highQuality || !!n.high_quality
            },
            set highQuality(y) {
                n.highQuality = y
            },
            get noFullScreenButton() {
                return !!n.noFullScreenButton
            },
            set noFullScreenButton(y) {
                n.noFullScreenButton = y
            },
            get spmid() {
                return n.spmid
            },
            set spmid(y) {
                n.spmid = y
            },
            get from_spmid() {
                return n.from_spmid
            },
            set from_spmid(y) {
                n.from_spmid = y
            },
            get outer() {
                return !!n.outer
            },
            set outer(y) {
                n.outer = y
            },
            get loop() {
                return !!n.loop
            },
            set loop(y) {
                n.loop = y
            },
            get noId() {
                return !n.aid && !n.bvid && !n.episodeId
            },
            get lastPlayTimeRecordName() {
                return n.lastPlayTimeRecordName
            },
            set lastPlayTimeRecordName(y) {
                n.lastPlayTimeRecordName = y
            },
            get hasMuteButton() {
                return !!n.hasMuteButton || !!(n.autoplay && n.autoplayMode !== "unmute")
            },
            set hasMuteButton(y) {
                n.hasMuteButton = y
            },
            get hasSpeedButton() {
                var y;
                return !!((y = n.hasSpeedButton) != null && y)
            },
            get hasNextEpisodeButton() {
                var y;
                return !!((y = n.hasNextEpisodeButton) != null && y)
            },
            get qualityList() {
                return n.qualityList
            },
            get defaultQuality() {
                return n.defaultQuality
            },
            get hasVolButton() {
                var y;
                return !!((y = n.hasVolButton) != null && y)
            },
            get defaultLang() {
                var y;
                return (y = n.defaultLang) != null ? y : ""
            },
            get defaultRate() {
                var y;
                return (y = n.defaultRate) != null ? y : "1.0"
            },
            get defaultVolume() {
                var y;
                return (y = n.defaultVolume) != null ? y : .66
            },
            get hasQualityButton() {
                var y;
                return !!((y = n.hasQualityButton) != null && y)
            },
            get subtitle() {
                return n.subtitle
            },
            get rateList() {
                var y;
                return (y = n.rateList) != null ? y : ["0.5", "0.75", "1.0", "1.25", "1.5", "2.0"].reverse()
            },
            get hideCoverInfo() {
                return !!n.hideCoverInfo
            },
            set hideCoverInfo(y) {
                n.hideCoverInfo = y
            },
            get hideDanmakuButton() {
                return !!n.hideDanmakuButton
            },
            set hideDanmakuButton(y) {
                n.hideDanmakuButton = y
            },
            get callAppMode() {
                var y;
                return !!((y = n.callAppMode) != null && y)
            },
            set callAppMode(y) {
                n.callAppMode = y
            },
            get labels() {
                return {}
            },
            get developer() {
                return !!n.developer
            },
            set developer(y) {
                n.developer = y
            },
            get i18n() {
                var y;
                return (y = n.i18n) != null ? y : C
            },
            get previewData() {
                var y;
                return (y = n.previewData) != null ? y : null
            },
            get skip() {
                return n.skip
            },
            get ad() {
                return n.ad
            },
            get history() {
                var y;
                return (y = n.history) != null ? y : 0
            },
            get wideScreen() {
                var y;
                return (y = n.wideScreen) != null ? y : !0
            },
            get beforeClickItem() {
                var y;
                return (y = n.beforeClickItem) != null ? y : ()=>!0
            },
            get dashConfig() {
                var y;
                return (y = n.dashConfig) != null ? y : {
                    enableHEVC: !1
                }
            }
        };
        if (Object.defineProperty(d, "p", {
            get() {
                var y;
                return +((y = n.p) != null ? y : 1)
            },
            set(y) {
                n.p = y
            }
        }),
        Object.defineProperty(d, "show_bv", {
            get() {
                var y;
                return +((y = n.show_bv) != null ? y : 1)
            },
            set(y) {
                n.show_bv = y
            }
        }),
        d.noId)
            d.noRecommend = !0,
            d.hideDanmakuButton = !0;
        else if (!d.cid || !d.aid) {
            const {aid: y, bvid: ye, episodeId: ve, type: ie, p: ae} = d;
            d = Object.assign(d, yield Ko({
                episodeId: ve,
                aid: y,
                bvid: ye,
                type: ie,
                p: ae
            }))
        }
        return d
    })
}
qo();
class Ds {
    constructor(d) {
        let y;
        const ye = new Promise((ie,ae)=>{
            As(d).then(i=>{
                y = new fe(i),
                ie(null)
            }
            ).catch(i=>{
                ae(i)
            }
            )
        }
        )
          , ve = {
            play: function() {
                return y.play()
            },
            pause: function(ie=!1) {
                return y.pause(ie)
            },
            reload: function(ie) {
                return __async(this, null, function*() {
                    return y.reload(yield As(ie))
                })
            },
            seek: function(ie, ae) {
                return y.seek(ie, ae)
            },
            mode: function(ie) {
                return y.mode(ie)
            },
            setVolume: function(ie) {
                return y.setVolume(ie)
            },
            setSpeedRate: function(ie) {
                return y.setSpeedRate(ie)
            },
            destroy: function(ie) {
                return y.destroy()
            },
            getConfig: function() {
                return y.config
            },
            on: function(ie, ae) {
                return y.bind(ie, ae)
            },
            off: function(ie, ae) {
                return y.unbind(ie, ae)
            },
            getBufferRate: function() {
                return y.getBufferRate()
            },
            getDuration: function() {
                return y.duration()
            },
            isFullScreen: function() {
                return y.isFullScreen()
            },
            exitFullScreen: function() {
                return y.exitFullScreen()
            },
            getWidth: function() {
                return y.getWidth()
            },
            getHeight: function() {
                return y.getHeight()
            },
            isMute: function() {
                return y.isMute()
            },
            setMute: function(ie) {
                return y.setMute(ie)
            },
            setFocus: function() {
                return y.setFocus()
            },
            getCurrentTime: function() {
                return y.currentTime()
            },
            getState: function() {
                return y.getState()
            },
            getVersion: function() {
                return y.getVersion()
            },
            sendDanmaku: function(ie) {
                return y.danmaku.sendDanmaku(ie)
            },
            setDanmakuVisible: function(ie) {
                return y.danmaku.setVisible(ie)
            },
            stop: function() {
                return y.stop()
            },
            getPlayurl: function() {
                return y.getPlayurl()
            },
            loadSubtitle: function(ie) {
                return y.loadSubtitle(ie)
            },
            switchSource: function(ie, ae, i) {
                return y.switchSource(ie, ae, i)
            },
            updateQuliatyList: function(ie, ae) {
                return y.updateQuliatyList(ie, ae)
            },
            getLog: function() {
                return y.getFormatedLog()
            },
            setSetting: function(ie, ae) {
                return y.setSetting(ie, ae)
            }
        };
        for (const ie in ve) {
            const ae = ve[ie];
            ie.startsWith("get") || (ve[ie] = (...i)=>ye.then(()=>ae(...i)).catch(O=>{
                console.log(O)
            }
            ))
        }
        Object.assign(this, ve)
    }
    static get metadata() {
        return bPlayer.metadata
    }
}
Ds.message = Me;
export {Fo as checkCodec, Ds as default, kr as setPlayerNavigationStart};
